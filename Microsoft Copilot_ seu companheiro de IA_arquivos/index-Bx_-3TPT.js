const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Index-91auRibr.js","assets/vendor-Dxn4QjbQ.js","assets/index-_DkoQ4Jo.js","assets/deferred-CgokE55e.js","assets/math.scalar.functions-C0i4R8fp.js","assets/animationGroup--evM_dtm.js","assets/skeleton-fII8aj4f.js","assets/rawTexture-yZDvJ4Mx.js","assets/easing-CC0yPMab.js","assets/weightedsound-7wwGM538.js","assets/audioEngine-RNh9wBJK.js","assets/babylonFileParser.function-CWsVgwsY.js","assets/assetContainer-CDnu9olW.js","assets/asyncLock-C1MD6ED4.js","assets/ray-NKF386RQ.js","assets/webgpuEngine-vrEOxGlA.js","assets/bakedVertexAnimation-D7kp21vR.js","assets/helperFunctions-CdeqL3xV.js","assets/fresnelFunction-CyUJfivg.js","assets/sceneUboDeclaration-DqeOhvz8.js","assets/decalFragment-Bg0h_T9S.js","assets/dataReader-TEMvT9Dk.js","assets/standardMaterial-Me3OV3gR.js","assets/shaderMaterial-qhK6cZNm.js","assets/bakedVertexAnimation-aHQpgqWS.js","assets/morphTargetsVertex-DTrUcLxV.js","assets/vertexColorMixing-B_29cEBX.js","assets/discBuilder-LZsU_9Ig.js","assets/abstractEngine.cubeTexture-B9BEwxDr.js","assets/engine.multiRender-DWms4swW.js","assets/environmentTextureTools-CnQHriaw.js","assets/dumpTools-CrHOUuZo.js","assets/engine.multiRender-CVZ1UUv3.js","assets/flowGraphParser-CQQVe0Zs.js","assets/flowGraphRichTypes-DIQTlxTO.js","assets/flowGraphJsonPointerParserBlock-Bj8jKFEc.js","assets/flowGraphCachedOperationBlock-D97_cah5.js","assets/flowGraphConsoleLogBlock-DB3HvpAb.js","assets/flowGraphBranchBlock-DASKQx_q.js","assets/flowGraphDoNBlock-CHpndHX1.js","assets/flowGraphForLoopBlock-CIAcJmHn.js","assets/flowGraphThrottleBlock-CNDELlpy.js","assets/flowGraphMultiGateBlock-CETRZSWs.js","assets/flowGraphSwitchBlock-ClSpIAOH.js","assets/flowGraphWaitAllBlock-BQJsH_eA.js","assets/flowGraphCounterBlock-BTlbDcOb.js","assets/flowGraphWhileLoopBlock-BUwpId6u.js","assets/flowGraphDebounceBlock-kFmVQ4J6.js","assets/flowGraphFlipFlopBlock-BYHwVeqF.js","assets/flowGraphSequenceBlock-76Qv-bM6.js","assets/flowGraphSetDelayBlock-2p4QNg85.js","assets/flowGraphCancelDelayBlock-BNwmS6jd.js","assets/flowGraphPlayAnimationBlock-DpT9ohx3.js","assets/flowGraphStopAnimationBlock-2RqU404P.js","assets/flowGraphPauseAnimationBlock-Yye2HqES.js","assets/flowGraphInterpolationBlock-Cara6cNc.js","assets/flowGraphEasingBlock-B9IjtfpH.js","assets/flowGraphBezierCurveEasingBlock-ZrKXUiDs.js","assets/flowGraphConditionalDataBlock-C3Zf1pyB.js","assets/flowGraphGetVariableBlock-DKGc0ZoF.js","assets/flowGraphSetVariableBlock-Cz9FIayx.js","assets/flowGraphTransformCoordinatesSystemBlock-BExJiqev.js","assets/flowGraphGetPropertyBlock-2_4fpK8A.js","assets/flowGraphSetPropertyBlock-Dw7GPxQr.js","assets/flowGraphConstantBlock-Br0Oq5pN.js","assets/flowGraphGetAssetBlock-DzPOnwJv.js","assets/flowGraphDataSwitchBlock-C-1FU01D.js","assets/flowGraphMathBlocks-COUA5IAK.js","assets/flowGraphBinaryOperationBlock-C2MeG_Jw.js","assets/flowGraphUnaryOperationBlock-8gWGBQte.js","assets/flowGraphTernaryOperationBlock-BdwahCM5.js","assets/flowGraphMathCombineExtractBlocks-CMwzpQLW.js","assets/flowGraphMatrixMathBlocks-xr4OOkqw.js","assets/flowGraphVectorMathBlocks-DqRhgICF.js","assets/flowGraphTypeToTypeBlocks-Btn7uNU0.js","assets/flowGraphContextBlock-Da3PchXZ.js","assets/flowGraphArrayIndexBlock-D95qp2da.js","assets/flowGraphCodeExecutionBlock-CpfGwoIP.js","assets/flowGraphIndexOfBlock-CxILgh_3.js","assets/flowGraphFunctionReferenceBlock-BnNoyCME.js","assets/flowGraphMeshPickEventBlock-LV-xI_Xh.js","assets/flowGraphSceneReadyEventBlock-Xx_1DDdW.js","assets/flowGraphReceiveCustomEventBlock-BH0_SYiy.js","assets/flowGraphSendCustomEventBlock-DfS_EV3q.js","assets/flowGraphSceneTickEventBlock-Cjr5wpoc.js","assets/flowGraphPointerOutEventBlock-9pI8PMPg.js","assets/flowGraphPointerOverEventBlock-u4j27eku.js","assets/shadowGeneratorSceneComponent-DtRwo6o_.js","assets/shadowGenerator-D_zTCsTz.js","assets/clipPlaneFragment-CREVy9pw.js","assets/clipPlaneVertex-Bo1SLJqx.js","assets/pointCloudVertex-Cb1jQvjs.js","assets/pointLight-CiaMezwt.js","assets/cubeTexture-CEYJLULk.js","assets/dds-BoFEgd9j.js","assets/ktxTextureLoader-DL9AvVJv.js","assets/workerPool-H9Ji3mCo.js","assets/iblCdfGenerator-CyZ80aoS.js","assets/helperFunctions-B63vlQ0Z.js","assets/fogFragment-DO7lcy-G.js","assets/logDepthVertex-CpWij_-t.js","assets/sceneVertexDeclaration-C_vUidgU.js","assets/sceneUboDeclaration-_6ENMszk.js","assets/meshUboDeclaration-BEBufrgB.js","assets/iesTextureLoader-jaYDMBUn.js","assets/hdrCubeTexture-D3HMUaAN.js","assets/hdr-BqKOZLig.js","assets/logDepthDeclaration-C2C-BMi4.js","assets/oitFragment-CHZyyv2u.js","assets/default.fragment-D2BLlYlG.js","assets/defaultUboDeclaration-DA35qnN6.js","assets/mainUVVaryingDeclaration-Cbl7HMu8.js","assets/logDepthVertex-CwVT6am0.js","assets/samplerVertexImplementation-B8BXXhYv.js","assets/logDepthDeclaration-BhD3kQdQ.js","assets/shadowsVertex-CamO0SQB.js","assets/oitFragment-_vJzc3lp.js","assets/lightUboDeclaration-hFVwKlEF.js","assets/lightsFragmentFunctions-BUjN4Pgr.js","assets/lightFragment-DPM0KMML.js","assets/fogFragmentDeclaration-XpyApQhY.js","assets/pbr.vertex-CNqQXo_1.js","assets/harmonicsFunctions-B5fsM-Lt.js","assets/pbr.fragment-yYvMmicy.js","assets/pbr.vertex-CsPUEsRC.js","assets/harmonicsFunctions-BjDmtWD-.js","assets/mainUVVaryingDeclaration-DUZwvuMb.js","assets/bumpVertex-e0Wi72W3.js","assets/pbr.fragment-XBzntWz-.js","assets/bumpFragment-BdtGo7Eq.js","assets/shaderLanguage-BjwqUAVi.js","assets/ddsTextureLoader-EOmtg0Au.js","assets/envTextureLoader-BiViS-yq.js","assets/tgaTextureLoader-BAPdbBL2.js","assets/hdrTextureLoader-CkTiQtYt.js","assets/basisTextureLoader-f0PHAFDJ.js","assets/exrTextureLoader-CfjYXXX9.js","assets/iblShadowsRenderPipeline-Dbcq3lug.js","assets/rawCubeTexture-CkkIJQ9J.js","assets/pointsCloudSystem-DJBBMZEd.js","assets/thinInstanceMesh-DNQdh8s9.js","assets/default.fragment-HCqrHME4.js","assets/defaultUboDeclaration-DI3Ov6PY.js","assets/default.vertex-BvYEqZhD.js","assets/default.vertex-CjgZNcIl.js","assets/dracoDecoder-oChKFfO0.js","assets/meshoptCompression-BPwK7YmB.js","assets/mesh.vertexData.functions-BXkNVxNr.js","assets/lodCube.fragment-E5WbjDmf.js","assets/lod.fragment-C_NSHy4V.js","assets/lodCube.fragment-BAUaowbi.js","assets/lod.fragment-CSaG30JL.js","assets/rgbdDecode.fragment-BtRdbMi3.js","assets/rgbdEncode.fragment-H8dK2u2_.js","assets/rgbdDecode.fragment-C0cxVV-U.js","assets/rgbdEncode.fragment-CbBSVfpx.js","assets/postProcessRenderPipelineManagerSceneComponent-DCXsUjEs.js","assets/postprocess.vertex-BQxXvaFC.js","assets/pass.fragment-CrNPl0E8.js","assets/passCube.fragment-osP1e23G.js","assets/pass.fragment-CQw6fjga.js","assets/passCube.fragment-t7ESM2k4.js","assets/sceneFragmentDeclaration-BQKotT9q.js","assets/index-1H6fBlT3.js","assets/glTFLoader-TaBHmu2P.js","assets/glTFLoaderExtensionRegistry-CgH3IdFR.js","assets/objectModelMapping-CNx2X3lq.js","assets/KHR_animation_pointer-CqOoWKPu.js","assets/EXT_lights_image_based-DsEeBd_5.js","assets/EXT_mesh_gpu_instancing-C6RNXLK3.js","assets/EXT_meshopt_compression-BB99S7Al.js","assets/EXT_texture_webp-Di_pjMwF.js","assets/EXT_texture_avif-CuvvT0ez.js","assets/EXT_lights_ies-K3YN5VF2.js","assets/KHR_draco_mesh_compression-DOQ9Yull.js","assets/KHR_lights_punctual-CEeH1FCE.js","assets/KHR_materials_pbrSpecularGlossiness-BNxdpthT.js","assets/KHR_materials_unlit-DVD5lbvq.js","assets/KHR_materials_clearcoat-Dvovs4ng.js","assets/KHR_materials_iridescence-BahIKK7X.js","assets/KHR_materials_anisotropy-BlqKsCd3.js","assets/KHR_materials_emissive_strength-CHmHjQxe.js","assets/KHR_materials_sheen-B8Wev9t9.js","assets/KHR_materials_specular-Bvz4MpY6.js","assets/KHR_materials_ior-CM5wuR-G.js","assets/KHR_materials_variants-BR1bTT2N.js","assets/KHR_materials_transmission-DL2RUNyB.js","assets/KHR_materials_diffuse_transmission-BKJ5-eer.js","assets/KHR_materials_volume-JOLPnuNd.js","assets/KHR_materials_dispersion-B2LcKnEe.js","assets/EXT_materials_diffuse_roughness-BEXnxZoV.js","assets/KHR_mesh_quantization-CPci3e5a.js","assets/KHR_texture_basisu-CpCjU6kT.js","assets/KHR_texture_transform-3d2n9x6N.js","assets/KHR_xmp_json_ld-BArQjfiD.js","assets/MSFT_audio_emitter-BvMi6RyD.js","assets/MSFT_lod-D7cdytUm.js","assets/MSFT_minecraftMesh-DGg2gXtf.js","assets/MSFT_sRGBFactors-CmHQSHAs.js","assets/KHR_interactivity-CNzLw2Ax.js","assets/declarationMapper-CWseYYxi.js","assets/KHR_node_visibility-DyprpHXX.js","assets/KHR_node_selectability-B2e7rIcl.js","assets/KHR_node_hoverability-CLyjSh_c.js","assets/ExtrasAsMetadata-DfQx6yrs.js","assets/index-Ckd9NQMy.js","assets/stlFileLoader.metadata-D34mcJg2.js","assets/babylon.inspector.bundle.max-uvLxfp4f.js","assets/shadowOnlyMaterial-S-0Bu1H1.js","assets/shadowOnly.fragment-DYA47NuL.js","assets/shadowOnly.vertex-BucurGyL.js","assets/objFileLoader-CKvm83sm.js","assets/stlFileLoader-De0RPAC1.js","assets/splatFileLoader-G9hzQVxy.js","assets/sidebar-pages-D845wk78.js","assets/use-supports-hover-Ce3K_LDj.js","assets/conversations-BfM4M0-H.js","assets/delete-BhK2a-VM.js","assets/share-BbnYUsco.js","assets/dots-horizontal-7-NQqaFX.js","assets/use-share-message-DtsrrNqJ.js","assets/use-list-key-down-Bg4faWLd.js","assets/index.es-zjx8uILT.js","assets/core-B6ImGGe1.js","assets/code-gJ7Bitpl.js","assets/copy-hheY_Bk3.js","assets/index-B9eIBC9o.js","assets/index-Chjiymov.js","assets/sender-share-conversation-modal-Bgbkgc9J.js","assets/alert-Col8LFml.js","assets/error-CUVQWJVN.js","assets/sender-share-modal-copy-button-Bd2T_eVL.js","assets/character-BhmNa_iy.js","assets/use-set-up-babylon-CJ1IpODg.js","assets/product-purchase-ptxigdDr.js","assets/constants-Bft_ZRep.js","assets/utils-D2x-Pp2Z.js","assets/wallet-element-factory-BNV7bTMU.js","assets/upsell-block-BEGf7zpG.js","assets/cross-selling-strip-D9VM_2Pw.js","assets/price-tracking-block-COTwUzhB.js","assets/use-price-tracking-BgIm6MIt.js","assets/use-shopping-telemetry-B2E_GBEt.js","assets/shopping-telemetry-UcQwpZSl.js","assets/chevron-bolded-BKdW4jS-.js","assets/format-money-5coY0IJJ.js","assets/composer-auto-complete-It_Jx7rQ.js","assets/composer-actions-prompt-suggestions-CvO_VhiW.js","assets/booking-cSt6JSVA.js","assets/expedia-CIhQLHae.js","assets/flower-BeNsRr_T.js","assets/hotels-Bbont2Io.js","assets/kayak-Zbzoq8Gm.js","assets/open-table-kpM1SXCm.js","assets/priceline-BcYtBxdl.js","assets/sky-scanner-BMjBg9-L.js","assets/trip-advisor-BSFqVssr.js","assets/viator-DzKaTzqZ.js","assets/composer-system-alert-CNDO8QYr.js","assets/voice-options-3bfB0-KG.js","assets/think-deeper-pro-subscription-CnUOA-En.js","assets/over-task-quota-D8xpVtXv.js","assets/composer-action-4AF4kEUj.js","assets/computer-use-task-closed-OiekHEGs.js","assets/safety-risk-card-C--P6hu0.js","assets/use-send-action-command-BIcIa7TH.js","assets/add-to-page-BFx7llu6.js","assets/cross-selling-strip-consumer-DRgR3X2G.js","assets/composer-prompt-review-C9s_hRn2.js","assets/use-ocv-feedback-B2npcDkR.js","assets/biometric-consent-BxReyIZS.js","assets/daily-briefing-chat-pMwotFuc.js","assets/contract-down-left-BpZDpgfk.js","assets/dailly-briefing-composer-input-51ONy6Sb.js","assets/composer-sign-in-CeiOS55U.js","assets/merge-conversation-checkbox-DDUKCrR7.js","assets/daily-briefing-composer-player-DdcQU12b.js","assets/progress-bar-BveQd_R-.js","assets/next-A8E3FGG5.js","assets/pause-Dx7Ya1_x.js","assets/play-D-YOduPs.js","assets/video-player-RhaXtDFQ.js","assets/native-player-CM_AkZN9.js","assets/card-carousel-BfsnlrBF.js","assets/use-carousel-OGse-0vm.js","assets/utils-ifQmq0fb.js","assets/settings-C-clnSPp.js","assets/privacy-choices-DkVoxqFY.js","assets/qr-D-L0S3cE.js","assets/dev-mode-state-BuXbzPUw.js","assets/use-is-lab-enabled-BK-jGTkZ.js","assets/mask-wrapper-DEV0jSaI.js","assets/atoms-CmtbRX9y.js","assets/order-details-view-Bt9kppH_.js","assets/card-info-DnLm1vdA.js","assets/visa-DNBWtMre.js","assets/product-info-NbRUXr0u.js","assets/wallet-icon-button-BqcDwqKB.js","assets/minus-DibCA3Ou.js","assets/shipping-address-BQWVHbJ9.js","assets/download-d3LuPz2U.js","assets/faq-link-QYpDuK5L.js","assets/rewards-link-PXZYXkA1.js","assets/moon-b_7NOuGV.js","assets/sun-FQwiCv9S.js","assets/gift-DG3UsnRx.js","assets/link-CQ8sfX2a.js","assets/rewards-badge-background-dark-BF5sRWwq.js","assets/rewards-badge-background-Be2vlzxA.js","assets/rewards-badge-container-dark-BfnJTpX_.js","assets/rewards-badge-container-Cy3LxpCf.js","assets/rewards-badge-dark-Be9stsch.js","assets/rewards-badge-Db_-PNQr.js","assets/plus-DrubK732.js","assets/base-modal-9xFS8LDX.js","assets/picture-in-picture-DlIQK_DV.js","assets/composer-large-screen-BLe5T-DI.js","assets/types-S47nI6MK.js","assets/coachmark-CQ4RY6xt.js","assets/discover-KdrOa64Z.js","assets/use-discover-feed-5nSQbiLv.js","assets/podcast-schemas-De5Trc-F.js","assets/block-DGFymSKD.js","assets/podcast-BtzokbVP.js","assets/external-link-DyQIp2xK.js","assets/document-one-page-sparkle-CDvh5gfC.js","assets/food-apple-goQ7nHO-.js","assets/lightbulb-Dp0AEcpJ.js","assets/location-ripple-CRLjnwkk.js","assets/scales-BpkS7LxJ.js","assets/tag-D-eLx3bH.js","assets/play-outline-B1KMQlx6.js","assets/weather-states-categories-CmeEET4X.js","assets/price-chart-with-filters-pv1TUS8N.js","assets/parseISO-Btfb82DF.js","assets/generateCategoricalChart-BvZu3_Qm.js","assets/index-CpmLCrQj.js","assets/headphones-DaYbr4ox.js","assets/use-podcasts-navigation-BfnOs5jC.js","assets/actions-chat-detail-DaznXumr.js","assets/expand-pane-nw39BvBV.js","assets/save-action-C8b2SeZb.js","assets/new-tab-w72ySYmi.js","assets/pause-outline-W7-Stv6K.js","assets/showroom-chat-detail-D5cUOiMp.js","assets/contextual-shopping-card-DH3EOPrt.js","assets/product-rating-CD_WwwQW.js","assets/use-shopping-visibility-telemetry-j-KymDDO.js","assets/buy-button-BxqbSOSY.js","assets/shopping-utils-C1PHaR4y.js","assets/citation-chips-row-BGxd6x8z.js","assets/bell-alert-Bv_N4irY.js","assets/bell-DETWv1Bt.js","assets/star-EMUFYYGP.js","assets/action-alert-BYwJ1hlV.js","assets/ai-message-DnP0RJqS.js","assets/vertical-divider-DIPUB-T4.js","assets/use-ads-card-operations-CNcDEA6D.js","assets/use-page-CadI2wsV.js","assets/info-CG5mSEMd.js","assets/topic-selection.lazy-79XNc4KB.js","assets/login.lazy-DZmctIKC.js","assets/gaming.lazy-CiDc8y1Y.js","assets/daily.lazy-_2pNznTQ.js","assets/daily-briefing-nOHLLoR2.js","assets/formatDistanceToNow-DBcyTUCn.js","assets/constructNow-DSLhu2jH.js","assets/use-is-portrait-BmggRhJ4.js","assets/wand-BH3P_wbr.js","assets/agents.lazy-C4ChN9ZV.js","assets/index.lazy-DrZnOUCg.js","assets/arrow-referral-BTu-wIVP.js","assets/copliot-referral-DWjRmcef.js","assets/four-leaf-clover-BeAkApux.js","assets/hexagon-C9v6R2Jf.js","assets/message-referral-BEnak_5I.js","assets/rewards-Diq4r8Sh.js","assets/index.lazy-BniScv6M.js","assets/index.lazy-DgPMUaw9.js","assets/labs-telemetry-1-YKL3O_.js","assets/index-DBPMCtUd.js","assets/labs-social-icon-discord-l_siq0I-.js","assets/labs-social-icon-instagram-6pmhcPCp.js","assets/labs-social-icon-x-BaeoidFz.js","assets/labs-social-icon-youtube-BmIgWeIe.js","assets/labs-logo-ByeAUODs.js","assets/subscription.start.lazy-DfbQZPCL.js","assets/subscription.manage.lazy-B6LPXvD5.js","assets/shares._conversationId.lazy-D1QTLZCW.js","assets/rules.lazy-CKpbDHNw.js","assets/link-multiple-DEqqhiRM.js","assets/pro.subscribe.lazy-CRHtj4M6.js","assets/payment-methods-management-C8e3JFvh.js","assets/v4-CtRu48qb.js","assets/checkout-wrapper-BSwnLm4o.js","assets/paywall-container-B76TgfIx.js","assets/add-address-CTv6NGwO.js","assets/address-D_VBG_Me.js","assets/pidl-element-factory-BF8wksvK.js","assets/workflow-pi-dropdown-disabler-ywnMSUvx.js","assets/react-number-format.es-Dx_P2WRU.js","assets/wallet-dropdown--SoGdiD-.js","assets/wallet-list-Ag3g_tVK.js","assets/current-DZzEOm_C.js","assets/pidl-element-factory-DikK38DI.css","assets/add-address-view-BLmOdpAD.js","assets/form-field-skeleton-DCRbSfzX.js","assets/add-payment-instrument-BQVkGyEm.js","assets/add-payment-instrument-view-D5LtwYGX.js","assets/add-ewallet-skeleton-ByXMNdcz.js","assets/select-payment-instrument-Bs-CEae7.js","assets/start-line-CfBCiUrE.js","assets/credit-card-DexYl1ZH.js","assets/pro.subscribe-DU9qjcuZ.css","assets/talk.lazy-DansrXhA.js","assets/pages._pageId.lazy-pnba8O46.js","assets/use-focus-restore-DWQ2-uSA.js","assets/text-bold-DrMsSJxa.js","assets/text-bullet-list-B7qllPtz.js","assets/text-code-CRX0YAMp.js","assets/text-italic-BwJjGd9J.js","assets/text-numbered-list-BLWsXGZK.js","assets/text-paragraph-CMErJ8b6.js","assets/pages-welcome-dark-r64A2mUI.js","assets/pages-welcome-light-DDUDcHxX.js","assets/arrow-enter-up-B3ts00mX.js","assets/use-focus-restore-BqYKJ4ZM.css","assets/copy-add-BANR5Edn.js","assets/memory.narrative.lazy-Cs3KGoO5.js","assets/campaigns._campaignId.lazy-BSDUTV3g.js","assets/shares.podcasts._shareId.lazy-DyglwGl9.js","assets/shares.pages._shareId.lazy-B6LWbkcv.js","assets/eye-BNDH-ehN.js","assets/pro.redeem._redeemCode.lazy-B7vTNdFT.js","assets/pro.ewallet.return.lazy-C3KowVKX.js","assets/podcasts._podcastType._podcastId.lazy-DeUM2oTq.js","assets/experiments._experimentAlias.lazy-BgPKTlJX.js","assets/chats_._conversationId.talk.lazy-CnsCs8__.js","assets/timer-BUrAqKEW.js","assets/voicemail-dark-BtARQIb1.js","assets/voicemail-light-DeMSWjpH.js","assets/my-creations.lazy-C8APDteg.js","assets/my-creations-DV8PrLMj.css","assets/shares._shareId.lazy-TpHHc7ZE.js"])))=>i.map(i=>d[i]);
var HF=Object.defineProperty;var pA=t=>{throw TypeError(t)};var VF=(t,e,n)=>e in t?HF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Z=(t,e,n)=>VF(t,typeof e!="symbol"?e+"":e,n),Yy=(t,e,n)=>e.has(t)||pA("Cannot "+n);var ue=(t,e,n)=>(Yy(t,e,"read from private field"),n?n.call(t):e.get(t)),tn=(t,e,n)=>e.has(t)?pA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ot=(t,e,n,r)=>(Yy(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Me=(t,e,n)=>(Yy(t,e,"access private method"),n);import{r as m,g as q0,a as G,b as F,B as ct,j as f,V as zF,R as Ic,u as Se,G as BO,I as tv,z as l,C as $F,t as et,Z as Tm,W as HO,v as Y0,A as wn,m as Ae,L as VO,d as nv,f as rv,X as zO,e as bh,i as $O,k as GO,l as KO,Y as GF,_ as KF,n as WO,F as Q0,$ as ov,o as _h,s as Ch,D as qO,J as YO,h as WF,P as QO,a0 as cu,a1 as qF,Q as df,a2 as YF,q as J0,a3 as QF,M as JO,a4 as JF,a5 as XO,a6 as XF,a7 as ZF,a8 as e8,a9 as t8,aa as n8,ab as r8,w as wt,ac as o8,ad as ZO,ae as eN,x as i8,af as a8,ag as s8,ah as c8}from"./vendor-Dxn4QjbQ.js";function l8(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(t,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const u8="modulepreload",d8=function(t){return"https://studiostaticassetsprod.azureedge.net/bundle-cmc/"+t},mA={},T=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let a=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));o=a(n.map(u=>{if(u=d8(u),u in mA)return;mA[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":u8,d||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),d)return new Promise((g,v)=>{p.addEventListener("load",g),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return o.then(a=>{for(const s of a||[])s.status==="rejected"&&i(s.reason);return e().catch(i)})},tN=m.createContext(null),Qy={didCatch:!1,error:null};class nN extends m.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Qy}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var n,r,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:i,reason:"imperative-api"}),this.setState(Qy)}}componentDidCatch(e,n){var r,o;(r=(o=this.props).onError)===null||r===void 0||r.call(o,e,n)}componentDidUpdate(e,n){const{didCatch:r}=this.state,{resetKeys:o}=this.props;if(r&&n.error!==null&&f8(e.resetKeys,o)){var i,a;(i=(a=this.props).onReset)===null||i===void 0||i.call(a,{next:o,prev:e.resetKeys,reason:"keys"}),this.setState(Qy)}}render(){const{children:e,fallbackRender:n,FallbackComponent:r,fallback:o}=this.props,{didCatch:i,error:a}=this.state;let s=e;if(i){const c={error:a,resetErrorBoundary:this.resetErrorBoundary};if(typeof n=="function")s=n(c);else if(r)s=m.createElement(r,c);else if(o!==void 0)s=o;else throw a}return m.createElement(tN.Provider,{value:{didCatch:i,error:a,resetErrorBoundary:this.resetErrorBoundary}},s)}}function f8(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.length!==e.length||t.some((n,r)=>!Object.is(n,e[r]))}function h8(t){if(t==null||typeof t.didCatch!="boolean"||typeof t.resetErrorBoundary!="function")throw new Error("ErrorBoundaryContext not found")}function rN(){const t=m.useContext(tN);h8(t);const[e,n]=m.useState({error:null,hasError:!1}),r=m.useMemo(()=>({resetBoundary:()=>{t.resetErrorBoundary(),n({error:null,hasError:!1})},showBoundary:o=>n({error:o,hasError:!0})}),[t.resetErrorBoundary]);if(e.hasError)throw e.error;return r}var Jy,gA;function p8(){return gA||(gA=1,Jy={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Jy}var m8=p8();const g8=q0(m8);var v8=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function vA(t){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=t.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(e.name=n[1],(g8[n[1]]||t.charAt(t.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=t.indexOf("-->");return{type:"comment",comment:r!==-1?t.slice(4,r):""}}for(var o=new RegExp(v8),i=null;(i=o.exec(t))!==null;)if(i[0].trim())if(i[1]){var a=i[1].trim(),s=[a,""];a.indexOf("=")>-1&&(s=a.split("=")),e.attrs[s[0]]=s[1],o.lastIndex--}else i[2]&&(e.attrs[i[2]]=i[3].trim().substring(1,i[3].length-1));return e}var y8=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,b8=/^\s*$/,_8=Object.create(null);function oN(t,e){switch(e.type){case"text":return t+e.content;case"tag":return t+="<"+e.name+(e.attrs?function(n){var r=[];for(var o in n)r.push(o+'="'+n[o]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?t:t+e.children.reduce(oN,"")+"</"+e.name+">";case"comment":return t+"<!--"+e.comment+"-->"}}var C8={parse:function(t,e){e||(e={}),e.components||(e.components=_8);var n,r=[],o=[],i=-1,a=!1;if(t.indexOf("<")!==0){var s=t.indexOf("<");r.push({type:"text",content:s===-1?t:t.substring(0,s)})}return t.replace(y8,function(c,u){if(a){if(c!=="</"+n.name+">")return;a=!1}var d,h=c.charAt(1)!=="/",p=c.startsWith("<!--"),g=u+c.length,v=t.charAt(g);if(p){var y=vA(c);return i<0?(r.push(y),r):((d=o[i]).children.push(y),r)}if(h&&(i++,(n=vA(c)).type==="tag"&&e.components[n.name]&&(n.type="component",a=!0),n.voidElement||a||!v||v==="<"||n.children.push({type:"text",content:t.slice(g,t.indexOf("<",g))}),i===0&&r.push(n),(d=o[i-1])&&d.children.push(n),o[i]=n),(!h||n.voidElement)&&(i>-1&&(n.voidElement||n.name===c.slice(2,-1))&&(i--,n=i===-1?r:o[i]),!a&&v!=="<"&&v)){d=i===-1?r:o[i].children;var _=t.indexOf("<",g),b=t.slice(g,_===-1?void 0:_);b8.test(b)&&(b=" "),(_>-1&&i+d.length>=0||b!==" ")&&d.push({type:"text",content:b})}}),r},stringify:function(t){return t.reduce(function(e,n){return e+oN("",n)},"")}};function em(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];go(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const yA={};function Im(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];go(e[0])&&yA[e[0]]||(go(e[0])&&(yA[e[0]]=new Date),em(...e))}const iN=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},bA=(t,e,n)=>{t.loadNamespaces(e,iN(t,n))},_A=(t,e,n,r)=>{go(n)&&(n=[n]),n.forEach(o=>{t.options.ns.indexOf(o)<0&&t.options.ns.push(o)}),t.loadLanguages(e,iN(t,r))},S8=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],o=e.options?e.options.fallbackLng:!1,i=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(s,c)=>{const u=e.services.backendConnector.state[`${s}|${c}`];return u===-1||u===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!a(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||a(r,t)&&(!o||a(i,t)))},w8=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(Im("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(o,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&o.services.backendConnector.backend&&o.isLanguageChangingTo&&!i(o.isLanguageChangingTo,t))return!1}}):S8(t,e,n)},go=t=>typeof t=="string",Il=t=>typeof t=="object"&&t!==null,E8=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,T8={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},I8=t=>T8[t],A8=t=>t.replace(E8,I8);let mC={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:A8};const k8=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};mC={...mC,...t}},aN=()=>mC;let sN;const x8=t=>{sN=t},X0=()=>sN,Xy=(t,e)=>{if(!t)return!1;const n=t.props?t.props.children:t.children;return e?n.length>0:!!n},Zy=t=>{if(!t)return[];const e=t.props?t.props.children:t.children;return t.props&&t.props.i18nIsDynamicList?Al(e):e},R8=t=>Array.isArray(t)&&t.every(m.isValidElement),Al=t=>Array.isArray(t)?t:[t],P8=(t,e)=>{const n={...e};return n.props=Object.assign(t.props,e.props),n},cN=(t,e)=>{if(!t)return"";let n="";const r=Al(t),o=e.transSupportBasicHtmlNodes&&e.transKeepBasicHtmlNodesFor?e.transKeepBasicHtmlNodesFor:[];return r.forEach((i,a)=>{if(go(i))n+=`${i}`;else if(m.isValidElement(i)){const{props:s,type:c}=i,u=Object.keys(s).length,d=o.indexOf(c)>-1,h=s.children;if(!h&&d&&!u)n+=`<${c}/>`;else if(!h&&(!d||u)||s.i18nIsDynamicList)n+=`<${a}></${a}>`;else if(d&&u===1&&go(h))n+=`<${c}>${h}</${c}>`;else{const p=cN(h,e);n+=`<${a}>${p}</${a}>`}}else if(i===null)em("Trans: the passed in value is invalid - seems you passed in a null child.");else if(Il(i)){const{format:s,...c}=i,u=Object.keys(c);if(u.length===1){const d=s?`${u[0]}, ${s}`:u[0];n+=`{{${d}}}`}else em("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",i)}else em("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",i)}),n},O8=(t,e,n,r,o,i)=>{if(e==="")return[];const a=r.transKeepBasicHtmlNodesFor||[],s=e&&new RegExp(a.map(_=>`<${_}`).join("|")).test(e);if(!t&&!s&&!i)return[e];const c={},u=_=>{Al(_).forEach(C=>{go(C)||(Xy(C)?u(Zy(C)):Il(C)&&!m.isValidElement(C)&&Object.assign(c,C))})};u(t);const d=C8.parse(`<0>${e}</0>`),h={...c,...o},p=(_,b,C)=>{const w=Zy(_),S=v(w,b.children,C);return R8(w)&&S.length===0||_.props&&_.props.i18nIsDynamicList?w:S},g=(_,b,C,w,S)=>{_.dummy?(_.children=b,C.push(m.cloneElement(_,{key:w},S?void 0:b))):C.push(...m.Children.map([_],E=>{const I={...E.props};return delete I.i18nIsDynamicList,m.createElement(E.type,{...I,key:w,ref:E.ref},S?null:b)}))},v=(_,b,C)=>{const w=Al(_);return Al(b).reduce((E,I,x)=>{const A=I.children&&I.children[0]&&I.children[0].content&&n.services.interpolator.interpolate(I.children[0].content,h,n.language);if(I.type==="tag"){let N=w[parseInt(I.name,10)];C.length===1&&!N&&(N=C[0][I.name]),N||(N={});const R=Object.keys(I.attrs).length!==0?P8({props:I.attrs},N):N,z=m.isValidElement(R),P=z&&Xy(I,!0)&&!I.voidElement,X=s&&Il(R)&&R.dummy&&!z,M=Il(t)&&Object.hasOwnProperty.call(t,I.name);if(go(R)){const k=n.services.interpolator.interpolate(R,h,n.language);E.push(k)}else if(Xy(R)||P){const k=p(R,I,C);g(R,k,E,x)}else if(X){const k=v(w,I.children,C);g(R,k,E,x)}else if(Number.isNaN(parseFloat(I.name)))if(M){const k=p(R,I,C);g(R,k,E,x,I.voidElement)}else if(r.transSupportBasicHtmlNodes&&a.indexOf(I.name)>-1)if(I.voidElement)E.push(m.createElement(I.name,{key:`${I.name}-${x}`}));else{const k=v(w,I.children,C);E.push(m.createElement(I.name,{key:`${I.name}-${x}`},k))}else if(I.voidElement)E.push(`<${I.name} />`);else{const k=v(w,I.children,C);E.push(`<${I.name}>${k}</${I.name}>`)}else if(Il(R)&&!z){const k=I.children[0]?A:null;k&&E.push(k)}else g(R,A,E,x,I.children.length!==1||!A)}else if(I.type==="text"){const N=r.transWrapTextNodes,R=i?r.unescape(n.services.interpolator.interpolate(I.content,h,n.language)):n.services.interpolator.interpolate(I.content,h,n.language);N?E.push(m.createElement(N,{key:`${I.name}-${x}`},R)):E.push(R)}return E},[])},y=v([{dummy:!0,children:t||[]}],d,Al(t||[]));return Zy(y[0])};function N8(t){let{children:e,count:n,parent:r,i18nKey:o,context:i,tOptions:a={},values:s,defaults:c,components:u,ns:d,i18n:h,t:p,shouldUnescape:g,...v}=t;const y=h||X0();if(!y)return Im("You will need to pass in an i18next instance by using i18nextReactModule"),e;const _=p||y.t.bind(y)||(P=>P),b={...aN(),...y.options&&y.options.react};let C=d||_.ns||y.options&&y.options.defaultNS;C=go(C)?[C]:C||["translation"];const w=cN(e,b),S=c||w||b.transEmptyNodeValue||o,{hashTransKey:E}=b,I=o||(E?E(w||S):w||S);y.options&&y.options.interpolation&&y.options.interpolation.defaultVariables&&(s=s&&Object.keys(s).length>0?{...s,...y.options.interpolation.defaultVariables}:{...y.options.interpolation.defaultVariables});const x=s||n!==void 0||!e?a.interpolation:{interpolation:{...a.interpolation,prefix:"#$?",suffix:"?$#"}},A={...a,context:i||a.context,count:n,...s,...x,defaultValue:S,ns:C},N=I?_(I,A):S;u&&Object.keys(u).forEach(P=>{const X=u[P];if(typeof X.type=="function"||!X.props||!X.props.children||N.indexOf(`${P}/>`)<0&&N.indexOf(`${P} />`)<0)return;function M(){return m.createElement(m.Fragment,null,X)}u[P]=m.createElement(M)});const R=O8(u||e,N,y,b,A,g),z=r!==void 0?r:b.defaultTransParent;return z?m.createElement(z,v,R):R}const CA={type:"3rdParty",init(t){k8(t.options.react),x8(t)}},lN=m.createContext();class M8{constructor(){Z(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}}function Mo(t){let{children:e,count:n,parent:r,i18nKey:o,context:i,tOptions:a={},values:s,defaults:c,components:u,ns:d,i18n:h,t:p,shouldUnescape:g,...v}=t;const{i18n:y,defaultNS:_}=m.useContext(lN)||{},b=h||y||X0(),C=p||b&&b.t.bind(b);return N8({children:e,count:n,parent:r,i18nKey:o,context:i,tOptions:a,values:s,defaults:c,components:u,ns:d||C&&C.ns||_||b&&b.options&&b.options.defaultNS,i18n:b,t:p,shouldUnescape:g,...v})}const L8=(t,e)=>{const n=m.useRef();return m.useEffect(()=>{n.current=t},[t,e]),n.current},uN=(t,e,n,r)=>t.getFixedT(e,n,r),D8=(t,e,n,r)=>m.useCallback(uN(t,e,n,r),[t,e,n,r]),Fe=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:o}=m.useContext(lN)||{},i=n||r||X0();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new M8),!i){Im("You will need to pass in an i18next instance by using initReactI18next");const S=(I,x)=>go(x)?x:Il(x)&&go(x.defaultValue)?x.defaultValue:Array.isArray(I)?I[I.length-1]:I,E=[S,{},!1];return E.t=S,E.i18n={},E.ready=!1,E}i.options.react&&i.options.react.wait!==void 0&&Im("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...aN(),...i.options.react,...e},{useSuspense:s,keyPrefix:c}=a;let u=t||o||i.options&&i.options.defaultNS;u=go(u)?[u]:u||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(u);const d=(i.isInitialized||i.initializedStoreOnce)&&u.every(S=>w8(S,i,a)),h=D8(i,e.lng||null,a.nsMode==="fallback"?u:u[0],c),p=()=>h,g=()=>uN(i,e.lng||null,a.nsMode==="fallback"?u:u[0],c),[v,y]=m.useState(p);let _=u.join();e.lng&&(_=`${e.lng}${_}`);const b=L8(_),C=m.useRef(!0);m.useEffect(()=>{const{bindI18n:S,bindI18nStore:E}=a;C.current=!0,!d&&!s&&(e.lng?_A(i,e.lng,u,()=>{C.current&&y(g)}):bA(i,u,()=>{C.current&&y(g)})),d&&b&&b!==_&&C.current&&y(g);const I=()=>{C.current&&y(g)};return S&&i&&i.on(S,I),E&&i&&i.store.on(E,I),()=>{C.current=!1,S&&i&&S.split(" ").forEach(x=>i.off(x,I)),E&&i&&E.split(" ").forEach(x=>i.store.off(x,I))}},[i,_]),m.useEffect(()=>{C.current&&d&&y(p)},[i,c,d]);const w=[v,i,d];if(w.t=v,w.i18n=i,w.ready=d,d||!d&&!s)return w;throw new Promise(S=>{e.lng?_A(i,e.lng,u,()=>S()):bA(i,u,()=>S())})},dN=G([]),SA=new Map,Du=t=>{let e=SA.get(t);return e||(e=G(n=>n(dN).includes(t)),SA.set(t,e),e)};function de(t){return F(Du(t))}function ot(t){return ct().get(Du(t))}function Vo(t){return F(Du(t))}function Da(t){return ct().get(Du(t))}function iv(t){const e=Vo("kill-domain-referrer");return t==="html"?e?"noopener noreferrer":"noopener":e?"noopener,noreferrer":"noopener"}function ja(t){const e=t.split("://");return e.length===1?`https://${t}`:e[0]==="http"?`https://${e[1]}`:t}function j8(t){return t==="."||t==="!"||t==="?"}function U8(t){return t===" "||t===`
`||t==="	"}function F8(t){let e=t.length-1;for(;e>=0&&U8(t[e]);)e-=1;return[t.slice(0,e+1),t.slice(e+1)]}function B8(t,e,n){return t.slice(0,n)+e+t.slice(n)}const H8="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-banner-Dtr5ysxQ.webp",V8="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-copied-popup-BRVm_KWU.webp",z8="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-engaging-popup-YSBImXns.webp",$8="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-secondday-popup--nxha975.webp",G8="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-setting-TTFEOcbN.webp",K8="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-think-deeper-popup-FHodYGgC.webp",W8="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-thumbsup-card-DH3zTT3T.webp",q8="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-thumbsup-popup-D7hBD_1Q.webp",Y8="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-desktop-discover-strip-DnlsnV3g.webp",Q8="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-desktop-setting-banner-CqsoJ8gk.webp",J8="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-desktop-setting-menu-item-C25mGU_p.webp",X8="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-banner-CKv2a8_f.webp",Z8="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-copied-popup-M4nhJM3H.webp",e9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-engaging-popup-B-vXLUhP.webp",t9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-secondday-popup-DBikSjcg.webp",n9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-setting-D2OBsvlS.webp",r9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-think-deeper-popup-D5tA7N2r.webp",o9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-thumbsup-card-CwLVOvcv.webp",i9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-thumbsup-popup-DM6aMFdv.webp",a9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-desktop-discover-strip-flsYDh7H.webp",s9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-desktop-setting-banner-C2lNCEe_.webp",c9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-desktop-setting-menu-item-BzBe-XWV.webp",wA="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-shopping-Dm2se5Rq.png",l9={surfaceQueryParam:null,showScrollbarOnHover:!1,dailyBriefingOcid:"cp_web_daily",persistThemeChoice:!0,entraRedirectModalBehaviour:"replace",redirectBackEnabled:!0,crossPromotion:{discoverStrip:{dark:Y8,light:a9,fontSize:"m"},settingMenuItem:{dark:J8,light:c9},settingBanner:{dark:Q8,light:s9},aggressive:{banner:{dark:H8,light:X8},setting:{dark:G8,light:n9},card:{thumbsUp:{dark:W8,light:o9}},popup:{secondDay:{dark:$8,light:t9},thumbsUp:{dark:q8,light:i9},copied:{dark:V8,light:Z8},engaging:{dark:z8,light:e9},thinkDeeper:{dark:K8,light:r9}}}},proSubscription:{enabled:!0,manageRefId:"cmc",urlParams:{client:"cmc",ocids:{ActionsLimit:{freeTrial:"cmmmcpyae96",buy:"cmm46gj0qnu"},VoiceLimit:{freeTrial:"cmm0ghcr8ka",buy:"cmmxki6wg02"},Settings:{freeTrial:"cmma4vbm2dq",buy:"cmmugsiwg58"},ChatReasoningLimit:{freeTrial:"cmmtjssvrv9",buy:"cmmzn5kdy9p"},MarketSelect:{freeTrial:"cmmxe0nad8b",buy:"cmmtbwi4652",market:"none"},RedirectFromAuth0Account:{freeTrial:"cmmxe0nad8b",buy:"cmmtbwi4652"}}},upsellFromAuth0:{navigateToProSubPageAfterLogin:!0}},referralEnabled:!0,adsEnabled:!0,adsShowroomEnabled:!0,thinkDeeperFreemiumEnabled:!0,monitorAccountChangesAcrossTabs:!0,shopping:{upsell:{banner:{light:wA,dark:wA}}},sidebarNavigation:!0,showChatDetail:!0,enableAuth0:!0,settingsOverrides:{shouldShowActivityHistory:!0,shouldShowMemoryDelete:!0},enableCustom1DS:!0,actions:{enableActions:()=>Promise.resolve(!0)},landingPage:{enableLandingRoute:!0,enableCentralComposer:!0,enableStarterPrompts:!0,enableAutoSuggest:!0,enableWidgets:!0,enablePromptedGreetings:!0,shouldFetchWidgetsData:!0,regexForAutoSuggest:/\S+\s+/},supportsYouTubeVideos:!0},Ps=class Ps{constructor(){Z(this,"cfg",l9)}static instance(){return Ps.singleton||(Ps.singleton=new Ps),Ps.singleton}config(){return this.cfg}setConfig(e){this.cfg=e}};Z(Ps,"singleton",null);let Ee=Ps;const u9=/^(?:(?:https?):\/\/)?(?:(?:[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?\.))+[a-z]{2,}(?:\/[\w.-]*)*\/?(?:\?[^\s#]*)?(?:#[^\s]*)?$/,d9=/\b((https?:\/\/|www\.)?([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,})([/?#][\w\-._~:/?#@!$&'()*+,;=%]*)?(?=[\s<>()"'.,!?)}\]“”‘’《》「」『』【】]|$)/gi;function f9(t){return u9.test(t)}function h9(t){const[e,n]=F8(t),r=j8(e[e.length-1]),o=r?e.slice(0,-1):e;if(f9(o)){const i=r?e[e.length-1]:"";return{url:ja(o),word:o,suffix:`${i}${n}`}}return{word:t}}function Am(t){let e="";try{e=new URL(t).hostname}catch{}return e}function p9(t,e,n){const{overwrite:r}=n??{};try{const o=new URL(t);for(const[i,a]of Object.entries(e))r&&o.searchParams.delete(i),o.searchParams.append(i,a);return o.toString()}catch{}return t}function Of(t){const{formCodeParamOnLinks:e}=Ee.instance().config();return e?p9(t,{form:e}):t}function m9(t){return t.replace(/[.,!?]+$/,"")}function g9(t,e){return!t||e<=0?!1:t[e-1]==="@"||/[\w.-]+@/.test(t.slice(Math.max(0,e-20),e+1))}function iEe(t){const e=[];if(!t)return e;for(const n of t.matchAll(d9)){const r=n[0],{index:o}=n;if(o<0||g9(t,o))continue;const i=m9(r),a=ja(i),s=o+i.length;e.push({url:a,from:o,to:s})}return e}const Ua=m.forwardRef((t,e)=>{const{children:n,href:r,className:o,title:i,"aria-controls":a,"aria-expanded":s,"aria-haspopup":c,"aria-label":u,id:d,target:h,onClick:p,onPointerDown:g,onFocus:v}=t,y=iv("html");return f.jsx("a",{id:d,ref:e,"aria-controls":a,"aria-expanded":s,"aria-haspopup":c,"aria-label":u,className:o,title:i,href:r&&Of(r),target:h??"_blank",rel:y,onClick:p,onPointerDown:g,onFocus:v,children:n})});Ua.displayName="Link";const v9="SN:ROOT",y9=m.createContext(null);function b9(){return m.useContext(y9)}const Z0=m.createContext(v9);Z0.displayName="FocusContext";function _9(){return m.useContext(Z0)}function Td(){}function C9({focusable:t=!0,saveLastFocusedChild:e=!0,trackChildren:n=!1,autoRestoreFocus:r=!0,forceFocus:o=!1,isFocusBoundary:i=!1,focusBoundaryDirections:a,focusKey:s,preferredChildFocusKey:c,onEnterPress:u=Td,onEnterRelease:d=Td,onArrowPress:h=()=>!0,onArrowRelease:p=Td,onFocus:g=Td,onBlur:v=Td}){const y=b9(),_=m.useCallback(M=>{M&&u(M)},[u]),b=m.useCallback(()=>{d()},[d]),C=m.useCallback((M,k)=>h(M,k),[h]),w=m.useCallback(M=>{p(M)},[p]),S=m.useCallback((M,k)=>{g(M,k)},[g]),E=m.useCallback((M,k)=>{v(M,k)},[v]),I=m.useRef(null),[x,A]=m.useState(!1),[N,R]=m.useState(!1),z=_9(),P=m.useMemo(()=>y?s??crypto.randomUUID():void 0,[s,y]),X=m.useCallback((M={})=>{P&&(y==null||y.setFocus(P,M))},[P,y]);return m.useEffect(()=>{const M=I.current;return M&&P&&(y==null||y.addFocusable({focusKey:P,node:M,parentFocusKey:z,preferredChildFocusKey:c,onEnterPress:_,onEnterRelease:b,onArrowPress:C,onArrowRelease:w,onFocus:S,onBlur:E,onUpdateFocus:(k=!1)=>A(k),onUpdateHasFocusedChild:(k=!1)=>R(k),saveLastFocusedChild:e,trackChildren:n,isFocusBoundary:i,focusBoundaryDirections:a,autoRestoreFocus:r,forceFocus:o,focusable:t})),()=>{P&&(y==null||y.removeFocusable({focusKey:P}))}},[]),m.useEffect(()=>{const M=I.current;M&&P&&(y==null||y.updateFocusable(P,{node:M,preferredChildFocusKey:c,focusable:t,isFocusBoundary:i,focusBoundaryDirections:a,onEnterPress:_,onEnterRelease:b,onArrowPress:C,onArrowRelease:w,onFocus:S,onBlur:E}))},[P,c,t,i,a,_,b,C,w,S,E,y]),{ref:I,focusSelf:X,focused:x,hasFocusedChild:N,focusKey:P}}function ju(t,...e){const n=C9({onEnterPress:()=>{var o;(o=n.ref.current)==null||o.click()},onFocus:()=>{var o,i;(o=n.ref.current)==null||o.focus(),t.scrollIntoViewOnFocus&&((i=n.ref.current)==null||i.scrollIntoView({block:"nearest"}))},onBlur:()=>{var o;(o=n.ref.current)==null||o.blur()},...t}),r=S9(...e,n.ref);return{focusable:n,refCallback:r}}function S9(...t){return e=>{for(const n of t)n&&(typeof n=="function"?n(e):n.current=e)}}function fN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=fN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function q(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=fN(t))&&(r&&(r+=" "),r+=e);return r}const ew="-",w9=t=>{const e=T9(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const s=a.split(ew);return s[0]===""&&s.length!==1&&s.shift(),hN(s,e)||E9(a)},getConflictingClassGroupIds:(a,s)=>{const c=n[a]||[];return s&&r[a]?[...c,...r[a]]:c}}},hN=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),o=r?hN(t.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const i=t.join(ew);return(a=e.validators.find(({validator:s})=>s(i)))==null?void 0:a.classGroupId},EA=/^\[(.+)\]$/,E9=t=>{if(EA.test(t)){const e=EA.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},T9=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return A9(Object.entries(t.classGroups),n).forEach(([i,a])=>{gC(a,r,i,e)}),r},gC=(t,e,n,r)=>{t.forEach(o=>{if(typeof o=="string"){const i=o===""?e:TA(e,o);i.classGroupId=n;return}if(typeof o=="function"){if(I9(o)){gC(o(r),e,n,r);return}e.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([i,a])=>{gC(a,TA(e,i),n,r)})})},TA=(t,e)=>{let n=t;return e.split(ew).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},I9=t=>t.isThemeGetter,A9=(t,e)=>e?t.map(([n,r])=>{const o=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,s])=>[e+a,s])):i);return[n,o]}):t,k9=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const o=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return o(i,a),a},set(i,a){n.has(i)?n.set(i,a):o(i,a)}}},pN="!",x9=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,o=e[0],i=e.length,a=s=>{const c=[];let u=0,d=0,h;for(let _=0;_<s.length;_++){let b=s[_];if(u===0){if(b===o&&(r||s.slice(_,_+i)===e)){c.push(s.slice(d,_)),d=_+i;continue}if(b==="/"){h=_;continue}}b==="["?u++:b==="]"&&u--}const p=c.length===0?s:s.substring(d),g=p.startsWith(pN),v=g?p.substring(1):p,y=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:y}};return n?s=>n({className:s,parseClassName:a}):a},R9=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},P9=t=>({cache:k9(t.cacheSize),parseClassName:x9(t),...w9(t)}),O9=/\s+/,N9=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=e,i=[],a=t.trim().split(O9);let s="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:d,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:g}=n(u);let v=!!g,y=r(v?p.substring(0,g):p);if(!y){if(!v){s=u+(s.length>0?" "+s:s);continue}if(y=r(p),!y){s=u+(s.length>0?" "+s:s);continue}v=!1}const _=R9(d).join(":"),b=h?_+pN:_,C=b+y;if(i.includes(C))continue;i.push(C);const w=o(y,v);for(let S=0;S<w.length;++S){const E=w[S];i.push(b+E)}s=u+(s.length>0?" "+s:s)}return s};function M9(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=mN(e))&&(r&&(r+=" "),r+=n);return r}const mN=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=mN(t[r]))&&(n&&(n+=" "),n+=e);return n};function L9(t,...e){let n,r,o,i=a;function a(c){const u=e.reduce((d,h)=>h(d),t());return n=P9(u),r=n.cache.get,o=n.cache.set,i=s,s(c)}function s(c){const u=r(c);if(u)return u;const d=N9(c,n);return o(c,d),d}return function(){return i(M9.apply(null,arguments))}}const nn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},gN=/^\[(?:([a-z-]+):)?(.+)\]$/i,D9=/^\d+\/\d+$/,j9=new Set(["px","full","screen"]),U9=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,F9=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,B9=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,H9=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,V9=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ri=t=>Vl(t)||j9.has(t)||D9.test(t),ha=t=>Uu(t,"length",Q9),Vl=t=>!!t&&!Number.isNaN(Number(t)),eb=t=>Uu(t,"number",Vl),Id=t=>!!t&&Number.isInteger(Number(t)),z9=t=>t.endsWith("%")&&Vl(t.slice(0,-1)),ft=t=>gN.test(t),pa=t=>U9.test(t),$9=new Set(["length","size","percentage"]),G9=t=>Uu(t,$9,vN),K9=t=>Uu(t,"position",vN),W9=new Set(["image","url"]),q9=t=>Uu(t,W9,X9),Y9=t=>Uu(t,"",J9),Ad=()=>!0,Uu=(t,e,n)=>{const r=gN.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Q9=t=>F9.test(t)&&!B9.test(t),vN=()=>!1,J9=t=>H9.test(t),X9=t=>V9.test(t),Z9=()=>{const t=nn("colors"),e=nn("spacing"),n=nn("blur"),r=nn("brightness"),o=nn("borderColor"),i=nn("borderRadius"),a=nn("borderSpacing"),s=nn("borderWidth"),c=nn("contrast"),u=nn("grayscale"),d=nn("hueRotate"),h=nn("invert"),p=nn("gap"),g=nn("gradientColorStops"),v=nn("gradientColorStopPositions"),y=nn("inset"),_=nn("margin"),b=nn("opacity"),C=nn("padding"),w=nn("saturate"),S=nn("scale"),E=nn("sepia"),I=nn("skew"),x=nn("space"),A=nn("translate"),N=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto",ft,e],P=()=>[ft,e],X=()=>["",Ri,ha],M=()=>["auto",Vl,ft],k=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],K=()=>["","0",ft],J=()=>["auto","avoid","all","avoid-page","page","left","right","column"],se=()=>[Vl,ft];return{cacheSize:500,separator:":",theme:{colors:[Ad],spacing:[Ri,ha],blur:["none","",pa,ft],brightness:se(),borderColor:[t],borderRadius:["none","","full",pa,ft],borderSpacing:P(),borderWidth:X(),contrast:se(),grayscale:K(),hueRotate:se(),invert:K(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[z9,ha],inset:z(),margin:z(),opacity:se(),padding:P(),saturate:se(),scale:se(),sepia:K(),skew:se(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",ft]}],container:["container"],columns:[{columns:[pa]}],"break-after":[{"break-after":J()}],"break-before":[{"break-before":J()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...k(),ft]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Id,ft]}],basis:[{basis:z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ft]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",Id,ft]}],"grid-cols":[{"grid-cols":[Ad]}],"col-start-end":[{col:["auto",{span:["full",Id,ft]},ft]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[Ad]}],"row-start-end":[{row:["auto",{span:[Id,ft]},ft]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ft]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ft]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[x]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[x]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ft,e]}],"min-w":[{"min-w":[ft,e,"min","max","fit"]}],"max-w":[{"max-w":[ft,e,"none","full","min","max","fit","prose",{screen:[pa]},pa]}],h:[{h:[ft,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ft,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ft,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ft,e,"auto","min","max","fit"]}],"font-size":[{text:["base",pa,ha]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",eb]}],"font-family":[{font:[Ad]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ft]}],"line-clamp":[{"line-clamp":["none",Vl,eb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ri,ft]}],"list-image":[{"list-image":["none",ft]}],"list-style-type":[{list:["none","disc","decimal",ft]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ri,ha]}],"underline-offset":[{"underline-offset":["auto",Ri,ft]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ft]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ft]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...k(),K9]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",G9]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},q9]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:U()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[Ri,ft]}],"outline-w":[{outline:[Ri,ha]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Ri,ha]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",pa,Y9]}],"shadow-color":[{shadow:[Ad]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...O(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",pa,ft]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ft]}],duration:[{duration:se()}],ease:[{ease:["linear","in","out","in-out",ft]}],delay:[{delay:se()}],animate:[{animate:["none","spin","ping","pulse","bounce",ft]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Id,ft]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[I]}],"skew-y":[{"skew-y":[I]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ft]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ft]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ft]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ri,ha,eb]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},e7=L9(Z9);function xt(...t){return e7(q(t))}const av="overflow-hidden",Xa="backdrop-blur-2xl backdrop-saturate-200",tw="bg-white/70  dark:bg-slate-800/70",wi=q(av,Xa,tw),t7=q(Xa,tw),n7="bg-acrylic-default-fallback-light/[98] dark:bg-acrylic-default-fallback-dark/[98]",r7="dark:bg-white/70  bg-slate-800/70",o7=q(av,Xa,r7);q(Xa,tw);const yN="bg-spot-peach-100/60 dark:bg-slate-800/50",i7=q(Xa,yN),Oa=q(av,Xa,yN),a7="bg-acrylic-thin-fallback-light/95 dark:bg-acrylic-thin-fallback-dark/[92]",bN="dark:bg-spot-peach-100/60 bg-slate-800/50";q(Xa,bN);const s7=q(av,Xa,bN),Nf="relative flex items-center",ao="text-foreground-800 fill-foreground-800 active:text-foreground-600 active:fill-foreground-600 dark:active:text-foreground-650 dark:active:fill-foreground-650",IA="text-saddle-200 fill-saddle-200 active:text-saddle-300 active:fill-saddle-300 dark:text-stone-800 dark:fill-stone-800 dark:active:text-stone-600 dark:active:fill-stone-600",c7="text-foreground-250 fill-foreground-250 active:text-foreground-350 active:fill-foreground-350 dark:text-foreground-750 dark:fill-foreground-750 dark:active:text-foreground-650 dark:active:fill-foreground-650",rp="shadow-button-light dark:shadow-button-dark",AA="dark:shadow-button-light shadow-button-dark",l7="shadow-button-strong-light dark:shadow-button-dark",u7="text-saddle-550 safe-hover:text-salmon-450 dark:text-slate-300 dark:active:text-slate-200",d7="bg-white/70 safe-hover:bg-salmon-200 active:bg-salmon-200/20 dark:bg-slate-450/30 dark:safe-hover:bg-midnight-800 dark:active:bg-midnight-800/20",f7="border-[0.5px] border-transparent safe-hover:border-salmon-400 dark:safe-hover:border-midnight-350",h7="text-salmon-600 fill-salmon-600 active:text-salmon-400 active:fill-salmon-400 dark:text-slate-200 dark:fill-text-slate-200 dark:active:text-slate-100 dark:active:fill-slate-100",p7="bg-salmon-200 safe-hover:bg-salmon-300 active:bg-salmon-300 dark:bg-slate-650 dark:safe-hover:bg-slate-400 dark:active:bg-slate-400",tb="bg-transparent safe-hover:bg-white/50 active:bg-white/35 dark:safe-hover:bg-black/30 dark:active:bg-black/20",nc={default:`${ao} ${rp} bg-white/70 safe-hover:bg-white active:bg-white/60 dark:bg-slate-450/30 dark:safe-hover:bg-slate-450/40 dark:active:bg-slate-450/20`,strong:`${c7} ${l7} bg-stone-800 safe-hover:bg-black active:bg-stone-750 dark:bg-slate-600 dark:safe-hover:bg-slate-550 dark:active:bg-slate-600/80`,accent:`${ao} bg-spot-peach-300 safe-hover:bg-spot-peach-350 active:bg-spot-peach-250 dark:bg-slate-600 dark:safe-hover:bg-slate-550 dark:active:bg-slate-600/80`,"overlay-bright":`${ao} bg-white/40 safe-hover:bg-white/70 active:bg-white/30 dark:bg-white/8 dark:safe-hover:bg-white/10 dark:active:bg-white/5`,"overlay-bright-inverted":`${ao} bg-white/40 safe-hover:bg-white/70 active:bg-white/30 dark:bg-black/35 dark:safe-hover:bg-black/60 dark:active:bg-black/25`,"overlay-dimmed":`${ao} bg-black/8 safe-hover:bg-black/10 active:bg-black/5 dark:bg-black/35 dark:safe-hover:bg-black/60 dark:active:bg-black/25`,"overlay-dimmed-inverted":`${ao} bg-black/8 safe-hover:bg-black/10 active:bg-black/5 dark:bg-white/8 dark:safe-hover:bg-white/10 dark:active:bg-white/5`,"subtle-bright":`${ao} bg-transparent safe-hover:bg-white/50 active:bg-white/35 dark:safe-hover:bg-white/8 dark:active:bg-white/5`,"subtle-bright-inverted":`${ao} ${tb}`,"subtle-dimmed":`${ao} bg-transparent safe-hover:bg-black/5 active:bg-black/3 dark:safe-hover:bg-black/30 dark:active:bg-black/20`,"subtle-dimmed-inverted":`${ao} bg-transparent safe-hover:bg-black/5 active:bg-black/3 dark:safe-hover:bg-white/8 dark:active:bg-white/5`,acrylic:`${ao} ${rp} ${tb}`,"acrylic-inverted":`${IA} ${AA} bg-transparent dark:safe-hover:bg-white/50 dark:active:bg-white/35 safe-hover:bg-black/30 active:bg-black/20`,"acrylic-thin":`${ao} ${rp} ${tb}`,"acrylic-thin-inverted":`${IA} ${AA} bg-transparent dark:safe-hover:bg-white/50 dark:active:bg-white/35 safe-hover:bg-black/30 active:bg-black/20`,chip:`${u7} ${d7} ${rp} ${f7}`,alert:"bg-system-red-600 safe-hover:bg-system-red-650 active:bg-system-red-550","composer-selected":`${h7} ${p7}`},_N={acrylic:`${wi}`,"acrylic-inverted":`${o7}`,"acrylic-thin":`${Oa}`,"acrylic-thin-inverted":`${s7}`};function m7(t){return t in _N}const g7={start:"justify-start",center:"justify-center",end:"justify-end"},nw={"28-xxs":"text-xs","32-xs":"text-xs","36-sm":"text-xs","40-base":"text-sm","48-lg":"text-base","56-xl":"text-base","64-xxl":"text-base"},wa={"28-xxs":"gap-x-1.5","32-xs":"gap-x-1.5","36-sm":"gap-x-1.5","40-base":"gap-x-2","48-lg":"gap-x-3","56-xl":"gap-x-3","64-xxl":"gap-x-3"},rw={"28-xxs":`min-h-7 min-w-8 px-3 py-1 ${wa["28-xxs"]}`,"32-xs":`min-h-8 min-w-8 px-2.5 py-1 ${wa["32-xs"]}`,"36-sm":`min-h-9 min-w-9 px-2.5 py-1 ${wa["36-sm"]}`,"40-base":`min-h-10 min-w-10 px-3 py-2 ${wa["40-base"]}`,"48-lg":`min-h-12 min-w-12 px-3 py-2.5 ${wa["48-lg"]}`,"56-xl":`min-h-14 min-w-14 px-4 py-3.5 ${wa["56-xl"]}`,"64-xxl":`min-h-16 min-w-16 p-4 ${wa["64-xxl"]}`},v7={"28-xxs":"size-7","32-xs":"size-8","36-sm":"size-9","40-base":"size-10","48-lg":"size-12","56-xl":"size-14","64-xxl":"size-16"},vC={"28-xxs":"rounded-lg before:rounded-lg","32-xs":"rounded-lg before:rounded-lg","36-sm":"rounded-xl before:rounded-xl","40-base":"rounded-xl before:rounded-xl","48-lg":"rounded-3xl before:rounded-3xl","56-xl":"rounded-4xl before:rounded-4xl","64-xxl":"rounded-4xl before:rounded-4xl"},y7={none:"",regular:"border border-solid border-stone-350 dark:border-slate-600",strong:"border border-solid border-2 border-stroke-750"},kA="rounded-full before:rounded-full",b7="opacity-40 pointer-events-none",sv="before:absolute before:inset-0 before:pointer-events-none before:border before:border-transparent before:contrast-more:border-2 outline-2 outline-offset-1 focus-visible:z-[1] focus-visible:outline focus-visible:outline-stroke-900",De=m.forwardRef((t,e)=>{const{children:n,onClick:r,onFocus:o,onBlur:i,onKeyDown:a,onKeyUp:s,href:c,className:u,title:d,variant:h="rect",alignment:p="center",color:g="default",outline:v="none",size:y="40-base",disabled:_,id:b,role:C,testId:w,spatialNavigationAutofocus:S=!1,"aria-controls":E,"aria-expanded":I,"aria-haspopup":x,"aria-pressed":A,"aria-label":N,"aria-selected":R,onPointerDown:z}=t,P=h==="circle"||h==="square",X=h==="circle"||h==="pill",M=xt(Nf,nc[g],nw[y],g7[p],P?v7[y]:rw[y],X?kA:vC[y],sv,_&&b7,y7[v],u);let k=n;if(m7(g)){const $=xt(_N[g],X?kA:vC[y]);k=f.jsxs(f.Fragment,{children:[f.jsx("div",{className:xt("absolute inset-0",$)}),f.jsx("div",{className:`relative ${Nf} ${wa[y]}`,children:n})]})}const{refCallback:U,focusable:O}=ju({autoRestoreFocus:!0,forceFocus:!0},e);return c!==void 0?f.jsx(Ua,{id:b,onPointerDown:z,"aria-controls":E,"aria-expanded":I,"aria-haspopup":x,href:c,ref:O.ref,onClick:r,title:d,className:M,"data-testid":w,"aria-label":N,"aria-selected":R,children:k}):f.jsx("button",{onPointerDown:z,ref:U,id:b,"aria-controls":E,"aria-expanded":I,"aria-haspopup":x,"aria-pressed":A,"aria-selected":R,type:"button",className:M,title:d,role:C,disabled:_,onClick:r,onFocus:o,onBlur:i,onKeyDown:a,onKeyUp:s,"data-testid":w,"data-spatial-navigation-autofocus":S,"aria-label":N,"data-spatial-focus-key":O.focusKey,children:k})});De.displayName="Button";function _7({reason:t,onReload:e}){const{t:n}=Fe();return f.jsxs(f.Fragment,{children:[f.jsx("h1",{className:"pb-3 text-lg",children:n("authentication.accountChanged")}),f.jsx("p",{className:"pb-7",children:n(t==="login"?"authentication.signedInOtherTab":"authentication.signedOutOtherTab")}),f.jsx(De,{onClick:e,title:n("authentication.reloadToContinue"),variant:"pill",size:"48-lg",className:"w-full",children:n("authentication.reloadToContinue")})]})}const ow=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t},m.createElement("path",{fill:"currentColor",d:"M15.144 5.885c.62-.777 1.042-1.82.931-2.885-.909.045-2.018.6-2.66 1.377-.576.665-1.087 1.752-.954 2.772 1.02.089 2.04-.51 2.683-1.264ZM16.064 7.349c-1.482-.089-2.742.84-3.45.84-.707 0-1.79-.796-2.963-.774-1.525.022-2.94.884-3.714 2.256-1.592 2.744-.42 6.814 1.128 9.049.752 1.105 1.658 2.323 2.852 2.279 1.128-.044 1.57-.73 2.94-.73 1.371 0 1.77.73 2.963.708 1.238-.022 2.013-1.106 2.764-2.213.863-1.26 1.216-2.477 1.238-2.544-.022-.022-2.388-.93-2.41-3.65-.022-2.28 1.858-3.363 1.946-3.43-1.061-1.57-2.72-1.747-3.294-1.791Z"})),aEe=Object.freeze(Object.defineProperty({__proto__:null,default:ow},Symbol.toStringTag,{value:"Module"})),iw=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 25 24",...t},m.createElement("g",{clipPath:"url(#a)"},m.createElement("path",{fill:"#4285F4",d:"M20.5 12.2a8 8 0 0 0-.2-1.8h-8.1v3.3H17c-.1.8-.7 2-1.8 3l2.5 2 .2.1a9 9 0 0 0 2.6-6.6Z"}),m.createElement("path",{fill:"#34A853",d:"M12.2 21c2.3 0 4.3-.8 5.7-2.2l-2.7-2.2a5.2 5.2 0 0 1-8-2.8l-2.7 2.1v.1c1.4 3 4.3 5 7.7 5Z"}),m.createElement("path",{fill:"#FBBC05",d:"M7.2 13.8a5.7 5.7 0 0 1 0-3.6L4.5 7.8a9.2 9.2 0 0 0 0 8.1l2.7-2.2Z"}),m.createElement("path",{fill:"#EB4335",d:"M12.2 6.5c1.6 0 2.7.7 3.3 1.3L18 5.4A8.2 8.2 0 0 0 12.2 3C8.8 3 5.9 5 4.4 8l2.8 2.2a5.3 5.3 0 0 1 5-3.7Z"})),m.createElement("defs",null,m.createElement("clipPath",{id:"a"},m.createElement("path",{fill:"#fff",d:"M3.5 3h17v18h-17z"})))),sEe=Object.freeze(Object.defineProperty({__proto__:null,default:iw},Symbol.toStringTag,{value:"Module"})),cv=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 25 24",...t},m.createElement("path",{fill:"#F25022",d:"M12.05 3H3.5v8.55h8.55V3Z"}),m.createElement("path",{fill:"#7FBA00",d:"M21.5 3h-8.55v8.55h8.55V3Z"}),m.createElement("path",{fill:"#00A4EF",d:"M12.05 12.45H3.5V21h8.55v-8.55Z"}),m.createElement("path",{fill:"#FFB900",d:"M21.5 12.45h-8.55V21h8.55v-8.55Z"})),cEe=Object.freeze(Object.defineProperty({__proto__:null,default:cv},Symbol.toStringTag,{value:"Module"})),CN="140e65af-45d1-4427-bf08-3e7295db6836/ChatAI.ReadWrite",C7={auth:{clientId:"14638111-3389-403d-b206-a6a71d9f8f16",authority:"https://login.microsoftonline.com/common",navigateToLoginRequestUrl:!1},system:{allowNativeBroker:!1},cache:{cacheLocation:"localStorage"}},aw={scopes:[CN],extraQueryParameters:{lw:"1",coa:"1",nopa:"2",fl:"easi2_nowld",cobrandid:"8c0b039e-5a73-4399-9b56-7e237be2cd06"},prompt:"select_account",redirectUri:typeof window<"u"?window.location.origin:void 0},xA={scopes:["User.Read"]},S7={scopes:["OneDrive.ReadWrite"],authority:"https://login.microsoftonline.com/consumers"},sw={graphMeApiSuffix:"/me",graphMeImageApiSuffix:"/me/photo/$value",graphMeLicenseDetails:"/me/licenseDetails"},w7={appName:"copilot_studio",enableMATS:!0,appVersion:"0.0.0"},E7="IalDS3vRtEI5X0zvsmGG7zJP9UrHTcei",T7="auth.copilot.microsoft.com",SN="https://copilot.microsoft.com",I7={clientId:E7,domain:T7,cacheLocation:"localstorage",useRefreshTokens:!0,useRefreshTokensFallback:!0},wN="openid profile email offline_access ChatAI.ReadWrite",EN=typeof window<"u"?window.location.origin:void 0,Mf={authorizationParams:{audience:SN,scope:wN,redirect_uri:EN}},A7={authorizationParams:{audience:SN,scope:wN,redirect_uri:EN,prompt:"select_account"}},yC="cp-pro";function k7(t){switch(t){case"login":return aw;case"graph":return xA;case"oneDrive":return S7;default:return xA}}function Ac(){return!!Ee.instance().config().enableAuth0}var lv=zF();const Na=()=>{},sn=Na(),nb=Object,Oe=t=>t===sn,pr=t=>typeof t=="function",Qr=(t,e)=>({...t,...e}),x7=t=>pr(t.then),op=new WeakMap;let R7=0;const Lf=t=>{const e=typeof t,n=t&&t.constructor,r=n==Date;let o,i;if(nb(t)===t&&!r&&n!=RegExp){if(o=op.get(t),o)return o;if(o=++R7+"~",op.set(t,o),n==Array){for(o="@",i=0;i<t.length;i++)o+=Lf(t[i])+",";op.set(t,o)}if(n==nb){o="#";const a=nb.keys(t).sort();for(;!Oe(i=a.pop());)Oe(t[i])||(o+=i+":"+Lf(t[i])+",");op.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},ho=new WeakMap,rb={},ip={},cw="undefined",uv=typeof window!=cw,bC=typeof document!=cw,P7=()=>uv&&typeof window.requestAnimationFrame!=cw,ei=(t,e)=>{const n=ho.get(t);return[()=>!Oe(e)&&t.get(e)||rb,r=>{if(!Oe(e)){const o=t.get(e);e in ip||(ip[e]=o),n[5](e,Qr(o,r),o||rb)}},n[6],()=>!Oe(e)&&e in ip?ip[e]:!Oe(e)&&t.get(e)||rb]};let _C=!0;const O7=()=>_C,[CC,SC]=uv&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Na,Na],N7=()=>{const t=bC&&document.visibilityState;return Oe(t)||t!=="hidden"},M7=t=>(bC&&document.addEventListener("visibilitychange",t),CC("focus",t),()=>{bC&&document.removeEventListener("visibilitychange",t),SC("focus",t)}),L7=t=>{const e=()=>{_C=!0,t()},n=()=>{_C=!1};return CC("online",e),CC("offline",n),()=>{SC("online",e),SC("offline",n)}},D7={isOnline:O7,isVisible:N7},j7={initFocus:M7,initReconnect:L7},rc=!Ic.useId,Qi=!uv||"Deno"in window,lw=t=>P7()?window.requestAnimationFrame(t):setTimeout(t,1),vo=Qi?m.useEffect:m.useLayoutEffect,ob=typeof navigator<"u"&&navigator.connection,RA=!Qi&&ob&&(["slow-2g","2g"].includes(ob.effectiveType)||ob.saveData),Ji=t=>{if(pr(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Lf(t):"",[t,e]};let U7=0;const oc=()=>++U7,TN=0,IN=1,AN=2,F7=3;var mr={__proto__:null,ERROR_REVALIDATE_EVENT:F7,FOCUS_EVENT:TN,MUTATE_EVENT:AN,RECONNECT_EVENT:IN};async function dv(...t){const[e,n,r,o]=t,i=Qr({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let a=i.populateCache;const s=i.rollbackOnError;let c=i.optimisticData;const u=p=>typeof s=="function"?s(p):s!==!1,d=i.throwOnError;if(pr(n)){const p=n,g=[],v=e.keys();for(const y of v)!/^\$(inf|sub)\$/.test(y)&&p(e.get(y)._k)&&g.push(y);return Promise.all(g.map(h))}return h(n);async function h(p){const[g]=Ji(p);if(!g)return;const[v,y]=ei(e,g),[_,b,C,w]=ho.get(e),S=()=>{const X=_[g];return(pr(i.revalidate)?i.revalidate(v().data,p):i.revalidate!==!1)&&(delete C[g],delete w[g],X&&X[0])?X[0](AN).then(()=>v().data):v().data};if(t.length<3)return S();let E=r,I;const x=oc();b[g]=[x,0];const A=!Oe(c),N=v(),R=N.data,z=N._c,P=Oe(z)?R:z;if(A&&(c=pr(c)?c(P,R):c,y({data:c,_c:P})),pr(E))try{E=E(P)}catch(X){I=X}if(E&&x7(E))if(E=await E.catch(X=>{I=X}),x!==b[g][0]){if(I)throw I;return E}else I&&A&&u(I)&&(a=!0,y({data:P,_c:sn}));if(a&&!I)if(pr(a)){const X=a(E,P);y({data:X,error:sn,_c:sn})}else y({data:E,error:sn,_c:sn});if(b[g][1]=oc(),Promise.resolve(S()).then(()=>{y({_c:sn})}),I){if(d)throw I;return}return E}}const PA=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},B7=(t,e)=>{if(!ho.has(t)){const n=Qr(j7,e),r={},o=dv.bind(sn,t);let i=Na;const a={},s=(d,h)=>{const p=a[d]||[];return a[d]=p,p.push(h),()=>p.splice(p.indexOf(h),1)},c=(d,h,p)=>{t.set(d,h);const g=a[d];if(g)for(const v of g)v(h,p)},u=()=>{if(!ho.has(t)&&(ho.set(t,[r,{},{},{},o,c,s]),!Qi)){const d=n.initFocus(setTimeout.bind(sn,PA.bind(sn,r,TN))),h=n.initReconnect(setTimeout.bind(sn,PA.bind(sn,r,IN)));i=()=>{d&&d(),h&&h(),ho.delete(t)}}};return u(),[t,o,u,i]}return[t,ho.get(t)[4]]},H7=(t,e,n,r,o)=>{const i=n.errorRetryCount,a=o.retryCount,s=~~((Math.random()+.5)*(1<<(a<8?a:8)))*n.errorRetryInterval;!Oe(i)&&a>i||setTimeout(r,s,o)},V7=(t,e)=>Lf(t)==Lf(e),[uw,z7]=B7(new Map),$7=Qr({onLoadingSlow:Na,onSuccess:Na,onError:Na,onErrorRetry:H7,onDiscarded:Na,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:RA?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:RA?5e3:3e3,compare:V7,isPaused:()=>!1,cache:uw,mutate:z7,fallback:{}},D7),G7=(t,e)=>{const n=Qr(t,e);if(e){const{use:r,fallback:o}=t,{use:i,fallback:a}=e;r&&i&&(n.use=r.concat(i)),o&&a&&(n.fallback=Qr(o,a))}return n},K7=m.createContext({}),kN="$inf$",xN=uv&&window.__SWR_DEVTOOLS_USE__,W7=xN?window.__SWR_DEVTOOLS_USE__:[],q7=()=>{xN&&(window.__SWR_DEVTOOLS_REACT__=Ic)},RN=t=>pr(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],dw=()=>Qr($7,m.useContext(K7)),Y7=t=>(e,n,r)=>t(e,n&&((...i)=>{const[a]=Ji(e),[,,,s]=ho.get(uw);if(a.startsWith(kN))return n(...i);const c=s[a];return Oe(c)?n(...i):(delete s[a],c)}),r),Q7=W7.concat(Y7),fw=t=>function(...n){const r=dw(),[o,i,a]=RN(n),s=G7(r,a);let c=t;const{use:u}=s,d=(u||[]).concat(Q7);for(let h=d.length;h--;)c=d[h](c);return c(o,i||s.fetcher||null,s)},hw=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o>=0&&(r[o]=r[r.length-1],r.pop())}},PN=(t,e)=>(...n)=>{const[r,o,i]=RN(n),a=(i.use||[]).concat(e);return t(r,o,{...i,use:a})};q7();const OA=Ic.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)}),ib={dedupe:!0},J7=(t,e,n)=>{const{cache:r,compare:o,suspense:i,fallbackData:a,revalidateOnMount:s,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:h,keepPreviousData:p}=n,[g,v,y,_]=ho.get(r),[b,C]=Ji(t),w=m.useRef(!1),S=m.useRef(!1),E=m.useRef(b),I=m.useRef(e),x=m.useRef(n),A=()=>x.current,N=()=>A().isVisible()&&A().isOnline(),[R,z,P,X]=ei(r,b),M=m.useRef({}).current,k=Oe(a)?n.fallback[b]:a,U=(W,re)=>{for(const be in M){const D=be;if(D==="data"){if(!o(W[D],re[D])&&(!Oe(W[D])||!o(Te,re[D])))return!1}else if(re[D]!==W[D])return!1}return!0},O=m.useMemo(()=>{const W=!b||!e?!1:Oe(s)?A().isPaused()||i?!1:Oe(c)?!0:c:s,re=fe=>{const je=Qr(fe);return delete je._k,W?{isValidating:!0,isLoading:!0,...je}:je},be=R(),D=X(),ce=re(be),ge=be===D?ce:re(D);let te=ce;return[()=>{const fe=re(R());return U(fe,te)?(te.data=fe.data,te.isLoading=fe.isLoading,te.isValidating=fe.isValidating,te.error=fe.error,te):(te=fe,fe)},()=>ge]},[r,b]),$=lv.useSyncExternalStore(m.useCallback(W=>P(b,(re,be)=>{U(be,re)||W()}),[r,b]),O[0],O[1]),K=!w.current,J=g[b]&&g[b].length>0,se=$.data,ne=Oe(se)?k:se,ve=$.error,Be=m.useRef(ne),Te=p?Oe(se)?Be.current:se:ne,Pe=J&&!Oe(ve)?!1:K&&!Oe(s)?s:A().isPaused()?!1:i?Oe(ne)?!1:c:Oe(ne)||c,He=!!(b&&e&&K&&Pe),Ze=Oe($.isValidating)?He:$.isValidating,he=Oe($.isLoading)?He:$.isLoading,j=m.useCallback(async W=>{const re=I.current;if(!b||!re||S.current||A().isPaused())return!1;let be,D,ce=!0;const ge=W||{},te=!y[b]||!ge.dedupe,fe=()=>rc?!S.current&&b===E.current&&w.current:b===E.current,je={isValidating:!1,isLoading:!1},Je=()=>{z(je)},at=()=>{const Ue=y[b];Ue&&Ue[1]===D&&delete y[b]},nt={isValidating:!0};Oe(R().data)&&(nt.isLoading=!0);try{if(te&&(z(nt),n.loadingTimeout&&Oe(R().data)&&setTimeout(()=>{ce&&fe()&&A().onLoadingSlow(b,n)},n.loadingTimeout),y[b]=[re(C),oc()]),[be,D]=y[b],be=await be,te&&setTimeout(at,n.dedupingInterval),!y[b]||y[b][1]!==D)return te&&fe()&&A().onDiscarded(b),!1;je.error=sn;const Ue=v[b];if(!Oe(Ue)&&(D<=Ue[0]||D<=Ue[1]||Ue[1]===0))return Je(),te&&fe()&&A().onDiscarded(b),!1;const Ve=R().data;je.data=o(Ve,be)?Ve:be,te&&fe()&&A().onSuccess(be,b,n)}catch(Ue){at();const Ve=A(),{shouldRetryOnError:bt}=Ve;Ve.isPaused()||(je.error=Ue,te&&fe()&&(Ve.onError(Ue,b,Ve),(bt===!0||pr(bt)&&bt(Ue))&&(!A().revalidateOnFocus||!A().revalidateOnReconnect||N())&&Ve.onErrorRetry(Ue,b,Ve,Lt=>{const Pt=g[b];Pt&&Pt[0]&&Pt[0](mr.ERROR_REVALIDATE_EVENT,Lt)},{retryCount:(ge.retryCount||0)+1,dedupe:!0})))}return ce=!1,Je(),!0},[b,r]),pe=m.useCallback((...W)=>dv(r,E.current,...W),[]);if(vo(()=>{I.current=e,x.current=n,Oe(se)||(Be.current=se)}),vo(()=>{if(!b)return;const W=j.bind(sn,ib);let re=0;const D=hw(b,g,(ce,ge={})=>{if(ce==mr.FOCUS_EVENT){const te=Date.now();A().revalidateOnFocus&&te>re&&N()&&(re=te+A().focusThrottleInterval,W())}else if(ce==mr.RECONNECT_EVENT)A().revalidateOnReconnect&&N()&&W();else{if(ce==mr.MUTATE_EVENT)return j();if(ce==mr.ERROR_REVALIDATE_EVENT)return j(ge)}});return S.current=!1,E.current=b,w.current=!0,z({_k:C}),Pe&&(Oe(ne)||Qi?W():lw(W)),()=>{S.current=!0,D()}},[b]),vo(()=>{let W;function re(){const D=pr(u)?u(R().data):u;D&&W!==-1&&(W=setTimeout(be,D))}function be(){!R().error&&(d||A().isVisible())&&(h||A().isOnline())?j(ib).then(re):re()}return re(),()=>{W&&(clearTimeout(W),W=-1)}},[u,d,h,b]),m.useDebugValue(Te),i&&Oe(ne)&&b){if(!rc&&Qi)throw new Error("Fallback data is required when using suspense in SSR.");I.current=e,x.current=n,S.current=!1;const W=_[b];if(!Oe(W)){const re=pe(W);OA(re)}if(Oe(ve)){const re=j(ib);Oe(Te)||(re.status="fulfilled",re.value=!0),OA(re)}else throw ve}return{mutate:pe,get data(){return M.data=!0,Te},get error(){return M.error=!0,ve},get isValidating(){return M.isValidating=!0,Ze},get isLoading(){return M.isLoading=!0,he}}},X7=fw(J7),NA=rc?t=>{t()}:Ic.startTransition,Z7=t=>{const[,e]=m.useState({}),n=m.useRef(!1),r=m.useRef(t),o=m.useRef({data:!1,error:!1,isValidating:!1}),i=m.useCallback(a=>{let s=!1;const c=r.current;for(const u in a){const d=u;c[d]!==a[d]&&(c[d]=a[d],o.current[d]&&(s=!0))}s&&!n.current&&e({})},[]);return vo(()=>(n.current=!1,()=>{n.current=!0})),[r,o.current,i]},eB=()=>(t,e,n={})=>{const{mutate:r}=dw(),o=m.useRef(t),i=m.useRef(e),a=m.useRef(n),s=m.useRef(0),[c,u,d]=Z7({data:sn,error:sn,isMutating:!1}),h=c.current,p=m.useCallback(async(v,y)=>{const[_,b]=Ji(o.current);if(!i.current)throw new Error("Can’t trigger the mutation: missing fetcher.");if(!_)throw new Error("Can’t trigger the mutation: missing key.");const C=Qr(Qr({populateCache:!1,throwOnError:!0},a.current),y),w=oc();s.current=w,d({isMutating:!0});try{const S=await r(_,i.current(b,{arg:v}),Qr(C,{throwOnError:!0}));return s.current<=w&&(NA(()=>d({data:S,isMutating:!1,error:void 0})),C.onSuccess==null||C.onSuccess.call(C,S,_,C)),S}catch(S){if(s.current<=w&&(NA(()=>d({error:S,isMutating:!1})),C.onError==null||C.onError.call(C,S,_,C),C.throwOnError))throw S}},[]),g=m.useCallback(()=>{s.current=oc(),d({data:sn,error:sn,isMutating:!1})},[]);return vo(()=>{o.current=t,i.current=e,a.current=n}),{trigger:p,reset:g,get data(){return u.data=!0,h.data},get error(){return u.error=!0,h.error},get isMutating(){return u.isMutating=!0,h.isMutating}}},pw=PN(X7,eB);var ON=Symbol.for("immer-nothing"),MA=Symbol.for("immer-draftable"),Nt=Symbol.for("immer-state");function po(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var lu=Object.getPrototypeOf;function uu(t){return!!t&&!!t[Nt]}function Xi(t){var e;return t?NN(t)||Array.isArray(t)||!!t[MA]||!!((e=t.constructor)!=null&&e[MA])||hv(t)||pv(t):!1}var tB=Object.prototype.constructor.toString();function NN(t){if(!t||typeof t!="object")return!1;const e=lu(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===tB}function Df(t,e){fv(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function fv(t){const e=t[Nt];return e?e.type_:Array.isArray(t)?1:hv(t)?2:pv(t)?3:0}function wC(t,e){return fv(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function MN(t,e,n){const r=fv(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function nB(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function hv(t){return t instanceof Map}function pv(t){return t instanceof Set}function zn(t){return t.copy_||t.base_}function EC(t,e){if(hv(t))return new Map(t);if(pv(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=NN(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Nt];let o=Reflect.ownKeys(r);for(let i=0;i<o.length;i++){const a=o[i],s=r[a];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[a]})}return Object.create(lu(t),r)}else{const r=lu(t);if(r!==null&&n)return{...t};const o=Object.create(r);return Object.assign(o,t)}}function mw(t,e=!1){return mv(t)||uu(t)||!Xi(t)||(fv(t)>1&&(t.set=t.add=t.clear=t.delete=rB),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>mw(r,!0))),t}function rB(){po(2)}function mv(t){return Object.isFrozen(t)}var TC={};function ic(t){const e=TC[t];return e||po(0,t),e}function oB(t,e){TC[t]||(TC[t]=e)}var jf;function km(){return jf}function iB(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function LA(t,e){e&&(ic("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function IC(t){AC(t),t.drafts_.forEach(aB),t.drafts_=null}function AC(t){t===jf&&(jf=t.parent_)}function DA(t){return jf=iB(jf,t)}function aB(t){const e=t[Nt];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function jA(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Nt].modified_&&(IC(e),po(4)),Xi(t)&&(t=xm(e,t),e.parent_||Rm(e,t)),e.patches_&&ic("Patches").generateReplacementPatches_(n[Nt].base_,t,e.patches_,e.inversePatches_)):t=xm(e,n,[]),IC(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==ON?t:void 0}function xm(t,e,n){if(mv(e))return e;const r=e[Nt];if(!r)return Df(e,(o,i)=>UA(t,r,e,o,i,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return Rm(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let i=o,a=!1;r.type_===3&&(i=new Set(o),o.clear(),a=!0),Df(i,(s,c)=>UA(t,r,o,s,c,n,a)),Rm(t,o,!1),n&&t.patches_&&ic("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function UA(t,e,n,r,o,i,a){if(uu(o)){const s=i&&e&&e.type_!==3&&!wC(e.assigned_,r)?i.concat(r):void 0,c=xm(t,o,s);if(MN(n,r,c),uu(c))t.canAutoFreeze_=!1;else return}else a&&n.add(o);if(Xi(o)&&!mv(o)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;xm(t,o),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Rm(t,o)}}function Rm(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&mw(e,n)}function sB(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:km(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,i=gw;n&&(o=[r],i=Uf);const{revoke:a,proxy:s}=Proxy.revocable(o,i);return r.draft_=s,r.revoke_=a,s}var gw={get(t,e){if(e===Nt)return t;const n=zn(t);if(!wC(n,e))return cB(t,n,e);const r=n[e];return t.finalized_||!Xi(r)?r:r===ab(t.base_,e)?(sb(t),t.copy_[e]=Ff(r,t)):r},has(t,e){return e in zn(t)},ownKeys(t){return Reflect.ownKeys(zn(t))},set(t,e,n){const r=LN(zn(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const o=ab(zn(t),e),i=o==null?void 0:o[Nt];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(nB(n,o)&&(n!==void 0||wC(t.base_,e)))return!0;sb(t),Li(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return ab(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,sb(t),Li(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=zn(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){po(11)},getPrototypeOf(t){return lu(t.base_)},setPrototypeOf(){po(12)}},Uf={};Df(gw,(t,e)=>{Uf[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Uf.deleteProperty=function(t,e){return Uf.set.call(this,t,e,void 0)};Uf.set=function(t,e,n){return gw.set.call(this,t[0],e,n,t[0])};function ab(t,e){const n=t[Nt];return(n?zn(n):t)[e]}function cB(t,e,n){var o;const r=LN(e,n);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(t.draft_):void 0}function LN(t,e){if(!(e in t))return;let n=lu(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=lu(n)}}function Li(t){t.modified_||(t.modified_=!0,t.parent_&&Li(t.parent_))}function sb(t){t.copy_||(t.copy_=EC(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var lB=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const i=n;n=e;const a=this;return function(c=i,...u){return a.produce(c,d=>n.call(this,d,...u))}}typeof n!="function"&&po(6),r!==void 0&&typeof r!="function"&&po(7);let o;if(Xi(e)){const i=DA(this),a=Ff(e,void 0);let s=!0;try{o=n(a),s=!1}finally{s?IC(i):AC(i)}return LA(i,r),jA(o,i)}else if(!e||typeof e!="object"){if(o=n(e),o===void 0&&(o=e),o===ON&&(o=void 0),this.autoFreeze_&&mw(o,!0),r){const i=[],a=[];ic("Patches").generateReplacementPatches_(e,o,i,a),r(i,a)}return o}else po(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...s)=>this.produceWithPatches(a,c=>e(c,...s));let r,o;return[this.produce(e,n,(a,s)=>{r=a,o=s}),r,o]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Xi(t)||po(8),uu(t)&&(t=uB(t));const e=DA(this),n=Ff(t,void 0);return n[Nt].isManual_=!0,AC(e),n}finishDraft(t,e){const n=t&&t[Nt];(!n||!n.isManual_)&&po(9);const{scope_:r}=n;return LA(r,e),jA(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const o=e[n];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}n>-1&&(e=e.slice(n+1));const r=ic("Patches").applyPatches_;return uu(t)?r(t,e):this.produce(t,o=>r(o,e))}};function Ff(t,e){const n=hv(t)?ic("MapSet").proxyMap_(t,e):pv(t)?ic("MapSet").proxySet_(t,e):sB(t,e);return(e?e.scope_:km()).drafts_.push(n),n}function uB(t){return uu(t)||po(10,t),DN(t)}function DN(t){if(!Xi(t)||mv(t))return t;const e=t[Nt];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=EC(t,e.scope_.immer_.useStrictShallowCopy_)}else n=EC(t,!0);return Df(n,(r,o)=>{MN(n,r,DN(o))}),e&&(e.finalized_=!1),n}function dB(){class t extends Map{constructor(c,u){super(),this[Nt]={type_:2,parent_:u,scope_:u?u.scope_:km(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:c,draft_:this,isManual_:!1,revoked_:!1}}get size(){return zn(this[Nt]).size}has(c){return zn(this[Nt]).has(c)}set(c,u){const d=this[Nt];return a(d),(!zn(d).has(c)||zn(d).get(c)!==u)&&(n(d),Li(d),d.assigned_.set(c,!0),d.copy_.set(c,u),d.assigned_.set(c,!0)),this}delete(c){if(!this.has(c))return!1;const u=this[Nt];return a(u),n(u),Li(u),u.base_.has(c)?u.assigned_.set(c,!1):u.assigned_.delete(c),u.copy_.delete(c),!0}clear(){const c=this[Nt];a(c),zn(c).size&&(n(c),Li(c),c.assigned_=new Map,Df(c.base_,u=>{c.assigned_.set(u,!1)}),c.copy_.clear())}forEach(c,u){const d=this[Nt];zn(d).forEach((h,p,g)=>{c.call(u,this.get(p),p,this)})}get(c){const u=this[Nt];a(u);const d=zn(u).get(c);if(u.finalized_||!Xi(d)||d!==u.base_.get(c))return d;const h=Ff(d,u);return n(u),u.copy_.set(c,h),h}keys(){return zn(this[Nt]).keys()}values(){const c=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const u=c.next();return u.done?u:{done:!1,value:this.get(u.value)}}}}entries(){const c=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const u=c.next();if(u.done)return u;const d=this.get(u.value);return{done:!1,value:[u.value,d]}}}}[Symbol.iterator](){return this.entries()}}function e(s,c){return new t(s,c)}function n(s){s.copy_||(s.assigned_=new Map,s.copy_=new Map(s.base_))}class r extends Set{constructor(c,u){super(),this[Nt]={type_:3,parent_:u,scope_:u?u.scope_:km(),modified_:!1,finalized_:!1,copy_:void 0,base_:c,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return zn(this[Nt]).size}has(c){const u=this[Nt];return a(u),u.copy_?!!(u.copy_.has(c)||u.drafts_.has(c)&&u.copy_.has(u.drafts_.get(c))):u.base_.has(c)}add(c){const u=this[Nt];return a(u),this.has(c)||(i(u),Li(u),u.copy_.add(c)),this}delete(c){if(!this.has(c))return!1;const u=this[Nt];return a(u),i(u),Li(u),u.copy_.delete(c)||(u.drafts_.has(c)?u.copy_.delete(u.drafts_.get(c)):!1)}clear(){const c=this[Nt];a(c),zn(c).size&&(i(c),Li(c),c.copy_.clear())}values(){const c=this[Nt];return a(c),i(c),c.copy_.values()}entries(){const c=this[Nt];return a(c),i(c),c.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(c,u){const d=this.values();let h=d.next();for(;!h.done;)c.call(u,h.value,h.value,this),h=d.next()}}function o(s,c){return new r(s,c)}function i(s){s.copy_||(s.copy_=new Set,s.base_.forEach(c=>{if(Xi(c)){const u=Ff(c,s);s.drafts_.set(c,u),s.copy_.add(u)}else s.copy_.add(c)}))}function a(s){s.revoked_&&po(3,JSON.stringify(zn(s)))}oB("MapSet",{proxyMap_:e,proxySet_:o})}var Jr=new lB,Za=Jr.produce;Jr.produceWithPatches.bind(Jr);Jr.setAutoFreeze.bind(Jr);Jr.setUseStrictShallowCopy.bind(Jr);Jr.applyPatches.bind(Jr);Jr.createDraft.bind(Jr);Jr.finishDraft.bind(Jr);function vw(t){const e=G(t,(n,r,o)=>r(e,Za(n(e),typeof o=="function"?o:()=>o)));return e}function es(t,e){const n=Se(t);return m.useCallback(r=>n(Za(r)),[n])}function fB(t,e){return[F(t),es(t)]}const Sh={Namibia:"NA","South Africa":"ZA",Cameroon:"CM",Japan:"JP",Ghana:"GH",Ethiopia:"ET","United States":"US","United Arab Emirates":"AE",Bahrain:"BH",Djibouti:"DJ",Algeria:"DZ",Egypt:"EG","Western Sahara":"EH",Eritrea:"ER",Israel:"IL",Iraq:"IQ",Jordan:"JO",Comoros:"KM",Kuwait:"KW",Lebanon:"LB",Libya:"LY",Morocco:"MA",Mauritania:"MR",Oman:"OM","Palestinian Territories":"PS",Qatar:"QA","Saudi Arabia":"SA",Sudan:"SD",Somalia:"SO","South Sudan":"SS",Syria:"SY",Chad:"TD",Tunisia:"TN",Yemen:"YE",Chile:"CL",India:"IN",Tanzania:"TZ",Spain:"ES",Azerbaijan:"AZ",Russia:"RU",Belarus:"BY",Zambia:"ZM",Bulgaria:"BG",Mali:"ML",Bangladesh:"BD","China mainland":"CN",France:"FR","Bosnia & Herzegovina":"BA",Andorra:"AD",Italy:"IT",Philippines:"PH",Uganda:"UG",Iran:"IR",Czechia:"CZ","United Kingdom":"GB",Denmark:"DK",Greenland:"GL",Kenya:"KE",Austria:"AT",Belgium:"BE",Switzerland:"CH",Germany:"DE",Liechtenstein:"LI",Luxembourg:"LU",Niger:"NE",Maldives:"MV",Senegal:"SN",Bhutan:"BT",Togo:"TG",Cyprus:"CY",Greece:"GR","Antigua & Barbuda":"AG",Anguilla:"AI",Albania:"AL",Argentina:"AR","American Samoa":"AS",Australia:"AU",Barbados:"BB",Burundi:"BI",Bermuda:"BM",Brunei:"BN",Brazil:"BR",Bahamas:"BS",Botswana:"BW",Belize:"BZ",Canada:"CA","Cocos (Keeling) Islands":"CC","Cook Islands":"CK",Colombia:"CO","Cape Verde":"CV","Christmas Island":"CX","Diego Garcia":"DG",Dominica:"DM",Estonia:"EE",Finland:"FI",Fiji:"FJ","Falkland Islands":"FK",Micronesia:"FM",Grenada:"GD",Guernsey:"GG",Gibraltar:"GI",Gambia:"GM",Guam:"GU",Guyana:"GY","Hong Kong":"HK",Hungary:"HU",Indonesia:"ID",Ireland:"IE","Isle of Man":"IM","Chagos Archipelago":"IO",Jersey:"JE",Jamaica:"JM",Kiribati:"KI","St. Kitts & Nevis":"KN","South Korea":"KR","Cayman Islands":"KY","St. Lucia":"LC",Liberia:"LR",Lesotho:"LS",Lithuania:"LT",Latvia:"LV",Madagascar:"MG","Marshall Islands":"MH","Myanmar (Burma)":"MM",Macao:"MO","Northern Mariana Islands":"MP",Montserrat:"MS",Malta:"MT",Mauritius:"MU",Malawi:"MW",Mexico:"MX",Malaysia:"MY","Norfolk Island":"NF",Nigeria:"NG",Netherlands:"NL",Norway:"NO",Nauru:"NR",Niue:"NU","New Zealand":"NZ","Papua New Guinea":"PG",Pakistan:"PK",Poland:"PL","Pitcairn Islands":"PN","Puerto Rico":"PR",Portugal:"PT",Palau:"PW",Rwanda:"RW","Solomon Islands":"SB",Seychelles:"SC",Sweden:"SE",Singapore:"SG","St. Helena":"SH",Slovenia:"SI",Slovakia:"SK","Sierra Leone":"SL","Sint Maarten":"SX",Eswatini:"SZ","Turks & Caicos Islands":"TC",Thailand:"TH",Tokelau:"TK",Tonga:"TO",Türkiye:"TR","Trinidad & Tobago":"TT",Tuvalu:"TV",Taiwan:"TW",Ukraine:"UA","U.S. Outlying Islands":"UM","St. Vincent & Grenadines":"VC","British Virgin Islands":"VG","U.S. Virgin Islands":"VI",Vanuatu:"VU",Samoa:"WS",Zimbabwe:"ZW",Bolivia:"BO","Caribbean Netherlands":"BQ","Costa Rica":"CR",Cuba:"CU",Curaçao:"CW","Dominican Republic":"DO","Ceuta & Melilla":"EA",Ecuador:"EC","Equatorial Guinea":"GQ",Guatemala:"GT",Honduras:"HN",Haiti:"HT","Canary Islands":"IC",Nicaragua:"NI",Panama:"PA",Peru:"PE",Paraguay:"PY","El Salvador":"SV",Uruguay:"UY",Venezuela:"VE",Afghanistan:"AF","Burkina Faso":"BF",Guinea:"GN","Guinea-Bissau":"GW","Faroe Islands":"FO",Benin:"BJ","St. Barthélemy":"BL","Congo - Kinshasa":"CD","Central African Republic":"CF","Congo - Brazzaville":"CG","Côte d'Ivoire":"CI",Gabon:"GA","French Guiana":"GF",Guadeloupe:"GP",Monaco:"MC","St. Martin":"MF",Martinique:"MQ","New Caledonia":"NC","French Polynesia":"PF","St. Pierre & Miquelon":"PM",Réunion:"RE","Wallis & Futuna":"WF",Mayotte:"YT",Croatia:"HR",Armenia:"AM",Iceland:"IS","San Marino":"SM","Vatican City":"VA",Georgia:"GE",Kazakhstan:"KZ",Cambodia:"KH","North Korea":"KP",Kyrgyzstan:"KG",Angola:"AO",Laos:"LA",Mozambique:"MZ","North Macedonia":"MK",Mongolia:"MN","Svalbard & Jan Mayen":"SJ",Nepal:"NP",Aruba:"AW",Suriname:"SR","São Tomé & Príncipe":"ST","Timor-Leste":"TL",Moldova:"MD",Romania:"RO","Sri Lanka":"LK",Kosovo:"XK",Montenegro:"ME",Serbia:"RS","Åland Islands":"AX",Tajikistan:"TJ",Turkmenistan:"TM",Uzbekistan:"UZ",Vietnam:"VN"},jN=["blowing-dust","blowing-sand","blowing-snow","clear","clear-occasional-rain-or-thunderstorms","clear-then-cloudy","clear-then-occasional-rain","clear-then-occasional-snow","clear-then-rain","clear-then-rain-or-snow","clear-then-rain-or-thunderstorms","clear-then-snow","clear-then-snow-or-rain","clear-then-thunderstorms","clear-with-isolated-snow","clear-with-isolated-thunderstorms","clear-with-occasional-clouds","clear-with-occasional-rain","clear-with-occasional-rain-or-snow","clear-with-occasional-snow","clear-with-occasional-snow-or-rain","cloudy","cloudy-and-occasionally-clear","cloudy-occasional-rain-or-thunderstorms","cloudy-then-clear","cloudy-then-occasional-rain","cloudy-then-occasional-snow","cloudy-then-occasionally-clear","cloudy-then-rain","cloudy-then-rain-or-snow","cloudy-then-rain-or-thunderstorms","cloudy-then-snow","cloudy-then-snow-or-rain","cloudy-with-isolated-rain","cloudy-with-occasional-rain","cloudy-with-occasional-rain-or-snow","cloudy-with-occasional-snow","cloudy-with-occasional-snow-or-rain","cloudy-with-thundersnow-at-times","drifting-sand","drifting-snow","drizzle","duststorm","fair","fog","freezing-drizzle","freezing-fog","freezing-rain","hail","haze","heavy-drizzle","heavy-rain","heavy-snow","heavy-thunderstorms","ice-pellets","light-drizzle","light-fog","light-freezing-drizzle","light-freezing-rain","light-hail","light-rain","light-rain-and-snow","light-rain-and-snow-shower","light-rain-shower","light-snow","light-snow-shower","mostly-clear","mostly-cloudy","mostly-sunny","partly-cloudy","partly-sunny","patchy-fog","rain","rain-and-occasionally-clear","rain-and-occasionally-cloudy","rain-and-snow","rain-and-snow-shower","rain-or-snow","rain-or-snow-then-clear","rain-or-snow-then-cloudy","rain-showers","rain-then-clear","rain-then-cloudy","rain-then-occasional-snow","rain-turning-to-snow","rain-with-occasional-snow","severe-duststorm","sleet","smoke","snow","snow-and-occasionally-clear","snow-and-occasionally-cloudy","snow-or-rain","snow-or-rain-then-clear","snow-or-rain-then-cloudy","snow-showers","snow-then-clear","snow-then-cloudy","snow-then-rain","squalls","sunny","thundersnow","thunderstorms","unknown","windy-rainstorm","windy-with-heavy-snow"],hB=["adult","teen"],pB=["twenty-four-hours","one-day","five-days","one-week","one-month","one-year","five-years","max"],mB=["pro","m365-basic","m365-personal-classic","m365-family-classic","m365-personal","m365-family-admin","m365-family-guest","m365-premium-admin","m365-premium-guest"],gB=["direct","apple","google","retail"],vB=["guest","free","m365-personal","pro","m365-premium"],yB=["python"],bB=5,_B=10240,lEe=100,CB=15e3,qo=8,qt={mediaViewer:"z-10",composer:"z-10",composerBottomSlot:"z-20",composerCoachmark:"z-30",chatScrollToBottomButton:"z-10",babylonCharacter:"z-10",citations:"z-20",settings:"z-30",modalBackground:"z-30",modal:"z-40",sidebar:"z-40",toastNotification:"z-50",dropdownMenuOverModal:"z-50",pages:{warning:"z-10",chat:"z-20"},shopping:{navigation:"z-10"},headerIcon:"z-30",default:"z-0"},bo={default:.15,slow:.5,composerButton:.2,settings:.1,audio:{available:.5,unavailable:2,deepLinkLanding:.5},suggestions:.2,dailyBriefing:{background:.5,sourcePopoverScale:.2,sourcePopoverOpacity:.15}},uEe=.25,dEe=2,fEe=0,SB=1.5,hEe=2e3,wB=.25,tt={opacity:0},Rt={opacity:1},EB=.2,TB=.025,pEe={initial:tt,animate:{...Rt,transition:{delayChildren:EB,staggerChildren:TB}}},mEe={initial:tt,animate:Rt},yw={willChange:"auto"},Pm="9188040d-6c67-4c5b-b112-36a304b66dad",cb="copilot.cloud.microsoft",gEe=q("mt-px text-end uppercase text-foreground-450 text-2xs dark:text-foreground-600"),vEe="flex items-center justify-between text-start",IB=["Austria","Belgium","Brazil","Bulgaria","Canada","Croatia","Cyprus","Czechia","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Iceland","Ireland","Italy","Latvia","Liechtenstein","Lithuania","Luxembourg","Malta","Netherlands","Norway","China mainland","Poland","Portugal","Romania","Slovakia","Slovenia","Spain","Sweden","Switzerland","Türkiye","United Kingdom"],gv=IB.map(t=>Sh[t]),AB=["Austria","Belgium","Bulgaria","Croatia","Cyprus","Czechia","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Ireland","Italy","Latvia","Lithuania","Luxembourg","Malta","Netherlands","Poland","Portugal","Romania","Slovakia","Slovenia","Spain","Sweden"],kB=AB.map(t=>Sh[t]),xB=["Belarus","China mainland","Lebanon","Macao","Russia","Venezuela","North Korea","Cuba","Syria","Iran"],RB=xB.map(t=>Sh[t]),PB="https://account.live.com/ep",OB="Think Deeper",yEe=1500,Om=24*60*60*1e3,NB=5,UN=451,MB="Not allowed child account",bw="LEGALLY_UNAVAILABLE_STATUS",kC=3,lb=[80,100,110,125,150],vv=100,LB=1e3,FN=!1,DB=!1;async function jB(t){return new Promise(e=>{let n=!1;t.catch(r=>{r instanceof Error?(n=!0,e(`Type: ${r.name}, Message: ${r.message}, Stack: ${r.stack}`)):(n=!0,e(`Type: ${typeof r}, Value: ${JSON.stringify(r)}`))}),setTimeout(()=>{n||e("Promise.catch wasn't called. The Promise is not rejected.")},1e3)})}class UB{constructor(){Z(this,"latestClientExperimentationAssignmentRequestId",null);Z(this,"latestApiExperimentationAssignmentRequestId",null)}getTraceIdAnalytics(){return{TraceId_LastClientAssignment:this.latestClientExperimentationAssignmentRequestId,TraceId_Latest:this.latestApiExperimentationAssignmentRequestId}}trackClientExperimentationAssignment(e){const n=this.getTraceIdFromResponseHeaders(e);n&&(this.latestClientExperimentationAssignmentRequestId=n)}trackLatestApiAssignment(e){const n=this.getTraceIdFromResponseHeaders(e.headers);n&&(this.latestApiExperimentationAssignmentRequestId=n)}trackLatestChatConnectedAssignment(e){const{requestId:n}=e;this.latestApiExperimentationAssignmentRequestId=n}getTraceIdFromResponseHeaders(e){return(e.get("x-ceto-ref")??"").split("|")[0]??null}}const yv=new UB;function _w(){return"b9a7e54"}function FB(){return`mscmc@${_w().substring(0,7)}`}function Yn(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function gi(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Cw(t,e){const n=Yn(t);return isNaN(e)?gi(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function BN(t,e){const n=Yn(t);if(isNaN(e))return gi(t,NaN);if(!e)return n;const r=n.getDate(),o=gi(t,n.getTime());o.setMonth(n.getMonth()+e+1,0);const i=o.getDate();return r>=i?o:(n.setFullYear(o.getFullYear(),o.getMonth(),r),n)}const HN=6048e5,BB=864e5,bEe=6e4,HB=36e5,_Ee=43200,CEe=1440,SEe=60;let VB={};function bv(){return VB}function du(t,e){var s,c,u,d;const n=bv(),r=(e==null?void 0:e.weekStartsOn)??((c=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,o=Yn(t),i=o.getDay(),a=(i<r?7:0)+i-r;return o.setDate(o.getDate()-a),o.setHours(0,0,0,0),o}function Nm(t){return du(t,{weekStartsOn:1})}function VN(t){const e=Yn(t),n=e.getFullYear(),r=gi(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const o=Nm(r),i=gi(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const a=Nm(i);return e.getTime()>=o.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function Mm(t){const e=Yn(t);return e.setHours(0,0,0,0),e}function FA(t){const e=Yn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function tm(t,e){const n=Mm(t),r=Mm(e),o=+n-FA(n),i=+r-FA(r);return Math.round((o-i)/BB)}function zB(t){const e=VN(t),n=gi(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Nm(n)}function $B(t,e){return BN(t,e*12)}function Sw(t,e){const n=Mm(t),r=Mm(e);return+n==+r}function GB(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function zN(t){if(!GB(t)&&typeof t!="number")return!1;const e=Yn(t);return!isNaN(Number(e))}function KB(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function WB(t,e){return+Yn(t)-+Yn(e)}function qB(t,e,n){const r=WB(t,e)/HB;return KB(n==null?void 0:n.roundingMethod)(r)}function YB(t){const e=Yn(t),n=gi(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const QB={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},JB=(t,e,n)=>{let r;const o=QB[t];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ub(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const XB={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ZB={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},eH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tH={date:ub({formats:XB,defaultWidth:"full"}),time:ub({formats:ZB,defaultWidth:"full"}),dateTime:ub({formats:eH,defaultWidth:"full"})},nH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},rH=(t,e,n,r)=>nH[t];function kd(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,s=n!=null&&n.width?String(n.width):a;o=t.formattingValues[s]||t.formattingValues[a]}else{const a=t.defaultWidth,s=n!=null&&n.width?String(n.width):t.defaultWidth;o=t.values[s]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return o[i]}}const oH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},iH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},aH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},sH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},cH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},lH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},uH=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},dH={ordinalNumber:uH,era:kd({values:oH,defaultWidth:"wide"}),quarter:kd({values:iH,defaultWidth:"wide",argumentCallback:t=>t-1}),month:kd({values:aH,defaultWidth:"wide"}),day:kd({values:sH,defaultWidth:"wide"}),dayPeriod:kd({values:cH,defaultWidth:"wide",formattingValues:lH,defaultFormattingWidth:"wide"})};function xd(t){return(e,n={})=>{const r=n.width,o=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(o);if(!i)return null;const a=i[0],s=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(s)?hH(s,h=>h.test(a)):fH(s,h=>h.test(a));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(a.length);return{value:u,rest:d}}}function fH(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function hH(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function pH(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const o=r[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const s=e.slice(o.length);return{value:a,rest:s}}}const mH=/^(\d+)(th|st|nd|rd)?/i,gH=/\d+/i,vH={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},yH={any:[/^b/i,/^(a|c)/i]},bH={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},_H={any:[/1/i,/2/i,/3/i,/4/i]},CH={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},SH={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},wH={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},EH={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},TH={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},IH={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},AH={ordinalNumber:pH({matchPattern:mH,parsePattern:gH,valueCallback:t=>parseInt(t,10)}),era:xd({matchPatterns:vH,defaultMatchWidth:"wide",parsePatterns:yH,defaultParseWidth:"any"}),quarter:xd({matchPatterns:bH,defaultMatchWidth:"wide",parsePatterns:_H,defaultParseWidth:"any",valueCallback:t=>t+1}),month:xd({matchPatterns:CH,defaultMatchWidth:"wide",parsePatterns:SH,defaultParseWidth:"any"}),day:xd({matchPatterns:wH,defaultMatchWidth:"wide",parsePatterns:EH,defaultParseWidth:"any"}),dayPeriod:xd({matchPatterns:TH,defaultMatchWidth:"any",parsePatterns:IH,defaultParseWidth:"any"})},kH={code:"en-US",formatDistance:JB,formatLong:tH,formatRelative:rH,localize:dH,match:AH,options:{weekStartsOn:0,firstWeekContainsDate:1}};function xH(t){const e=Yn(t);return tm(e,YB(e))+1}function RH(t){const e=Yn(t),n=+Nm(e)-+zB(e);return Math.round(n/HN)+1}function $N(t,e){var d,h,p,g;const n=Yn(t),r=n.getFullYear(),o=bv(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??o.firstWeekContainsDate??((g=(p=o.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,a=gi(t,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const s=du(a,e),c=gi(t,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=du(c,e);return n.getTime()>=s.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function PH(t,e){var s,c,u,d;const n=bv(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,o=$N(t,e),i=gi(t,0);return i.setFullYear(o,0,r),i.setHours(0,0,0,0),du(i,e)}function OH(t,e){const n=Yn(t),r=+du(n,e)-+PH(n,e);return Math.round(r/HN)+1}function jt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ma={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return jt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):jt(n+1,2)},d(t,e){return jt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return jt(t.getHours()%12||12,e.length)},H(t,e){return jt(t.getHours(),e.length)},m(t,e){return jt(t.getMinutes(),e.length)},s(t,e){return jt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return jt(o,e.length)}},Xc={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},BA={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return ma.y(t,e)},Y:function(t,e,n,r){const o=$N(t,r),i=o>0?o:1-o;if(e==="YY"){const a=i%100;return jt(a,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):jt(i,e.length)},R:function(t,e){const n=VN(t);return jt(n,e.length)},u:function(t,e){const n=t.getFullYear();return jt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return jt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return jt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ma.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return jt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const o=OH(t,r);return e==="wo"?n.ordinalNumber(o,{unit:"week"}):jt(o,e.length)},I:function(t,e,n){const r=RH(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):jt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ma.d(t,e)},D:function(t,e,n){const r=xH(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):jt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const o=t.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return jt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const o=t.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return jt(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),o=r===0?7:r;switch(e){case"i":return String(o);case"ii":return jt(o,e.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const o=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let o;switch(r===12?o=Xc.noon:r===0?o=Xc.midnight:o=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let o;switch(r>=17?o=Xc.evening:r>=12?o=Xc.afternoon:r>=4?o=Xc.morning:o=Xc.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ma.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ma.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):jt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):jt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ma.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ma.s(t,e)},S:function(t,e){return ma.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return VA(r);case"XXXX":case"XX":return _s(r);case"XXXXX":case"XXX":default:return _s(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return VA(r);case"xxxx":case"xx":return _s(r);case"xxxxx":case"xxx":default:return _s(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+HA(r,":");case"OOOO":default:return"GMT"+_s(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+HA(r,":");case"zzzz":default:return"GMT"+_s(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return jt(r,e.length)},T:function(t,e,n){const r=t.getTime();return jt(r,e.length)}};function HA(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=Math.trunc(r/60),i=r%60;return i===0?n+String(o):n+String(o)+e+jt(i,2)}function VA(t,e){return t%60===0?(t>0?"-":"+")+jt(Math.abs(t)/60,2):_s(t,e)}function _s(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=jt(Math.trunc(r/60),2),i=jt(r%60,2);return n+o+e+i}const zA=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},GN=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},NH=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return zA(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",zA(r,e)).replace("{{time}}",GN(o,e))},MH={p:GN,P:NH},LH=/^D+$/,DH=/^Y+$/,jH=["D","DD","YY","YYYY"];function UH(t){return LH.test(t)}function FH(t){return DH.test(t)}function BH(t,e,n){const r=HH(t,e,n);if(console.warn(r),jH.includes(t))throw new RangeError(r)}function HH(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const VH=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zH=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$H=/^'([^]*?)'?$/,GH=/''/g,KH=/[a-zA-Z]/;function zl(t,e,n){var d,h,p,g,v,y,_,b;const r=bv(),o=(n==null?void 0:n.locale)??r.locale??kH,i=(n==null?void 0:n.firstWeekContainsDate)??((h=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((y=(v=n==null?void 0:n.locale)==null?void 0:v.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((b=(_=r.locale)==null?void 0:_.options)==null?void 0:b.weekStartsOn)??0,s=Yn(t);if(!zN(s))throw new RangeError("Invalid time value");let c=e.match(zH).map(C=>{const w=C[0];if(w==="p"||w==="P"){const S=MH[w];return S(C,o.formatLong)}return C}).join("").match(VH).map(C=>{if(C==="''")return{isToken:!1,value:"'"};const w=C[0];if(w==="'")return{isToken:!1,value:WH(C)};if(BA[w])return{isToken:!0,value:C};if(w.match(KH))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:C}});o.localize.preprocessor&&(c=o.localize.preprocessor(s,c));const u={firstWeekContainsDate:i,weekStartsOn:a,locale:o};return c.map(C=>{if(!C.isToken)return C.value;const w=C.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&FH(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&UH(w))&&BH(w,e,String(t));const S=BA[w[0]];return S(s,w,o.localize,u)}).join("")}function WH(t){const e=t.match($H);return e?e[1].replace(GH,"'"):t}function xC(t,e){const n=Yn(t),r=Yn(e);return n.getTime()>r.getTime()}function Lm(t,e){return Cw(t,-e)}function qH(t,e){return $B(t,-13)}function YH(t){return document.cookie.split(";").find(e=>e.trim().startsWith(`${t}=`))}function Bf(t){const e=YH(t),n=e==null?void 0:e.split("=")[1];if(n)return decodeURIComponent(n)}function $A(t,e,n={}){const{expireDays:r,path:o="/",domain:i,secure:a=!0,host:s}=n;let c=t;a&&!i&&o==="/"&&s&&(c=`__Host-${t}`);let u=`${c}=${encodeURIComponent(e)}; path=${o}`;if(r){const d=Cw(new Date,r);u+=`; expires=${d.toUTCString()}`}i&&(u+=`; domain=${i}`),a&&(u+="; secure"),document.cookie=u}const pl={name:"CMCCP",expirationDays:365},_v={name:"BCP"},QH="3PAdsOptOut";function KN(){return Bf(pl.name)??Bf(_v.name)}function GA(t,e){const{analytics:n,advertising:r,socialMedia:o}=t,i=new URLSearchParams;i.set("AD",r?"1":"0"),i.set("AL",n?"1":"0"),i.set("SM",o?"1":"0");const a=Cw(new Date,e);return i.set("expires",a.getTime().toString()),i.toString()}function JH(t){$A(pl.name,GA(t,pl.expirationDays),{expireDays:pl.expirationDays}),$A(_v.name,GA(t,pl.expirationDays),{expireDays:pl.expirationDays})}function wh(){const t=Bf(_v.name);if(!t)return{advertising:!1,analytics:!1,socialMedia:!1};const e=new URLSearchParams(t),n=e.get("AD")==="1",r=e.get("AL")==="1",o=e.get("SM")==="1";return{advertising:n,analytics:r,socialMedia:o}}function WN(){const t=Bf(QH)!=="1";return navigator.globalPrivacyControl?!1:t}const Os=class Os{constructor(){Z(this,"listeners",new Map)}static getInstance(){return Os.instance||(Os.instance=new Os),Os.instance}on(e,n){var r;this.listeners.has(e)||this.listeners.set(e,[]),(r=this.listeners.get(e))==null||r.push(n)}emit(e,n){const r=this.listeners.get(e);if(r)for(const o of r)o(n)}off(e,n){const r=this.listeners.get(e);r&&this.listeners.set(e,r.filter(o=>o!==n))}};Z(Os,"instance",null);let RC=Os;const gn=RC.getInstance();function XH(t){let e="unknown";try{const n=/(?:CopilotNative|BingNative|MicrosoftLauncher)\/([0-9]+(?:\.[0-9]+)*(?:-[a-zA-Z0-9]+)?)/,r=t==null?void 0:t.match(n);if(r!=null&&r[1]){const[,o]=r;e=o}return e}catch{return e}}function $a(t,e){sessionStorage.setItem(t,e)}function vi(t){return sessionStorage.getItem(t)}function ZH(t){return vi(t)==="true"}function qN(t){sessionStorage.removeItem(t)}function vn(t){return new URLSearchParams(window.location.search).get(t)}function Wr(t){const e=new URL(window.location.href);e.searchParams.delete(t),window.history.replaceState(null,"",e)}function eV(){const t=vn("ocid")??vn("OCID"),e=vn("msclkid"),n=vn("gclid"),r={};return t&&(r.OCID=t),e&&(r.msclkid=e),n&&(r.gclid=n),r}function YN(){Wr("ocid"),Wr("OCID"),Wr("msclkid"),Wr("gclid")}function tV(){const t=vn("form");if(t)return Wr("form"),t;const e=vn("FORM");return e&&Wr("FORM"),e}function nV(){return vn("alias")}function rV(){const t=vn("chat-mode");return t&&Wr("chat-mode"),t}function oV(){const t=vn("q");return t&&Wr("q"),t}function iV(){const t=vn("prompt");return t&&Wr("prompt"),t}function aV(){const t=vn("sandbox");return t&&Wr("sandbox"),t==="1"}function sV(){if(typeof window>"u")return!1;const t=vn("disable-all-features");return t!==null&&t!=="0"&&t!=="false"}function wEe(){return vn("payflow-correlationId")}function cV(t){return t==="VoiceLimit"||t==="Settings"||t==="ChatReasoningLimit"}function EEe(){const t=vn("entry-point")??"";return cV(t)?t:"Unknown"}function TEe(){const t=vn("campaign");return t?($a("campaignId",t),t):null}function IEe(){const t=vn("referral-code");return t?($a("referralCode",t),t):null}function lV(){return vn("charid")}function AEe(){const t=vn("pff");return t&&Wr("pff"),t}function kEe(){const t=vn("pfah");return t&&Wr("pfah"),t}function xEe(){const t=vn("pfcid");return t&&Wr("pfcid"),t}function uV(){return vn("intent")}function Eh(t){const e=typeof navigator<"u"?navigator.userAgent:null;return e?t.test(e):!1}function QN(){return Eh(/BingSapphire/gi)}function dV(){return Eh(/NewsSapphire/gi)}function JN(){return!!(navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Macintosh/i.test(navigator.userAgent)&&"ontouchend"in document)}function XN(){return JN()||Eh(/iPad|iPhone|Android|iPod/gi)}function fV(){return Eh(/Android/gi)}function hV(){return JN()||Eh(/iPhone|iPad|iPod/gi)}const pV={"thumbs-up":"thumbsUp","thumbs-down":"thumbsDown",report:"reportMessage"},KA="homepage";class mV{constructor(e={}){Z(this,"analytics",null);Z(this,"features");Z(this,"picassoId",null);Z(this,"anid",null);Z(this,"formCode",null);Z(this,"landingPage",KA);Z(this,"trafficAlias",null);Z(this,"settings",null);Z(this,"isAADUser",null);Z(this,"isNewUser",null);Z(this,"accountType",null);Z(this,"referrer",null);Z(this,"deviceInfo",null);Z(this,"isInitializing",!1);Z(this,"pendingEvents",[]);Z(this,"initRetryCount",0);Z(this,"maxRetries");Z(this,"maxPendingEvents");Z(this,"delay");Z(this,"onInitializeError");this.maxRetries=e.maxRetries??3,this.maxPendingEvents=e.maxPendingEvents??1e3,this.delay=e.delay??0,this.onInitializeError=e.onInitializeError}ensureInitialized(){!this.isInitialized&&!this.isInitializing&&(this.isInitializing=!0,this.initialize())}get isInitialized(){return this.analytics!==null&&this.analytics.isInitialized()}get currentEnv(){return"prod"}get initializationFailed(){return this.initRetryCount>=this.maxRetries}setFeatures(e){this.features=e.join(",")}setAnid(e){this.anid=e}setIsNewUser(e){this.isNewUser===null&&(this.isNewUser=e)}setIsAad(e){this.isAADUser=e}setSettings(e){this.settings={...this.settings,...e}}setPicassoId(e){this.picassoId=e}setFormCode(e){this.formCode=e}getFormCode(){return this.formCode}setDeviceInfo(e){this.deviceInfo=e}setLandingPage(e){this.landingPage===KA&&(this.landingPage=e)}getLandingPage(){return this.landingPage}isValidLowercaseUserAccountType(e){return["msa","aad","apple","google"].includes(e)}setUserAccountType(e){if(!e){this.accountType=null;return}const n=e.toLowerCase();this.isValidLowercaseUserAccountType(n)?this.accountType=n:this.accountType=null}processFormCode(){const e=tV();this.formCode=e}processAlias(){const e=nV();e&&(this.trafficAlias=e)}processReferrer(){this.referrer===null&&typeof document<"u"&&(this.referrer=document.referrer)}initialize(){this.isInitialized||(this.processFormCode(),this.processAlias(),this.processReferrer(),this.dynamicInitialization().catch(()=>{}))}async dynamicInitialization(){var n,r;this.delay>0&&await new Promise(o=>{setTimeout(o,this.delay)});const e=await T(()=>import("./Index-91auRibr.js"),__vite__mapDeps([0,1])).catch(o=>o instanceof Error?o:new Error(`Failed to load @microsoft/1ds-analytics-js: ${o}`));if(e instanceof Error)(n=this.onInitializeError)==null||n.call(this,e),this.initRetryCount+=1,this.initRetryCount>=this.maxRetries&&((r=this.onInitializeError)==null||r.call(this,new Error("ApplicationInsights initialization: Max retries reached")),this.pendingEvents.length=0);else{const{ApplicationInsights:o}=e;this.analytics=new o;const i={instrumentationKey:"be6e4c19699f4fdf9f8c0ec9f9b398ef-25d58bb9-9926-4df7-8e36-bc7afb4b2c34-7563",channelConfiguration:{eventsLimitInMem:5e3},propertyConfiguration:{populateBrowserInfo:!0},disableCookiesUsage:!0};this.analytics.initialize(i,[]),this.flushPendingEvents()}this.isInitializing=!1}flushPendingEvents(){for(let e=0,n=this.pendingEvents.length;e<n;e+=1){const r=this.pendingEvents[e];r&&this.trackEventInternal(r)}this.pendingEvents.length=0}getPlatformSurface(e){if(e==="pageseditor"){if(fV())return"android";if(hV())return"ios"}return e}getFixEventProperties(){const e=this.getPlatformSurface("cmc");return{appName:`CopilotN-${this.currentEnv}-web-${e}`,appVersion:_w(),surface:e,surfaceVersion:XH(navigator.userAgent),accountType:this.accountType,userMuid:Bf("MUID"),userAnid:this.anid,userPicassoId:this.picassoId,userFlightIds:this.features,trafficAlias:this.trafficAlias,eventInfo_entryPoint:this.formCode,eventInfo_surfaceVisible:document.visibilityState==="visible",isAADUser:this.isAADUser,isNewUser:this.isNewUser,pathname:window.location.pathname,referrer:this.referrer,"UserInfo.Id":this.picassoId,...yv.getTraceIdAnalytics(),...this.settings,...this.deviceInfo}}trackEvent(e){if(!this.initializationFailed){if(this.pendingEvents.length>=this.maxPendingEvents){console.warn(`Analytics pending events queue is full (${this.maxPendingEvents}). Dropping event: ${JSON.stringify(e)}`);return}if(this.ensureInitialized(),this.isInitializing||!this.isInitialized){this.pendingEvents.push(e);return}this.trackEventInternal(e)}}trackEventInternal(e){const n=this.getFixEventProperties(),r=wh(),o=WN();if(!this.analytics){console.error("Failed to initialize AnalyticsService.");return}const i={name:e.name,data:{...n,...e.data},ext:{web:{consentDetails:JSON.stringify({Required:!0,Analytics:r.analytics,SocialMedia:r.socialMedia,Advertising:r.advertising,GPC_DataSharingOptIn:o})}}};(e.data.eventName==="copilotCompose"||e.data.eventName==="copilotAudioInput")&&gn.emit("composer:send-query",{isNewUser:this.isNewUser,event:e.data}),this.analytics.track(i)}}const Y=new mV({maxRetries:3,maxPendingEvents:1e3,delay:200,onInitializeError:t=>{console.error("AnalyticsService initialization error:",t)}});function ZN(t,e){Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ErrorBoundary",eventInfo_errorName:t.name,eventInfo_errorMessage:t.message,eventInfo_errorStack:t.stack??"",eventInfo_componentStack:e.componentStack??""}}),T(async()=>{const{captureReactException:n}=await import("./vendor-Dxn4QjbQ.js").then(r=>r.ai);return{captureReactException:n}},[]).then(({captureReactException:n})=>n(t,e))}function Hf(t,e,n=!1){Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"APIResponseParseError",eventInfo_apiUrl:e,eventInfo_errors:JSON.stringify(t.format()),eventInfo_safe:n}})}async function WA(t){const e=await jB(t.promise);Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"UnhandledRejection",eventInfo_reason:`${t.reason}`,eventInfo_customData:e}})}function gV(t,e,n){try{new URL(ja(t)).hostname}catch(r){Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"invalidCitationURL",eventInfo_url:t,eventInfo_errorMessage:r instanceof Error?r.message:"",eventInfo_conversationId:e,eventInfo_messageId:n}})}}function e2(t){Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"PlaybackApiError",eventInfo_errorMessage:t instanceof Error?t.message:"",eventInfo_details:"An error occurred during media playback tracking api call."}})}function vV(t,e,n=void 0){Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"InvalidJsonResponse",eventInfo_apiUrl:n,eventInfo_errorMessage:t.message,eventInfo_errorCode:e.statusText,eventInfo_details:JSON.stringify(Object.fromEntries(e.headers.entries()))}})}const t2=25,n2=25,yV=1e3,bV=6e3,_V=2500,CV=5,SV=250,wV=25,REe=3,EV=["mica","aqua","erin"];function r2(t){switch(t){case"mica":case"aqua":case"erin":return t;default:return null}}function TV(t,e){switch(t){case"mica":return e("characterAnimation.characterNameMica");case"aqua":return e("characterAnimation.characterNameAqua");case"erin":return e("characterAnimation.characterNameErin");default:return""}}function IV(t,e){return(n,r)=>{Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CharacterError",eventInfo_details:`animatingMessageId: ${t}, characterId: ${e}, name: ${n.name}, info: ${r.componentStack}`,eventInfo_errorMessage:n.message}}),ZN(n,r)}}dB();const Fu=G(!1),ww=G(void 0),ir=G("chat"),En=G(new Map),mt=G(void 0),Ew=G(null),o2=G(null),Eo=G(t=>{const e=t(mt);if(e)return t(En).get(e)}),AV=BO(Eo,t=>(t==null?void 0:t.streamingState)==="streaming",(t,e)=>t===e),PEe=t=>BO(En,e=>{var n;return((n=e.get(t))==null?void 0:n.streamingState)==="streaming"},(e,n)=>e===n),ff=G(!1),Bo=G(new Map),OEe=G([]);G([]);const NEe=t=>G(e=>e(Bo).get(t)),Ei=G(t=>{var e;return((e=t(Eo))==null?void 0:e.history)??[]}),Tw=G(t=>{const e=t(En);for(const n of e.values())if(!n.title&&!n.history.length&&n.isNew)return n.id}),Iw=G(new Map),Xd=G(void 0),Cv=G([]),i2=G(!1),Aw=G(t=>{var e;return r2((e=t(Eo))==null?void 0:e.characterId)}),Gs=G("idle"),a2=G(!1),ts=G(null),kV=G("idle"),hf=G("checking-availability"),xV=G(null),s2=G([]),ac=G(null),kw=G(null),xw=G([]),RV=G(t=>t(ac)===0),Rw=G(null),c2=G(null),PV=G(null),pf=G(!1),l2=G(!1),u2=G(_B),Vf=G(void 0),OV=G(!0),d2=G(null),NV=G(t=>!!t(d2));G(null);const Bu=G(!1);G(null);const Pw=G(void 0),MV=G(void 0),LV=G(t=>{const e=t(Eo);return e==null?void 0:e.suggestedFollowup}),MEe=G(void 0),f2=G(null),LEe=G(!1),DV=G(!1),Ow=G(void 0),DEe=G(!1),jEe=G(void 0),h2=G(null),Nw=G(!1),Hu=G(void 0),UEe=G(void 0),FEe=vw({}),Sv=G(void 0),BEe=vw(new Map),Xr=G("chat-only"),HEe=G(null),VEe=G(null),zEe=G(null),jV=G(null),p2=G({}),Mw=G(!1),m2=G(null),Fi=G(null),g2=G({data:void 0,isLoading:!1}),UV=G(t=>t(g2).data),FV=G(t=>t(g2).isLoading),nm=G(!1);async function BV({from:t,to:e,params:n,search:r,state:o}){var a;e.startsWith("/chats/")||ct().set(Ew,null);let i=e;e==="/"&&((a=Ee.instance().config().landingPage)!=null&&a.enableLandingRoute)&&(i="/discover"),await Wh.navigate({to:i,params:n,state:s=>({...s,from:t,...o}),search:r})}function to(){return BV}function gt(t){return ct().get(t)}function wv(){const t=to(),e=tv(),{location:n}=e.state;return m.useCallback(async({conversationId:r=gt(mt),talk:o=!1}={})=>{r&&await t({to:`/chats/$conversationId${o?"/talk":""}`,params:{conversationId:r},from:e.state.location.pathname,search:n.search?Object.fromEntries(new URLSearchParams(n.search)):{}})},[t,n.search,e.state.location.pathname])}const lt=t=>typeof t=="string",Rd=()=>{let t,e;const n=new Promise((r,o)=>{t=r,e=o});return n.resolve=t,n.reject=e,n},qA=t=>t==null?"":""+t,HV=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},VV=/###/g,YA=t=>t&&t.indexOf("###")>-1?t.replace(VV,"."):t,QA=t=>!t||lt(t),mf=(t,e,n)=>{const r=lt(e)?e.split("."):e;let o=0;for(;o<r.length-1;){if(QA(t))return{};const i=YA(r[o]);!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++o}return QA(t)?{}:{obj:t,k:YA(r[o])}},JA=(t,e,n)=>{const{obj:r,k:o}=mf(t,e,Object);if(r!==void 0||e.length===1){r[o]=n;return}let i=e[e.length-1],a=e.slice(0,e.length-1),s=mf(t,a,Object);for(;s.obj===void 0&&a.length;)i=`${a[a.length-1]}.${i}`,a=a.slice(0,a.length-1),s=mf(t,a,Object),s&&s.obj&&typeof s.obj[`${s.k}.${i}`]<"u"&&(s.obj=void 0);s.obj[`${s.k}.${i}`]=n},zV=(t,e,n,r)=>{const{obj:o,k:i}=mf(t,e,Object);o[i]=o[i]||[],o[i].push(n)},Dm=(t,e)=>{const{obj:n,k:r}=mf(t,e);if(n)return n[r]},$V=(t,e,n)=>{const r=Dm(t,n);return r!==void 0?r:Dm(e,n)},v2=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?lt(t[r])||t[r]instanceof String||lt(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):v2(t[r],e[r],n):t[r]=e[r]);return t},Zc=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var GV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const KV=t=>lt(t)?t.replace(/[&<>"'\/]/g,e=>GV[e]):t;class WV{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const qV=[" ",",","?","!",";"],YV=new WV(20),QV=(t,e,n)=>{e=e||"",n=n||"";const r=qV.filter(a=>e.indexOf(a)<0&&n.indexOf(a)<0);if(r.length===0)return!0;const o=YV.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let i=!o.test(t);if(!i){const a=t.indexOf(n);a>0&&!o.test(t.substring(0,a))&&(i=!0)}return i},PC=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let o=t;for(let i=0;i<r.length;){if(!o||typeof o!="object")return;let a,s="";for(let c=i;c<r.length;++c)if(c!==i&&(s+=n),s+=r[c],a=o[s],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&c<r.length-1)continue;i+=c-i+1;break}o=a}return o},jm=t=>t&&t.replace("_","-"),JV={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};let XV=class OC{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||JV,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,o){return o&&!this.debug?null:(lt(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new OC(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new OC(this.logger,e)}};var li=new XV;class Ev{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const o=this.observers[r].get(n)||0;this.observers[r].set(n,o+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[s,c]=a;for(let u=0;u<c;u++)s(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[s,c]=a;for(let u=0;u<c;u++)s.apply(s,[e,...r])})}}class XA extends Ev{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,a=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;e.indexOf(".")>-1?s=e.split("."):(s=[e,n],r&&(Array.isArray(r)?s.push(...r):lt(r)&&i?s.push(...r.split(i)):s.push(r)));const c=Dm(this.data,s);return!c&&!n&&!r&&e.indexOf(".")>-1&&(e=s[0],n=s[1],r=s.slice(2).join(".")),c||!a||!lt(r)?c:PC(this.data&&this.data[e]&&this.data[e][n],r,i)}addResource(e,n,r,o){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let s=[e,n];r&&(s=s.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(s=e.split("."),o=n,n=s[1]),this.addNamespaces(n),JA(this.data,s,o),i.silent||this.emit("added",e,n,r,o)}addResources(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(lt(r[i])||Array.isArray(r[i]))&&this.addResource(e,n,i,r[i],{silent:!0});o.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,o,i){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},s=[e,n];e.indexOf(".")>-1&&(s=e.split("."),o=r,r=n,n=s[1]),this.addNamespaces(n);let c=Dm(this.data,s)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),o?v2(c,r,i):c={...c,...r},JA(this.data,s,c),a.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(o=>n[o]&&Object.keys(n[o]).length>0)}toJSON(){return this.data}}var y2={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,o){return t.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,n,r,o))}),e}};const ZA={};class Um extends Ev{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),HV(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=li.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const a=r&&e.indexOf(r)>-1,s=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!QV(e,r,o);if(a&&!s){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:i};const u=e.split(r);(r!==o||r===o&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(o)}return lt(i)&&(i=[i]),{key:e,namespaces:i}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const o=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:a,namespaces:s}=this.extractFromKey(e[e.length-1],n),c=s[s.length-1],u=n.lng||this.language,d=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(d){const S=n.nsSeparator||this.options.nsSeparator;return o?{res:`${c}${S}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:`${c}${S}${a}`}return o?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:a}const h=this.resolve(e,n);let p=h&&h.res;const g=h&&h.usedKey||a,v=h&&h.exactUsedKey||a,y=Object.prototype.toString.apply(p),_=["[object Number]","[object Function]","[object RegExp]"],b=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,C=!this.i18nFormat||this.i18nFormat.handleAsObject,w=!lt(p)&&typeof p!="boolean"&&typeof p!="number";if(C&&p&&w&&_.indexOf(y)<0&&!(lt(b)&&Array.isArray(p))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const S=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,p,{...n,ns:s}):`key '${a} (${this.language})' returned an object instead of string.`;return o?(h.res=S,h.usedParams=this.getUsedParamsDetails(n),h):S}if(i){const S=Array.isArray(p),E=S?[]:{},I=S?v:g;for(const x in p)if(Object.prototype.hasOwnProperty.call(p,x)){const A=`${I}${i}${x}`;E[x]=this.translate(A,{...n,joinArrays:!1,ns:s}),E[x]===A&&(E[x]=p[x])}p=E}}else if(C&&lt(b)&&Array.isArray(p))p=p.join(b),p&&(p=this.extendTranslation(p,e,n,r));else{let S=!1,E=!1;const I=n.count!==void 0&&!lt(n.count),x=Um.hasDefaultValue(n),A=I?this.pluralResolver.getSuffix(u,n.count,n):"",N=n.ordinal&&I?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",R=I&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),z=R&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${A}`]||n[`defaultValue${N}`]||n.defaultValue;!this.isValidLookup(p)&&x&&(S=!0,p=z),this.isValidLookup(p)||(E=!0,p=a);const X=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&E?void 0:p,M=x&&z!==p&&this.options.updateMissing;if(E||S||M){if(this.logger.log(M?"updateKey":"missingKey",u,c,a,M?z:p),i){const $=this.resolve(a,{...n,keySeparator:!1});$&&$.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let k=[];const U=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&U&&U[0])for(let $=0;$<U.length;$++)k.push(U[$]);else this.options.saveMissingTo==="all"?k=this.languageUtils.toResolveHierarchy(n.lng||this.language):k.push(n.lng||this.language);const O=($,K,J)=>{const se=x&&J!==p?J:X;this.options.missingKeyHandler?this.options.missingKeyHandler($,c,K,se,M,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing($,c,K,se,M,n),this.emit("missingKey",$,c,K,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&I?k.forEach($=>{const K=this.pluralResolver.getSuffixes($,n);R&&n[`defaultValue${this.options.pluralSeparator}zero`]&&K.indexOf(`${this.options.pluralSeparator}zero`)<0&&K.push(`${this.options.pluralSeparator}zero`),K.forEach(J=>{O([$],a+J,n[`defaultValue${J}`]||z)})}):O(k,a,z))}p=this.extendTranslation(p,e,n,h,r),E&&p===a&&this.options.appendNamespaceToMissingKey&&(p=`${c}:${a}`),(E||S)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${a}`:a,S?p:void 0):p=this.options.parseMissingKeyHandler(p))}return o?(h.res=p,h.usedParams=this.getUsedParamsDetails(n),h):p}extendTranslation(e,n,r,o,i){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=lt(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(u){const p=e.match(this.interpolator.nestingRegexp);d=p&&p.length}let h=r.replace&&!lt(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),e=this.interpolator.interpolate(e,h,r.lng||this.language||o.usedLng,r),u){const p=e.match(this.interpolator.nestingRegexp),g=p&&p.length;d<g&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&o&&o.res&&(r.lng=this.language||o.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var p=arguments.length,g=new Array(p),v=0;v<p;v++)g[v]=arguments[v];return i&&i[0]===g[0]&&!r.context?(a.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${n[0]}`),null):a.translate(...g,n)},r)),r.interpolation&&this.interpolator.reset()}const s=r.postProcess||this.options.postProcess,c=lt(s)?[s]:s;return e!=null&&c&&c.length&&r.applyPostProcessor!==!1&&(e=y2.handle(c,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,o,i,a,s;return lt(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(c,n),d=u.key;o=d;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const p=n.count!==void 0&&!lt(n.count),g=p&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),v=n.context!==void 0&&(lt(n.context)||typeof n.context=="number")&&n.context!=="",y=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(_=>{this.isValidLookup(r)||(s=_,!ZA[`${y[0]}-${_}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(s)&&(ZA[`${y[0]}-${_}`]=!0,this.logger.warn(`key "${o}" for languages "${y.join(", ")}" won't get resolved as namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(b=>{if(this.isValidLookup(r))return;a=b;const C=[d];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(C,d,b,_,n);else{let S;p&&(S=this.pluralResolver.getSuffix(b,n.count,n));const E=`${this.options.pluralSeparator}zero`,I=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(C.push(d+S),n.ordinal&&S.indexOf(I)===0&&C.push(d+S.replace(I,this.options.pluralSeparator)),g&&C.push(d+E)),v){const x=`${d}${this.options.contextSeparator}${n.context}`;C.push(x),p&&(C.push(x+S),n.ordinal&&S.indexOf(I)===0&&C.push(x+S.replace(I,this.options.pluralSeparator)),g&&C.push(x+E))}}let w;for(;w=C.pop();)this.isValidLookup(r)||(i=w,r=this.getResource(b,_,w,n))}))})}),{res:r,usedKey:o,exactUsedKey:i,usedLng:a,usedNS:s}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,o):this.resourceStore.getResource(e,n,r,o)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!lt(e.replace);let o=r?e.replace:e;if(r&&typeof e.count<"u"&&(o.count=e.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!r){o={...o};for(const i of n)delete o[i]}return o}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}const db=t=>t.charAt(0).toUpperCase()+t.slice(1);class ek{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=li.create("languageUtils")}getScriptPartFromCode(e){if(e=jm(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=jm(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(lt(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let o=Intl.getCanonicalLocales(e)[0];if(o&&this.options.lowerCaseLng&&(o=o.toLowerCase()),o)return o}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(o=>o.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=db(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=db(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=db(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const o=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(o))&&(n=o)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(i=>{if(i===o)return i;if(!(i.indexOf("-")<0&&o.indexOf("-")<0)&&(i.indexOf("-")>0&&o.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===o||i.indexOf(o)===0&&o.length>1))return i})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),lt(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),o=[],i=a=>{a&&(this.isSupportedCode(a)?o.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return lt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):lt(e)&&i(this.formatLanguageCode(e)),r.forEach(a=>{o.indexOf(a)<0&&i(this.formatLanguageCode(a))}),o}}let ZV=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],ez={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const tz=["v1","v2","v3"],nz=["v4"],tk={zero:0,one:1,two:2,few:3,many:4,other:5},rz=()=>{const t={};return ZV.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:ez[e.fc]}})}),t};class oz{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=li.create("pluralResolver"),(!this.options.compatibilityJSON||nz.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=rz(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const r=jm(e==="dev"?"en":e),o=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:o});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];const a=new Intl.PluralRules(r,{type:o});return this.pluralRulesCache[i]=a,a}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(o=>`${n}${o}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((o,i)=>tk[o]-tk[i]).map(o=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o}`):r.numbers.map(o=>this.getSuffix(e,o,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=this.getRule(e,r);return o?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o.select(n)}`:this.getSuffixRetroCompatible(o,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let o=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));const i=()=>this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString();return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?`_plural_${o.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!tz.includes(this.options.compatibilityJSON)}}const nk=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=$V(t,e,n);return!i&&o&&lt(n)&&(i=PC(t,n,r),i===void 0&&(i=PC(e,n,r))),i},fb=t=>t.replace(/\$/g,"$$$$");class iz{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=li.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:o,prefix:i,prefixEscaped:a,suffix:s,suffixEscaped:c,formatSeparator:u,unescapeSuffix:d,unescapePrefix:h,nestingPrefix:p,nestingPrefixEscaped:g,nestingSuffix:v,nestingSuffixEscaped:y,nestingOptionsSeparator:_,maxReplaces:b,alwaysFormat:C}=e.interpolation;this.escape=n!==void 0?n:KV,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=i?Zc(i):a||"{{",this.suffix=s?Zc(s):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=p?Zc(p):g||Zc("$t("),this.nestingSuffix=v?Zc(v):y||Zc(")"),this.nestingOptionsSeparator=_||",",this.maxReplaces=b||1e3,this.alwaysFormat=C!==void 0?C:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,o){let i,a,s;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=g=>{if(g.indexOf(this.formatSeparator)<0){const b=nk(n,c,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(b,void 0,r,{...o,...n,interpolationkey:g}):b}const v=g.split(this.formatSeparator),y=v.shift().trim(),_=v.join(this.formatSeparator).trim();return this.format(nk(n,c,y,this.options.keySeparator,this.options.ignoreJSONStructure),_,r,{...o,...n,interpolationkey:y})};this.resetRegExp();const d=o&&o.missingInterpolationHandler||this.options.missingInterpolationHandler,h=o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>fb(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?fb(this.escape(g)):fb(g)}].forEach(g=>{for(s=0;i=g.regex.exec(e);){const v=i[1].trim();if(a=u(v),a===void 0)if(typeof d=="function"){const _=d(e,i,o);a=lt(_)?_:""}else if(o&&Object.prototype.hasOwnProperty.call(o,v))a="";else if(h){a=i[0];continue}else this.logger.warn(`missed to pass in variable ${v} for interpolating ${e}`),a="";else!lt(a)&&!this.useRawValueToEscape&&(a=qA(a));const y=g.safeValue(a);if(e=e.replace(i[0],y),h?(g.regex.lastIndex+=a.length,g.regex.lastIndex-=i[0].length):g.regex.lastIndex=0,s++,s>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,i,a;const s=(c,u)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const h=c.split(new RegExp(`${d}[ ]*{`));let p=`{${h[1]}`;c=h[0],p=this.interpolate(p,a);const g=p.match(/'/g),v=p.match(/"/g);(g&&g.length%2===0&&!v||v.length%2!==0)&&(p=p.replace(/'/g,'"'));try{a=JSON.parse(p),u&&(a={...u,...a})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,y),`${c}${d}${p}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,c};for(;o=this.nestingRegexp.exec(e);){let c=[];a={...r},a=a.replace&&!lt(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let u=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){const d=o[1].split(this.formatSeparator).map(h=>h.trim());o[1]=d.shift(),c=d,u=!0}if(i=n(s.call(this,o[1].trim(),a),a),i&&o[0]===e&&!lt(i))return i;lt(i)||(i=qA(i)),i||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${e}`),i=""),u&&(i=c.reduce((d,h)=>this.format(d,h,r.lng,{...r,interpolationkey:o[1].trim()}),i.trim())),e=e.replace(o[0],i),this.regexp.lastIndex=0}return e}}const az=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const o=r[1].substring(0,r[1].length-1);e==="currency"&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):e==="relativetime"&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach(a=>{if(a){const[s,...c]=a.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),d=s.trim();n[d]||(n[d]=u),u==="false"&&(n[d]=!1),u==="true"&&(n[d]=!0),isNaN(u)||(n[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:n}},el=t=>{const e={};return(n,r,o)=>{let i=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(i={...i,[o.interpolationkey]:void 0});const a=r+JSON.stringify(i);let s=e[a];return s||(s=t(jm(r),o),e[a]=s),s(n)}};class sz{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=li.create("formatter"),this.options=e,this.formats={number:el((n,r)=>o=>new Intl.NumberFormat(n,{...r}).format(o)),currency:el((n,r)=>o=>new Intl.NumberFormat(n,{...r,style:"currency"}).format(o)),datetime:el((n,r)=>o=>new Intl.DateTimeFormat(n,{...r}).format(o)),relativetime:el((n,r)=>o=>new Intl.RelativeTimeFormat(n,{...r}).format(o,r.range||"day")),list:el((n,r)=>o=>new Intl.ListFormat(n,{...r}).format(o))},this.init(e)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=el(n)}format(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(s=>s.indexOf(")")>-1)){const s=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,s)].join(this.formatSeparator)}return i.reduce((s,c)=>{const{formatName:u,formatOptions:d}=az(c);if(this.formats[u]){let h=s;try{const p=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},g=p.locale||p.lng||o.locale||o.lng||r;h=this.formats[u](s,g,{...d,...o,...p})}catch(p){this.logger.warn(p)}return h}else this.logger.warn(`there was no format function for ${u}`);return s},e)}}const cz=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class lz extends Ev{constructor(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=o,this.logger=li.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,o.backend,o)}queueLoad(e,n,r,o){const i={},a={},s={},c={};return e.forEach(u=>{let d=!0;n.forEach(h=>{const p=`${u}|${h}`;!r.reload&&this.store.hasResourceBundle(u,h)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?a[p]===void 0&&(a[p]=!0):(this.state[p]=1,d=!1,a[p]===void 0&&(a[p]=!0),i[p]===void 0&&(i[p]=!0),c[h]===void 0&&(c[h]=!0)))}),d||(s[u]=!0)}),(Object.keys(i).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(i),pending:Object.keys(a),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(c)}}loaded(e,n,r){const o=e.split("|"),i=o[0],a=o[1];n&&this.emit("failedLoading",i,a,n),!n&&r&&this.store.addResourceBundle(i,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const s={};this.queue.forEach(c=>{zV(c.loaded,[i],a),cz(c,e),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{s[u]||(s[u]={});const d=c.loaded[u];d.length&&d.forEach(h=>{s[u][h]===void 0&&(s[u][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(c=>!c.done)}read(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:o,wait:i,callback:a});return}this.readingCalls++;const s=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&d&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,o+1,i*2,a)},i);return}a(u,d)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const u=c(e,n);u&&typeof u.then=="function"?u.then(d=>s(null,d)).catch(s):s(null,u)}catch(u){s(u)}return}return c(e,n,s)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();lt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),lt(n)&&(n=[n]);const i=this.queueLoad(e,n,r,o);if(!i.toLoad.length)return i.pending.length||o(),null;i.toLoad.forEach(a=>{this.loadOne(a)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),o=r[0],i=r[1];this.read(o,i,"read",void 0,void 0,(a,s)=>{a&&this.logger.warn(`${n}loading namespace ${i} for language ${o} failed`,a),!a&&s&&this.logger.log(`${n}loaded namespace ${i} for language ${o}`,s),this.loaded(e,a,s)})}saveMissing(e,n,r,o,i){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const c={...a,isUpdate:i},u=this.backend.create.bind(this.backend);if(u.length<6)try{let d;u.length===5?d=u(e,n,r,o,c):d=u(e,n,r,o),d&&typeof d.then=="function"?d.then(h=>s(null,h)).catch(s):s(null,d)}catch(d){s(d)}else u(e,n,r,o,s,c)}!e||!e[0]||this.store.addResource(e[0],n,r,o)}}}const rk=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),lt(t[1])&&(e.defaultValue=t[1]),lt(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),ok=t=>(lt(t.ns)&&(t.ns=[t.ns]),lt(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),lt(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),ap=()=>{},uz=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class zf extends Ev{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=ok(e),this.services={},this.logger=li,this.modules={external:[]},uz(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(lt(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const o=rk();this.options={...o,...this.options,...ok(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...o.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const i=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?li.init(i(this.modules.logger),this.options):li.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:typeof Intl<"u"&&(d=sz);const h=new ek(this.options);this.store=new XA(this.options.resources,this.options);const p=this.services;p.logger=li,p.resourceStore=this.store,p.languageUtils=h,p.pluralResolver=new oz(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(p.formatter=i(d),p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new iz(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new lz(i(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",function(g){for(var v=arguments.length,y=new Array(v>1?v-1:0),_=1;_<v;_++)y[_-1]=arguments[_];e.emit(g,...y)}),this.modules.languageDetector&&(p.languageDetector=i(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=i(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new Um(this.services,this.options),this.translator.on("*",function(g){for(var v=arguments.length,y=new Array(v>1?v-1:0),_=1;_<v;_++)y[_-1]=arguments[_];e.emit(g,...y)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,r||(r=ap),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return e.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return e.store[d](...arguments),e}});const c=Rd(),u=()=>{const d=(h,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(p),r(h,p)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ap;const o=lt(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(o&&o.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const i=[],a=s=>{if(!s||s==="cimode")return;this.services.languageUtils.toResolveHierarchy(s).forEach(u=>{u!=="cimode"&&i.indexOf(u)<0&&i.push(u)})};o?a(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>a(c)),this.options.preload&&this.options.preload.forEach(s=>a(s)),this.services.backendConnector.load(i,this.options.ns,s=>{!s&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(s)})}else r(null)}reloadResources(e,n,r){const o=Rd();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=ap),this.services.backendConnector.reload(e,n,i=>{o.resolve(),r(i)}),o}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&y2.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const o=Rd();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},a=(c,u)=>{u?(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,o.resolve(function(){return r.t(...arguments)}),n&&n(c,function(){return r.t(...arguments)})},s=c=>{!e&&!c&&this.services.languageDetector&&(c=[]);const u=lt(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,d=>{a(d,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),o}getFixedT(e,n,r){var o=this;const i=function(a,s){let c;if(typeof s!="object"){for(var u=arguments.length,d=new Array(u>2?u-2:0),h=2;h<u;h++)d[h-2]=arguments[h];c=o.options.overloadTranslationOptionHandler([a,s].concat(d))}else c={...s};c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||i.keyPrefix);const p=o.options.keySeparator||".";let g;return c.keyPrefix&&Array.isArray(a)?g=a.map(v=>`${c.keyPrefix}${p}${v}`):g=c.keyPrefix?`${c.keyPrefix}${p}${a}`:a,o.t(g,c)};return lt(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(s,c)=>{const u=this.services.backendConnector.state[`${s}|${c}`];return u===-1||u===0||u===2};if(n.precheck){const s=n.precheck(this,a);if(s!==void 0)return s}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!o||a(i,e)))}loadNamespaces(e,n){const r=Rd();return this.options.ns?(lt(e)&&(e=[e]),e.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Rd();lt(e)&&(e=[e]);const o=this.options.preload||[],i=e.filter(a=>o.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return i.length?(this.options.preload=o.concat(i),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new ek(rk());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new zf(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ap;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const o={...this.options,...e,isClone:!0},i=new zf(o);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(s=>{i[s]=this[s]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new XA(this.store.data,o),i.services.resourceStore=i.store),i.translator=new Um(i.services,o),i.translator.on("*",function(s){for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];i.emit(s,...u)}),i.init(o,n),i.translator.options=o,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const _t=zf.createInstance();_t.createInstance=zf.createInstance;_t.createInstance;_t.dir;_t.init;_t.loadResources;_t.reloadResources;_t.use;_t.changeLanguage;_t.getFixedT;const ie=_t.t,$Ee=_t.exists;_t.setDefaultNamespace;_t.hasLoadedNamespace;_t.loadNamespaces;_t.loadLanguages;function dz(){const t=F(Bo),e=F(mt);return m.useMemo(()=>{if(e){for(const n of t.values())if(n.conversationId===e)return n}},[e,t])}function fz(){const t=ct(),e=t.get(Bo),n=t.get(mt);if(n){for(const r of e.values())if(r.conversationId===n)return r}}function b2(t){const{tasks:e,conversationId:n,taskType:r}=t;for(const o of e.values())if(o.conversationId===n){if(r&&o.type!==r)continue;return o.id}return""}const _2=["completed","failed","cancelled"];function hz(t){return t.content.find(e=>{var r;if(e.type!=="task")return!1;const n=(r=e.task)==null?void 0:r.status;return n&&!_2.includes(n)})}function pz(t){for(let e=t.length-1;e>=0;e-=1){const n=t[e];if(n&&n.type==="task")return n}}function Lw(t){for(const e of t){const n=hz(e);if(n)return{message:e,part:n}}return null}const Vu=ct();function Gn(t,e,n=!1){const r=t.at(-1),o=t.find(({id:i})=>i===e);if((n||(r==null?void 0:r.id)===(o==null?void 0:o.id))&&(o==null?void 0:o.author)==="ai")return o}function mz(t,e){const n=t.find(({author:r})=>r==="human");if((n==null?void 0:n.id)===e&&n.author==="human")return n}function C2(t){const e=t.at(-1);if((e==null?void 0:e.author)==="ai")return e}function tl(t,e){return t.find(n=>n.partId===e)}function gz(t){if(t.length!==0)return t[t.length-1]}function vz(t){for(let e=t.length-1;e>=0;e-=1){const n=t[e];if(n&&n.type==="text")return n}}function S2(t){if(!t)return null;const e=Vu.get(En).get(t);if(!e)return null;const{history:n}=e;return Lw(n)}function on(t,e){Vu.set(En,n=>Za(n,r=>{const o=r.get(t);o&&e(o.history)}))}function Dw(t,e){Vu.set(Bo,n=>Za(n,r=>{const o=r.get(t);o&&e(o)}))}function Ia(t,e){Vu.set(En,n=>Za(n,r=>{const o=r.get(t);o&&e(o)}))}function Zd(t,e){Vu.set(Iw,n=>{const r=new Map(n);return r.set(t,e),r})}function yz(t){Vu.set(ir,t)}function sp(t,e){const n={type:"error",text:t,partId:"0"},r=Math.random().toString(),o={id:r,createdAt:new Date().toISOString(),author:"ai",content:[n],mode:"chat"};Zd(e,r),on(e,i=>{i.push(o)}),Ia(e,i=>{i.streamingState="idle"})}async function bz(t){var r;const e=(r=t.body)==null?void 0:r.getReader();if(!e)return 0;let n=0;try{const o=performance.now();for(;performance.now()-o<2e3;){const{value:i,done:a}=await e.read();if(a)break;n+=i.byteLength}return n}catch{return 0}}const _z=["m365-personal","m365-family-admin"],w2=["m365-family-guest","m365-premium-guest","m365-premium-admin"],Cz=["m365-personal","m365-family-admin"],ik=["pro","m365-premium-admin","m365-family-admin","m365-personal","m365-personal-classic","m365-premium-guest","m365-family-guest","m365-family-classic","m365-basic"];function Sz(t,e=!1){return t.length===0?e?"buypremium":"buym365":t.some(n=>n.tier==="pro")?"buypremium":t.some(n=>w2.includes(n.tier))?null:t.some(n=>Cz.includes(n.tier))||e?"upgradepremium":"upgradem365"}function GEe(t){return t.length>0&&!t.some(e=>e.tier==="pro")}function KEe(t){return t.some(e=>_z.includes(e.tier))&&!t.some(e=>w2.includes(e.tier))}function wz(t){return t.slice().sort((e,n)=>ik.indexOf(e.tier)-ik.indexOf(n.tier))}function WEe(t){const e=t.find(n=>n.tier==="pro");return(e==null?void 0:e.isAutoRenew)??!1}const jw="ellie",E2=[jw],ak=l.union([l.enum(E2),l.undefined()]),Ez=l.object({model:l.literal("vasa"),eyesOpenRatio:l.array(l.number()).min(1),eyesPose:l.array(l.number()).min(6),jawPose:l.array(l.number()).length(3),neckPose:l.array(l.number()).length(3),rotation:l.array(l.number()).length(3),translation:l.array(l.number()).length(3),viseme:l.array(l.number()).min(10)}),Tz=l.object({model:l.literal("spda2e"),poseDiffusion:l.array(l.number())}),Ti=l.object({partId:l.string()}),Uw=l.object({event:l.literal("invokeAction"),actionId:l.string()}),Iz=l.enum(yB),Az=l.object({type:l.literal("code"),language:Iz,content:l.string()}),kz=l.object({type:l.literal("text"),content:l.string()}),xz=l.discriminatedUnion("type",[Az,kz]),T2=l.union([l.literal("running"),l.literal("completed"),l.literal("failed")]),Rz=l.object({title:l.string(),status:T2}),NC=l.object({status:T2,title:l.string(),steps:l.array(Rz),artifacts:l.array(xz)}),Pz=Ti.extend({type:l.literal("activity"),activity:NC,activities:l.array(NC).optional()}),xr=l.object({amount:l.number(),currency:l.string().nullable(),currencySymbol:l.string().nullable()}),Oz=l.enum(["current-search-term","recent-searches","age","gender","website-visits","interests","custom-audience","similar-audience","profile-targeting"]);l.enum(["multimedia","product","tourActivity","propertyPromotion","text","miniShowroom","mainShowroom","showroom","organic"]);const Nz=l.enum(["top","bottom","left","right"]),Mz=l.object({adDomain:l.string(),advertiser:l.object({name:l.string(),country:l.string()}),isVerified:l.boolean(),selectionReasons:l.array(Oz)}),kc=l.object({url:l.string(),urlPingSuffix:l.string()}),yi=l.object({url:l.string(),width:l.number().nullish(),height:l.number().nullish(),link:kc.nullish(),impressionToken:l.string().nullish()}),Lz=l.object({downPayment:l.string(),description:l.string()}),Dz=l.object({rating:l.number(),link:kc,impressionToken:l.string()}),Th=l.object({businessName:l.string(),image:yi,impressionToken:l.string().nullish()}),I2=l.object({text:l.string(),url:l.string(),urlPingSuffix:l.string()}),jz=l.object({title:l.string(),text:l.string(),url:l.string(),layout:l.enum(["inline","overlay"])}),xc=l.object({impressionToken:l.string(),selectionCriteria:Mz}),Tv=l.object({rowIndex:l.number().int(),columnIndex:l.number().int(),textPosition:Nz,imagesPerRow:l.number().int()}),A2=xc.extend({type:l.literal("multimedia"),description:l.string(),title:l.string(),displayUrl:l.string(),link:kc,image:yi.nullish(),images:l.array(yi).nullish(),logo:Th.nullish(),action:I2.nullish(),layout:Tv.nullish()});xc.extend({type:l.literal("organic"),description:l.string(),title:l.string(),link:l.string(),image:yi,layout:Tv});const Iv=l.object({category:l.string(),value:l.string()}),Fw=xc.extend({type:l.literal("product"),offer:l.object({seller:l.string(),link:kc,price:xr,lowPrice:xr.nullish(),item:l.object({name:l.string(),image:yi})}),tags:l.array(Iv).nullish(),shipping:l.object({isFree:l.boolean(),description:l.string()}).nullish(),productRating:Dz.nullish(),installment:Lz.nullish(),pricePerUnit:l.string().nullish(),energyRating:l.string().nullish(),layout:Tv.nullish()}),k2=xc.extend({type:l.literal("tourActivity"),title:l.string(),domain:l.string(),startingPrice:xr,image:yi,link:kc,tags:l.array(Iv).nullish()}),x2=xc.extend({type:l.literal("propertyPromotion"),title:l.string(),domain:l.string(),price:xr,image:yi,link:kc,tags:l.array(Iv).nullish()}),Uz=xc.extend({type:l.literal("text"),title:l.string(),description:l.string(),displayUrl:l.string(),link:kc,image:yi.nullish(),logo:Th.nullish(),disclaimer:jz.nullish()}),Fz=xc.extend({type:l.literal("miniShowroom"),title:l.string(),description:l.string(),displayUrl:l.string(),image:yi,logo:Th.nullish()}),Bz=l.object({ad:l.union([Fw,A2]),adId:l.string().nullish()}),Hz=l.object({isLoading:l.boolean().nullish()}),R2=Hz.extend({type:l.literal("mainShowroom"),id:l.string(),brandId:l.string(),title:l.string().nullish(),description:l.string().nullish(),backgroundColor:l.number().int().nullish(),images:l.array(yi).nullish(),logo:Th.nullish(),slotAds:l.array(Bz).nullish(),action:I2.nullish(),layout:Tv.nullish()}),Vz=l.union([A2,Fw,k2,x2,Uz,Fz,R2]);l.union([Fw,k2,x2]);const P2=l.object({pageLoadPingUrl:l.string(),visibilityPingUrlBase:l.string(),clickPingUrlBase:l.string()}),hb=l.object({tagsSupported:l.boolean()});l.object({supportedTypes:l.array(l.enum(["multimedia","product","tourActivity","propertyPromotion","text","showroom","miniShowroom","mainShowroom"])),product:hb.nullish(),propertyPromotion:hb.nullish(),tourActivity:hb.nullish(),optOutOfPersonalization:l.boolean().nullish()});l.object({showroom:l.object({brandId:l.string(),brandName:l.string().nullish(),adId:l.string().nullish()})});const zz=l.object({brandBackground:l.number().int().nullish(),brandLogo:Th,conversationId:l.string(),theme:l.enum(["light","dark"]).nullish(),viewMode:l.enum(["cardView","extendedView"]),rguid:l.string().nullish(),rlink:l.string().nullish(),messageId:l.string(),triggerAt:l.number(),mainShowroomAdId:l.string().nullish()});zz.extend({brandId:l.string(),adId:l.string().nullish()});l.object({brandId:l.string(),brandName:l.string().nullish(),messageId:l.string(),conversationId:l.string(),visible:l.boolean()});const $z=l.object({requestId:l.string(),ads:l.array(R2),instrumentation:P2}),Gz=l.object({selectedTag:Iv.nullish(),collapsed:l.boolean().nullish(),showroomData:l.array(l.object({requestUrl:l.string(),response:$z})).nullish()}),Kz=Gz.extend({type:l.literal("ads"),requestId:l.string(),summary:l.string(),ads:l.array(Vz).nullish(),instrumentation:P2}),Wz=l.object({name:l.string(),url:l.string().nullish(),description:l.string().nullish(),phoneNumber:l.string().nullish(),smsNumber:l.string().nullish(),chatUrl:l.string().nullish(),whatsAppUrl:l.string().nullish()}),qz=l.object({type:l.literal("safetyHelpline"),countryEmergencyNumber:l.string().nullable(),helplines:l.array(Wz)}),Yz=l.object({name:l.string(),disclaimerUrl:l.string(),url:l.string()}),O2=l.object({price:l.number().nullish(),changeInPercentage:l.number().nullish(),changeInAmount:l.number().nullish()}),N2=l.object({id:l.string(),symbol:l.string(),displayName:l.string(),price:l.number(),previousClosePrice:l.number(),changeInPercentage:l.number(),changeInAmount:l.number(),updatedAt:l.string(),iconUrl:l.string(),provider:Yz,isFollowed:l.boolean().nullish()}),Qz=l.object({priceOpen:l.number().nullish(),priceHigh:l.number().nullish(),priceLow:l.number().nullish(),price52wHigh:l.number().nullish(),price52wLow:l.number().nullish()}),Ih=N2.extend({intradayPricing:Qz,isMarketLastSale:l.boolean(),exchangeTimeZoneId:l.string().nullish(),isMarketRegularHours:l.boolean().optional(),lastUpdatedAt:l.string(),tradingDayEndAt:l.string(),accumulatedVolume:l.number().nullish()}),Jz=Ih.extend({securityType:l.literal("stock"),marketCap:l.number().nullish(),marketCapCurrency:l.string().nullish(),averageVolume:l.number().nullish(),peRatio:l.number().nullish(),postMarket:O2.nullish()}),Xz=Ih.extend({securityType:l.literal("etf"),netAssets:l.number().nullish(),expenseRatio:l.number().nullish(),yieldPercent:l.number().nullish(),postMarket:O2.nullish()}),Zz=Ih.extend({securityType:l.literal("index")}),e$=N2.extend({securityType:l.literal("fund"),price52wHigh:l.number().nullish(),price52wLow:l.number().nullish(),netAssets:l.number().nullish(),expenseRatio:l.number().nullish(),yieldPercent:l.number().nullish(),oneYearReturn:l.number().nullish()}),M2=l.object({amount:l.number().nullish(),currency:l.string().nullish(),currencySymbol:l.string().nullish()}),sk=l.object({value:M2,fullName:l.string().nullish()}),t$=l.object({oneMonth:l.number().nullish(),sixMonths:l.number().nullish(),oneYear:l.number().nullish()}),n$=Ih.extend({securityType:l.literal("currencyExchange"),fromCurrency:sk,toCurrency:sk,percentageReturns:t$}),r$=Ih.extend({securityType:l.literal("cryptocurrency"),marketDominancePercentage:l.number().nullish(),circulatingSupply:l.number().nullish(),maxSupply:l.number().nullish(),oneYearReturn:l.number().nullish(),marketCap:M2,marketCapCurrency:l.string().nullish()}),o$=l.enum(pB),i$=l.object({price:l.number(),volume:l.number(),at:l.string()}),ck=l.array(i$),a$=l.object({afterHoursSeries:ck,series:ck,chartType:o$}),s$=l.discriminatedUnion("securityType",[Jz,Xz,Zz,e$,n$,r$]),c$=l.object({currency:l.string(),instrument:s$,chart:a$.optional()}),l$=c$.extend({type:l.literal("financeChart")}),u$=l.discriminatedUnion("type",[l$]),d$=l.object({id:l.string()}),f$=l.array(d$),qEe=l.object({entities:f$}),h$=l.object({type:l.literal("generativeUI"),markup:l.string(),data:l.record(l.string(),l.any())}),p$=l.object({image:l.object({url:l.string(),thumbnailUrl:l.string(),altText:l.string(),width:l.number(),height:l.number()}),source:l.object({title:l.string(),url:l.string(),iconUrl:l.string().nullable()})}),m$=l.object({type:l.literal("image"),images:l.array(p$)}),g$=l.object({name:l.string(),logoUrl:l.string().nullable(),postUrl:l.string()}),v$=l.object({title:l.string(),companyName:l.string(),companyLogoUrl:l.string().nullable(),postedAt:l.string(),location:l.string(),providers:l.array(g$),description:l.string(),salary:l.string().nullable(),type:l.string().nullable(),locationType:l.string().nullable(),tags:l.array(l.string()).nullable()}),y$=l.object({type:l.literal("job"),jobs:l.array(v$)}),b$=l.object({type:l.literal("localEntity"),entities:l.array(l.object({name:l.string(),phoneNumber:l.string().nullish(),url:l.string().nullish(),reviews:l.array(l.object({count:l.number(),rating:l.number(),providerName:l.string(),providerIconUrl:l.string().nullish(),url:l.string()})),location:l.object({address:l.string().nullish(),latitude:l.number(),longitude:l.number()}),photos:l.array(l.object({url:l.string(),altText:l.string().nullish(),providerName:l.string().nullish(),providerUrl:l.string()})),category:l.string().nullish(),price:l.string().nullish()}))}),_$=l.object({providerName:l.string(),url:l.string().nullish(),thumbnailUrl:l.string(),providerOptions:l.array(l.string()).nullish(),source:l.object({url:l.string(),name:l.string()}).nullish()}),C$=l.object({sourceName:l.string(),maxRating:l.number(),rating:l.number(),url:l.string()}),S$=l.object({url:l.string(),source:l.object({url:l.string(),name:l.string()}).nullish()}),lk=l.object({url:l.string().nullish(),name:l.string().nullish()}),w$={thumbnail:l.object({url:l.string(),source:lk.nullish()}),source:lk.nullish()},E$=l.object({type:l.literal("mediaSpotlight"),title:l.string(),label:l.string().nullish(),description:l.string(),thumbnail:S$,facts:l.record(l.string(),l.string()).nullish(),criticRatings:l.array(C$).nullish(),watchLinks:l.array(_$).nullish(),featuredVideo:l.object(w$).nullish()}),T$=l.union([l.literal("docx"),l.literal("xlsx"),l.literal("pptx"),l.literal("one"),l.literal("pdf"),l.literal("txt")]),I$=l.object({id:l.string(),type:l.literal("oneDrive"),name:l.string(),lastModifiedAt:l.string(),url:l.string(),webDavUrl:l.string().optional(),contentType:T$,size:l.number()}),A$=l.object({type:l.literal("m365"),items:l.array(I$)}),k$=l.object({name:l.string(),url:l.string(),width:l.number().optional(),height:l.number().optional(),thumbnailUrl:l.string().optional()}),x$=l.object({images:l.array(k$)}),R$=x$.extend({type:l.literal("phoneImages")}),P$=l.object({qrCodeUrl:l.string(),linkDeviceUrl:l.string()}),O$=P$.extend({type:l.literal("phoneLinking")}),N$=l.union([l.literal("executing"),l.literal("completed"),l.literal("failed")]),Bw=l.object({deviceName:l.string().optional(),state:N$.optional(),disabled:l.boolean().optional(),completedAt:l.string().optional()}),M$=l.enum(["sunday","monday","tuesday","wednesday","thursday","friday","saturday"]),L$=Bw.extend({triggerAt:l.string(),repeatDays:l.array(M$).optional().nullable()}),D$=L$.extend({type:l.literal("phoneAlarm")}),j$=Bw.extend({seconds:l.number()}),U$=j$.extend({type:l.literal("phoneTimer")}),F$=Bw.extend({actionId:l.string(),text:l.string(),phoneNumber:l.string().nullable().optional(),contactName:l.string().nullable().optional(),deviceName:l.string().optional()}),B$=F$.extend({type:l.literal("phoneSendMessage")}),H$=Uw.extend({actionName:l.literal("phone_send_message"),parameters:l.object({text:l.string(),phoneNumber:l.string().nullable().optional(),contactName:l.string().nullable().optional()})}),V$=l.discriminatedUnion("type",[O$,R$,D$,U$,B$]),z$=l.object({type:l.literal("quiz"),title:l.string(),quiz:l.array(l.object({type:l.literal("singleSelect"),question:l.string(),options:l.array(l.string()),answer:l.number(),topics:l.array(l.string()).nullable(),explanation:l.string()}))}),$$=l.object({value:l.number(),count:l.number().nullish(),maxRating:l.number().nullish()}),G$=l.object({hours:l.number(),minutes:l.number()}),L2=l.object({name:l.string(),quantity:l.number().nullish(),unit:l.string().nullish()}),K$=l.object({title:l.string(),url:l.string().url(),source:l.string(),imageUrl:l.string().url().nullish(),rating:$$.nullish(),serving:l.number().nullish(),calories:l.number().nullish(),cookingTime:G$.nullish(),instructions:l.array(l.string()).nullish(),ingredients:l.array(L2).nullish()}),W$=l.object({type:l.literal("recipe"),recipes:l.array(K$)});l.object({title:l.string(),url:l.string().url(),ingredients:l.array(L2),instructions:l.array(l.string()).nullish(),imageUrl:l.string().url().nullish(),messageId:l.string().nullish()});const D2=l.object({url:l.string().url(),name:l.string(),imageUrl:l.string().url().optional(),images:l.array(l.string().url()).optional(),price:xr,seller:l.string()}),j2=l.object({value:l.number(),count:l.number()}).nullish(),q$=D2.extend({type:l.literal("shopping"),id:l.string(),rating:j2}),Y$=D2.extend({isNotificationEnabled:l.boolean().nullish(),offerId:l.string(),currentPrice:xr.nullish(),percentageDrop:l.number(),durationInWeeks:l.number()}),U2=l.object({title:l.string().nullish(),url:l.string().url()}),Q$=l.enum(["textual","visual"]),J$=l.object({displayName:l.string(),value:l.string(),isActive:l.boolean(),isSelected:l.boolean(),thumbnailImage:U2.nullish()}),X$=l.object({id:l.string(),displayName:l.string(),filterValues:l.array(J$),filterType:Q$}),Z$=l.object({id:l.string().nullish(),groupId:l.string().nullish(),brandGroupId:l.string().nullish()}),eG=l.object({displayName:l.string(),values:l.array(l.string())}),F2=l.object({offerUrl:l.string(),domain:l.string()}),tG=l.object({summary:l.string(),attributions:l.array(F2)}),nG=l.object({pros:l.array(l.string()).nullish(),cons:l.array(l.string()).nullish(),attributions:l.array(F2)}),rG=l.discriminatedUnion("type",[l.object({type:l.literal("buyWithMerchant"),checkoutUrl:l.string().nullish(),merchant:l.string().nullish()}),l.object({type:l.literal("buyWithCopilot"),merchantProvider:l.string().nullish(),storeId:l.string().nullish()})]),Fm=l.object({product:Z$,offerId:l.string(),url:l.string().url(),name:l.string(),description:l.string(),images:l.array(U2),filters:l.array(X$).nullish(),specifications:l.array(eG).nullish(),review:tG.nullish(),prosAndCons:nG.nullish(),price:xr,discountPrice:xr.nullish(),seller:l.string(),sellerLogoUrl:l.string().url().nullish(),brandName:l.string().nullish(),rating:j2.nullish(),checkoutOption:rG.nullish(),category:l.string().nullish(),curation:l.string().nullish()}),oG=l.object({type:l.literal("shoppingProducts"),products:l.array(Fm)}),B2=l.union([l.literal("lowest-price"),l.literal("free-shipping")]),iG=l.object({offerName:l.string(),offerId:l.string(),url:l.string().url(),price:xr,discountPrice:xr.nullish(),seller:l.string(),sellerLogoUrl:l.string().url().nullish(),tags:l.array(B2).nullish()}),YEe=l.object({error:l.string(),message:l.string()}),aG=l.object({minPrice:xr,maxPrice:xr,averagePrice:xr,timePeriodInDays:l.number()}),sG=l.object({date:l.coerce.date(),price:xr}),cG=l.object({daily:sG.array()}),lG=l.object({label:l.string(),prompt:l.string()}),QEe=Fm.extend({otherBuyingOptions:l.array(iG),priceInsight:aG.nullish(),tags:l.array(B2).nullish(),priceHistory:cG.nullish(),conversationStarters:l.array(lG).nullish()}),JEe=l.object({products:Y$.array()}),uk=Fm.extend({similarProducts:l.array(Fm).nullish()}),H2=uk.extend({accessories:l.array(uk).nullish()});l.object({product:H2,messageId:l.string()});const uG=l.object({type:l.literal("shoppingCurated"),title:l.string().optional(),products:l.array(H2)}),dG=l.discriminatedUnion("type",[q$,oG,uG]),XEe=l.object({emailNotificationEnabled:l.boolean()}),fG=l.object({name:l.string(),url:l.string().url(),offerId:l.string()}),hG=l.object({url:l.string().url(),source:l.string()}),pG=l.object({reason:l.string(),references:l.array(hG)}),mG=l.enum(["buy-now","buy-later"]),ZEe=l.object({whenToBuy:mG,seller:fG,supportingReasons:l.array(pG)}),gG=l.enum(["home","away"]),Rc=l.enum(["win","loss","tie","no-game"]),V2=l.enum(["pre-game","in-progress","final","postponed","delayed","abandoned","cancelled"]),vG=l.enum(["test","odi","t20"]),yG=l.enum(["test","limited-overs","super-over"]),bG=l.enum([...V2.options,"drinks","dinner","tea","lunch","innings-break","super-over","toss","stumps","strategic-timeout","forfeited"]),_G=l.enum([...V2.options,"bye","retired","forfeited","unscheduled","suspended"]),CG=l.enum(["men-singles","men-doubles","women-singles","women-doubles","mixed-doubles"]),SG=l.enum(["round-of256","round-of128","round-of64","round-of32","round-of16","quarter-final","semi-final","final"]),z2=l.object({name:l.string(),city:l.string().nullish()}),wG=l.object({name:l.string(),thumbnailUrl:l.string().nullish(),seasonPhase:l.string(),seasonStartsAt:l.string().nullish(),seasonEndsAt:l.string().nullish(),leagueId:l.string()}),EG=l.object({type:l.literal("league"),league:wG}),Bm=l.object({name:l.string(),thumbnailUrl:l.string().nullish()}),TG=l.object({type:l.literal("team"),team:Bm}),IG=l.object({type:l.literal("matchup"),matchup:l.object({teamA:Bm,teamB:Bm})}),Ah=l.discriminatedUnion("type",[EG,TG,IG]),AG=l.object({name:l.string(),alias:l.string().nullish(),thumbnailUrl:l.string().nullish()}),br=AG.extend({primaryColorHex:l.string().nullish(),venueType:gG.nullish(),previousGameOutcomes:l.array(Rc).nullish(),seed:l.number().nullish()}),Hw=br.extend({winProbability:l.number().nullish()}),Vw=l.object({wins:l.number(),losses:l.number(),overtimeLosses:l.number().nullish()}),kG=Hw.extend({record:Vw.nullish()}),xG=l.object({playerName:l.string(),clock:l.object({minutes:l.number(),seconds:l.number()})}),RG=l.object({ballPossessionPercentage:l.number().nullish(),goals:l.array(xG).nullish()}),$2=br.extend({gameStats:RG,score:l.string()}),PG=$2.extend({gameOutcome:Rc}),OG=l.object({wins:l.number(),participantName:l.string()}),NG=l.enum(["final","not-started","in-progress"]),MG=l.enum(["national-championship","first-four","first-round","second-round","sweet16","elite-eight","final-four","final"]),LG=l.object({state:NG,winsInfo:l.array(OG).nullish(),gameNumber:l.number().nullish(),conference:l.string().nullish()}),DG=LG.extend({phase:MG}),zw=l.object({name:l.string(),score:l.string()}),jG=l.object({current:l.number(),total:l.number(),aggregatedScores:l.array(zw).nullish()}),$w=l.object({startsAt:l.string(),status:l.string(),leagueName:l.string(),legInfo:jG.nullish(),leagueId:l.string().nullish(),gameId:l.string().nullish(),startTimeToBeAnnounced:l.boolean().nullish()}),Pc=$w.extend({week:l.number().nullish()}),Oc=$w.extend({name:l.string().nullish(),seasonPhase:l.string(),bracket:DG.nullish()}),UG=Pc.extend({status:l.literal("pre-game"),participants:l.array(Hw)}),FG=Oc.extend({status:l.literal("pre-game"),participants:l.array(kG)}),Av=l.object({minutes:l.number(),seconds:l.number()}),BG=l.enum(["quarter","half","extra","penalties","shoot-out","overtime","inning","period"]),HG=l.enum(["top","bottom"]),kh=l.object({type:BG,period:l.number(),division:HG.nullish()}),Gw=l.object({clock:Av,description:l.string(),team:Bm,participantScores:l.array(zw).nullish()}),VG=Gw.extend({type:l.enum(["score-change","yellow-card","red-card"])}),zG=Gw.extend({type:l.enum(["three-point-made","two-point-made","touchdown","field-goal","extra-point","safety","two-point-conversion","blocked-punt-safety","blocked-field-goal-safety","fumble-safety"])}),$G=Pc.extend({status:l.literal("in-progress"),participants:l.array($2),clock:Av,currentPlayingPeriod:kh,timeline:l.object({events:l.array(VG)}).nullish()}),Kw=l.object({url:l.string(),thumbnailUrl:l.string(),title:l.string(),durationInSeconds:l.number().nullish()}),GG=Pc.extend({status:l.literal("final"),participants:l.array(PG),videos:l.array(Kw).nullish()}),KG=Pc.extend({status:l.literal("postponed"),participants:l.array(br)}),WG=Pc.extend({status:l.literal("delayed"),participants:l.array(br)}),qG=Pc.extend({status:l.literal("abandoned"),participants:l.array(br)}),YG=Pc.extend({status:l.literal("cancelled"),participants:l.array(br)}),MC=l.discriminatedUnion("status",[UG,$G,GG,qG,YG,WG,KG]),G2=l.object({playingPeriod:kh,score:l.string()}),K2=br.extend({playingPeriodScores:l.array(G2).nullish(),score:l.string(),record:Vw}),QG=K2.extend({gameOutcome:Rc}),JG=Oc.extend({status:l.literal("in-progress"),participants:l.array(K2),clock:Av,currentPlayingPeriod:kh,timeline:l.object({events:l.array(zG)}).nullish()}),XG=Oc.extend({status:l.literal("final"),participants:l.array(QG),videos:l.array(Kw).nullish()}),ZG=Oc.extend({status:l.literal("postponed"),participants:l.array(br)}),eK=Oc.extend({status:l.literal("delayed"),participants:l.array(br)}),tK=Oc.extend({status:l.literal("abandoned"),participants:l.array(br)}),nK=Oc.extend({status:l.literal("cancelled"),participants:l.array(br)}),LC=l.discriminatedUnion("status",[FG,JG,XG,tK,nK,eK,ZG]),rK=l.object({type:l.literal("sportsSchedule"),sport:l.enum(["basketball","ice-hockey","football"]),games:l.array(LC),header:Ah.nullish(),heroGame:LC.nullish()}),oK=l.object({type:l.literal("sportsSchedule"),sport:l.literal("soccer"),games:l.array(MC),header:Ah.nullish(),heroGame:MC.nullish()}),iK=l.object({type:l.literal("sportsGame"),sport:l.enum(["basketball","ice-hockey","football"]),game:LC}),aK=l.object({type:l.literal("sportsGame"),sport:l.literal("soccer"),game:MC}),Nc=$w.extend({seasonPhase:l.string()}),sK=l.object({hits:l.number(),errors:l.number(),runs:l.number()}),cK=Gw.extend({type:l.enum(["conversion"]),playingPeriod:kh,participantScores:l.array(zw)}),W2=Hw.extend({record:Vw.nullish()}),q2=W2.extend({playingPeriodScores:l.array(G2).nullish(),score:l.string(),gameStats:sK.nullish()}),lK=q2.extend({gameOutcome:Rc}),uK=Nc.extend({status:l.literal("pre-game"),participants:l.array(W2)}),dK=Nc.extend({status:l.literal("in-progress"),participants:l.array(q2),clock:Av,currentPlayingPeriod:kh,timeline:l.object({events:l.array(cK)}).nullish()}),fK=Nc.extend({status:l.literal("final"),participants:l.array(lK),videos:l.array(Kw).nullish()}),hK=Nc.extend({status:l.literal("postponed"),participants:l.array(br)}),pK=Nc.extend({status:l.literal("delayed"),participants:l.array(br)}),mK=Nc.extend({status:l.literal("abandoned"),participants:l.array(br)}),gK=Nc.extend({status:l.literal("cancelled"),participants:l.array(br)}),DC=l.discriminatedUnion("status",[uK,dK,fK,hK,pK,mK,gK]),vK=l.object({type:l.literal("sportsSchedule"),sport:l.literal("baseball"),games:l.array(DC),header:Ah.nullish(),heroGame:DC.nullish()}),yK=l.object({type:l.literal("sportsGame"),sport:l.literal("baseball"),game:DC}),Y2=l.object({ballsFaced:l.number(),runsScored:l.number(),isBatting:l.boolean()}),Q2=l.object({oversBowled:l.string(),wicketsTaken:l.number(),runsConceded:l.number(),isBowling:l.boolean()}),bK=Y2.extend({type:l.literal("batting")}),_K=Q2.extend({type:l.literal("bowling")}),CK=l.object({name:l.string(),stats:l.discriminatedUnion("type",[bK,_K])}),SK=l.object({playerName:l.string(),teamName:l.string(),battingStats:l.array(Y2).nullish(),bowlingStats:l.array(Q2).nullish()}),wK=l.object({current:l.number(),required:l.number().nullish()}),EK=l.object({name:l.string(),currentMatch:l.number(),totalMatches:l.number(),roundName:l.string().nullish(),equation:l.string().nullish()}),J2=l.object({type:yG,runs:l.number(),wickets:l.number(),oversPlayed:l.string(),isFollowedOn:l.boolean(),isDeclared:l.boolean()}),Ww=l.object({name:l.string(),alias:l.string().nullish(),thumbnailUrl:l.string().nullish()}),TK=Ww.extend({previousGameOutcomes:l.array(Rc).nullish()}),IK=Ww.extend({inningScores:l.array(J2).nullish(),playersStats:l.array(CK).nullish(),yetToBat:l.boolean()}),AK=Ww.extend({gameOutcome:Rc,didNotBat:l.boolean(),inningScores:l.array(J2).nullish()}),kK=l.object({startsAt:l.string(),startTimeToBeAnnounced:l.boolean(),tossInfo:l.string().nullish(),participants:l.array(TK),type:l.literal("pre")}),xK=l.object({gameSummary:l.string(),runRate:wK.nullish(),participants:l.array(IK),type:l.literal("live")}),RK=l.object({startsAt:l.string(),gameSummary:l.string(),playerOfTheMatch:SK.nullish(),participants:l.array(AK),type:l.literal("final")}),PK=l.discriminatedUnion("type",[kK,xK,RK]),jC=l.object({gameId:l.string(),leagueId:l.string(),venue:z2.nullish(),format:vG,status:bG,seriesInfo:EK,phase:PK}),OK=l.object({type:l.literal("sportsGame"),sport:l.literal("cricket"),game:jC}),NK=l.object({type:l.literal("sportsSchedule"),sport:l.literal("cricket"),games:l.array(jC),header:Ah.nullish(),heroGame:jC.nullable()}),MK=l.object({name:l.string(),countryFlagThumbnailUrl:l.string().nullish(),seed:l.number().nullish()}),LK=l.object({points:l.number(),isServing:l.boolean(),tieBreakerPoints:l.number().nullish(),currentGamePoints:l.string().nullish(),setWon:l.boolean().nullish()}),X2=l.object({players:l.array(MK)}),DK=X2,Z2=X2.extend({setPoints:l.array(LK)}),jK=Z2.extend({gameOutcome:Rc}),UK=l.object({type:l.literal("pre"),participants:l.array(DK)}),FK=l.object({type:l.literal("live"),participants:l.array(Z2)}),BK=l.object({type:l.literal("final"),participants:l.array(jK)}),HK=l.discriminatedUnion("type",[UK,FK,BK]),dk=l.object({gameId:l.string(),leagueId:l.string(),status:_G,startsAt:l.string().datetime().nullish(),startTimeToBeAnnounced:l.boolean(),venue:z2.nullish(),matchType:CG,round:SG.nullish(),phase:HK}),VK=l.object({type:l.literal("sportsSchedule"),sport:l.literal("tennis"),games:l.array(dk),header:Ah.nullish(),heroGame:dk.nullish()}),zK=l.union([rK,oK,vK,NK,VK]),$K=l.discriminatedUnion("sport",[aK,iK,yK,OK]),GK=l.union([zK,$K]),KK=l.object({title:l.string(),description:l.string(),startTime:l.number(),endTime:l.number()}),WK=l.object({video:l.object({url:l.string(),thumbnailUrl:l.string(),duration:l.number(),title:l.string(),isShort:l.boolean()}),source:l.object({url:l.string(),iconUrl:l.string().optional()}),bestMomentIndex:l.number().optional(),moments:l.array(KK).optional()}),qK=l.object({type:l.literal("video"),videos:l.array(WK)}),YK=l.enum(["c","f"]),QK=l.enum(["mm","cm","in"]),JK=l.enum(["hPa","inHg","mb","mmHg"]),XK=l.enum(["bft","kph","mph","ms"]),ZK=l.enum(["m","km","mi"]),eW=l.object({temperature:YK,height:QK,pressure:JK.optional(),speed:XK.optional(),distance:ZK.optional()}),qw=l.enum(jN),tW=l.enum(["rain","snow"]),Yw=l.object({type:tW,amount:l.number(),chance:l.number()}),nW=l.object({current:l.number(),high:l.number().optional(),low:l.number().optional()}),rW=l.object({at:l.string(),state:qw,summary:l.string(),description:l.string().optional(),temperature:nW,precipitation:Yw.optional()}),eM=l.object({high:l.number(),low:l.number()}),oW=l.object({date:l.string(),state:qw,temperature:eM,precipitation:Yw.optional()}),iW=l.object({at:l.string(),state:qw,temperature:eM,precipitation:Yw.optional()}),aW=l.object({daily:l.array(oW),hourly:l.array(iW).optional()}),sW=l.object({type:l.literal("weather"),location:l.string(),units:eW,spotlight:rW.optional(),forecast:aW}),$f=l.enum(jN),cW=l.object({type:l.literal("weatherTemperatureHourly"),location:l.string(),unit:l.union([l.literal("f"),l.literal("c")]),spotlight:l.object({date:l.string(),state:$f,summary:l.string(),temperature:l.number().optional(),high:l.number(),low:l.number()}),forecast:l.array(l.object({at:l.string(),state:$f,temperature:l.number(),precipitationChance:l.number()}))}),lW=l.object({type:l.literal("weatherTemperatureDaily"),location:l.string(),unit:l.union([l.literal("f"),l.literal("c")]),forecast:l.array(l.object({date:l.string(),state:$f,high:l.number(),low:l.number(),precipitationChance:l.number()}))}),tM=l.union([l.literal("rain"),l.literal("snow")]),nM=l.union([l.literal("in"),l.literal("mm")]),uW=l.object({type:l.literal("weatherPrecipitationHourly"),location:l.string(),unit:nM,precipitationType:tM,spotlight:l.object({date:l.string(),summary:l.string(),amount:l.number(),chance:l.number()}),forecast:l.array(l.object({at:l.string(),state:$f,amount:l.number(),chance:l.number()}))}),dW=l.object({type:l.literal("weatherPrecipitationDaily"),location:l.string(),unit:nM,precipitationType:tM,forecast:l.array(l.object({date:l.string(),state:$f,amount:l.number(),chance:l.number()}))}),fW=l.union([sW,cW,lW,uW,dW]),rM=l.union([Kz,u$,h$,m$,y$,b$,A$,E$,V$,z$,qz,dG,GK,qK,fW,W$]),zu=l.union([l.literal("startTask"),l.literal("pauseTask"),l.literal("resumeTask"),l.literal("cancelTask"),l.literal("takeTaskControl"),l.literal("releaseTaskControl")]),hW=l.union([l.literal("bringAgentTabsToForeground"),l.literal("failedTask"),l.literal("completedTask"),l.literal("moveAgentTabsToBackground"),l.literal("showConsentDialog")]);l.union([zu,hW]);const pW=l.union([l.literal("allSessionInfo"),l.literal("activeSessionInfo"),l.literal("failedTask"),l.literal("completedTask")]);l.union([zu,pW]);const mW=l.union([l.literal("allSessionInfo"),l.literal("activeSessionInfo"),l.literal("failedTask"),l.literal("completedTask")]);l.union([zu,mW]);const gW=l.union([l.literal("askUserInput"),l.literal("safetyRiskDetected"),l.literal("userTakeControl"),l.literal("giveBackControl"),l.literal("resumeFromInput"),l.literal("resumeFromRisk"),l.literal("pauseByClick"),l.literal("resumeByClick")]),vW=l.object({reason:gW,title:l.string().optional(),text:l.string().optional()}),$u=l.object({taskId:l.string()}),yW=$u.extend({type:l.literal("startTask")}),bW=$u.extend({type:l.literal("pauseTask")}),_W=$u.extend({type:l.literal("resumeTask")}),CW=$u.extend({type:l.literal("cancelTask")}),SW=$u.extend({type:l.literal("takeTaskControl")}),wW=$u.extend({type:l.literal("releaseTaskControl")}),ga=l.object({light:l.string(),dark:l.string()}),EW=l.object({foreground1:ga,foreground2:ga,accent:ga,shape:ga,shapeInverse:ga,background1:ga,background2:ga,background3:ga}),fk=l.object({name:l.enum(["ginto-copilot-nord-bold","ginto-copilot-nord-medium-italic","ginto-copilot-480","kari-regular"]),url:l.string().url()}),TW=l.object({name:l.string(),url:l.string().url()}),fu=l.object({url:l.string().url()}),hu=l.object({urlLight:l.string().url(),urlDark:l.string().url()}),UC=l.object({url:l.string().url()}),Gu=l.object({type:l.string(),title:l.string()}),IW=Gu.extend({type:l.literal("coverPage"),content:l.string(),template:l.enum(["image-background","fuzzy-image"]),image0:fu,sticker0:hu.nullish(),sticker1:hu.nullish()}),AW=Gu.extend({type:l.literal("heroImage"),content:l.string(),template:l.enum(["noisy-circle","macaron","wavy-shape"]),image0:fu}),kW=Gu.extend({type:l.literal("stickerSheet"),content:l.string(),template:l.enum(["sticker1","sticker2"]),sticker0:hu,sticker1:hu,accent0:UC,accent1:UC}),xW=Gu.extend({type:l.literal("simpleText"),content:l.string(),template:l.string().nullish()}),RW=Gu.extend({type:l.literal("photoJournal"),content:l.string().nullish(),template:l.enum(["shapes-only","shapes-accents"]),variation:l.enum(["shape-group1","shape-group2"]),label0:l.string(),label1:l.string(),image0:fu,image1:fu,sticker0:hu.nullish(),accent0:UC.nullish()}),PW=Gu.extend({type:l.literal("endPage"),content:l.string(),template:l.enum(["wide-cards","tall-cards"]),variation:l.enum(["shape-group1","shape-group2"]),questions:l.array(l.string()),image0:fu,image1:fu.nullish(),sticker0:hu}),OW=l.object({type:l.literal("shareDefault"),template:l.string().nullish()}),NW=l.discriminatedUnion("type",[IW,AW,kW,xW,RW,PW,OW]),MW=l.object({id:l.string(),modifiedAt:l.string(),theme:EW,font:fk,fontHandwriting:fk.nullish(),masks:l.array(TW),sections:l.array(NW)}),LW=l.object({type:l.literal("chatAboutNarrative"),narrativeId:l.string(),messageIndex:l.number()}),DW=l.object({type:l.literal("createPage"),messageId:l.string()}),jW=l.object({type:l.literal("appendToPage"),messageId:l.string(),pageId:l.string()}),UW=l.object({id:l.string(),conversationId:l.string()}),eTe=l.object({title:l.string().nullish(),content:l.string().nullish(),conversationId:l.string()}),FW=Ti.extend({type:l.literal("page"),page:l.object({id:l.string(),conversationId:l.string(),title:l.string().nullish()})}),BW=l.object({id:l.string(),title:l.string().nullish(),updatedAt:l.string(),conversationId:l.string().optional(),type:l.enum(["page","sharedPage"]).optional()}),HW=l.object({results:l.array(BW),next:l.string().nullish()}),tTe=l.object({title:l.string().nullish(),content:l.string().nullish(),page:l.object({id:l.string()}).nullable()}),nTe=l.object({id:l.string(),url:l.string()}),VW=l.enum(["page-count-exceeded","page-content-length-exceeded"]),zW=l.object({errorCode:VW}),$W=l.object({prompt:l.string()}),Qw=l.literal("executeTask"),GW=l.object({type:Qw,taskId:l.string(),context:$W.optional()}),KW=l.string(),WW=l.object({currentConversationId:l.string().nullable(),isNewUser:l.boolean(),banExpiresAt:l.string().nullable(),remainingTurns:l.number().nullable(),features:l.array(KW),allowBeta:l.boolean().nullish()}),qW=l.object({id:l.string(),name:l.string(),previewUrl:l.string(),voicemails:l.array(l.string())}),YW=l.object({id:l.string(),backgroundImageUrl:l.string()}),QW=l.object({id:l.string(),name:l.string(),location:YW.nullish()}),tr=l.object({type:l.string(),label:l.string()}),ds=l.object({type:l.string(),label:l.string(),subOptions:l.array(tr).nullish()}),oM=l.object({local:l.array(tr),ads:l.array(tr),video:l.array(tr),image:l.array(tr),sports:l.array(tr),job:l.array(tr),shopping:l.array(tr),finance:l.array(tr),quiz:l.array(tr),weather:l.array(tr)}),JW=l.object({positive:l.array(tr).nullish(),negative:l.array(tr)});oM.keyof();const iM=l.object({newsArticle:l.array(ds),newsVideo:l.array(ds),newsGem:l.array(ds),chat:l.array(ds),dailyBriefing:l.array(ds),podcast:l.array(ds),default:l.array(ds)});iM.keyof();const XW=l.object({text:l.array(tr),image:l.array(tr),call:l.array(tr),card:oM,showroom:JW.nullish(),discover:iM.nullish()}),ZW=l.object({signInPrompts:l.array(l.number()),voices:l.array(qW),maxTextMessageLength:l.number(),feedbackOptions:XW,characters:l.array(QW).nullish(),pageLimit:l.number(),maxPageContentLength:l.number(),maxPageTitleLength:l.number()});l.object({hasVisionAccess:l.boolean(),allowedDomains:l.array(l.string()).nullable(),allowedDomainSuffixes:l.array(l.string()).nullable(),blockedDomains:l.array(l.string()).nullable(),blockedDomainSuffixes:l.array(l.string()).nullable()});const hk=l.object({url:l.string(),duration:l.number()}),eq=l.object({title:l.string(),image:l.string(),url:l.string(),createdAt:l.string()}),tq=l.object({publisherName:l.string(),publisherIcon:l.string(),articles:l.array(eq)}),pk=l.object({url:l.string(),foregroundColor:l.string(),backgroundColor:l.string()}),mk=l.object({name:l.string(),foregroundColor:l.string(),backgroundColor:l.string(),altText:l.string().nullish(),url:l.string()}),nq=l.object({landscape:mk,portrait:mk}),rq=l.object({id:l.string(),title:l.string(),image:l.object({landscape:pk,portrait:pk}),audio:l.record(l.string(),hk),transitionMusic:hk.nullable(),sources:l.array(tq)}),aM=l.object({topics:l.array(l.object({id:l.string(),label:l.string(),imageUrl:l.string(),isFollowed:l.boolean()}))}),oq=l.object({position:l.number(),chapterId:l.string()}),sM=l.object({isAvailable:l.boolean(),podcastId:l.string(),chapters:l.array(rq),topics:aM.optional(),playback:oq}),iq=l.object({positionInSeconds:l.number(),chapterId:l.string()}),aq=l.object({id:l.string(),title:l.string(),topic:l.string().nullable().optional(),image:nq,audio:l.object({name:l.string(),duration:l.number()})}),Hm=l.object({isAvailable:l.boolean(),podcastId:l.string(),chapters:l.array(aq),playback:iq}),sq=l.enum(vB),cq=l.enum(mB),lq=l.enum(gB),uq=l.object({channel:lq,tier:cq,isAutoRenew:l.boolean()}),cM=l.object({id:l.string(),firstName:l.string().nullable(),anid:l.string().nullable(),isPro:l.boolean(),isDeprecated:l.boolean().nullish(),inEeaPlusRegion:l.boolean(),regionCode:l.enum(Object.values(Sh)),isHistoryMigrationPending:l.boolean(),isEligibleForFreeTrial:l.boolean().optional(),phoneLink:l.object({deviceName:l.string().nullable()}).nullable(),ageGroup:l.enum(hB).nullable(),allowedToggles:l.object({textTraining:l.boolean(),voiceTraining:l.boolean(),personalization:l.boolean()}),remainingCalls:l.object({reasoning:l.number(),podcastGeneration:l.number(),research:l.number()}).nullish(),accountTier:sq.nullish(),subscriptions:l.array(uq).nullish()}),dq=l.object({preferredVoice:l.string().nullable(),preferredCharacter:l.string().nullable().optional(),optOutOfTraining:l.boolean(),optInToVoiceTraining:l.boolean(),optOutOfPersonalization:l.boolean(),optOutOfPhoneConnection:l.boolean(),optInToGenerativeUI:l.boolean().optional(),allowBiometricDataUse:l.boolean().optional(),allowOneDriveAccess:l.boolean().optional(),features:l.object({suggestedFollowups:l.boolean().optional()}).nullish()}),lM=l.object({errorCode:l.union([l.literal("attachment-too-large"),l.literal("unsupported-content-type"),l.literal("empty-attachment"),l.literal("content-blocked"),l.literal("rate-limit-exceeded"),l.literal("not-signed-in")])}),fq=l.union([l.object({url:l.string()}),lM]),uM=l.union([l.object({id:l.string()}),lM]),hq=l.object({id:l.string(),title:l.string().optional(),updatedAt:l.string(),characterId:l.string().nullable().optional(),continuedAt:l.string().nullable()}),pq=l.object({results:l.array(hq),next:l.string().nullable()}),mq=l.object({id:l.string()}),kv=l.union([l.literal("running"),l.literal("completed"),l.literal("failed"),l.literal("cancelled"),l.literal("pending"),l.literal("paused")]),gq=l.union([l.literal("research"),l.literal("computerUse"),l.literal("podcast")]),vq=l.object({type:l.literal("chainOfThought"),text:l.string()}),yq=l.object({type:l.literal("query"),text:l.string()}),bq=l.object({type:l.literal("citation"),title:l.string(),url:l.string()}),_q=l.discriminatedUnion("type",[vq,yq,bq]),dM=l.object({title:l.string(),url:l.string(),position:l.number(),iconUrl:l.string().nullish(),publisher:l.string().nullish()}),Cq=l.object({id:l.string(),title:l.string().nullish(),contents:l.array(_q).nullish(),inlineCitations:l.array(dM).nullish(),partialOutput:l.array(l.string()).nullish(),finalResponse:l.string().nullish(),type:l.literal("research"),status:kv,prompt:l.string().optional()}),fM=l.object({url:l.string(),createdAt:l.string()}),Sq=l.object({type:l.literal("computerUse"),title:l.string().nullish(),conversationId:l.string().nullish(),id:l.string(),status:kv,lastScreenshot:fM.nullish(),updatedAt:l.string().nullish()}),hM=l.object({id:l.string(),title:l.string().nullish(),thumbnail:l.object({name:l.string().nullish()}).nullish()}),wq=l.object({type:l.literal("podcast"),id:l.string(),podcast:hM.nullish(),status:kv,updatedAt:l.string().nullish()}),pM=l.discriminatedUnion("type",[Cq,Sq,wq]),Jw=l.object({id:l.string(),title:l.string().optional(),conversationId:l.string().optional(),updatedAt:l.string(),status:kv,type:gq}),Eq=Jw.extend({type:l.literal("research")}),Tq=Jw.extend({type:l.literal("computerUse"),screenshot:l.string().nullish(),lastScreenshot:fM.nullish(),chainOfThought:l.array(l.string()).nullish(),computerAction:l.string().nullish(),statusChange:vW.optional(),lastUserCommand:zu.optional(),activeTabFaviconUrl:l.string().nullish(),activeTabTitle:l.string().nullish(),isReplaying:l.boolean().nullish()}),Iq=Jw.extend({type:l.literal("podcast"),podcast:hM.nullish()}),Aq=l.discriminatedUnion("type",[Eq,Tq,Iq]),rTe=l.object({results:l.array(Aq),next:l.string().nullable()}),xh=l.union([l.literal("thumbs-down"),l.literal("thumbs-up"),l.literal("report"),l.null()]),kq=l.union([l.literal("generating"),l.literal("generated"),l.literal("failed"),l.literal("non-complete")]),mM=l.object({id:l.string(),createdAt:l.string()}),xq=l.object({index:l.string(),title:l.string(),url:l.string(),iconUrl:l.string().nullable(),publisher:l.string().nullable()}),Rq=Ti.extend({type:l.literal("image"),url:l.string().optional(),prompt:l.string().optional().nullable(),isPartiallyLoading:l.boolean().optional(),reaction:xh.optional(),partialGenerationStep:l.number().optional(),status:kq.optional(),progressionText:l.string().nullable().optional()}),Pq=Ti.extend({type:l.literal("citation"),...dM.shape}),Oq=Ti.extend({type:l.literal("text"),text:l.string(),citations:l.array(xq).optional(),reaction:xh.optional()}),Nq=Ti.extend({type:l.literal("task"),task:pM.nullish(),reaction:xh.optional()}),Mq=Ti.extend({type:l.literal("card"),card:rM,reaction:xh.optional()}),Lq=Ti.extend({type:l.literal("deleted"),partType:l.enum(["page","task"])}),Dq=Ti.extend({type:l.literal("error"),text:l.string()}),jq=l.object({text:l.string(),lastSubActionScreenshotUrl:l.string().nullish()}),Uq=Ti.extend({type:l.literal("chainOfThought"),text:l.string(),screenshotUrl:l.string().nullish(),reaction:xh.optional(),partId:l.string(),items:l.array(jq).optional(),subAction:l.string().optional()}),Fq=l.discriminatedUnion("type",[Oq,Rq,FW,Pq,Dq,Mq,Nq,Lq,Uq,Pz]),Bq=l.object({type:l.literal("text"),text:l.string()}),Hq=l.object({type:l.literal("browserTabs"),tabs:l.array(l.object({title:l.string().optional(),url:l.string().optional(),id:l.number().optional(),favIconUrl:l.string().optional(),windowId:l.number()}))}),Vq=l.object({type:l.literal("image"),url:l.string()}),zq=l.object({type:l.literal("document"),partId:l.string(),fileName:l.string(),contentType:l.string()});l.object({type:l.literal("document"),attachmentId:l.string()});const $q=l.union([zu,Qw]);l.union([l.literal("createPage"),l.literal("appendToPage"),l.literal("promptCharacterSpeech"),zu,l.literal("chatAboutNarrative"),Qw]);const Gq=l.object({type:l.literal("promptCharacterSpeech")}),Kq=l.discriminatedUnion("type",[DW,jW,yW,bW,_W,CW,SW,wW,Gq,LW,GW]),Wq=l.object({type:l.literal("command"),command:Kq}),qq=l.object({type:l.literal("dailyBriefing"),chapterId:l.string()}),Yq=l.object({type:l.literal("greeting"),greetingMessage:l.string()}),Qq=l.discriminatedUnion("type",[qq,Yq]);l.object({type:l.literal("reference"),reference:Qq});const Jq=l.discriminatedUnion("type",[Bq,Vq,zq,Wq,Hq]),Xq=l.union([l.literal("chat"),l.literal("reasoning"),l.literal("research"),l.literal("computerUse")]),Zq=mM.extend({author:l.literal("ai"),content:l.array(Fq),mode:Xq.optional()}),eY=mM.extend({author:l.literal("human"),content:l.array(Jq)}),gM=l.discriminatedUnion("author",[Zq,eY]),vM=l.object({results:l.array(gM),next:l.string().nullable()}),tY=l.object({messages:l.array(gM),conversationTitle:l.string()}),oTe=l.object({url:l.string()}),nY=l.object({conversation:l.object({id:l.string(),title:l.string()})});l.object({qc:l.object({q:l.string(),gt:l.string(),sc:l.string()}),s:l.array(l.object({st:l.string(),t:l.string()}))});const Xw=l.union([l.literal("active"),l.literal("banned"),l.literal("ineligible")]),Zw=l.union([l.literal("active"),l.literal("not-started"),l.literal("expired"),l.literal("paused")]),rY=l.union([l.literal("not-started"),l.literal("completed"),l.literal("ineligible")]),oY=l.object({id:l.string(),type:l.string(),points:l.number()}),iY=l.object({redeemableCount:l.number(),redeemedCount:l.number(),skus:l.array(oY)}),iTe=l.object({userStatus:Xw,status:Zw,startAt:l.string(),endAt:l.string(),referralCode:l.string().nullish(),referralTaskStatus:rY.nullish(),rewards:iY.nullish()}),aTe=l.object({userStatus:Xw.nullish(),programStatus:Zw}),sTe=l.object({userStatus:Xw.nullish(),programStatus:Zw,lastRequestTime:l.string(),userId:l.string()}),pb=l.enum(["prefillComposer","sendMessage","deepLink"]),eE=l.discriminatedUnion("type",[l.object({type:l.literal(pb.enum.prefillComposer),prompt:l.string()}),l.object({type:l.literal(pb.enum.sendMessage),prompt:l.string()}),l.object({type:l.literal(pb.enum.deepLink),uri:l.string()})]),aY=l.object({id:l.string(),text:l.string(),action:eE}),sY=l.object({id:l.string(),text:l.string(),thumbnail:l.object({url:l.string(),altText:l.string()}),action:eE}),cY=l.object({id:l.string(),text:l.string(),action:eE}),lY=l.discriminatedUnion("type",[l.object({type:l.literal("text"),id:l.literal("conversation-starter"),title:l.string().nullish(),items:l.array(aY)}),l.object({type:l.literal("textAndImage"),id:l.union([l.literal("feature-discovery"),l.literal("kickstarter"),l.literal("image-generation")]),title:l.string().nullish(),items:l.array(sY)}),l.object({type:l.literal("textAndGreeting"),id:l.string(),title:l.string().nullish(),greeting:l.string().nullish(),items:l.array(cY)})]),uY=l.object({widgets:l.array(lY)}),dY=l.object({dPPRank:l.string()}),fY=l.object({query:l.string(),source:l.string(),metadata:dY});l.object({suggestedQueries:l.array(fY),url:l.string()});const hY=l.union([l.string(),l.number(),l.boolean(),l.null()]),Gf=l.lazy(()=>l.union([hY,l.array(Gf),l.record(Gf)])),pY=l.object({op:l.literal("add"),path:l.string(),value:Gf}),mY=l.object({op:l.literal("remove"),path:l.string()}),gY=l.object({op:l.literal("replace"),path:l.string(),value:Gf}),vY=l.object({op:l.literal("move"),from:l.string(),path:l.string()}),yY=l.object({op:l.literal("copy"),from:l.string(),path:l.string()}),bY=l.object({op:l.literal("test"),path:l.string(),value:Gf}),_Y=l.discriminatedUnion("op",[pY,mY,gY,vY,yY,bY]),gk=l.array(_Y),CY=l.union([l.literal("event-not-recognized"),l.literal("over-turn-limit"),l.literal("unknown-error"),l.literal("message-too-large"),l.literal("invalid-event"),l.literal("empty-message"),l.literal("empty-text"),l.literal("text-too-long"),l.literal("multiple-text-parts"),l.literal("multiple-image-parts"),l.literal("too-many-messages"),l.literal("over-reasoning-quota"),l.literal("over-task-quota"),l.literal("page-content-length-exceeded"),l.literal("page-count-exceeded"),l.literal("character-out-of-capacity"),l.string()]),SY=l.union([l.literal("blocked"),l.literal("not-signed-in"),l.literal("failed"),l.string()]),yM=l.union([l.literal("quiz"),l.literal("generative-ui")]),bM=l.union([l.literal("throttled"),l.literal("throttled-non-pro"),l.literal("time-expired"),l.literal("time-expired-non-pro"),l.literal("not-in-flight"),l.literal("error"),l.literal("signed-out"),l.literal("region-not-available"),l.literal("time-expired-month"),l.literal("time-expired-month-non-pro")]),wY=l.object({voice:l.string().optional(),speed:l.number().min(50).max(200).optional()}).partial(),vk=l.number().min(0).max(200).default(100),yk=l.union([l.literal("standard"),l.literal("character")]),bk=l.discriminatedUnion("event",[Uw,l.object({event:l.literal("pong"),id:l.string()}),l.object({event:l.literal("connected"),id:l.string(),requestId:l.string()}),l.object({event:l.literal("received"),conversationId:l.string(),messageId:l.string(),createdAt:l.string()}),l.object({event:l.literal("emojiReaction"),messageId:l.string(),emoji:l.string()}),l.object({event:l.literal("startMessage"),conversationId:l.string(),messageId:l.string(),createdAt:l.string()}),l.object({event:l.literal("appendText"),messageId:l.string(),text:l.string(),partId:l.string()}),l.object({event:l.literal("replaceText"),messageId:l.string(),text:l.string(),partId:l.string()}),l.object({event:l.literal("titleUpdate"),conversationId:l.string(),title:l.string()}),l.object({event:l.literal("generatingImage"),messageId:l.string(),prompt:l.string(),partId:l.string(),progressionText:l.string().nullable().optional()}),l.object({id:l.string(),event:l.literal("generatingImages"),messageId:l.string(),partIds:l.array(l.string()),prompt:l.string()}),l.object({event:l.literal("imageGenerated"),messageId:l.string(),url:l.string(),partId:l.string()}),l.object({event:l.literal("partialImageGenerated"),messageId:l.string(),url:l.string(),partId:l.string(),content:l.string()}),l.object({event:l.literal("page"),messageId:l.string(),partId:l.string(),page:l.object({id:l.string(),conversationId:l.string(),title:l.string().nullish()})}),l.object({event:l.literal("challenge")}),l.object({event:l.literal("imageGenerationFailed"),messageId:l.string(),errorCode:SY,partId:l.string()}),l.object({id:l.string(),event:l.literal("generatingCard"),messageId:l.string(),partId:l.string(),type:yM}),l.object({id:l.string(),event:l.literal("cardGenerationFailed"),messageId:l.string(),partId:l.string()}),l.object({event:l.literal("audioStart"),conversationId:l.string()}),l.object({event:l.literal("audio"),audio:l.string()}),l.object({event:l.literal("audioStartFailed"),reason:bM}),l.object({event:l.literal("audioTimeRemaining"),seconds:l.number()}),l.object({event:l.literal("callTerminated"),reason:l.string().optional()}),l.object({event:l.literal("audioEnd")}),l.object({event:l.literal("audioConfig"),options:wY}),l.object({event:l.literal("interruptAudio")}),l.object({event:l.literal("speechEndDetected")}),l.object({event:l.literal("citation"),messageId:l.string(),url:l.string(),title:l.string(),partId:l.string(),iconUrl:l.string().nullable(),publisher:l.string().nullable()}),l.object({event:l.literal("chainOfThought"),messageId:l.string(),partId:l.string(),text:l.string()}),l.object({event:l.literal("turnLimitReached"),id:l.string()}),l.object({event:l.literal("done"),messageId:l.string()}),l.object({event:l.literal("error"),errorCode:CY}),l.object({event:l.literal("card"),messageId:l.string(),partId:l.string(),card:rM}),l.object({event:l.literal("banned"),expiresAt:l.string()}),l.object({id:l.string(),event:l.literal("suggestedFollowups"),messageId:l.string(),suggestions:l.array(l.string())}),l.object({event:l.literal("taskStart"),id:l.string(),messageId:l.string(),partId:l.string(),task:pM}),l.object({event:l.literal("taskUpdate"),id:l.string().nullish(),taskId:l.string(),update:gk}),l.object({event:l.literal("startSuggestion"),id:l.string(),pageId:l.string(),suggestionId:l.string(),editTargets:l.array(l.object({startIndex:l.number(),endIndex:l.number()}))}),l.object({event:l.literal("appendSuggestion"),id:l.string(),pageId:l.string(),suggestionId:l.string(),text:l.string()}),l.object({event:l.literal("characterAnimation"),id:l.string(),offsetInMilliseconds:l.number().nullable().optional(),frame:l.discriminatedUnion("model",[Ez,Tz]).nullable().optional()}),l.object({event:l.literal("setCallType"),callType:yk}),l.object({event:l.literal("callTypeChanged"),callType:yk}),l.object({event:l.literal("activityStart"),activity:NC,id:l.string(),messageId:l.string(),partId:l.string()}),l.object({event:l.literal("activityUpdate"),id:l.string(),messageId:l.string(),partId:l.string(),update:gk})]),EY={kAccepted:1};function cTe(t){return typeof t=="object"&&t!==null&&"eventName"in t&&"requestId"in t&&(!("isOutgoing"in t)||!t.isOutgoing)&&"args"in t}const _k="mobileCrossSellingLastClosed",mb="mobilePromoCountClose",Vm="hasBeenAuthenticated",zm="colorTheme",tE="newConversationsStarted",Kf="timeOfNewConversationThreshold",Ck="hasCorrectedPersonalizationSettings",FC="banAppealSubmitted",TY="hideDeleteConversationModal",IY="hasBeenPromptedForLocation",AY="hasSeenCharacter",Sk="voiceAppearanceId",kY="hasSeenAppearance",xY="hasSeenAppearanceOnVoiceCall",RY="hasDismissedAppearanceModal",BC="crossPromoFirstVisit",nE="crossPromoDiscoverStripLastClosed",$m="crossPromoDiscoverStripCountClose",lTe="crossPromoStripGetAppIsClicked",wk="reviewActiveDays",HC="reviewPromptResponse",_M="userSidebarOpen",uTe="referralEligibilityStatus",dTe="referralHasSeenEntryNewBadge",fTe="coachmark.pagesEditThisResponse",VC="isEagerMSALEnabled",CM="isMsalSilentSsoEnabled",SM="user.UserFirstName",zC="loginStartTime",$C="reauthLoginFlag",hTe="subscription.m365SubscriberFRE",Ek="userConversationVoiceSpeed";function Qn(t,e){typeof window<"u"&&localStorage.setItem(t,e)}function hn(t){return typeof window<"u"?localStorage.getItem(t):null}function Ho(t){typeof window<"u"&&localStorage.removeItem(t)}function Ii(t,e){const n=hn(t);if(!n)return null;try{const r=JSON.parse(n);return e.parse(r)}catch{return null}}function sc(t,e,n){try{e.parse(n),Qn(t,JSON.stringify(n))}catch{}}function rE(t){const{key:e,schema:n,initialValue:r}=t;return $F(e,r,{getItem:()=>Ii(e,n)??r,setItem:(i,a)=>{a===void 0?Ho(e):sc(e,n,a)},removeItem:()=>Ho(e)},{getOnInit:!0})}const ar=G(void 0),xv=G(t=>t(ar)!==void 0),wM=rE({key:SM,schema:l.string().optional(),initialValue:void 0}),EM=G(t=>{const e=t(ar),n=t(wM);return e===void 0?n:e.firstName??e.givenName}),PY=G(t=>{var e;return(e=t(ar))==null?void 0:e.id}),Rh=G(void 0),pTe=G(t=>t(Cv).find(e=>e.id===t(Rh))),mTe=G(t=>{var r,o;const e=t(Cv),n=t(Rh)??((r=e[0])==null?void 0:r.id);return(o=e.find(i=>i.id===n))==null?void 0:o.voicemails}),TM=rE({key:Ek,schema:vk,initialValue:Ii(Ek,vk)??vv}),Ks=rE({key:Sk,schema:ak,initialValue:Ii(Sk,ak)??void 0}),IM=G(null),Ph=G(null),AM=G(t=>t(xw).find(e=>e.id===t(Ph))),gTe=G(!1),vTe=G(EY.kAccepted),kM=G(void 0),oE=G(!1),iE=G(void 0),OY=G(!1),xM=G(void 0),NY=G(!1),aE=G(null),sE=G(null),MY=G(!0),yTe=G(!1),bTe=G(!1),Oh=G(t=>{const e=t(ar),n=t(Du("cmc-m365-sku")),r=!!(e!=null&&e.isPro),o=(e==null?void 0:e.subscriptions)??[];return n&&o.some(i=>i.tier==="pro")||r}),LY=G(t=>{var e;return(e=t(ar))==null?void 0:e.isStudent});G(t=>{var e;return(e=t(ar))==null?void 0:e.inEeaPlusRegion});const no=G(void 0),DY=G(!1);G(t=>{const e=t(no);return e&&kB.includes(e)});const RM=G(void 0),Rv=G(t=>{var e;return((e=t(ar))==null?void 0:e.isEligibleForFreeTrial)??!1}),PM=G(void 0),cE=G(t=>{var e;return((e=t(ar))==null?void 0:e.ageGroup)==="teen"}),jY=G(t=>{var e;return(e=t(ar))==null?void 0:e.allowedToggles.personalization}),UY=G(t=>{var e;return(e=t(ar))==null?void 0:e.allowedToggles.textTraining}),FY=G(t=>{var e;return(e=t(ar))==null?void 0:e.allowedToggles.voiceTraining}),OM=G(!1),NM=G(null),MM=G(t=>{var e;return((e=t(ar))==null?void 0:e.subscriptions)??[]}),_Te=G(t=>{const e=t(MM);return wz(e)[0]});function BY(){const t=de("character-animation-spda2e"),e=de("character-animation-vasa"),n=F(Ks);return(t||e)&&!!n}function LM(){const t=ot("character-animation-spda2e"),e=ot("character-animation-vasa"),n=ct().get(Ks);return(t||e)&&!!n}function cp(t){return E2.includes(t)}const HY="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/meshopt_decoder-3Kt66jYv.js",On=class On{static async loadLibraries(){const[e,,n]=await Promise.all([T(()=>import("./index-_DkoQ4Jo.js").then(r=>r.c),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13,14,1,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162])),T(()=>import("./index-1H6fBlT3.js").then(r=>r.b),__vite__mapDeps([163,164,3,4,21,6,7,12,165,166,22,23,1,92,167,168,138,30,31,93,28,169,140,170,146,171,172,173,174,145,96,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,9,10,11,196,197,198,199,33,34,200,201,202,203,204])),T(()=>import("./math.scalar.functions-C0i4R8fp.js").then(r=>r.f),[])]);e.MeshoptCompression.Configuration={decoder:{url:HY}},On.Core=e,On.Math=n,On.isInitialized=!0}static async loadViewerLibraries(){const e=await T(()=>import("./index-Ckd9NQMy.js").then(n=>n.i),__vite__mapDeps([205,13,3,4,8,165,206]));On.Viewer=e}static async loadDebugLibraries(){await On.loadLibraries(),await T(()=>import("./babylon.inspector.bundle.max-uvLxfp4f.js").then(e=>e.b),__vite__mapDeps([207,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,208,209,210,164,165,166,163,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,211,206,212,213]))}static isLoaded(){return On.isInitialized}static getCore(){return On.throwIfNotInitialized("Core"),On.Core}static getMath(){return On.throwIfNotInitialized("Core"),On.Math}static getViewer(){return On.throwIfNotInitialized("Viewer"),On.Viewer}static throwIfNotInitialized(e){if(!On.isInitialized)throw new Error(`Libraries ${e} are not loaded yet. Call loadLibraries first.`)}};Z(On,"Core"),Z(On,"Math"),Z(On,"Viewer"),Z(On,"isInitialized",!1);let pu=On;function CTe(t){const e=t.split(/[\\/]/),n=e.pop();return{basePath:`${e.join("/")}/`,fileName:n??""}}function STe(t,e){Y.trackEvent({name:"interaction",data:{eventName:"characterAnimation",eventInfo_characterAnimationState:t,eventInfo_characterId:e}})}function wTe(t,e){const{Texture:n}=pu.getCore();return new Promise((r,o)=>{const i=new n(t,e,!1,!1,1,()=>{r(i)},o)})}function ETe(t){const{Vector3:e}=pu.getCore();return new e(t[0],t[1]??0,t[2]??0)}function TTe(t){return Math.max(...t)-Math.min(...t)}function ITe(t){return t*Math.PI/180}function ATe(t){const{Clamp:e}=pu.getMath();return e(t,0,1)}function VY(t,e,n){return Math.abs(t-e)>n?e:t}function kTe(t,e,n=.01,r=.2){const{MoveTowards:o}=pu.getMath();return o(t,VY(t,e,n),r)}let Tk;function Pd(...t){Tk===void 0&&(Tk=ot("babylon-debug"))}class zY{constructor(){Z(this,"resourceObserver");Z(this,"entries",[]);Z(this,"keyword",null);this.resourceObserver=new PerformanceObserver(e=>{this.handleResources(e)})}trackStart(e){this.keyword=e,this.resourceObserver.observe({type:"resource",buffered:!1})}trackEnd(){const{entries:e}=this,n=e[e.length-1];return this.resourceObserver.disconnect(),this.entries=[],this.keyword=null,n?{name:n.name,duration:Math.round(n.duration)}:null}handleResources(e){if(this.keyword)for(const n of e.getEntries())n.name.includes(this.keyword)&&this.entries.push(n)}}class $Y{constructor(){Z(this,"interactTime",0);Z(this,"voiceChatToggledTime",0);Z(this,"speechEndDetectedTime",0);Z(this,"startMessageTime",0);Z(this,"mountedTime",0);Z(this,"libsLoadedTime",0);Z(this,"sceneInitializedTime",0);Z(this,"interactSource","");Z(this,"currentConversationId","");Z(this,"currentMessageId","");Z(this,"visualizerEnabled",!1);Z(this,"loadedEnd",!1);Z(this,"voiceChatToggledOn",!1);Z(this,"resourceMonitor",new zY);Z(this,"resetLoading",()=>{Pd("%c[] -> resetAppearanceEvent"),this.interactTime=0,this.visualizerEnabled=!1,this.loadedEnd=!1});Z(this,"isAvailable",()=>LM()&&this.voiceChatToggledOn);Z(this,"trackLoadingEvent",e=>{if(!this.isAvailable()||this.interactTime===0)return;const{eventName:n,duration:r,characterId:o,networkDuration:i}=e;if(o&&!cp(o))return;const s=["voiceChatToggled","appearanceVisible","appearanceLoadingComplete"].includes(n),c=!hn(kY);Y.trackEvent({name:"system",data:{eventName:n,eventInfo_duration:Math.round(r),eventInfo_conversationId:this.currentConversationId,eventInfo_firstTime:c,eventInfo_characterId:o,eventInfo_trigger:s?this.interactSource:void 0,eventInfo_networkDuration:i}}),Pd(`%c[] -> ${n} : `,"color: #691dc6",Math.round(r),c?"firstTime":"",o?`characterId: ${o}`:"")});Z(this,"onUserInteract",e=>{this.resetLoading(),this.interactTime=performance.now(),this.interactSource=e,Pd("%c[] -> onUserInteract","color: #222222")});Z(this,"onVoiceChatToggled",(e,n)=>{if(e==="end")this.voiceChatToggledOn=!1,this.speechEndDetectedTime=0,this.resourceMonitor.trackEnd();else{this.voiceChatToggledOn=!0,this.voiceChatToggledTime=performance.now(),this.currentConversationId=n??"";const r=this.voiceChatToggledTime-this.interactTime;this.trackLoadingEvent({eventName:"voiceChatToggled",duration:r})}});Z(this,"onMounted",()=>{this.mountedTime=performance.now();const e=this.mountedTime-this.voiceChatToggledTime;this.trackLoadingEvent({eventName:"appearanceMounted",duration:e})});Z(this,"onBabylonLibrariesLoaded",e=>{if(!cp(e))return;this.libsLoadedTime=performance.now();const n=this.libsLoadedTime-this.mountedTime;this.trackLoadingEvent({eventName:"appearanceBabylonLoaded",duration:n,characterId:e})});Z(this,"onSceneInitializationStart",e=>{cp(e)&&this.resourceMonitor.trackStart(".glb")});Z(this,"onSceneInitialized",e=>{if(!cp(e))return;this.sceneInitializedTime=performance.now();const n=this.sceneInitializedTime-this.libsLoadedTime,r=this.resourceMonitor.trackEnd();Pd("%c[] -> monitorResult : ","color: #5bb173",r),this.trackLoadingEvent({eventName:"appearanceSceneInitialized",duration:n,characterId:e,networkDuration:r?r.duration:void 0}),this.trackLoadingEvent({eventName:"appearanceLoadingComplete",duration:this.sceneInitializedTime-this.interactTime,characterId:e}),this.loadedEnd=!0,this.checkEnd()});Z(this,"onVisualizerEnabled",()=>{if(this.visualizerEnabled)return;this.visualizerEnabled=!0;const e=Math.round(performance.now()-this.interactTime);this.trackLoadingEvent({eventName:"appearanceVisible",duration:e}),this.checkEnd()});Z(this,"checkEnd",()=>{this.visualizerEnabled&&this.loadedEnd&&this.resetLoading()});Z(this,"onStartMessage",(e,n)=>{this.currentMessageId=e,this.startMessageTime=n});Z(this,"onSpeechEndDetected",e=>{this.speechEndDetectedTime=e});Z(this,"onAnimationStart",()=>{if(!this.isAvailable())return;const e=Math.round(performance.now()-(this.speechEndDetectedTime||this.startMessageTime));Y.trackEvent({name:"system",data:{eventName:"copilotAnimationStart",eventInfo_conversationId:this.currentConversationId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:e}}),Pd("%c[] -> onAnimationStart : ","color: #691dc6",Math.round(e))})}}const Gm=new $Y,GY=1e3;function DM(t){(t.source==="audioCallButton"||t.source==="characterTalkToggleButton")&&Gm.onUserInteract(t.source)}function bn(t){Y.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:t.source,eventInfo_clickScenario:t.scenario,eventInfo_clickDestination:t.destination,eventInfo_conversationId:t.conversationId,eventInfo_podcastId:t.podcastId,eventInfo_messageId:t.messageId,eventInfo_mode:t.chatMode,eventInfo_messageType:t.messageType,eventInfo_cardType:t.cardType,eventInfo_merchantPlatform:t.merchantPlatform,eventInfo_additionalData:t.additionalData?JSON.stringify(t.additionalData):void 0}}),DM(t)}function dt(t){Y.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_pageName:t.pageName,eventInfo_sectionName:t.sectionName,eventInfo_clickSource:t.source,eventInfo_clickScenario:t.scenario,eventInfo_clickDestination:t.destination,eventInfo_conversationId:t.conversationId,eventInfo_customData:t.customData}}),DM(t)}function Ku(t){Y.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionScenario:t.scenario,eventInfo_impressionPage:t.page,eventInfo_impressionElement:t.element,eventInfo_status:t.status,eventInfo_customData:t.customData}})}function Wu(t){Y.trackEvent({name:"health",data:{eventName:"copilotFeatureSuccess",eventInfo_feature:t.feature,eventInfo_scenario:t.scenario,eventInfo_duration:t.duration,eventInfo_customData:t.customData}})}function cc(t){Y.trackEvent({name:"health",data:{eventName:"copilotError",eventInfo_feature:t.feature,eventInfo_scenario:t.scenario,eventInfo_errorType:t.errorType,eventInfo_errorMessage:t.errorMessage,eventInfo_exception:t.exception,eventInfo_customData:t.customData}})}function KY(t){Y.trackEvent({name:"interaction",data:{eventName:"copilotSettingChange",eventInfo_settingName:t.settingName,eventInfo_settingOldValue:t.oldValue,eventInfo_settingNewValue:t.newValue}})}function xTe(t,e=GY){let n;function r(){n=window.setTimeout(()=>{t()},e)}function o(){window.clearTimeout(n)}return{onHoverStart:r,onHoverEnd:o}}function jM(t,e,n,r){setTimeout(async()=>{try{const{status:o}=r,i=await bz(r),a=r.headers.get("x-ceto-ref")??"";Y.trackEvent({name:"apiresponse",data:{eventName:"copilotApiResponse",eventInfo_path:t,eventInfo_method:e,eventInfo_status:o,eventInfo_duration:n,eventInfo_responseContentLength:i,eventInfo_cetoRef:a}})}catch{}},0)}const ri=ct(),WY="MissingUrlFromApi";function qY(t,e){const n=ri.get(Bo).get(t);return(n==null?void 0:n.type)==="computerUse"&&!n.lastUserCommand&&YY(n)&&e.some(o=>o.op==="replace"&&o.path==="/status"&&o.value==="paused")?e.some(o=>{if(o.op==="replace"&&o.path==="/statusChange"){const{value:i}=o;if(i&&typeof i=="object"&&"reason"in i)return i.reason==="userTakeControl"||i.reason==="pauseByClick"}return!1}):!1}function UM(t){return t==="paused"||t==="running"||t==="pending"}function YY(t){var e,n;return t.status==="paused"&&(((e=t.statusChange)==null?void 0:e.reason)==="safetyRiskDetected"||((n=t.statusChange)==null?void 0:n.reason)==="askUserInput")}function QY(t){var e;return t.status==="paused"&&((e=t.statusChange)==null?void 0:e.reason)==="safetyRiskDetected"}function RTe(t){var e;return t.status==="paused"&&((e=t.statusChange)==null?void 0:e.reason)==="userTakeControl"&&t.lastUserCommand==="takeTaskControl"}function gb(t,e=!1){return t.map(n=>({type:"chainOfThought",text:n.text,screenshotUrl:e?WY:null,reaction:null,partId:Math.random().toString()}))}function JY(t,e){const n=ri.get(Bo).get(t);if((n==null?void 0:n.type)==="computerUse"){const{conversationId:r,status:o,statusChange:i}=n;if(!r)return;if(o==="cancelled"&&on(r,u=>{const d=Ik(t,"cancelTask");u.push(d)}),e.some(u=>u.path==="/statusChange"&&"value"in u&&typeof u.value=="object"&&u.value.reason==="giveBackControl")?on(r,u=>{const d=Ik(t,"takeTaskControl");u.push(d)}):(i==null?void 0:i.reason)==="giveBackControl"&&Ak(t),i)switch(i.reason){case"askUserInput":case"safetyRiskDetected":{o==="paused"?(i.reason==="askUserInput"&&Wu({feature:"computerUse",scenario:"askUserInput",customData:JSON.stringify({id:n.id,conversationId:n.conversationId})}),r===ri.get(mt)||ri.set(m2,{title:n.title&&n.title!==""?ie("actions.alertTitleTemplate",{conversationName:n.title}):ie("actions.defaultAlertTitle"),subTitle:i.reason==="safetyRiskDetected"?ie("actions.safetyRiskAlertSubTitle"):ie("actions.askUserInputAlertSubTitle"),conversationId:n.conversationId??"",onClick:{action:"SWITCH_CONVERSATION"}}),Dw(t,d=>{"lastUserCommand"in d&&(d.lastUserCommand=void 0)})):Ak(t);break}}const s=e.filter(u=>u.op==="add"&&u.path==="/chainOfThought/-").map(u=>({text:"value"in u?u.value:""}));s.length>0&&on(r,u=>{if(u.length===0)return;const d=kk(u);if(d)d.push(...gb(s));else{const h={id:Math.random().toString(),createdAt:new Date().toISOString(),author:"ai",content:gb(s)};u.push(h)}}),e.filter(u=>u.op==="replace"&&u.path==="/computerAction").length>0&&on(r,u=>{const d=kk(u);d&&d.push(...gb([{text:n.computerAction??""}],!0))})}}function Ik(t,e){return{id:Math.random().toString(),createdAt:new Date().toISOString(),author:"human",content:[{type:"command",command:{type:e,taskId:t}}]}}function Ak(t){Dw(t,e=>{"statusChange"in e&&(e.statusChange=void 0)})}function kk(t){const e=t.at(-1);if(e&&e.author==="ai"&&e.content.find(n=>n.type==="chainOfThought"))return e.content}function PTe(t){const e=fz();return(e==null?void 0:e.type)==="computerUse"?e.status!=="running"&&!e.isReplaying?!0:!t:!0}function OTe(t){return!!(ot("labs-actions-replay")&&t&&t.type==="computerUse"&&!UM(t.status))}function NTe(t){return{cancelTask:"copilotActionsCancelTask",takeTaskControl:"copilotActionsTakeControl",startTask:void 0,pauseTask:void 0,resumeTask:void 0,releaseTaskControl:void 0}[t]}function FM(t,e){return b2({tasks:t,conversationId:e,taskType:"computerUse"})!==""}function BM(t){return b2({tasks:ri.get(Bo),conversationId:t,taskType:"computerUse"})}function XY(t,e){if(t===e&&ri.set(Xr,"side-by-side"),!ot("actions-auto-open-L2")||!t)return;const r=ri.get(mt);r&&ri.set(Ew,r),ri.set(mt,t),ri.set(Xr,"side-by-side")}function HM(){const t=es(En),[e,n]=et(mt),[r,o]=et(Ew),i=Se(ir),a=Se(Xr),s=F(Bo),c=F(Tw),u=wv(),d=Se(Bu);return m.useCallback(h=>{var _,b;const{id:p,shouldNavigateToChat:g=!0,shouldClearParentConversation:v=!0}=h;v&&e!==r&&o(null),n(p),d(!1),t(C=>{const w=C.get(p);if(w!=null&&w.history.length&&(w.isNew=!1),w!=null&&w.history.some(S=>S.content.some(E=>E.type==="card"&&E.card.type==="ads"))){for(const S of w.history)if(S.author==="ai"&&S.content.some(E=>E.type==="card"&&E.card.type==="ads")){const E=S.content.filter(I=>I.type!=="card"||I.card.type!=="ads");S.content=E}}}),c&&c!==p&&t(C=>{C.delete(c)});const y=((b=(_=S2(p))==null?void 0:_.part.task)==null?void 0:b.type)==="research";i(y?"research":"chat"),FM(s,p)?a("side-by-side"):a("chat-only"),g&&u({conversationId:p})},[e,r,n,d,t,c,i,s,o,a,u])}const GC=G(0),VM=G(void 0),Pv=G(!1),lE=G(t=>{const e=t(UV),n=t(FV),r=t(VM),o=t(Pv);if(!(n||o))return e||r}),qu=G(t=>{const e=t(lE),n=t(GC);if(!e||e.length===0)return;const r=Math.max(0,Math.min(n,e.length-1));return e[r]}),zM=G(t=>{const e=t(qu),n=t(Pv),r=t(lE);return n||!r?null:(e==null?void 0:e.type)==="textAndGreeting"?e.greeting??null:null}),ZY=G(t=>{const e=t(qu);return e==null?void 0:e.title}),eQ=G(t=>{const e=t(qu);return e==null?void 0:e.id}),tQ=G(t=>{const e=t(qu),n=e==null?void 0:e.id;return n==="feature-discovery"||n==="image-generation"||n==="kickstarter"}),nQ=G(null,(t,e)=>{const n=t(lE),r=t(GC);if(!n||n.length<=1)return;const o=(r+1)%n.length;e(GC,o)}),ks={UNDEFINED:"0",CHILD:"1",ADULT:"3",NOT_ADULT:"4",CHILD_NO_PARENTAL_CONSENT_REQUIRED:"5"},rQ=l.object({name:l.string(),email:l.string(),ageGroup:l.enum([ks.UNDEFINED,ks.CHILD,ks.ADULT,ks.NOT_ADULT,ks.CHILD_NO_PARENTAL_CONSENT_REQUIRED]),sub:l.string()}),Bi={LOGIN_START:"auth0:loginStart",LOGIN_SUCCESS:"auth0:loginSuccess",LOGIN_FAILURE:"auth0:loginFailure",LOGOUT_SUCCESS:"auth0:logoutSuccess",LOGOUT_FAILURE:"auth0:logoutFailure",ACQUIRE_TOKEN_FAILURE:"auth0:acquireTokenFailure",REAUTH_START:"auth0:reauthStart",INITIALIZE_START:"auth0:initializeStart",INITIALIZE_END:"auth0:initializeEnd"};function ti(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}var xs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function dE(t,e){return t(e={exports:{}},e.exports),e.exports}var Cs=dE(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function r(){var o=this;this.locked=new Map,this.addToLocked=function(i,a){var s=o.locked.get(i);s===void 0?a===void 0?o.locked.set(i,[]):o.locked.set(i,[a]):a!==void 0&&(s.unshift(a),o.locked.set(i,s))},this.isLocked=function(i){return o.locked.has(i)},this.lock=function(i){return new Promise(function(a,s){o.isLocked(i)?o.addToLocked(i,a):(o.addToLocked(i),a())})},this.unlock=function(i){var a=o.locked.get(i);if(a!==void 0&&a.length!==0){var s=a.pop();o.locked.set(i,a),s!==void 0&&setTimeout(s,0)}else o.locked.delete(i)}}return r.getInstance=function(){return r.instance===void 0&&(r.instance=new r),r.instance},r}();e.default=function(){return n.getInstance()}});uE(Cs);var oQ=uE(dE(function(t,e){var n=xs&&xs.__awaiter||function(d,h,p,g){return new(p||(p=Promise))(function(v,y){function _(w){try{C(g.next(w))}catch(S){y(S)}}function b(w){try{C(g.throw(w))}catch(S){y(S)}}function C(w){w.done?v(w.value):new p(function(S){S(w.value)}).then(_,b)}C((g=g.apply(d,h||[])).next())})},r=xs&&xs.__generator||function(d,h){var p,g,v,y,_={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(C){return function(w){return function(S){if(p)throw new TypeError("Generator is already executing.");for(;_;)try{if(p=1,g&&(v=2&S[0]?g.return:S[0]?g.throw||((v=g.return)&&v.call(g),0):g.next)&&!(v=v.call(g,S[1])).done)return v;switch(g=0,v&&(S=[2&S[0],v.value]),S[0]){case 0:case 1:v=S;break;case 4:return _.label++,{value:S[1],done:!1};case 5:_.label++,g=S[1],S=[0];continue;case 7:S=_.ops.pop(),_.trys.pop();continue;default:if(v=_.trys,!((v=v.length>0&&v[v.length-1])||S[0]!==6&&S[0]!==2)){_=0;continue}if(S[0]===3&&(!v||S[1]>v[0]&&S[1]<v[3])){_.label=S[1];break}if(S[0]===6&&_.label<v[1]){_.label=v[1],v=S;break}if(v&&_.label<v[2]){_.label=v[2],_.ops.push(S);break}v[2]&&_.ops.pop(),_.trys.pop();continue}S=h.call(d,_)}catch(E){S=[6,E],g=0}finally{p=v=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([C,w])}}},o=xs;Object.defineProperty(e,"__esModule",{value:!0});var i="browser-tabs-lock-key",a={key:function(d){return n(o,void 0,void 0,function(){return r(this,function(h){throw new Error("Unsupported")})})},getItem:function(d){return n(o,void 0,void 0,function(){return r(this,function(h){throw new Error("Unsupported")})})},clear:function(){return n(o,void 0,void 0,function(){return r(this,function(d){return[2,window.localStorage.clear()]})})},removeItem:function(d){return n(o,void 0,void 0,function(){return r(this,function(h){throw new Error("Unsupported")})})},setItem:function(d,h){return n(o,void 0,void 0,function(){return r(this,function(p){throw new Error("Unsupported")})})},keySync:function(d){return window.localStorage.key(d)},getItemSync:function(d){return window.localStorage.getItem(d)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(d){return window.localStorage.removeItem(d)},setItemSync:function(d,h){return window.localStorage.setItem(d,h)}};function s(d){return new Promise(function(h){return setTimeout(h,d)})}function c(d){for(var h="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",p="",g=0;g<d;g++)p+=h[Math.floor(Math.random()*h.length)];return p}var u=function(){function d(h){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+c(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=h,d.waiters===void 0&&(d.waiters=[])}return d.prototype.acquireLock=function(h,p){return p===void 0&&(p=5e3),n(this,void 0,void 0,function(){var g,v,y,_,b,C,w;return r(this,function(S){switch(S.label){case 0:g=Date.now()+c(4),v=Date.now()+p,y=i+"-"+h,_=this.storageHandler===void 0?a:this.storageHandler,S.label=1;case 1:return Date.now()<v?[4,s(30)]:[3,8];case 2:return S.sent(),_.getItemSync(y)!==null?[3,5]:(b=this.id+"-"+h+"-"+g,[4,s(Math.floor(25*Math.random()))]);case 3:return S.sent(),_.setItemSync(y,JSON.stringify({id:this.id,iat:g,timeoutKey:b,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,s(30)];case 4:return S.sent(),(C=_.getItemSync(y))!==null&&(w=JSON.parse(C)).id===this.id&&w.iat===g?(this.acquiredIatSet.add(g),this.refreshLockWhileAcquired(y,g),[2,!0]):[3,7];case 5:return d.lockCorrector(this.storageHandler===void 0?a:this.storageHandler),[4,this.waitForSomethingToChange(v)];case 6:S.sent(),S.label=7;case 7:return g=Date.now()+c(4),[3,1];case 8:return[2,!1]}})})},d.prototype.refreshLockWhileAcquired=function(h,p){return n(this,void 0,void 0,function(){var g=this;return r(this,function(v){return setTimeout(function(){return n(g,void 0,void 0,function(){var y,_,b;return r(this,function(C){switch(C.label){case 0:return[4,Cs.default().lock(p)];case 1:return C.sent(),this.acquiredIatSet.has(p)?(y=this.storageHandler===void 0?a:this.storageHandler,(_=y.getItemSync(h))===null?(Cs.default().unlock(p),[2]):((b=JSON.parse(_)).timeRefreshed=Date.now(),y.setItemSync(h,JSON.stringify(b)),Cs.default().unlock(p),this.refreshLockWhileAcquired(h,p),[2])):(Cs.default().unlock(p),[2])}})})},1e3),[2]})})},d.prototype.waitForSomethingToChange=function(h){return n(this,void 0,void 0,function(){return r(this,function(p){switch(p.label){case 0:return[4,new Promise(function(g){var v=!1,y=Date.now(),_=!1;function b(){if(_||(window.removeEventListener("storage",b),d.removeFromWaiting(b),clearTimeout(C),_=!0),!v){v=!0;var w=50-(Date.now()-y);w>0?setTimeout(g,w):g(null)}}window.addEventListener("storage",b),d.addToWaiting(b);var C=setTimeout(b,Math.max(0,h-Date.now()))})];case 1:return p.sent(),[2]}})})},d.addToWaiting=function(h){this.removeFromWaiting(h),d.waiters!==void 0&&d.waiters.push(h)},d.removeFromWaiting=function(h){d.waiters!==void 0&&(d.waiters=d.waiters.filter(function(p){return p!==h}))},d.notifyWaiters=function(){d.waiters!==void 0&&d.waiters.slice().forEach(function(h){return h()})},d.prototype.releaseLock=function(h){return n(this,void 0,void 0,function(){return r(this,function(p){switch(p.label){case 0:return[4,this.releaseLock__private__(h)];case 1:return[2,p.sent()]}})})},d.prototype.releaseLock__private__=function(h){return n(this,void 0,void 0,function(){var p,g,v,y;return r(this,function(_){switch(_.label){case 0:return p=this.storageHandler===void 0?a:this.storageHandler,g=i+"-"+h,(v=p.getItemSync(g))===null?[2]:(y=JSON.parse(v)).id!==this.id?[3,2]:[4,Cs.default().lock(y.iat)];case 1:_.sent(),this.acquiredIatSet.delete(y.iat),p.removeItemSync(g),Cs.default().unlock(y.iat),d.notifyWaiters(),_.label=2;case 2:return[2]}})})},d.lockCorrector=function(h){for(var p=Date.now()-5e3,g=h,v=[],y=0;;){var _=g.keySync(y);if(_===null)break;v.push(_),y++}for(var b=!1,C=0;C<v.length;C++){var w=v[C];if(w.includes(i)){var S=g.getItemSync(w);if(S!==null){var E=JSON.parse(S);(E.timeRefreshed===void 0&&E.timeAcquired<p||E.timeRefreshed!==void 0&&E.timeRefreshed<p)&&(g.removeItemSync(w),b=!0)}}}b&&d.notifyWaiters()},d.waiters=void 0,d}();e.default=u}));const iQ={timeoutInSeconds:60},$M={name:"auth0-spa-js",version:"2.1.3"},GM=()=>Date.now();class Wn extends Error{constructor(e,n){super(n),this.error=e,this.error_description=n,Object.setPrototypeOf(this,Wn.prototype)}static fromPayload({error:e,error_description:n}){return new Wn(e,n)}}let aQ=class KM extends Wn{constructor(e,n,r,o=null){super(e,n),this.state=r,this.appState=o,Object.setPrototypeOf(this,KM.prototype)}},KC=class WM extends Wn{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,WM.prototype)}},sQ=class qM extends KC{constructor(e){super(),this.popup=e,Object.setPrototypeOf(this,qM.prototype)}},cQ=class YM extends Wn{constructor(e){super("cancelled","Popup closed"),this.popup=e,Object.setPrototypeOf(this,YM.prototype)}},lQ=class QM extends Wn{constructor(e,n,r){super(e,n),this.mfa_token=r,Object.setPrototypeOf(this,QM.prototype)}},JM=class XM extends Wn{constructor(e,n){super("missing_refresh_token",`Missing Refresh Token (audience: '${xk(e,["default"])}', scope: '${xk(n)}')`),this.audience=e,this.scope=n,Object.setPrototypeOf(this,XM.prototype)}};function xk(t,e=[]){return t&&!e.includes(t)?t:""}const rm=()=>window.crypto,vb=()=>{const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.";let e="";return Array.from(rm().getRandomValues(new Uint8Array(43))).forEach(n=>e+=t[n%t.length]),e},Rk=t=>btoa(t),WC=t=>{var{clientId:e}=t,n=ti(t,["clientId"]);return new URLSearchParams((r=>Object.keys(r).filter(o=>r[o]!==void 0).reduce((o,i)=>Object.assign(Object.assign({},o),{[i]:r[i]}),{}))(Object.assign({client_id:e},n))).toString()},Pk=t=>(e=>decodeURIComponent(atob(e).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join("")))(t.replace(/_/g,"/").replace(/-/g,"+")),uQ=async(t,e)=>{const n=await fetch(t,e);return{ok:n.ok,json:await n.json()}},dQ=async(t,e,n)=>{const r=new AbortController;let o;return e.signal=r.signal,Promise.race([uQ(t,e),new Promise((i,a)=>{o=setTimeout(()=>{r.abort(),a(new Error("Timeout when executing 'fetch'"))},n)})]).finally(()=>{clearTimeout(o)})},fQ=async(t,e,n,r,o,i,a)=>{return s={auth:{audience:e,scope:n},timeout:o,fetchUrl:t,fetchOptions:r,useFormData:a},c=i,new Promise(function(u,d){const h=new MessageChannel;h.port1.onmessage=function(p){p.data.error?d(new Error(p.data.error)):u(p.data),h.port1.close()},c.postMessage(s,[h.port2])});var s,c},hQ=async(t,e,n,r,o,i,a=1e4)=>o?fQ(t,e,n,r,a,o,i):dQ(t,r,a);async function pQ(t,e){var{baseUrl:n,timeout:r,audience:o,scope:i,auth0Client:a,useFormData:s}=t,c=ti(t,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);const u=s?WC(c):JSON.stringify(c);return await async function(d,h,p,g,v,y,_){let b,C=null;for(let A=0;A<3;A++)try{b=await hQ(d,p,g,v,y,_,h),C=null;break}catch(N){C=N}if(C)throw C;const w=b.json,{error:S,error_description:E}=w,I=ti(w,["error","error_description"]),{ok:x}=b;if(!x){const A=E||`HTTP error. Unable to fetch ${d}`;throw S==="mfa_required"?new lQ(S,A,I.mfa_token):S==="missing_refresh_token"?new JM(p,g):new Wn(S||"request_error",A)}return I}(`${n}/oauth/token`,r,o||"default",i,{method:"POST",body:u,headers:{"Content-Type":s?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(a||$M))}},e,s)}const lp=(...t)=>{return(e=t.filter(Boolean).join(" ").trim().split(/\s+/),Array.from(new Set(e))).join(" ");var e};let Ls=class qC{constructor(e,n="@@auth0spajs@@",r){this.prefix=n,this.suffix=r,this.clientId=e.clientId,this.scope=e.scope,this.audience=e.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join("::")}static fromKey(e){const[n,r,o,i]=e.split("::");return new qC({clientId:r,scope:i,audience:o},n)}static fromCacheEntry(e){const{scope:n,audience:r,client_id:o}=e;return new qC({scope:n,audience:r,clientId:o})}},mQ=class{set(e,n){localStorage.setItem(e,JSON.stringify(n))}get(e){const n=window.localStorage.getItem(e);if(n)try{return JSON.parse(n)}catch{return}}remove(e){localStorage.removeItem(e)}allKeys(){return Object.keys(window.localStorage).filter(e=>e.startsWith("@@auth0spajs@@"))}},ZM=class{constructor(){this.enclosedCache=function(){let e={};return{set(n,r){e[n]=r},get(n){const r=e[n];if(r)return r},remove(n){delete e[n]},allKeys:()=>Object.keys(e)}}()}},gQ=class{constructor(e,n,r){this.cache=e,this.keyManifest=n,this.nowProvider=r||GM}async setIdToken(e,n,r){var o;const i=this.getIdTokenCacheKey(e);await this.cache.set(i,{id_token:n,decodedToken:r}),await((o=this.keyManifest)===null||o===void 0?void 0:o.add(i))}async getIdToken(e){const n=await this.cache.get(this.getIdTokenCacheKey(e.clientId));if(!n&&e.scope&&e.audience){const r=await this.get(e);return!r||!r.id_token||!r.decodedToken?void 0:{id_token:r.id_token,decodedToken:r.decodedToken}}if(n)return{id_token:n.id_token,decodedToken:n.decodedToken}}async get(e,n=0){var r;let o=await this.cache.get(e.toKey());if(!o){const s=await this.getCacheKeys();if(!s)return;const c=this.matchExistingCacheKey(e,s);c&&(o=await this.cache.get(c))}if(!o)return;const i=await this.nowProvider(),a=Math.floor(i/1e3);return o.expiresAt-n<a?o.body.refresh_token?(o.body={refresh_token:o.body.refresh_token},await this.cache.set(e.toKey(),o),o.body):(await this.cache.remove(e.toKey()),void await((r=this.keyManifest)===null||r===void 0?void 0:r.remove(e.toKey()))):o.body}async set(e){var n;const r=new Ls({clientId:e.client_id,scope:e.scope,audience:e.audience}),o=await this.wrapCacheEntry(e);await this.cache.set(r.toKey(),o),await((n=this.keyManifest)===null||n===void 0?void 0:n.add(r.toKey()))}async clear(e){var n;const r=await this.getCacheKeys();r&&(await r.filter(o=>!e||o.includes(e)).reduce(async(o,i)=>{await o,await this.cache.remove(i)},Promise.resolve()),await((n=this.keyManifest)===null||n===void 0?void 0:n.clear()))}async wrapCacheEntry(e){const n=await this.nowProvider();return{body:e,expiresAt:Math.floor(n/1e3)+e.expires_in}}async getCacheKeys(){var e;return this.keyManifest?(e=await this.keyManifest.get())===null||e===void 0?void 0:e.keys:this.cache.allKeys?this.cache.allKeys():void 0}getIdTokenCacheKey(e){return new Ls({clientId:e},"@@auth0spajs@@","@@user@@").toKey()}matchExistingCacheKey(e,n){return n.filter(r=>{var o;const i=Ls.fromKey(r),a=new Set(i.scope&&i.scope.split(" ")),s=((o=e.scope)===null||o===void 0?void 0:o.split(" "))||[],c=i.scope&&s.reduce((u,d)=>u&&a.has(d),!0);return i.prefix==="@@auth0spajs@@"&&i.clientId===e.clientId&&i.audience===e.audience&&c})[0]}},vQ=class{constructor(e,n,r){this.storage=e,this.clientId=n,this.cookieDomain=r,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(e){this.storage.save(this.storageKey,e,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}};const Od=t=>typeof t=="number",yQ=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],bQ=t=>{if(!t.id_token)throw new Error("ID token is required but missing");const e=(i=>{const a=i.split("."),[s,c,u]=a;if(a.length!==3||!s||!c||!u)throw new Error("ID token could not be decoded");const d=JSON.parse(Pk(c)),h={__raw:i},p={};return Object.keys(d).forEach(g=>{h[g]=d[g],yQ.includes(g)||(p[g]=d[g])}),{encoded:{header:s,payload:c,signature:u},header:JSON.parse(Pk(s)),claims:h,user:p}})(t.id_token);if(!e.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(e.claims.iss!==t.iss)throw new Error(`Issuer (iss) claim mismatch in the ID token; expected "${t.iss}", found "${e.claims.iss}"`);if(!e.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if(e.header.alg!=="RS256")throw new Error(`Signature algorithm of "${e.header.alg}" is not supported. Expected the ID token to be signed with "RS256".`);if(!e.claims.aud||typeof e.claims.aud!="string"&&!Array.isArray(e.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(t.aud))throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${t.aud}" but was not one of "${e.claims.aud.join(", ")}"`);if(e.claims.aud.length>1){if(!e.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(e.claims.azp!==t.aud)throw new Error(`Authorized Party (azp) claim mismatch in the ID token; expected "${t.aud}", found "${e.claims.azp}"`)}}else if(e.claims.aud!==t.aud)throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${t.aud}" but found "${e.claims.aud}"`);if(t.nonce){if(!e.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(e.claims.nonce!==t.nonce)throw new Error(`Nonce (nonce) claim mismatch in the ID token; expected "${t.nonce}", found "${e.claims.nonce}"`)}if(t.max_age&&!Od(e.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(e.claims.exp==null||!Od(e.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!Od(e.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");const n=t.leeway||60,r=new Date(t.now||Date.now()),o=new Date(0);if(o.setUTCSeconds(e.claims.exp+n),r>o)throw new Error(`Expiration Time (exp) claim error in the ID token; current time (${r}) is after expiration time (${o})`);if(e.claims.nbf!=null&&Od(e.claims.nbf)){const i=new Date(0);if(i.setUTCSeconds(e.claims.nbf-n),r<i)throw new Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${r}) is before ${i}`)}if(e.claims.auth_time!=null&&Od(e.claims.auth_time)){const i=new Date(0);if(i.setUTCSeconds(parseInt(e.claims.auth_time)+t.max_age+n),r>i)throw new Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${r}) is after last auth at ${i}`)}if(t.organization){const i=t.organization.trim();if(i.startsWith("org_")){const a=i;if(!e.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(a!==e.claims.org_id)throw new Error(`Organization ID (org_id) claim mismatch in the ID token; expected "${a}", found "${e.claims.org_id}"`)}else{const a=i.toLowerCase();if(!e.claims.org_name)throw new Error("Organization Name (org_name) claim must be a string present in the ID token");if(a!==e.claims.org_name)throw new Error(`Organization Name (org_name) claim mismatch in the ID token; expected "${a}", found "${e.claims.org_name}"`)}}return e};var Ds=dE(function(t,e){var n=xs&&xs.__assign||function(){return n=Object.assign||function(c){for(var u,d=1,h=arguments.length;d<h;d++)for(var p in u=arguments[d])Object.prototype.hasOwnProperty.call(u,p)&&(c[p]=u[p]);return c},n.apply(this,arguments)};function r(c,u){if(!u)return"";var d="; "+c;return u===!0?d:d+"="+u}function o(c,u,d){return encodeURIComponent(c).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(u).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(h){if(typeof h.expires=="number"){var p=new Date;p.setMilliseconds(p.getMilliseconds()+864e5*h.expires),h.expires=p}return r("Expires",h.expires?h.expires.toUTCString():"")+r("Domain",h.domain)+r("Path",h.path)+r("Secure",h.secure)+r("SameSite",h.sameSite)}(d)}function i(c){for(var u={},d=c?c.split("; "):[],h=/(%[\dA-F]{2})+/gi,p=0;p<d.length;p++){var g=d[p].split("="),v=g.slice(1).join("=");v.charAt(0)==='"'&&(v=v.slice(1,-1));try{u[g[0].replace(h,decodeURIComponent)]=v.replace(h,decodeURIComponent)}catch{}}return u}function a(){return i(document.cookie)}function s(c,u,d){document.cookie=o(c,u,n({path:"/"},d))}e.__esModule=!0,e.encode=o,e.parse=i,e.getAll=a,e.get=function(c){return a()[c]},e.set=s,e.remove=function(c,u){s(c,"",n(n({},u),{expires:-1}))}});uE(Ds),Ds.encode,Ds.parse,Ds.getAll;var _Q=Ds.get,eL=Ds.set,tL=Ds.remove;const ml={get(t){const e=_Q(t);if(e!==void 0)return JSON.parse(e)},save(t,e,n){let r={};window.location.protocol==="https:"&&(r={secure:!0,sameSite:"none"}),n!=null&&n.daysUntilExpire&&(r.expires=n.daysUntilExpire),n!=null&&n.cookieDomain&&(r.domain=n.cookieDomain),eL(t,JSON.stringify(e),r)},remove(t,e){let n={};e!=null&&e.cookieDomain&&(n.domain=e.cookieDomain),tL(t,n)}},CQ={get(t){return ml.get(t)||ml.get(`_legacy_${t}`)},save(t,e,n){let r={};window.location.protocol==="https:"&&(r={secure:!0}),n!=null&&n.daysUntilExpire&&(r.expires=n.daysUntilExpire),n!=null&&n.cookieDomain&&(r.domain=n.cookieDomain),eL(`_legacy_${t}`,JSON.stringify(e),r),ml.save(t,e,n)},remove(t,e){let n={};e!=null&&e.cookieDomain&&(n.domain=e.cookieDomain),tL(t,n),ml.remove(t,e),ml.remove(`_legacy_${t}`,e)}},SQ={get(t){if(typeof sessionStorage>"u")return;const e=sessionStorage.getItem(t);return e!=null?JSON.parse(e):void 0},save(t,e){sessionStorage.setItem(t,JSON.stringify(e))},remove(t){sessionStorage.removeItem(t)}};function wQ(t,e,n){var r=e===void 0?null:e,o=function(c,u){var d=atob(c);if(u){for(var h=new Uint8Array(d.length),p=0,g=d.length;p<g;++p)h[p]=d.charCodeAt(p);return String.fromCharCode.apply(null,new Uint16Array(h.buffer))}return d}(t,n!==void 0&&n),i=o.indexOf(`
`,10)+1,a=o.substring(i)+(r?"//# sourceMappingURL="+r:""),s=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(s)}var Ok,Nk,Mk,yb,EQ=(Ok="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YX0scG9ydHM6W3BdfSk9PntsZXQgZjtjb25zdHthdWRpZW5jZTp1LHNjb3BlOmx9PXJ8fHt9O3RyeXtjb25zdCByPWE/KGU9Pntjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMoZSkscj17fTtyZXR1cm4gdC5mb3JFYWNoKCgoZSx0KT0+e3JbdF09ZX0pKSxyfSkoYy5ib2R5KTpKU09OLnBhcnNlKGMuYm9keSk7aWYoIXIucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09ci5ncmFudF90eXBlKXtjb25zdCBlPSgoZSx0KT0+b1tuKGUsdCldKSh1LGwpO2lmKCFlKXRocm93IG5ldyB0KHUsbCk7Yy5ib2R5PWE/cyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKX1sZXQgaCxnOyJmdW5jdGlvbiI9PXR5cGVvZiBBYm9ydENvbnRyb2xsZXImJihoPW5ldyBBYm9ydENvbnRyb2xsZXIsYy5zaWduYWw9aC5zaWduYWwpO3RyeXtnPWF3YWl0IFByb21pc2UucmFjZShbKGQ9ZSxuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLGQpKSkpLGZldGNoKGksT2JqZWN0LmFzc2lnbih7fSxjKSldKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjplLm1lc3NhZ2V9KX1pZighZylyZXR1cm4gaCYmaC5hYm9ydCgpLHZvaWQgcC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtmPWF3YWl0IGcuanNvbigpLGYucmVmcmVzaF90b2tlbj8oKChlLHQscik9PntvW24odCxyKV09ZX0pKGYucmVmcmVzaF90b2tlbix1LGwpLGRlbGV0ZSBmLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KSh1LGwpLHAucG9zdE1lc3NhZ2Uoe29rOmcub2ssanNvbjpmfSl9Y2F0Y2goZSl7cC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3I6ZS5lcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplLm1lc3NhZ2V9fSl9dmFyIGR9KSl9KCk7Cgo=",Nk=null,Mk=!1,function(t){return yb=yb||wQ(Ok,Nk,Mk),new Worker(yb,t)});const bb={};let TQ=class{constructor(e,n){this.cache=e,this.clientId=n,this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(e){var n;const r=new Set(((n=await this.cache.get(this.manifestKey))===null||n===void 0?void 0:n.keys)||[]);r.add(e),await this.cache.set(this.manifestKey,{keys:[...r]})}async remove(e){const n=await this.cache.get(this.manifestKey);if(n){const r=new Set(n.keys);return r.delete(e),r.size>0?await this.cache.set(this.manifestKey,{keys:[...r]}):await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(e){return`@@auth0spajs@@::${e}`}};const IQ={memory:()=>new ZM().enclosedCache,localstorage:()=>new mQ},Lk=t=>IQ[t],Dk=t=>{const{openUrl:e,onRedirect:n}=t,r=ti(t,["openUrl","onRedirect"]);return Object.assign(Object.assign({},r),{openUrl:e===!1||e?e:n})},_b=new oQ;let AQ=class{constructor(e){let n,r;if(this.userCache=new ZM().enclosedCache,this.defaultOptions={authorizationParams:{scope:"openid profile email"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=async()=>{await _b.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)},this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),e),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),e.authorizationParams)}),typeof window<"u"&&(()=>{if(!rm())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(rm().subtle===void 0)throw new Error(`
      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/main/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.
    `)})(),e.cache&&e.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),e.cache)r=e.cache;else{if(n=e.cacheLocation||"memory",!Lk(n))throw new Error(`Invalid cache location "${n}"`);r=Lk(n)()}this.httpTimeoutMs=e.httpTimeoutInSeconds?1e3*e.httpTimeoutInSeconds:1e4,this.cookieStorage=e.legacySameSiteCookie===!1?ml:CQ,this.orgHintCookieName=`auth0.${this.options.clientId}.organization_hint`,this.isAuthenticatedCookieName=(a=>`auth0.${a}.is.authenticated`)(this.options.clientId),this.sessionCheckExpiryDays=e.sessionCheckExpiryDays||1;const o=e.useCookiesForTransactions?this.cookieStorage:SQ;var i;this.scope=lp("openid",this.options.authorizationParams.scope,this.options.useRefreshTokens?"offline_access":""),this.transactionManager=new vQ(o,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||GM,this.cacheManager=new gQ(r,r.allKeys?void 0:new TQ(r,this.options.clientId),this.nowProvider),this.domainUrl=(i=this.options.domain,/^https?:\/\//.test(i)?i:`https://${i}`),this.tokenIssuer=((a,s)=>a?a.startsWith("https://")?a:`https://${a}/`:`${s}/`)(this.options.issuer,this.domainUrl),typeof window<"u"&&window.Worker&&this.options.useRefreshTokens&&n==="memory"&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new EQ)}_url(e){const n=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||$M)));return`${this.domainUrl}${e}&auth0Client=${n}`}_authorizeUrl(e){return this._url(`/authorize?${WC(e)}`)}async _verifyIdToken(e,n,r){const o=await this.nowProvider();return bQ({iss:this.tokenIssuer,aud:this.options.clientId,id_token:e,nonce:n,organization:r,leeway:this.options.leeway,max_age:(i=this.options.authorizationParams.max_age,typeof i!="string"?i:parseInt(i,10)||void 0),now:o});var i}_processOrgHint(e){e?this.cookieStorage.save(this.orgHintCookieName,e,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}async _prepareAuthorizeUrl(e,n,r){const o=Rk(vb()),i=Rk(vb()),a=vb(),s=(d=>{const h=new Uint8Array(d);return(p=>{const g={"+":"-","/":"_","=":""};return p.replace(/[+/=]/g,v=>g[v])})(window.btoa(String.fromCharCode(...Array.from(h))))})(await(async d=>await rm().subtle.digest({name:"SHA-256"},new TextEncoder().encode(d)))(a)),c=((d,h,p,g,v,y,_,b)=>Object.assign(Object.assign(Object.assign({client_id:d.clientId},d.authorizationParams),p),{scope:lp(h,p.scope),response_type:"code",response_mode:b||"query",state:g,nonce:v,redirect_uri:_||d.authorizationParams.redirect_uri,code_challenge:y,code_challenge_method:"S256"}))(this.options,this.scope,e,o,i,s,e.redirect_uri||this.options.authorizationParams.redirect_uri||r,n==null?void 0:n.response_mode),u=this._authorizeUrl(c);return{nonce:i,code_verifier:a,scope:c.scope,audience:c.audience||"default",redirect_uri:c.redirect_uri,state:o,url:u}}async loginWithPopup(e,n){var r;if(e=e||{},!(n=n||{}).popup&&(n.popup=(s=>{const c=window.screenX+(window.innerWidth-400)/2,u=window.screenY+(window.innerHeight-600)/2;return window.open(s,"auth0:authorize:popup",`left=${c},top=${u},width=400,height=600,resizable,scrollbars=yes,status=1`)})(""),!n.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");const o=await this._prepareAuthorizeUrl(e.authorizationParams||{},{response_mode:"web_message"},window.location.origin);n.popup.location.href=o.url;const i=await(s=>new Promise((c,u)=>{let d;const h=setInterval(()=>{s.popup&&s.popup.closed&&(clearInterval(h),clearTimeout(p),window.removeEventListener("message",d,!1),u(new cQ(s.popup)))},1e3),p=setTimeout(()=>{clearInterval(h),u(new sQ(s.popup)),window.removeEventListener("message",d,!1)},1e3*(s.timeoutInSeconds||60));d=function(g){if(g.data&&g.data.type==="authorization_response"){if(clearTimeout(p),clearInterval(h),window.removeEventListener("message",d,!1),s.popup.close(),g.data.response.error)return u(Wn.fromPayload(g.data.response));c(g.data.response)}},window.addEventListener("message",d)}))(Object.assign(Object.assign({},n),{timeoutInSeconds:n.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}));if(o.state!==i.state)throw new Wn("state_mismatch","Invalid state");const a=((r=e.authorizationParams)===null||r===void 0?void 0:r.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:o.audience,scope:o.scope,code_verifier:o.code_verifier,grant_type:"authorization_code",code:i.code,redirect_uri:o.redirect_uri},{nonceIn:o.nonce,organization:a})}async getUser(){var e;const n=await this._getIdTokenFromCache();return(e=n==null?void 0:n.decodedToken)===null||e===void 0?void 0:e.user}async getIdTokenClaims(){var e;const n=await this._getIdTokenFromCache();return(e=n==null?void 0:n.decodedToken)===null||e===void 0?void 0:e.claims}async loginWithRedirect(e={}){var n;const r=Dk(e),{openUrl:o,fragment:i,appState:a}=r,s=ti(r,["openUrl","fragment","appState"]),c=((n=s.authorizationParams)===null||n===void 0?void 0:n.organization)||this.options.authorizationParams.organization,u=await this._prepareAuthorizeUrl(s.authorizationParams||{}),{url:d}=u,h=ti(u,["url"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},h),{appState:a}),c&&{organization:c}));const p=i?`${d}#${i}`:d;o?await o(p):window.location.assign(p)}async handleRedirectCallback(e=window.location.href){const n=e.split("?").slice(1);if(n.length===0)throw new Error("There are no query params available for parsing.");const{state:r,code:o,error:i,error_description:a}=(h=>{h.indexOf("#")>-1&&(h=h.substring(0,h.indexOf("#")));const p=new URLSearchParams(h);return{state:p.get("state"),code:p.get("code")||void 0,error:p.get("error")||void 0,error_description:p.get("error_description")||void 0}})(n.join("")),s=this.transactionManager.get();if(!s)throw new Wn("missing_transaction","Invalid state");if(this.transactionManager.remove(),i)throw new aQ(i,a||i,r,s.appState);if(!s.code_verifier||s.state&&s.state!==r)throw new Wn("state_mismatch","Invalid state");const c=s.organization,u=s.nonce,d=s.redirect_uri;return await this._requestToken(Object.assign({audience:s.audience,scope:s.scope,code_verifier:s.code_verifier,grant_type:"authorization_code",code:o},d?{redirect_uri:d}:{}),{nonceIn:u,organization:c}),{appState:s.appState}}async checkSession(e){if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return;this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}try{await this.getTokenSilently(e)}catch{}}async getTokenSilently(e={}){var n;const r=Object.assign(Object.assign({cacheMode:"on"},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:lp(this.scope,(n=e.authorizationParams)===null||n===void 0?void 0:n.scope)})}),o=await((i,a)=>{let s=bb[a];return s||(s=i().finally(()=>{delete bb[a],s=null}),bb[a]=s),s})(()=>this._getTokenSilently(r),`${this.options.clientId}::${r.authorizationParams.audience}::${r.authorizationParams.scope}`);return e.detailedResponse?o:o==null?void 0:o.access_token}async _getTokenSilently(e){const{cacheMode:n}=e,r=ti(e,["cacheMode"]);if(n!=="off"){const o=await this._getEntryFromCache({scope:r.authorizationParams.scope,audience:r.authorizationParams.audience||"default",clientId:this.options.clientId});if(o)return o}if(n!=="cache-only"){if(!await(async(o,i=3)=>{for(let a=0;a<i;a++)if(await o())return!0;return!1})(()=>_b.acquireLock("auth0.lock.getTokenSilently",5e3),10))throw new KC;try{if(window.addEventListener("pagehide",this._releaseLockOnPageHide),n!=="off"){const u=await this._getEntryFromCache({scope:r.authorizationParams.scope,audience:r.authorizationParams.audience||"default",clientId:this.options.clientId});if(u)return u}const o=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(r):await this._getTokenFromIFrame(r),{id_token:i,access_token:a,oauthTokenScope:s,expires_in:c}=o;return Object.assign(Object.assign({id_token:i,access_token:a},s?{scope:s}:null),{expires_in:c})}finally{await _b.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)}}}async getTokenWithPopup(e={},n={}){var r;const o=Object.assign(Object.assign({},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:lp(this.scope,(r=e.authorizationParams)===null||r===void 0?void 0:r.scope)})});return n=Object.assign(Object.assign({},iQ),n),await this.loginWithPopup(o,n),(await this.cacheManager.get(new Ls({scope:o.authorizationParams.scope,audience:o.authorizationParams.audience||"default",clientId:this.options.clientId}))).access_token}async isAuthenticated(){return!!await this.getUser()}_buildLogoutUrl(e){e.clientId!==null?e.clientId=e.clientId||this.options.clientId:delete e.clientId;const n=e.logoutParams||{},{federated:r}=n,o=ti(n,["federated"]),i=r?"&federated":"";return this._url(`/v2/logout?${WC(Object.assign({clientId:e.clientId},o))}`)+i}async logout(e={}){const n=Dk(e),{openUrl:r}=n,o=ti(n,["openUrl"]);e.clientId===null?await this.cacheManager.clear():await this.cacheManager.clear(e.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isAuthenticatedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove("@@user@@");const i=this._buildLogoutUrl(o);r?await r(i):r!==!1&&window.location.assign(i)}async _getTokenFromIFrame(e){const n=Object.assign(Object.assign({},e.authorizationParams),{prompt:"none"}),r=this.cookieStorage.get(this.orgHintCookieName);r&&!n.organization&&(n.organization=r);const{url:o,state:i,nonce:a,code_verifier:s,redirect_uri:c,scope:u,audience:d}=await this._prepareAuthorizeUrl(n,{response_mode:"web_message"},window.location.origin);try{if(window.crossOriginIsolated)throw new Wn("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");const h=e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,p=await((v,y,_=60)=>new Promise((b,C)=>{const w=window.document.createElement("iframe");w.setAttribute("width","0"),w.setAttribute("height","0"),w.style.display="none";const S=()=>{window.document.body.contains(w)&&(window.document.body.removeChild(w),window.removeEventListener("message",E,!1))};let E;const I=setTimeout(()=>{C(new KC),S()},1e3*_);E=function(x){if(x.origin!=y||!x.data||x.data.type!=="authorization_response")return;const A=x.source;A&&A.close(),x.data.response.error?C(Wn.fromPayload(x.data.response)):b(x.data.response),clearTimeout(I),window.removeEventListener("message",E,!1),setTimeout(S,2e3)},window.addEventListener("message",E,!1),window.document.body.appendChild(w),w.setAttribute("src",v)}))(o,this.domainUrl,h);if(i!==p.state)throw new Wn("state_mismatch","Invalid state");const g=await this._requestToken(Object.assign(Object.assign({},e.authorizationParams),{code_verifier:s,code:p.code,grant_type:"authorization_code",redirect_uri:c,timeout:e.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:a,organization:n.organization});return Object.assign(Object.assign({},g),{scope:u,oauthTokenScope:g.scope,audience:d})}catch(h){throw h.error==="login_required"&&this.logout({openUrl:!1}),h}}async _getTokenUsingRefreshToken(e){const n=await this.cacheManager.get(new Ls({scope:e.authorizationParams.scope,audience:e.authorizationParams.audience||"default",clientId:this.options.clientId}));if(!(n&&n.refresh_token||this.worker)){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw new JM(e.authorizationParams.audience||"default",e.authorizationParams.scope)}const r=e.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,o=typeof e.timeoutInSeconds=="number"?1e3*e.timeoutInSeconds:null;try{const i=await this._requestToken(Object.assign(Object.assign(Object.assign({},e.authorizationParams),{grant_type:"refresh_token",refresh_token:n&&n.refresh_token,redirect_uri:r}),o&&{timeout:o}));return Object.assign(Object.assign({},i),{scope:e.authorizationParams.scope,oauthTokenScope:i.scope,audience:e.authorizationParams.audience||"default"})}catch(i){if((i.message.indexOf("Missing Refresh Token")>-1||i.message&&i.message.indexOf("invalid refresh token")>-1)&&this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw i}}async _saveEntryInCache(e){const{id_token:n,decodedToken:r}=e,o=ti(e,["id_token","decodedToken"]);this.userCache.set("@@user@@",{id_token:n,decodedToken:r}),await this.cacheManager.setIdToken(this.options.clientId,e.id_token,e.decodedToken),await this.cacheManager.set(o)}async _getIdTokenFromCache(){const e=this.options.authorizationParams.audience||"default",n=await this.cacheManager.getIdToken(new Ls({clientId:this.options.clientId,audience:e,scope:this.scope})),r=this.userCache.get("@@user@@");return n&&n.id_token===(r==null?void 0:r.id_token)?r:(this.userCache.set("@@user@@",n),n)}async _getEntryFromCache({scope:e,audience:n,clientId:r}){const o=await this.cacheManager.get(new Ls({scope:e,audience:n,clientId:r}),60);if(o&&o.access_token){const{access_token:i,oauthTokenScope:a,expires_in:s}=o,c=await this._getIdTokenFromCache();return c&&Object.assign(Object.assign({id_token:c.id_token,access_token:i},a?{scope:a}:null),{expires_in:s})}}async _requestToken(e,n){const{nonceIn:r,organization:o}=n||{},i=await pQ(Object.assign({baseUrl:this.domainUrl,client_id:this.options.clientId,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},e),this.worker),a=await this._verifyIdToken(i.id_token,r,o);return await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},i),{decodedToken:a,scope:e.scope,audience:e.audience||"default"}),i.scope?{oauthTokenScope:i.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(o||a.claims.org_id),Object.assign(Object.assign({},i),{decodedToken:a})}};async function kQ(t){const e=new AQ(t);return await e.checkSession(),e}const nL=G(!1),jn=G(null),Yu=G(t=>{const e=t(jn);return e?e.accountType==="AAD":!1}),BTe=G(t=>{const e=t(jn);return e?e.accountType==="MSA":!1}),xQ=G(t=>t(jn)!==null),Hi=G(null),RQ=G(!0);function fo(t,e){ct().set(t,e)}function rL(t,e,n){return n!==void 0?n:e&&!t}function _r(){const t=F(RM),e=F(Yu),n=!!F(jn);return rL(e,n,t)}function YC(){const t=ct(),e=t.get(RM),n=t.get(Yu),r=!!t.get(jn);return rL(n,r,e)}const QC="authInitStartTime";function oL(t,e){YC()&&cc({feature:"api",scenario:e,errorType:"missingToken",errorMessage:`User is authenticated but no token was available for ${e==="getWssAPIUrl"?"WebSocket connection":"API request"}`,customData:JSON.stringify({path:t})})}function iL(t){const{providerType:e,apiName:n}=t,r=Date.now().toString();$a(QC,r),Y.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:n,eventInfo_success:!0,eventInfo_customData:JSON.stringify({eventInfo_providerType:e})}})}function aL(t){const{providerType:e,apiName:n}=t,r=Date.now(),o=vi(QC);if(o){const i=parseFloat(o),a=r-i;sessionStorage.removeItem(QC),Y.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:n,eventInfo_success:!0,eventInfo_duration:a,eventInfo_customData:JSON.stringify({eventInfo_providerType:e})}})}}function sL(t){const{authWorkflowAccountType:e,interactionType:n,correlationId:r,prompt:o,redirectUri:i,apiName:a}=t,s=Date.now().toString();Qn(zC,s),Y.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:a,eventInfo_success:!0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:e??"unknown",eventInfo_interactionType:n??"",eventInfo_correlationId:r??"",eventInfo_prompt:o??"",eventInfo_redirectUri:i??""})}})}function cL(t){const{authWorkflowAccountType:e,isMSA:n,authority:r,correlationId:o,interactionType:i,apiName:a}=t,s=Date.now(),c=hn(zC);let u;if(c){const h=parseFloat(c);u=s-h,Ho(zC)}const d=hn($C);d==="1"&&Ho($C),Y.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:a,eventInfo_success:!0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:e??"unknown",eventInfo_interactionType:i,eventInfo_correlationId:o,eventInfo_authority:r,eventInfo_isMSA:n??!1,eventInfo_reAuth:d==="1"}),eventInfo_duration:u??0}})}function lL(t){const{providerType:e,apiName:n}=t;Y.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_customData:JSON.stringify({eventInfo_providerType:e})}})}function om(t){const{authWorkflowAccountType:e,apiName:n,duration:r,extraInfo:o}=t;Y.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_duration:r??0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:e,...o})}})}function Km(t){const{authWorkflowAccountType:e,apiName:n,errorMessage:r,errorType:o,errorExtraInfo:i,errorCode:a}=t;Y.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!1,eventInfo_apiName:n,eventInfo_errorType:o,eventInfo_errorMessage:r,eventInfo_errorCode:a,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:e??"unknown",...i})}})}function Cb(t){const{authWorkflowAccountType:e,apiName:n}=t;Qn($C,"1"),Y.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:e})}})}var vh,Pa,Xl,Ui;class Mc{constructor(e,n){tn(this,vh);tn(this,Pa,null);tn(this,Xl);tn(this,Ui,null);Ot(this,vh,e),Ot(this,Xl,n)}async get(e){return(ue(this,Ui)===null||ue(this,Xl)&&(!ue(this,Pa)||ue(this,Pa)<Date.now()-ue(this,Xl)))&&(Ot(this,Ui,ue(this,vh).call(this,e)),Ot(this,Pa,Date.now())),ue(this,Ui)}set(e){Ot(this,Ui,e),Ot(this,Pa,Date.now())}reset(){Ot(this,Ui,null),Ot(this,Pa,null)}get isInstantiated(){return ue(this,Ui)!==null}}vh=new WeakMap,Pa=new WeakMap,Xl=new WeakMap,Ui=new WeakMap;const Di=new Mc(PQ);async function PQ(){iL({apiName:Bi.INITIALIZE_START,providerType:"auth0"});const t=await kQ(I7);aL({apiName:Bi.INITIALIZE_END,providerType:"auth0"});const e=new Map([["on",null],["off",null],["cache-only",null]]);async function n(i,a){const s=performance.now();try{const c=await t.getTokenSilently(i),u=performance.now();return Wu({feature:"auth0SdkUsage",scenario:"getAuth0AccessToken",duration:u-s,customData:JSON.stringify({cacheMode:i.cacheMode??"on"})}),c}catch(c){c instanceof Wn?(o({options:i,startTime:s,authWorkflowAccountType:a,errorType:c.error,errorMessage:c.error_description,exception:c.stack}),c.error==="login_required"&&fo(Hi,{reason:"token-expired",provider:"auth0"})):c instanceof Error?o({options:i,startTime:s,authWorkflowAccountType:a,errorType:c.name,errorMessage:c.message,exception:c.stack}):o({options:i,startTime:s,authWorkflowAccountType:a,errorType:"unknown",errorMessage:`${c}`});return}}async function r(i){const a=await t.getUser();if(!a)return;const s=a.sub&&a.sub.startsWith("google")?"google":"apple",c=i.cacheMode??"on",u=e.get(c);if(!u){const d=n(i,s);e.set(c,d);const h=await d;return e.set(c,null),h}return u}function o(i){const{startTime:a,options:s,authWorkflowAccountType:c,errorType:u,errorMessage:d,exception:h}=i;Km({authWorkflowAccountType:c,apiName:Bi.ACQUIRE_TOKEN_FAILURE,errorType:u,errorMessage:d,errorExtraInfo:{eventInfo_providerType:"auth0",eventInfo_exception:h??"",cacheMode:s.cacheMode??"on",duration:performance.now()-a}})}return{auth0:t,getAuth0AccessToken:r}}function fE(t){const e=t.split(".")[1];if(e===void 0)return;const n=e.replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(n).split("").map(o=>`%${`00${o.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""));try{const o=JSON.parse(r);return rQ.parse(o)}catch{return}}async function OQ(t,e){const{getAuth0AccessToken:n}=await Di.get(),{authorizationParams:r}=Mf,o={...r,dob:t,ctry:e},i=await n({authorizationParams:o,cacheMode:"off"});if(!i)return;const a=fE(i);if(a)return a}async function NQ(){const{getAuth0AccessToken:t}=await Di.get(),e=await t(Mf);if(!e)return;const n=fE(e);if(n){if(n.sub.startsWith("google"))return"Google";if(n.sub.startsWith("apple"))return"Apple"}}function MQ(t){switch(t){case"apple":return"Apple";case"google":return"Google";default:return}}const Wm=new BroadcastChannel("cp.broadcast");class LQ{constructor(){Z(this,"hasTrackedRedirectError",!1);Z(this,"CODE_RE",/[?&]code=[^&]+/);Z(this,"STATE_RE",/[?&]state=[^&]+/);Z(this,"ERROR_RE",/[?&]error=[^&]+/)}async handleRedirect(){try{const{auth0:e}=await Di.get();if(!this.hasAuthParams())return null;const n=performance.now();await e.handleRedirectCallback();const r=performance.now();Wu({feature:"auth0SdkUsage",scenario:"handleRedirect",duration:r-n});const o=await e.getUser();if(!o)return null;const i=o.sub?this.getTokenType(o.sub):void 0;return cL({apiName:Bi.LOGIN_SUCCESS,authWorkflowAccountType:i}),Wm.postMessage({eventName:"auth0.accountAdded"}),{id:o.sub,tenantId:crypto.randomUUID(),provider:"auth0",accountType:this.getAccountType(o.sub)}}catch(e){this.trackRedirectErrorOncePerSession(e)}return null}async maybeInitializeAccountWithToken(){const{auth0:e,getAuth0AccessToken:n}=await Di.get(),r=await n(Mf);if(!r)return null;const o=await e.getUser();if(!o)return null;const i=o.sub;return{userAccount:{id:i,tenantId:crypto.randomUUID(),provider:"auth0",accountType:this.getAccountType(i)},authToken:{accessToken:r,tokenType:this.getTokenType(i)}}}async logIn(e){const{connection:n}=e;if(!n)throw new Error("connection in LoginOpts are required");const{auth0:r}=await Di.get();return sL({apiName:Bi.LOGIN_START,authWorkflowAccountType:e.connection??void 0}),r.loginWithRedirect({authorizationParams:{...A7.authorizationParams,connection:this.getConnectionFromTokenType(n)}})}async logOut(){const{auth0:e}=await Di.get(),n=await e.getUser(),r=n&&n.sub?this.getTokenType(n.sub):void 0;try{await e.logout({logoutParams:{returnTo:window.location.origin}}),Wm.postMessage({eventName:"auth0.accountRemoved"}),lL({apiName:Bi.LOGOUT_SUCCESS,providerType:"auth0"})}catch(o){Km({authWorkflowAccountType:r,apiName:Bi.LOGOUT_FAILURE,errorMessage:`${o}`,errorExtraInfo:{eventInfo_providerType:"auth0"}}),console.error("Auth0 logout failed:",o)}}async getAuthToken(){try{const{auth0:e,getAuth0AccessToken:n}=await Di.get(),r=await n(Mf);if(!r)return;const o=await e.getUser();if(o){const i=o.sub,a=this.getTokenType(i);return{accessToken:r,tokenType:a}}}catch{return}}async getUserInfo(){const{auth0:e}=await Di.get(),n=await e.getUser();if(n)return{mail:n.email??"",givenName:n.given_name??"",surname:n.surname??"",imgSrc:n.picture,isStudent:!1}}async getUserInfoFromToken(e){const n=fE(e);if(!n)return;const{email:r,name:o}=n;return{mail:r,givenName:o.split(" ")[0]??"",surname:"",imgSrc:"",isStudent:!1}}supportsTokenType(e){return e==="apple"||e==="google"}getTokenType(e){return e.startsWith("google")?"google":"apple"}getAccountType(e){return e.startsWith("google")?"Google":"Apple"}getConnectionFromTokenType(e){return e==="apple"?"apple":"google-oauth2"}hasAuthParams(e=window.location.search){return(this.CODE_RE.test(e)||this.ERROR_RE.test(e))&&this.STATE_RE.test(e)}trackRedirectErrorOncePerSession(e){this.hasTrackedRedirectError||(Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"auth0HandleRedirectPromise",eventInfo_details:"Error handling redirect promise",eventInfo_errorMessage:`${e}`}}),Km({apiName:Bi.LOGIN_FAILURE,errorExtraInfo:{eventInfo_providerType:"auth0"},errorMessage:`${e}`})),this.hasTrackedRedirectError=!0}}var JC=function(t,e){return JC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},JC(t,e)};function HTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");JC(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var jk=function(){return jk=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},jk.apply(this,arguments)};function VTe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function Gt(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):o(d.value).then(s,c)}u((r=r.apply(t,e||[])).next())})}function zTe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(d){return c([u,d])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(n=0)),n;)try{if(r=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,o=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],o=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function $Te(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function GTe(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i}function KTe(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var zr;(function(t){t.GET="GET",t.PATCH="PATCH",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE"})(zr||(zr={}));const DQ="v1.0",jQ="https://graph.microsoft.com/",UQ=new Set(["graph.microsoft.com","graph.microsoft.us","dod-graph.microsoft.us","graph.microsoft.de","microsoftgraph.chinacloudapi.cn","canary.graph.microsoft.com"]);class lc extends Error{static setGraphClientError(e){let n;return e instanceof Error?n=e:(n=new lc,n.customError=e),n}constructor(e){super(e),Object.setPrototypeOf(this,lc.prototype)}}const FQ=["$select","$expand","$orderby","$filter","$top","$skip","$skipToken","$count"],BQ=t=>{const e=i=>i.replace(/\/+$/,""),n=i=>i.replace(/^\/+/,""),r=(i,a)=>[e(i),n(a)].join("/");return Array.prototype.slice.call(t).reduce(r)},Sb=t=>{const e=t&&t.constructor&&t.constructor.name;if(e==="Buffer"||e==="Blob"||e==="File"||e==="FormData"||typeof t=="string")return t;if(e==="ArrayBuffer")t=Buffer.from(t);else if(e==="Int8Array"||e==="Int16Array"||e==="Int32Array"||e==="Uint8Array"||e==="Uint16Array"||e==="Uint32Array"||e==="Uint8ClampedArray"||e==="Float32Array"||e==="Float64Array"||e==="DataView")t=Buffer.from(t.buffer);else try{t=JSON.stringify(t)}catch{throw new Error("Unable to stringify the content")}return t},uL=t=>fL(t),dL=(t,e)=>(e.forEach(n=>HQ(n)),fL(t,e)),fL=(t,e=UQ)=>{if(t=t.toLowerCase(),t.indexOf("https://")!==-1){t=t.replace("https://","");const n=t.indexOf(":"),r=t.indexOf("/");let o="";if(r!==-1)return n!==-1&&n<r?(o=t.substring(0,n),e.has(o)):(o=t.substring(0,r),e.has(o))}return!1},HQ=t=>{if(t.indexOf("/")!==-1)throw new lc("Please add only hosts or hostnames to the CustomHosts config. If the url is `http://example.com:3000/`, host is `example:3000`")};class uc{constructor(e=[]){this.middlewareOptions=new Map;for(const n of e){const r=n.constructor;this.middlewareOptions.set(r,n)}}getMiddlewareOptions(e){return this.middlewareOptions.get(e)}setMiddlewareOptions(e,n){this.middlewareOptions.set(e,n)}}const VQ=()=>{let t="";for(let e=0;e<32;e++)(e===8||e===12||e===16||e===20)&&(t+="-"),t+=Math.floor(Math.random()*16).toString(16);return t},hL=(t,e,n)=>{let r=null;if(typeof Request<"u"&&t instanceof Request)r=t.headers.get(n);else if(typeof e<"u"&&e.headers!==void 0)if(typeof Headers<"u"&&e.headers instanceof Headers)r=e.headers.get(n);else if(e.headers instanceof Array){const o=e.headers;for(let i=0,a=o.length;i<a;i++)if(o[i][0]===n){r=o[i][1];break}}else e.headers[n]!==void 0&&(r=e.headers[n]);return r},pL=(t,e,n,r)=>{if(typeof Request<"u"&&t instanceof Request)t.headers.set(n,r);else if(typeof e<"u")if(e.headers===void 0)e.headers=new Headers({[n]:r});else if(typeof Headers<"u"&&e.headers instanceof Headers)e.headers.set(n,r);else if(e.headers instanceof Array){let o=0;const i=e.headers.length;for(;o<i;o++){const a=e.headers[o];if(a[0]===n){a[1]=r;break}}o===i&&e.headers.push([n,r])}else Object.assign(e.headers,{[n]:r})},mL=(t,e,n,r)=>{typeof Request<"u"&&t instanceof Request?t.headers.append(n,r):typeof e<"u"&&(e.headers===void 0?e.headers=new Headers({[n]:r}):typeof Headers<"u"&&e.headers instanceof Headers?e.headers.append(n,r):e.headers instanceof Array?e.headers.push([n,r]):e.headers===void 0?e.headers={[n]:r}:e.headers[n]===void 0?e.headers[n]=r:e.headers[n]+=`, ${r}`)},zQ=(t,e)=>Gt(void 0,void 0,void 0,function*(){const n=e.headers.get("Content-Type")?yield e.blob():yield Promise.resolve(void 0),{method:r,headers:o,referrer:i,referrerPolicy:a,mode:s,credentials:c,cache:u,redirect:d,integrity:h,keepalive:p,signal:g}=e;return new Request(t,{method:r,headers:o,body:n,referrer:i,referrerPolicy:a,mode:s,credentials:c,cache:u,redirect:d,integrity:h,keepalive:p,signal:g})});class $Q{constructor(e,n){this.authenticationProvider=e,this.authenticationProviderOptions=n}}var mu;(function(t){t[t.NONE=0]="NONE",t[t.REDIRECT_HANDLER_ENABLED=1]="REDIRECT_HANDLER_ENABLED",t[t.RETRY_HANDLER_ENABLED=2]="RETRY_HANDLER_ENABLED",t[t.AUTHENTICATION_HANDLER_ENABLED=4]="AUTHENTICATION_HANDLER_ENABLED"})(mu||(mu={}));class Fa{constructor(){this.featureUsage=mu.NONE}static updateFeatureUsageFlag(e,n){let r;e.middlewareControl instanceof uc?r=e.middlewareControl.getMiddlewareOptions(Fa):e.middlewareControl=new uc,typeof r>"u"&&(r=new Fa,e.middlewareControl.setMiddlewareOptions(Fa,r)),r.setFeatureUsage(n)}setFeatureUsage(e){this.featureUsage=this.featureUsage|e}getFeatureUsage(){return this.featureUsage.toString(16)}}class Wf{constructor(e){this.authenticationProvider=e}execute(e){return Gt(this,void 0,void 0,function*(){const n=typeof e.request=="string"?e.request:e.request.url;if(uL(n)||e.customHosts&&dL(n,e.customHosts)){let r;e.middlewareControl instanceof uc&&(r=e.middlewareControl.getMiddlewareOptions($Q));let o,i;r&&(o=r.authenticationProvider,i=r.authenticationProviderOptions),o||(o=this.authenticationProvider);const s=`Bearer ${yield o.getAccessToken(i)}`;mL(e.request,e.options,Wf.AUTHORIZATION_HEADER,s),Fa.updateFeatureUsageFlag(e,mu.AUTHENTICATION_HANDLER_ENABLED)}else e.options.headers&&delete e.options.headers[Wf.AUTHORIZATION_HEADER];return yield this.nextMiddleware.execute(e)})}setNext(e){this.nextMiddleware=e}}Wf.AUTHORIZATION_HEADER="Authorization";class GQ{execute(e){return Gt(this,void 0,void 0,function*(){e.response=yield fetch(e.request,e.options)})}}class mn{constructor(e=mn.DEFAULT_DELAY,n=mn.DEFAULT_MAX_RETRIES,r=mn.defaultShouldRetry){if(e>mn.MAX_DELAY&&n>mn.MAX_MAX_RETRIES){const o=new Error(`Delay and MaxRetries should not be more than ${mn.MAX_DELAY} and ${mn.MAX_MAX_RETRIES}`);throw o.name="MaxLimitExceeded",o}else if(e>mn.MAX_DELAY){const o=new Error(`Delay should not be more than ${mn.MAX_DELAY}`);throw o.name="MaxLimitExceeded",o}else if(n>mn.MAX_MAX_RETRIES){const o=new Error(`MaxRetries should not be more than ${mn.MAX_MAX_RETRIES}`);throw o.name="MaxLimitExceeded",o}else if(e<0&&n<0){const o=new Error("Delay and MaxRetries should not be negative");throw o.name="MinExpectationNotMet",o}else if(e<0){const o=new Error("Delay should not be negative");throw o.name="MinExpectationNotMet",o}else if(n<0){const o=new Error("MaxRetries should not be negative");throw o.name="MinExpectationNotMet",o}this.delay=Math.min(e,mn.MAX_DELAY),this.maxRetries=Math.min(n,mn.MAX_MAX_RETRIES),this.shouldRetry=r}getMaxDelay(){return mn.MAX_DELAY}}mn.DEFAULT_DELAY=3;mn.DEFAULT_MAX_RETRIES=3;mn.MAX_DELAY=180;mn.MAX_MAX_RETRIES=10;mn.defaultShouldRetry=()=>!0;class Ba{constructor(e=new mn){this.options=e}isRetry(e){return Ba.RETRY_STATUS_CODES.indexOf(e.status)!==-1}isBuffered(e,n){const r=typeof e=="string"?n.method:e.method;return!((r===zr.PUT||r===zr.PATCH||r===zr.POST)&&hL(e,n,"Content-Type")==="application/octet-stream")}getDelay(e,n,r){const o=()=>Number(Math.random().toFixed(3)),i=e.headers!==void 0?e.headers.get(Ba.RETRY_AFTER_HEADER):null;let a;return i!==null?Number.isNaN(Number(i))?a=Math.round((new Date(i).getTime()-Date.now())/1e3):a=Number(i):a=n>=2?this.getExponentialBackOffTime(n)+r+o():r+o(),Math.min(a,this.options.getMaxDelay()+o())}getExponentialBackOffTime(e){return Math.round(1/2*(Math.pow(2,e)-1))}sleep(e){return Gt(this,void 0,void 0,function*(){const n=e*1e3;return new Promise(r=>setTimeout(r,n))})}getOptions(e){let n;return e.middlewareControl instanceof uc&&(n=e.middlewareControl.getMiddlewareOptions(this.options.constructor)),typeof n>"u"&&(n=Object.assign(new mn,this.options)),n}executeWithRetry(e,n,r){return Gt(this,void 0,void 0,function*(){if(yield this.nextMiddleware.execute(e),n<r.maxRetries&&this.isRetry(e.response)&&this.isBuffered(e.request,e.options)&&r.shouldRetry(r.delay,n,e.request,e.options,e.response)){++n,pL(e.request,e.options,Ba.RETRY_ATTEMPT_HEADER,n.toString());const o=this.getDelay(e.response,n,r.delay);return yield this.sleep(o),yield this.executeWithRetry(e,n,r)}else return})}execute(e){return Gt(this,void 0,void 0,function*(){const r=this.getOptions(e);return Fa.updateFeatureUsageFlag(e,mu.RETRY_HANDLER_ENABLED),yield this.executeWithRetry(e,0,r)})}setNext(e){this.nextMiddleware=e}}Ba.RETRY_STATUS_CODES=[429,503,504];Ba.RETRY_ATTEMPT_HEADER="Retry-Attempt";Ba.RETRY_AFTER_HEADER="Retry-After";class mo{constructor(e=mo.DEFAULT_MAX_REDIRECTS,n=mo.defaultShouldRedirect){if(e>mo.MAX_MAX_REDIRECTS){const r=new Error(`MaxRedirects should not be more than ${mo.MAX_MAX_REDIRECTS}`);throw r.name="MaxLimitExceeded",r}if(e<0){const r=new Error("MaxRedirects should not be negative");throw r.name="MinExpectationNotMet",r}this.maxRedirects=e,this.shouldRedirect=n}}mo.DEFAULT_MAX_REDIRECTS=5;mo.MAX_MAX_REDIRECTS=20;mo.defaultShouldRedirect=()=>!0;let Qu=class Ss{constructor(e=new mo){this.options=e}isRedirect(e){return Ss.REDIRECT_STATUS_CODES.indexOf(e.status)!==-1}hasLocationHeader(e){return e.headers.has(Ss.LOCATION_HEADER)}getLocationHeader(e){return e.headers.get(Ss.LOCATION_HEADER)}isRelativeURL(e){return e.indexOf("://")===-1}shouldDropAuthorizationHeader(e,n){const r=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,o=r.exec(e);let i,a;o!==null&&(i=o[0]);const s=r.exec(n);return s!==null&&(a=s[0]),typeof i<"u"&&typeof a<"u"&&i!==a}updateRequestUrl(e,n){return Gt(this,void 0,void 0,function*(){n.request=typeof n.request=="string"?e:yield zQ(e,n.request)})}getOptions(e){let n;return e.middlewareControl instanceof uc&&(n=e.middlewareControl.getMiddlewareOptions(mo)),typeof n>"u"&&(n=Object.assign(new mo,this.options)),n}executeWithRedirect(e,n,r){return Gt(this,void 0,void 0,function*(){yield this.nextMiddleware.execute(e);const o=e.response;if(n<r.maxRedirects&&this.isRedirect(o)&&this.hasLocationHeader(o)&&r.shouldRedirect(o)){if(++n,o.status===Ss.STATUS_CODE_SEE_OTHER)e.options.method=zr.GET,delete e.options.body;else{const i=this.getLocationHeader(o);!this.isRelativeURL(i)&&this.shouldDropAuthorizationHeader(o.url,i)&&delete e.options.headers[Ss.AUTHORIZATION_HEADER],yield this.updateRequestUrl(i,e)}yield this.executeWithRedirect(e,n,r)}else return})}execute(e){return Gt(this,void 0,void 0,function*(){const r=this.getOptions(e);return e.options.redirect=Ss.MANUAL_REDIRECT,Fa.updateFeatureUsageFlag(e,mu.REDIRECT_HANDLER_ENABLED),yield this.executeWithRedirect(e,0,r)})}setNext(e){this.nextMiddleware=e}};Qu.REDIRECT_STATUS_CODES=[301,302,303,307,308];Qu.STATUS_CODE_SEE_OTHER=303;Qu.LOCATION_HEADER="Location";Qu.AUTHORIZATION_HEADER="Authorization";Qu.MANUAL_REDIRECT="manual";const KQ="3.0.7";class $r{execute(e){return Gt(this,void 0,void 0,function*(){const n=typeof e.request=="string"?e.request:e.request.url;if(uL(n)||e.customHosts&&dL(n,e.customHosts)){let r=hL(e.request,e.options,$r.CLIENT_REQUEST_ID_HEADER);r||(r=VQ(),pL(e.request,e.options,$r.CLIENT_REQUEST_ID_HEADER,r));let o=`${$r.PRODUCT_NAME}/${KQ}`,i;if(e.middlewareControl instanceof uc&&(i=e.middlewareControl.getMiddlewareOptions(Fa)),i){const a=i.getFeatureUsage();o+=` (${$r.FEATURE_USAGE_STRING}=${a})`}mL(e.request,e.options,$r.SDK_VERSION_HEADER,o)}else delete e.options.headers[$r.CLIENT_REQUEST_ID_HEADER],delete e.options.headers[$r.SDK_VERSION_HEADER];return yield this.nextMiddleware.execute(e)})}setNext(e){this.nextMiddleware=e}}$r.CLIENT_REQUEST_ID_HEADER="client-request-id";$r.SDK_VERSION_HEADER="SdkVersion";$r.PRODUCT_NAME="graph-js";$r.FEATURE_USAGE_STRING="featureUsage";function gL(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Uk;(function(t){t[t.MANUAL=0]="MANUAL",t[t.RANDOM=1]="RANDOM"})(Uk||(Uk={}));var Xo;(function(t){t.ARRAYBUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.RAW="raw",t.STREAM="stream",t.TEXT="text"})(Xo||(Xo={}));var XC;(function(t){t.TEXT_HTML="text/html",t.TEXT_XML="text/xml",t.APPLICATION_XML="application/xml",t.APPLICATION_XHTML="application/xhtml+xml"})(XC||(XC={}));var qm;(function(t){t.TEXT_PLAIN="text/plain",t.APPLICATION_JSON="application/json"})(qm||(qm={}));var Ym;(function(t){t.DOCUMENT="^(text\\/(html|xml))|(application\\/(xml|xhtml\\+xml))$",t.IMAGE="^image\\/.+"})(Ym||(Ym={}));class gf{static parseDocumentResponse(e,n){return typeof DOMParser<"u"?new Promise((r,o)=>{e.text().then(i=>{try{const s=new DOMParser().parseFromString(i,n);r(s)}catch(a){o(a)}})}):Promise.resolve(e.body)}static convertResponse(e,n){return Gt(this,void 0,void 0,function*(){if(e.status===204)return Promise.resolve();let r;const o=e.headers.get("Content-type");switch(n){case Xo.ARRAYBUFFER:r=yield e.arrayBuffer();break;case Xo.BLOB:r=yield e.blob();break;case Xo.DOCUMENT:r=yield gf.parseDocumentResponse(e,XC.TEXT_XML);break;case Xo.JSON:r=yield e.json();break;case Xo.STREAM:r=yield Promise.resolve(e.body);break;case Xo.TEXT:r=yield e.text();break;default:if(o!==null){const i=o.split(";")[0];new RegExp(Ym.DOCUMENT).test(i)?r=yield gf.parseDocumentResponse(e,i):new RegExp(Ym.IMAGE).test(i)?r=e.blob():i===qm.TEXT_PLAIN?r=yield e.text():i===qm.APPLICATION_JSON?r=yield e.json():r=Promise.resolve(e.body)}else r=Promise.resolve(e.body);break}return r})}static getResponse(e,n,r){return Gt(this,void 0,void 0,function*(){if(n===Xo.RAW)return Promise.resolve(e);{const o=yield gf.convertResponse(e,n);if(e.ok)if(typeof r=="function")r(null,o);else return o;else throw o}})}}class WQ{constructor(e){this.provider=e}getAccessToken(){return Gt(this,void 0,void 0,function*(){return new Promise((e,n)=>{this.provider((r,o)=>Gt(this,void 0,void 0,function*(){if(o)e(o);else{if(!r){const a="Access token is undefined or empty.						Please provide a valid token.						For more help - https://github.com/microsoftgraph/msgraph-sdk-javascript/blob/dev/docs/CustomAuthenticationProvider.md";r=new lc(a)}const i=yield lc.setGraphClientError(r);n(i)}}))})})}}class vf extends Error{constructor(e=-1,n,r){super(n||r&&r.message),Object.setPrototypeOf(this,vf.prototype),this.statusCode=e,this.code=null,this.requestId=null,this.date=new Date,this.body=null,this.stack=r?r.stack:this.stack}}class Qm{static constructError(e,n,r){const o=new vf(n,"",e);return e.name!==void 0&&(o.code=e.name),o.body=e.toString(),o.date=new Date,o.headers=r==null?void 0:r.headers,o}static constructErrorFromResponse(e,n,r){const o=e.error,i=new vf(n,o.message);return i.code=o.code,o.innerError!==void 0&&(i.requestId=o.innerError["request-id"],i.date=new Date(o.innerError.date)),i.body=JSON.stringify(o),i.headers=r==null?void 0:r.headers,i}static getError(e=null,n=-1,r,o){return Gt(this,void 0,void 0,function*(){let i;if(e&&e.error?i=Qm.constructErrorFromResponse(e,n,o):e instanceof Error?i=Qm.constructError(e,n,o):(i=new vf(n),i.body=e),typeof r=="function")r(i,null);else return i})}}class qQ{constructor(e,n,r){this.parsePath=o=>{if(o.indexOf("https://")!==-1){o=o.replace("https://","");const a=o.indexOf("/");a!==-1&&(this.urlComponents.host="https://"+o.substring(0,a),o=o.substring(a+1,o.length));const s=o.indexOf("/");s!==-1&&(this.urlComponents.version=o.substring(0,s),o=o.substring(s+1,o.length))}o.charAt(0)==="/"&&(o=o.substr(1));const i=o.indexOf("?");if(i===-1)this.urlComponents.path=o;else{this.urlComponents.path=o.substr(0,i);const a=o.substring(i+1,o.length).split("&");for(const s of a)this.parseQueryParameter(s)}},this.httpClient=e,this.config=n,this.urlComponents={host:this.config.baseUrl,version:this.config.defaultVersion,oDataQueryParams:{},otherURLQueryParams:{},otherURLQueryOptions:[]},this._headers={},this._options={},this._middlewareOptions=[],this.parsePath(r)}addCsvQueryParameter(e,n,r){this.urlComponents.oDataQueryParams[e]=this.urlComponents.oDataQueryParams[e]?this.urlComponents.oDataQueryParams[e]+",":"";let o=[];r.length>1&&typeof n=="string"?o=Array.prototype.slice.call(r):typeof n=="string"?o.push(n):o=o.concat(n),this.urlComponents.oDataQueryParams[e]+=o.join(",")}buildFullUrl(){const e=BQ([this.urlComponents.host,this.urlComponents.version,this.urlComponents.path])+this.createQueryString();return this.config.debugLogging&&console.log(e),e}createQueryString(){const e=this.urlComponents,n=[];if(Object.keys(e.oDataQueryParams).length!==0)for(const r in e.oDataQueryParams)Object.prototype.hasOwnProperty.call(e.oDataQueryParams,r)&&n.push(r+"="+e.oDataQueryParams[r]);if(Object.keys(e.otherURLQueryParams).length!==0)for(const r in e.otherURLQueryParams)Object.prototype.hasOwnProperty.call(e.otherURLQueryParams,r)&&n.push(r+"="+e.otherURLQueryParams[r]);if(e.otherURLQueryOptions.length!==0)for(const r of e.otherURLQueryOptions)n.push(r);return n.length>0?"?"+n.join("&"):""}parseQueryParameter(e){if(typeof e=="string")if(e.charAt(0)==="?"&&(e=e.substring(1)),e.indexOf("&")!==-1){const n=e.split("&");for(const r of n)this.parseQueryParamenterString(r)}else this.parseQueryParamenterString(e);else if(e.constructor===Object)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&this.setURLComponentsQueryParamater(n,e[n]);return this}parseQueryParamenterString(e){if(this.isValidQueryKeyValuePair(e)){const n=e.indexOf("="),r=e.substring(0,n),o=e.substring(n+1);this.setURLComponentsQueryParamater(r,o)}else this.urlComponents.otherURLQueryOptions.push(e)}setURLComponentsQueryParamater(e,n){if(FQ.indexOf(e)!==-1){const r=this.urlComponents.oDataQueryParams[e],o=r&&(e==="$expand"||e==="$select"||e==="$orderby");this.urlComponents.oDataQueryParams[e]=o?r+","+n:n}else this.urlComponents.otherURLQueryParams[e]=n}isValidQueryKeyValuePair(e){const n=e.indexOf("=");return!(n===-1||e.indexOf("(")!==-1&&e.indexOf("(")<n)}updateRequestOptions(e){const n=Object.assign({},e.headers);if(this.config.fetchOptions!==void 0){const r=Object.assign({},this.config.fetchOptions);Object.assign(e,r),typeof this.config.fetchOptions.headers!==void 0&&(e.headers=Object.assign({},this.config.fetchOptions.headers))}Object.assign(e,this._options),e.headers!==void 0&&Object.assign(n,e.headers),Object.assign(n,this._headers),e.headers=n}send(e,n,r){var o;return Gt(this,void 0,void 0,function*(){let i;const a=new uc(this._middlewareOptions);this.updateRequestOptions(n);const s=(o=this.config)===null||o===void 0?void 0:o.customHosts;try{return i=(yield this.httpClient.sendRequest({request:e,options:n,middlewareControl:a,customHosts:s})).response,yield gf.getResponse(i,this._responseType,r)}catch(c){if(c instanceof lc)throw c;let u;throw i&&(u=i.status),yield Qm.getError(c,u,r,i)}})}setHeaderContentType(){if(!this._headers){this.header("Content-Type","application/json");return}const e=Object.keys(this._headers);for(const n of e)if(n.toLowerCase()==="content-type")return;this.header("Content-Type","application/json")}header(e,n){return this._headers[e]=n,this}headers(e){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this._headers[n]=e[n]);return this}option(e,n){return this._options[e]=n,this}options(e){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this._options[n]=e[n]);return this}middlewareOptions(e){return this._middlewareOptions=e,this}version(e){return this.urlComponents.version=e,this}responseType(e){return this._responseType=e,this}select(e){return this.addCsvQueryParameter("$select",e,arguments),this}expand(e){return this.addCsvQueryParameter("$expand",e,arguments),this}orderby(e){return this.addCsvQueryParameter("$orderby",e,arguments),this}filter(e){return this.urlComponents.oDataQueryParams.$filter=e,this}search(e){return this.urlComponents.oDataQueryParams.$search=e,this}top(e){return this.urlComponents.oDataQueryParams.$top=e,this}skip(e){return this.urlComponents.oDataQueryParams.$skip=e,this}skipToken(e){return this.urlComponents.oDataQueryParams.$skipToken=e,this}count(e=!0){return this.urlComponents.oDataQueryParams.$count=e.toString(),this}query(e){return this.parseQueryParameter(e)}get(e){return Gt(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:zr.GET};return yield this.send(n,r,e)})}post(e,n){return Gt(this,void 0,void 0,function*(){const r=this.buildFullUrl(),o={method:zr.POST,body:Sb(e)};return(e&&e.constructor&&e.constructor.name)==="FormData"?o.headers={}:(this.setHeaderContentType(),o.headers=this._headers),yield this.send(r,o,n)})}create(e,n){return Gt(this,void 0,void 0,function*(){return yield this.post(e,n)})}put(e,n){return Gt(this,void 0,void 0,function*(){const r=this.buildFullUrl();this.setHeaderContentType();const o={method:zr.PUT,body:Sb(e)};return yield this.send(r,o,n)})}patch(e,n){return Gt(this,void 0,void 0,function*(){const r=this.buildFullUrl();this.setHeaderContentType();const o={method:zr.PATCH,body:Sb(e)};return yield this.send(r,o,n)})}update(e,n){return Gt(this,void 0,void 0,function*(){return yield this.patch(e,n)})}delete(e){return Gt(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:zr.DELETE};return yield this.send(n,r,e)})}del(e){return Gt(this,void 0,void 0,function*(){return yield this.delete(e)})}getStream(e){return Gt(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:zr.GET};return this.responseType(Xo.STREAM),yield this.send(n,r,e)})}putStream(e,n){return Gt(this,void 0,void 0,function*(){const r=this.buildFullUrl(),o={method:zr.PUT,headers:{"Content-Type":"application/octet-stream"},body:e};return yield this.send(r,o,n)})}}class vL{constructor(...e){if(!e||!e.length){const n=new Error;throw n.name="InvalidMiddlewareChain",n.message="Please provide a default middleware chain or custom middleware chain",n}this.setMiddleware(...e)}setMiddleware(...e){e.length>1?this.parseMiddleWareArray(e):this.middleware=e[0]}parseMiddleWareArray(e){e.forEach((n,r)=>{r<e.length-1&&n.setNext(e[r+1])}),this.middleware=e[0]}sendRequest(e){return Gt(this,void 0,void 0,function*(){if(typeof e.request=="string"&&e.options===void 0){const n=new Error;throw n.name="InvalidRequestOptions",n.message="Unable to execute the middleware, Please provide valid options for a request",n}return yield this.middleware.execute(e),e})}}const YQ=()=>typeof process=="object"&&typeof gL=="function";class hE{static createWithAuthenticationProvider(e){const n=new Wf(e),r=new Ba(new mn),o=new $r,i=new GQ;if(n.setNext(r),YQ()){const a=new Qu(new mo);r.setNext(a),a.setNext(o)}else r.setNext(o);return o.setNext(i),hE.createWithMiddleware(n)}static createWithMiddleware(...e){return new vL(...e)}}const QQ=()=>{if(typeof Promise>"u"&&typeof fetch>"u"){const t=new Error("Library cannot function without Promise and fetch. So, please provide polyfill for them.");throw t.name="PolyFillNotAvailable",t}else if(typeof Promise>"u"){const t=new Error("Library cannot function without Promise. So, please provide polyfill for it.");throw t.name="PolyFillNotAvailable",t}else if(typeof fetch>"u"){const t=new Error("Library cannot function without fetch. So, please provide polyfill for it.");throw t.name="PolyFillNotAvailable",t}return!0};class Jm{static init(e){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=r==="authProvider"?new WQ(e[r]):e[r]);return Jm.initWithMiddleware(n)}static initWithMiddleware(e){return new Jm(e)}constructor(e){this.config={baseUrl:jQ,debugLogging:!1,defaultVersion:DQ},QQ();for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.config[r]=e[r]);let n;if(e.authProvider!==void 0&&e.middleware!==void 0){const r=new Error;throw r.name="AmbiguityInInitialization",r.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain not both",r}else if(e.authProvider!==void 0)n=hE.createWithAuthenticationProvider(e.authProvider);else if(e.middleware!==void 0)n=new vL(...[].concat(e.middleware));else{const r=new Error;throw r.name="InvalidMiddlewareChain",r.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain",r}this.httpClient=n}api(e){return new qQ(this.httpClient,this.config,e)}}const JQ=["CAREERCOACH_STUDENTS","EXCHANGESTANDARD_STUDENT","M365EDU_A3_STUDENT","M365EDU_A3_STUUSEBNFT","M365EDU_A3_STUUSEBNFT_RPA1","M365EDU_A5_STUDENT","M365EDU_A5_STUUSEBNFT","M365EDU_A5_NOPSTNCONF_STUUSEBNFT","OFFICESUBSCRIPTION_STUDENT","ATP_ENTERPRISE_STUDENT","ATP_ENTERPRISE_STUDENTS_USE_BENEFIT","POWER_BI_STANDARD_STUDENT","MCOEV_STUDENT","MEE_STUDENT","STANDARDWOFFPACK_STUDENT","STANDARDWOFFPACK_IW_STUDENT","ENTERPRISEPACKPLUS_STUDENT","ENTERPRISEPREMIUM_STUDENT","WIN10_ENT_A3_STU","MCO_TEAMS_EDU_HS_STUDENT","PROJECT_PROFESSIONAL_STUDENT","PROJECT_P1_STUDENT"];function XQ(t){return Jm.init({authProvider:e=>{e(null,t)}})}async function wb(t,e){const n=performance.now(),r=await e;return Y.trackEvent({name:"system",data:{eventName:"externalApiResponse",eventInfo_id:t,eventInfo_duration:performance.now()-n,eventInfo_service:"microsoft-graph"}}),r}async function ZQ(t){return t.api(sw.graphMeApiSuffix).get()}async function eJ(t){try{const e=await t.api(sw.graphMeImageApiSuffix).get();return URL.createObjectURL(e)}catch{return}}async function tJ(t){const e=gt(Yu);if(ot("aad-student")&&e)try{const n=await t.api(sw.graphMeLicenseDetails).get();return n&&n.value.some(o=>o.skuPartNumber&&JQ.includes(o.skuPartNumber))}catch(n){return console.error("Error checking student status:",n),!1}else return!1}async function Fk(t){const e=XQ(t),[n,r,o]=await Promise.all([wb("user",ZQ(e)),wb("user_photo",eJ(e)),wb("is_student",tJ(e))]);return{...n,imgSrc:r,isStudent:o}}/*! @azure/msal-common v14.15.0 2024-09-20 */const ae={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},up={CLIENT_ERROR_RANGE_START:400,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR_RANGE_START:500,SERVER_ERROR_RANGE_END:599},Ju=[ae.OPENID_SCOPE,ae.PROFILE_SCOPE,ae.OFFLINE_ACCESS_SCOPE],Bk=[...Ju,ae.EMAIL_SCOPE],ui={CONTENT_TYPE:"Content-Type",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Bn={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Ha={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},dp={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},$n={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},Hk={PLAIN:"plain",S256:"S256"},Nh={QUERY:"query",FRAGMENT:"fragment"},nJ={...Nh},yL={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},fp={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},rr={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},rt={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},pE="appmetadata",rJ="client_info",yf="1",Xm={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Br={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Kn={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Bt={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},bf={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Vk={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},zk={username:"username",password:"password"},hp={httpSuccess:200,httpBadRequest:400},nl={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Eb={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Ea={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},oJ={Pop:"pop"},iJ=300;/*! @azure/msal-common v14.15.0 2024-09-20 */const mE="unexpected_error",aJ="post_request_failed";/*! @azure/msal-common v14.15.0 2024-09-20 */const $k={[mE]:"Unexpected error in authentication.",[aJ]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Yt extends Error{constructor(e,n,r){const o=n?`${e}: ${n}`:e;super(o),Object.setPrototypeOf(this,Yt.prototype),this.errorCode=e||ae.EMPTY_STRING,this.errorMessage=n||ae.EMPTY_STRING,this.subError=r||ae.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function bL(t,e){return new Yt(t,e?`${$k[t]} ${e}`:$k[t])}/*! @azure/msal-common v14.15.0 2024-09-20 */const gE="client_info_decoding_error",_L="client_info_empty_error",vE="token_parsing_error",CL="null_or_empty_token",Mi="endpoints_resolution_error",SL="network_error",wL="openid_config_error",EL="hash_not_deserialized",gu="invalid_state",TL="state_mismatch",Zm="state_not_found",IL="nonce_mismatch",yE="auth_time_not_found",AL="max_age_transpired",sJ="multiple_matching_tokens",cJ="multiple_matching_accounts",kL="multiple_matching_appMetadata",xL="request_cannot_be_made",RL="cannot_remove_empty_scope",PL="cannot_append_scopeset",ZC="empty_input_scopeset",lJ="device_code_polling_cancelled",uJ="device_code_expired",dJ="device_code_unknown_error",bE="no_account_in_silent_request",OL="invalid_cache_record",_E="invalid_cache_environment",eS="no_account_found",tS="no_crypto_object",nS="unexpected_credential_type",fJ="invalid_assertion",hJ="invalid_client_credential",Vi="token_refresh_required",pJ="user_timeout_reached",NL="token_claims_cnf_required_for_signedjwt",ML="authorization_code_missing_from_server_response",LL="binding_key_not_removed",DL="end_session_endpoint_not_supported",CE="key_id_missing",mJ="no_network_connectivity",gJ="user_canceled",vJ="missing_tenant_id_error",pt="method_not_implemented",yJ="nested_app_auth_bridge_disabled";/*! @azure/msal-common v14.15.0 2024-09-20 */const Gk={[gE]:"The client info could not be parsed/decoded correctly",[_L]:"The client info was empty",[vE]:"Token cannot be parsed",[CL]:"The token is null or empty",[Mi]:"Endpoints cannot be resolved",[SL]:"Network request failed",[wL]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[EL]:"The hash parameters could not be deserialized",[gu]:"State was not the expected format",[TL]:"State mismatch error",[Zm]:"State not found",[IL]:"Nonce mismatch error",[yE]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[AL]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[sJ]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[cJ]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[kL]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[xL]:"Token request cannot be made without authorization code or refresh token.",[RL]:"Cannot remove null or empty scope from ScopeSet",[PL]:"Cannot append ScopeSet",[ZC]:"Empty input ScopeSet cannot be processed",[lJ]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[uJ]:"Device code is expired.",[dJ]:"Device code stopped polling for unknown reasons.",[bE]:"Please pass an account object, silent flow is not supported without account information",[OL]:"Cache record object was null or undefined.",[_E]:"Invalid environment when attempting to create cache entry",[eS]:"No account found in cache for given key.",[tS]:"No crypto object detected.",[nS]:"Unexpected credential type.",[fJ]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[hJ]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Vi]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[pJ]:"User defined timeout for device code polling reached",[NL]:"Cannot generate a POP jwt if the token_claims are not populated",[ML]:"Server response does not contain an authorization code to proceed",[LL]:"Could not remove the credential's binding key from storage.",[DL]:"The provided authority does not support logout",[CE]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[mJ]:"No network connectivity. Check your internet connection.",[gJ]:"User cancelled the flow.",[vJ]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[pt]:"This method has not been implemented",[yJ]:"The nested app auth bridge is disabled"};class Ov extends Yt{constructor(e,n){super(e,n?`${Gk[e]}: ${n}`:Gk[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,Ov.prototype)}}function Ce(t,e){return new Ov(t,e)}/*! @azure/msal-common v14.15.0 2024-09-20 */const eg={createNewGuid:()=>{throw Ce(pt)},base64Decode:()=>{throw Ce(pt)},base64Encode:()=>{throw Ce(pt)},base64UrlEncode:()=>{throw Ce(pt)},encodeKid:()=>{throw Ce(pt)},async getPublicKeyThumbprint(){throw Ce(pt)},async removeTokenBindingKey(){throw Ce(pt)},async clearKeystore(){throw Ce(pt)},async signJwt(){throw Ce(pt)},async hashString(){throw Ce(pt)}};/*! @azure/msal-common v14.15.0 2024-09-20 */var un;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(un||(un={}));class Zi{constructor(e,n,r){this.level=un.Info;const o=()=>{},i=e||Zi.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||o,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:un.Info,this.correlationId=i.correlationId||ae.EMPTY_STRING,this.packageName=n||ae.EMPTY_STRING,this.packageVersion=r||ae.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:un.Info}}clone(e,n,r){return new Zi({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,n)}logMessage(e,n){if(n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii)return;const i=`${`[${new Date().toUTCString()}] : [${n.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${un[n.logLevel]} - ${e}`;this.executeCallback(n.logLevel,i,n.containsPii||!1)}executeCallback(e,n,r){this.localCallback&&this.localCallback(e,n,r)}error(e,n){this.logMessage(e,{logLevel:un.Error,containsPii:!1,correlationId:n||ae.EMPTY_STRING})}errorPii(e,n){this.logMessage(e,{logLevel:un.Error,containsPii:!0,correlationId:n||ae.EMPTY_STRING})}warning(e,n){this.logMessage(e,{logLevel:un.Warning,containsPii:!1,correlationId:n||ae.EMPTY_STRING})}warningPii(e,n){this.logMessage(e,{logLevel:un.Warning,containsPii:!0,correlationId:n||ae.EMPTY_STRING})}info(e,n){this.logMessage(e,{logLevel:un.Info,containsPii:!1,correlationId:n||ae.EMPTY_STRING})}infoPii(e,n){this.logMessage(e,{logLevel:un.Info,containsPii:!0,correlationId:n||ae.EMPTY_STRING})}verbose(e,n){this.logMessage(e,{logLevel:un.Verbose,containsPii:!1,correlationId:n||ae.EMPTY_STRING})}verbosePii(e,n){this.logMessage(e,{logLevel:un.Verbose,containsPii:!0,correlationId:n||ae.EMPTY_STRING})}trace(e,n){this.logMessage(e,{logLevel:un.Trace,containsPii:!1,correlationId:n||ae.EMPTY_STRING})}tracePii(e,n){this.logMessage(e,{logLevel:un.Trace,containsPii:!0,correlationId:n||ae.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v14.15.0 2024-09-20 */const jL="@azure/msal-common",SE="14.15.0";/*! @azure/msal-common v14.15.0 2024-09-20 */const qf={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net"};/*! @azure/msal-common v14.15.0 2024-09-20 */function Lc(t,e){const n=bJ(t);try{const r=e(n);return JSON.parse(r)}catch{throw Ce(vE)}}function bJ(t){if(!t)throw Ce(CL);const n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw Ce(vE);return n[2]}function UL(t,e){if(e===0||Date.now()-3e5>t+e)throw Ce(AL)}/*! @azure/msal-common v14.15.0 2024-09-20 */function bi(){return Math.round(new Date().getTime()/1e3)}function rS(t,e){const n=Number(t)||0;return bi()+e>n}function _J(t){return Number(t)>bi()}/*! @azure/msal-common v14.15.0 2024-09-20 */function kl(t){return[CJ(t),SJ(t),wJ(t),EJ(t),TJ(t)].join(rr.CACHE_KEY_SEPARATOR).toLowerCase()}function Nv(t,e,n,r,o){return{credentialType:rt.ID_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,realm:o}}function Mv(t,e,n,r,o,i,a,s,c,u,d,h,p,g,v){var _,b;const y={homeAccountId:t,credentialType:rt.ACCESS_TOKEN,secret:n,cachedAt:bi().toString(),expiresOn:a.toString(),extendedExpiresOn:s.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:d||Bt.BEARER};if(h&&(y.userAssertionHash=h),u&&(y.refreshOn=u.toString()),g&&(y.requestedClaims=g,y.requestedClaimsHash=v),((_=y.tokenType)==null?void 0:_.toLowerCase())!==Bt.BEARER.toLowerCase())switch(y.credentialType=rt.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case Bt.POP:const C=Lc(n,c);if(!((b=C==null?void 0:C.cnf)!=null&&b.kid))throw Ce(NL);y.keyId=C.cnf.kid;break;case Bt.SSH:y.keyId=p}return y}function FL(t,e,n,r,o,i,a){const s={credentialType:rt.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n};return i&&(s.userAssertionHash=i),o&&(s.familyId=o),a&&(s.expiresOn=a.toString()),s}function wE(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function Kk(t){return t?wE(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===rt.ACCESS_TOKEN||t.credentialType===rt.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function Wk(t){return t?wE(t)&&t.hasOwnProperty("realm")&&t.credentialType===rt.ID_TOKEN:!1}function qk(t){return t?wE(t)&&t.credentialType===rt.REFRESH_TOKEN:!1}function CJ(t){return[t.homeAccountId,t.environment].join(rr.CACHE_KEY_SEPARATOR).toLowerCase()}function SJ(t){const e=t.credentialType===rt.REFRESH_TOKEN&&t.familyId||t.clientId;return[t.credentialType,e,t.realm||""].join(rr.CACHE_KEY_SEPARATOR).toLowerCase()}function wJ(t){return(t.target||"").toLowerCase()}function EJ(t){return(t.requestedClaimsHash||"").toLowerCase()}function TJ(t){return t.tokenType&&t.tokenType.toLowerCase()!==Bt.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}function IJ(t,e){const n=t.indexOf(Kn.CACHE_KEY)===0;let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),n&&r}function AJ(t,e){let n=!1;t&&(n=t.indexOf(bf.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),n&&r}function kJ({environment:t,clientId:e}){return[pE,t,e].join(rr.CACHE_KEY_SEPARATOR).toLowerCase()}function xJ(t,e){return e?t.indexOf(pE)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function RJ(t,e){return e?t.indexOf(Xm.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function Yk(){return bi()+Xm.REFRESH_TIME_SECONDS}function pp(t,e,n){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=n,t.jwks_uri=e.jwks_uri}function Tb(t,e,n){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=n}function Qk(t){return t.expiresAt<=bi()}/*! @azure/msal-common v14.15.0 2024-09-20 */const BL="redirect_uri_empty",PJ="claims_request_parsing_error",HL="authority_uri_insecure",ef="url_parse_error",VL="empty_url_error",zL="empty_input_scopes_error",$L="invalid_prompt_value",EE="invalid_claims",GL="token_request_empty",KL="logout_request_empty",WL="invalid_code_challenge_method",TE="pkce_params_missing",IE="invalid_cloud_discovery_metadata",qL="invalid_authority_metadata",YL="untrusted_authority",Lv="missing_ssh_jwk",QL="missing_ssh_kid",OJ="missing_nonce_authentication_header",NJ="invalid_authentication_header",JL="cannot_set_OIDCOptions",XL="cannot_allow_native_broker",ZL="authority_mismatch";/*! @azure/msal-common v14.15.0 2024-09-20 */const MJ={[BL]:"A redirect URI is required for all calls, and none has been set.",[PJ]:"Could not parse the given claims request object.",[HL]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[ef]:"URL could not be parsed into appropriate segments.",[VL]:"URL was empty or null.",[zL]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[$L]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[EE]:"Given claims parameter must be a stringified JSON object.",[GL]:"Token request was empty and not found in cache.",[KL]:"The logout request was null or undefined.",[WL]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[TE]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[IE]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[qL]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[YL]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Lv]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[QL]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[OJ]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[NJ]:"Invalid authentication header provided",[JL]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[XL]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[ZL]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class AE extends Yt{constructor(e){super(e,MJ[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,AE.prototype)}}function Kt(t){return new AE(t)}/*! @azure/msal-common v14.15.0 2024-09-20 */class Uo{static isEmptyObj(e){if(e)try{const n=JSON.parse(e);return Object.keys(n).length===0}catch{}return!0}static startsWith(e,n){return e.indexOf(n)===0}static endsWith(e,n){return e.length>=n.length&&e.lastIndexOf(n)===e.length-n.length}static queryStringToObject(e){const n={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){const[a,s]=i.split(/=(.+)/g,2);a&&s&&(n[o(a)]=o(s))}}),n}static trimArrayEntries(e){return e.map(n=>n.trim())}static removeEmptyStringsFromArray(e){return e.filter(n=>!!n)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,n){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(n)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class Sn{constructor(e){const n=e?Uo.trimArrayEntries([...e]):[],r=n?Uo.removeEmptyStringsFromArray(n):[];this.validateInputScopes(r),this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){const r=(e||ae.EMPTY_STRING).split(" ");return new Sn(r)}static createSearchScopes(e){const n=new Sn(e);return n.containsOnlyOIDCScopes()?n.removeScope(ae.OFFLINE_ACCESS_SCOPE):n.removeOIDCScopes(),n}validateInputScopes(e){if(!e||e.length<1)throw Kt(zL)}containsScope(e){const n=this.printScopesLowerCase().split(" "),r=new Sn(n);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(n=>this.containsScope(n))}containsOnlyOIDCScopes(){let e=0;return Bk.forEach(n=>{this.containsScope(n)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(n=>this.appendScope(n))}catch{throw Ce(PL)}}removeScope(e){if(!e)throw Ce(RL);this.scopes.delete(e.trim())}removeOIDCScopes(){Bk.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw Ce(ZC);const n=new Set;return e.scopes.forEach(r=>n.add(r.toLowerCase())),this.scopes.forEach(r=>n.add(r.toLowerCase())),n}intersectingScopeSets(e){if(!e)throw Ce(ZC);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const n=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return n.size<o+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(n=>e.push(n)),e}printScopes(){return this.scopes?this.asArray().join(" "):ae.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v14.15.0 2024-09-20 */function tg(t,e){if(!t)throw Ce(_L);try{const n=e(t);return JSON.parse(n)}catch{throw Ce(gE)}}function xl(t){if(!t)throw Ce(gE);const e=t.split(rr.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?ae.EMPTY_STRING:e[1]}}/*! @azure/msal-common v14.15.0 2024-09-20 */function ng(t,e){return!!t&&!!e&&t===e.split(".")[1]}function kE(t,e,n,r){if(r){const{oid:o,sub:i,tid:a,name:s,tfp:c,acr:u}=r,d=a||c||u||"";return{tenantId:d,localAccountId:o||i||"",name:s,isHomeTenant:ng(d,t)}}else return{tenantId:n,localAccountId:e,isHomeTenant:ng(n,t)}}function xE(t,e,n,r){let o=t;if(e){const{isHomeTenant:i,...a}=e;o={...t,...a}}if(n){const{isHomeTenant:i,...a}=kE(t.homeAccountId,t.localAccountId,t.tenantId,n);return o={...o,...a,idTokenClaims:n,idToken:r},o}return o}/*! @azure/msal-common v14.15.0 2024-09-20 */const Lo={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v14.15.0 2024-09-20 */function eD(t){return t&&(t.tid||t.tfp||t.acr)||null}/*! @azure/msal-common v14.15.0 2024-09-20 */const $i={AAD:"AAD",OIDC:"OIDC"};/*! @azure/msal-common v14.15.0 2024-09-20 */class Dn{generateAccountId(){return[this.homeAccountId,this.environment].join(rr.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return Dn.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const n=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",n||e.tenantId||""].join(rr.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,n,r){var u,d,h,p,g,v;const o=new Dn;n.authorityType===Lo.Adfs?o.authorityType=fp.ADFS_ACCOUNT_TYPE:n.protocolMode===$i.AAD?o.authorityType=fp.MSSTS_ACCOUNT_TYPE:o.authorityType=fp.GENERIC_ACCOUNT_TYPE;let i;e.clientInfo&&r&&(i=tg(e.clientInfo,r)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;const a=e.environment||n&&n.getPreferredCache();if(!a)throw Ce(_E);o.environment=a,o.realm=(i==null?void 0:i.utid)||eD(e.idTokenClaims)||"",o.localAccountId=(i==null?void 0:i.uid)||((u=e.idTokenClaims)==null?void 0:u.oid)||((d=e.idTokenClaims)==null?void 0:d.sub)||"";const s=((h=e.idTokenClaims)==null?void 0:h.preferred_username)||((p=e.idTokenClaims)==null?void 0:p.upn),c=(g=e.idTokenClaims)!=null&&g.emails?e.idTokenClaims.emails[0]:null;if(o.username=s||c||"",o.name=((v=e.idTokenClaims)==null?void 0:v.name)||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{const y=kE(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[y]}return o}static createFromAccountInfo(e,n,r){var i;const o=new Dn;return o.authorityType=e.authorityType||fp.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=n,o.msGraphHost=r,o.tenantProfiles=Array.from(((i=e.tenantProfiles)==null?void 0:i.values())||[]),o}static generateHomeAccountId(e,n,r,o,i){if(!(n===Lo.Adfs||n===Lo.Dsts)){if(e)try{const a=tg(e,o.base64Decode);if(a.uid&&a.utid)return`${a.uid}.${a.utid}`}catch{}r.warning("No client info in response")}return(i==null?void 0:i.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,n,r){if(!e||!n)return!1;let o=!0;if(r){const i=e.idTokenClaims||{},a=n.idTokenClaims||{};o=i.iat===a.iat&&i.nonce===a.nonce}return e.homeAccountId===n.homeAccountId&&e.localAccountId===n.localAccountId&&e.username===n.username&&e.tenantId===n.tenantId&&e.environment===n.environment&&e.nativeAccountId===n.nativeAccountId&&o}}/*! @azure/msal-common v14.15.0 2024-09-20 */function tD(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function rg(t){if(!t||t.indexOf("=")<0)return null;try{const e=tD(t),n=Object.fromEntries(new URLSearchParams(e));if(n.code||n.error||n.error_description||n.state)return n}catch{throw Ce(EL)}return null}/*! @azure/msal-common v14.15.0 2024-09-20 */class St{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Kt(VL);e.includes("#")||(this._urlString=St.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let n=e.toLowerCase();return Uo.endsWith(n,"?")?n=n.slice(0,-1):Uo.endsWith(n,"?/")&&(n=n.slice(0,-2)),Uo.endsWith(n,"/")||(n+="/"),n}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw Kt(ef)}if(!e.HostNameAndPort||!e.PathSegments)throw Kt(ef);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw Kt(HL)}static appendQueryString(e,n){return n?e.indexOf("?")<0?`${e}?${n}`:`${e}&${n}`:e}static removeHashFromUrl(e){return St.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const n=this.getUrlComponents(),r=n.PathSegments;return e&&r.length!==0&&(r[0]===Ha.COMMON||r[0]===Ha.ORGANIZATIONS)&&(r[0]=e),St.constructAuthorityUriFromObject(n)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=this.urlString.match(e);if(!n)throw Kt(ef);const r={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5],QueryString:n[7]};let o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const n=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(n);if(!r)throw Kt(ef);return r[2]}static getAbsoluteUrl(e,n){if(e[0]===ae.FORWARD_SLASH){const o=new St(n).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new St(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!rg(e)}}/*! @azure/msal-common v14.15.0 2024-09-20 */const nD={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Jk=nD.endpointMetadata,RE=nD.instanceDiscoveryMetadata,rD=new Set;RE.metadata.forEach(t=>{t.aliases.forEach(e=>{rD.add(e)})});function LJ(t,e){var o;let n;const r=t.canonicalAuthority;if(r){const i=new St(r).getUrlComponents().HostNameAndPort;n=Xk(i,(o=t.cloudDiscoveryMetadata)==null?void 0:o.metadata,Br.CONFIG,e)||Xk(i,RE.metadata,Br.HARDCODED_VALUES,e)||t.knownAuthorities}return n||[]}function Xk(t,e,n,r){if(r==null||r.trace(`getAliasesFromMetadata called with source: ${n}`),t&&e){const o=og(e,t);if(o)return r==null||r.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),o.aliases;r==null||r.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function DJ(t){return og(RE.metadata,t)}function og(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r.aliases.includes(e))return r}return null}/*! @azure/msal-common v14.15.0 2024-09-20 */const oD="cache_quota_exceeded",PE="cache_error_unknown";/*! @azure/msal-common v14.15.0 2024-09-20 */const Ib={[oD]:"Exceeded cache storage capacity.",[PE]:"Unexpected error occurred when using cache storage."};class Ws extends Error{constructor(e,n){const r=n||(Ib[e]?Ib[e]:Ib[PE]);super(`${e}: ${r}`),Object.setPrototypeOf(this,Ws.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}/*! @azure/msal-common v14.15.0 2024-09-20 */class vu{constructor(e,n,r,o){this.clientId=e,this.cryptoImpl=n,this.commonLogger=r.clone(jL,SE),this.staticAuthorityOptions=o}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const n=this.getAllAccounts(e);return n.length>1?n.sort(o=>o.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(e){const n=this.getAccountsFilteredBy(e);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(e,n){return e.flatMap(r=>this.getTenantProfilesFromAccountEntity(r,n==null?void 0:n.tenantId,n))}getTenantedAccountInfoByFilter(e,n,r,o){let i=null,a;if(o&&!this.tenantProfileMatchesFilter(r,o))return null;const s=this.getIdToken(e,n,r.tenantId);return s&&(a=Lc(s.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,o))?null:(i=xE(e,r,a,s==null?void 0:s.secret),i)}getTenantProfilesFromAccountEntity(e,n,r){const o=e.getAccountInfo();let i=o.tenantProfiles||new Map;const a=this.getTokenKeys();if(n){const c=i.get(n);if(c)i=new Map([[n,c]]);else return[]}const s=[];return i.forEach(c=>{const u=this.getTenantedAccountInfoByFilter(o,a,c,r);u&&s.push(u)}),s}tenantProfileMatchesFilter(e,n){return!(n.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,n.localAccountId)||n.name&&e.name!==n.name||n.isHomeTenant!==void 0&&e.isHomeTenant!==n.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,n){return!(n&&(n.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,n.localAccountId)||n.loginHint&&!this.matchLoginHintFromTokenClaims(e,n.loginHint)||n.username&&!this.matchUsername(e.preferred_username,n.username)||n.name&&!this.matchName(e,n.name)||n.sid&&!this.matchSid(e,n.sid)))}async saveCacheRecord(e,n,r){var o,i,a,s;if(!e)throw Ce(OL);try{e.account&&this.setAccount(e.account),e.idToken&&(n==null?void 0:n.idToken)!==!1&&this.setIdTokenCredential(e.idToken),e.accessToken&&(n==null?void 0:n.accessToken)!==!1&&await this.saveAccessToken(e.accessToken),e.refreshToken&&(n==null?void 0:n.refreshToken)!==!1&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(c){throw(o=this.commonLogger)==null||o.error("CacheManager.saveCacheRecord: failed"),c instanceof Error?((i=this.commonLogger)==null||i.errorPii(`CacheManager.saveCacheRecord: ${c.message}`,r),c.name==="QuotaExceededError"||c.name==="NS_ERROR_DOM_QUOTA_REACHED"||c.message.includes("exceeded the quota")?((a=this.commonLogger)==null||a.error("CacheManager.saveCacheRecord: exceeded storage quota",r),new Ws(oD)):new Ws(c.name,c.message)):((s=this.commonLogger)==null||s.errorPii(`CacheManager.saveCacheRecord: ${c}`,r),new Ws(PE))}}async saveAccessToken(e){const n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},r=this.getTokenKeys(),o=Sn.fromString(e.target),i=[];r.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,n,!1))return;const s=this.getAccessTokenCredential(a);s&&this.credentialMatchesFilter(s,n)&&Sn.fromString(s.target).intersectingScopeSets(o)&&i.push(this.removeAccessToken(a))}),await Promise.all(i),this.setAccessTokenCredential(e)}getAccountsFilteredBy(e){const n=this.getAccountKeys(),r=[];return n.forEach(o=>{var c;if(!this.isAccountKey(o,e.homeAccountId))return;const i=this.getAccount(o,this.commonLogger);if(!i||e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId)||e.username&&!this.matchUsername(i.username,e.username)||e.environment&&!this.matchEnvironment(i,e.environment)||e.realm&&!this.matchRealm(i,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;const a={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},s=(c=i.tenantProfiles)==null?void 0:c.filter(u=>this.tenantProfileMatchesFilter(u,a));s&&s.length===0||r.push(i)}),r}isAccountKey(e,n,r){return!(e.split(rr.CACHE_KEY_SEPARATOR).length<3||n&&!e.toLowerCase().includes(n.toLowerCase())||r&&!e.toLowerCase().includes(r.toLowerCase()))}isCredentialKey(e){if(e.split(rr.CACHE_KEY_SEPARATOR).length<6)return!1;const n=e.toLowerCase();if(n.indexOf(rt.ID_TOKEN.toLowerCase())===-1&&n.indexOf(rt.ACCESS_TOKEN.toLowerCase())===-1&&n.indexOf(rt.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&n.indexOf(rt.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(n.indexOf(rt.REFRESH_TOKEN.toLowerCase())>-1){const r=`${rt.REFRESH_TOKEN}${rr.CACHE_KEY_SEPARATOR}${this.clientId}${rr.CACHE_KEY_SEPARATOR}`,o=`${rt.REFRESH_TOKEN}${rr.CACHE_KEY_SEPARATOR}${yf}${rr.CACHE_KEY_SEPARATOR}`;if(n.indexOf(r.toLowerCase())===-1&&n.indexOf(o.toLowerCase())===-1)return!1}else if(n.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,n){return!(n.clientId&&!this.matchClientId(e,n.clientId)||n.userAssertionHash&&!this.matchUserAssertionHash(e,n.userAssertionHash)||typeof n.homeAccountId=="string"&&!this.matchHomeAccountId(e,n.homeAccountId)||n.environment&&!this.matchEnvironment(e,n.environment)||n.realm&&!this.matchRealm(e,n.realm)||n.credentialType&&!this.matchCredentialType(e,n.credentialType)||n.familyId&&!this.matchFamilyId(e,n.familyId)||n.target&&!this.matchTarget(e,n.target)||(n.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==n.requestedClaimsHash||e.credentialType===rt.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(n.tokenType&&!this.matchTokenType(e,n.tokenType)||n.tokenType===Bt.SSH&&n.keyId&&!this.matchKeyId(e,n.keyId)))}getAppMetadataFilteredBy(e){const n=this.getKeys(),r={};return n.forEach(o=>{if(!this.isAppMetadata(o))return;const i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){const n=this.getAuthorityMetadataKeys();let r=null;return n.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;const i=this.getAuthorityMetadata(o);i&&i.aliases.indexOf(e)!==-1&&(r=i)}),r}async removeAllAccounts(){const e=this.getAccountKeys(),n=[];e.forEach(r=>{n.push(this.removeAccount(r))}),await Promise.all(n)}async removeAccount(e){const n=this.getAccount(e,this.commonLogger);n&&(await this.removeAccountContext(n),this.removeItem(e))}async removeAccountContext(e){const n=this.getTokenKeys(),r=e.generateAccountId(),o=[];n.idToken.forEach(i=>{i.indexOf(r)===0&&this.removeIdToken(i)}),n.accessToken.forEach(i=>{i.indexOf(r)===0&&o.push(this.removeAccessToken(i))}),n.refreshToken.forEach(i=>{i.indexOf(r)===0&&this.removeRefreshToken(i)}),await Promise.all(o)}updateOutdatedCachedAccount(e,n,r){var o;if(n&&n.isSingleTenant()){(o=this.commonLogger)==null||o.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const i=this.getAccountKeys().filter(d=>d.startsWith(n.homeAccountId)),a=[];i.forEach(d=>{const h=this.getCachedAccountEntity(d);h&&a.push(h)});const s=a.find(d=>ng(d.realm,d.homeAccountId))||a[0];s.tenantProfiles=a.map(d=>({tenantId:d.realm,localAccountId:d.localAccountId,name:d.name,isHomeTenant:ng(d.realm,d.homeAccountId)}));const c=vu.toObject(new Dn,{...s}),u=c.generateAccountKey();return i.forEach(d=>{d!==u&&this.removeOutdatedAccount(e)}),this.setAccount(c),r==null||r.verbose("Updated an outdated account entity in the cache"),c}return n}async removeAccessToken(e){const n=this.getAccessTokenCredential(e);if(n){if(n.credentialType.toLowerCase()===rt.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&n.tokenType===Bt.POP){const o=n.keyId;if(o)try{await this.cryptoImpl.removeTokenBindingKey(o)}catch{throw Ce(LL)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach(n=>{this.isAppMetadata(n)&&this.removeItem(n)}),!0}readAccountFromCache(e){const n=Dn.generateAccountCacheKey(e);return this.getAccount(n,this.commonLogger)}getIdToken(e,n,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");const a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:rt.ID_TOKEN,clientId:this.clientId,realm:r},s=this.getIdTokensByFilter(a,n),c=s.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let u=s;if(!r){const d=new Map;s.forEach((p,g)=>{p.realm===e.tenantId&&d.set(g,p)});const h=d.size;if(h<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),s.values().next().value;if(h===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),d.values().next().value;u=d}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),u.forEach((d,h)=>{this.removeIdToken(h)}),o&&i&&o.addFields({multiMatchedID:s.size},i),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),s.values().next().value}getIdTokensByFilter(e,n){const r=n&&n.idToken||this.getTokenKeys().idToken,o=new Map;return r.forEach(i=>{if(!this.idTokenKeyMatchesFilter(i,{clientId:this.clientId,...e}))return;const a=this.getIdTokenCredential(i);a&&this.credentialMatchesFilter(a,e)&&o.set(i,a)}),o}idTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,n,r,o,i,a){this.commonLogger.trace("CacheManager - getAccessToken called");const s=Sn.createSearchScopes(n.scopes),c=n.authenticationScheme||Bt.BEARER,u=c.toLowerCase()!==Bt.BEARER.toLowerCase()?rt.ACCESS_TOKEN_WITH_AUTH_SCHEME:rt.ACCESS_TOKEN,d={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:u,clientId:this.clientId,realm:o||e.tenantId,target:s,tokenType:c,keyId:n.sshKid,requestedClaimsHash:n.requestedClaimsHash},h=r&&r.accessToken||this.getTokenKeys().accessToken,p=[];h.forEach(v=>{if(this.accessTokenKeyMatchesFilter(v,d,!0)){const y=this.getAccessTokenCredential(v);y&&this.credentialMatchesFilter(y,d)&&p.push(y)}});const g=p.length;return g<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):g>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),p.forEach(v=>{this.removeAccessToken(kl(v))}),i&&a&&i.addFields({multiMatchedAT:p.length},a),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),p[0])}accessTokenKeyMatchesFilter(e,n,r){const o=e.toLowerCase();if(n.clientId&&o.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&o.indexOf(n.homeAccountId.toLowerCase())===-1||n.realm&&o.indexOf(n.realm.toLowerCase())===-1||n.requestedClaimsHash&&o.indexOf(n.requestedClaimsHash.toLowerCase())===-1)return!1;if(n.target){const i=n.target.asArray();for(let a=0;a<i.length;a++){if(r&&!o.includes(i[a].toLowerCase()))return!1;if(!r&&o.includes(i[a].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const n=this.getTokenKeys(),r=[];return n.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;const i=this.getAccessTokenCredential(o);i&&this.credentialMatchesFilter(i,e)&&r.push(i)}),r}getRefreshToken(e,n,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const a=n?yf:void 0,s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:rt.REFRESH_TOKEN,clientId:this.clientId,familyId:a},c=r&&r.refreshToken||this.getTokenKeys().refreshToken,u=[];c.forEach(h=>{if(this.refreshTokenKeyMatchesFilter(h,s)){const p=this.getRefreshTokenCredential(h);p&&this.credentialMatchesFilter(p,s)&&u.push(p)}});const d=u.length;return d<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(d>1&&o&&i&&o.addFields({multiMatchedRT:d},i),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),u[0])}refreshTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.familyId&&r.indexOf(n.familyId.toLowerCase())===-1||!n.familyId&&n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const n={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(n),o=Object.keys(r).map(a=>r[a]),i=o.length;if(i<1)return null;if(i>1)throw Ce(kL);return o[0]}isAppMetadataFOCI(e){const n=this.readAppMetadataFromCache(e);return!!(n&&n.familyId===yf)}matchHomeAccountId(e,n){return typeof e.homeAccountId=="string"&&n===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,n){const r=e.oid||e.sub;return n===r}matchLocalAccountIdFromTenantProfile(e,n){return e.localAccountId===n}matchName(e,n){var r;return n.toLowerCase()===((r=e.name)==null?void 0:r.toLowerCase())}matchUsername(e,n){return!!(e&&typeof e=="string"&&(n==null?void 0:n.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,n){return!!(e.userAssertionHash&&n===e.userAssertionHash)}matchEnvironment(e,n){if(this.staticAuthorityOptions){const o=LJ(this.staticAuthorityOptions,this.commonLogger);if(o.includes(n)&&o.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(n);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,n){return e.credentialType&&n.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,n){return!!(e.clientId&&n===e.clientId)}matchFamilyId(e,n){return!!(e.familyId&&n===e.familyId)}matchRealm(e,n){var r;return((r=e.realm)==null?void 0:r.toLowerCase())===n.toLowerCase()}matchNativeAccountId(e,n){return!!(e.nativeAccountId&&n===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,n){return e.login_hint===n||e.preferred_username===n||e.upn===n}matchSid(e,n){return e.sid===n}matchAuthorityType(e,n){return!!(e.authorityType&&n.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,n){return e.credentialType!==rt.ACCESS_TOKEN&&e.credentialType!==rt.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:Sn.fromString(e.target).containsScopeSet(n)}matchTokenType(e,n){return!!(e.tokenType&&e.tokenType===n)}matchKeyId(e,n){return!!(e.keyId&&e.keyId===n)}isAppMetadata(e){return e.indexOf(pE)!==-1}isAuthorityMetadata(e){return e.indexOf(Xm.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${Xm.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,n){for(const r in n)e[r]=n[r];return e}}class jJ extends vu{setAccount(){throw Ce(pt)}getAccount(){throw Ce(pt)}getCachedAccountEntity(){throw Ce(pt)}setIdTokenCredential(){throw Ce(pt)}getIdTokenCredential(){throw Ce(pt)}setAccessTokenCredential(){throw Ce(pt)}getAccessTokenCredential(){throw Ce(pt)}setRefreshTokenCredential(){throw Ce(pt)}getRefreshTokenCredential(){throw Ce(pt)}setAppMetadata(){throw Ce(pt)}getAppMetadata(){throw Ce(pt)}setServerTelemetry(){throw Ce(pt)}getServerTelemetry(){throw Ce(pt)}setAuthorityMetadata(){throw Ce(pt)}getAuthorityMetadata(){throw Ce(pt)}getAuthorityMetadataKeys(){throw Ce(pt)}setThrottlingCache(){throw Ce(pt)}getThrottlingCache(){throw Ce(pt)}removeItem(){throw Ce(pt)}getKeys(){throw Ce(pt)}getAccountKeys(){throw Ce(pt)}getTokenKeys(){throw Ce(pt)}async clear(){throw Ce(pt)}updateCredentialCacheKey(){throw Ce(pt)}removeOutdatedAccount(){throw Ce(pt)}}/*! @azure/msal-common v14.15.0 2024-09-20 */const iD={tokenRenewalOffsetSeconds:iJ,preventCorsPreflight:!1},UJ={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:un.Info,correlationId:ae.EMPTY_STRING},FJ={claimsBasedCachingEnabled:!1},BJ={async sendGetRequestAsync(){throw Ce(pt)},async sendPostRequestAsync(){throw Ce(pt)}},HJ={sku:ae.SKU,version:SE,cpu:ae.EMPTY_STRING,os:ae.EMPTY_STRING},VJ={clientSecret:ae.EMPTY_STRING,clientAssertion:void 0},zJ={azureCloudInstance:qf.None,tenant:`${ae.DEFAULT_COMMON_TENANT}`},$J={application:{appName:"",appVersion:""}};function GJ({authOptions:t,systemOptions:e,loggerOptions:n,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:a,clientCredentials:s,libraryInfo:c,telemetry:u,serverTelemetryManager:d,persistencePlugin:h,serializableCache:p}){const g={...UJ,...n};return{authOptions:KJ(t),systemOptions:{...iD,...e},loggerOptions:g,cacheOptions:{...FJ,...r},storageInterface:o||new jJ(t.clientId,eg,new Zi(g)),networkInterface:i||BJ,cryptoInterface:a||eg,clientCredentials:s||VJ,libraryInfo:{...HJ,...c},telemetry:{...$J,...u},serverTelemetryManager:d||null,persistencePlugin:h||null,serializableCache:p||null}}function KJ(t){return{clientCapabilities:[],azureCloudOptions:zJ,skipAuthorityMetadataCache:!1,instanceAware:!1,...t}}function oS(t){return t.authOptions.authority.options.protocolMode===$i.OIDC}/*! @azure/msal-common v14.15.0 2024-09-20 */class ea extends Yt{constructor(e,n,r,o,i){super(e,n,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,ea.prototype)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class oi{static generateThrottlingStorageKey(e){return`${bf.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,n){var i;const r=oi.generateThrottlingStorageKey(n),o=e.getThrottlingCache(r);if(o){if(o.throttleTime<Date.now()){e.removeItem(r);return}throw new ea(((i=o.errorCodes)==null?void 0:i.join(" "))||ae.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,n,r){if(oi.checkResponseStatus(r)||oi.checkResponseForRetryAfter(r)){const o={throttleTime:oi.calculateThrottleTime(parseInt(r.headers[ui.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(oi.generateThrottlingStorageKey(n),o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(ui.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const n=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(n||bf.DEFAULT_THROTTLE_TIME_SECONDS),r+bf.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,n,r,o){const i={clientId:n,authority:r.authority,scopes:r.scopes,homeAccountIdentifier:o,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid},a=this.generateThrottlingStorageKey(i);e.removeItem(a)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class WJ{constructor(e,n){this.networkClient=e,this.cacheManager=n}async sendPostRequest(e,n,r){oi.preProcess(this.cacheManager,e);let o;try{o=await this.networkClient.sendPostRequestAsync(n,r)}catch(i){throw i instanceof Yt?i:Ce(SL)}return oi.postProcess(this.cacheManager,e,o),o}}/*! @azure/msal-common v14.15.0 2024-09-20 */const qr={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v14.15.0 2024-09-20 */const yu="client_id",qJ="redirect_uri",Zk="response_type",YJ="response_mode",QJ="grant_type",JJ="claims",XJ="scope",ZJ="refresh_token",eX="state",tX="nonce",nX="prompt",rX="code",oX="code_challenge",iX="code_challenge_method",aX="code_verifier",sX="client-request-id",cX="x-client-SKU",lX="x-client-VER",uX="x-client-OS",dX="x-client-CPU",fX="x-client-current-telemetry",hX="x-client-last-telemetry",pX="x-ms-lib-capability",mX="x-app-name",gX="x-app-ver",vX="post_logout_redirect_uri",yX="id_token_hint",bX="device_code",_X="client_secret",CX="client_assertion",SX="client_assertion_type",e1="token_type",t1="req_cnf",wX="assertion",EX="requested_token_use",n1="return_spa_code",TX="nativebroker",IX="logout_hint",AX="sid",kX="login_hint",xX="domain_hint",RX="x-client-xtra-sku";/*! @azure/msal-common v14.15.0 2024-09-20 */class gl{static validateRedirectUri(e){if(!e)throw Kt(BL)}static validatePrompt(e){const n=[];for(const r in $n)n.push($n[r]);if(n.indexOf(e)<0)throw Kt($L)}static validateClaims(e){try{JSON.parse(e)}catch{throw Kt(EE)}}static validateCodeChallengeParams(e,n){if(!e||!n)throw Kt(TE);this.validateCodeChallengeMethod(n)}static validateCodeChallengeMethod(e){if([Hk.PLAIN,Hk.S256].indexOf(e)<0)throw Kt(WL)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class _f{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(Zk,encodeURIComponent(ae.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(Zk,encodeURIComponent(`${ae.TOKEN_RESPONSE_TYPE} ${ae.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set(YJ,encodeURIComponent(e||nJ.QUERY))}addNativeBroker(){this.parameters.set(TX,encodeURIComponent("1"))}addScopes(e,n=!0,r=Ju){n&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const o=n?[...e||[],...r]:e||[],i=new Sn(o);this.parameters.set(XJ,encodeURIComponent(i.printScopes()))}addClientId(e){this.parameters.set(yu,encodeURIComponent(e))}addRedirectUri(e){gl.validateRedirectUri(e),this.parameters.set(qJ,encodeURIComponent(e))}addPostLogoutRedirectUri(e){gl.validateRedirectUri(e),this.parameters.set(vX,encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set(yX,encodeURIComponent(e))}addDomainHint(e){this.parameters.set(xX,encodeURIComponent(e))}addLoginHint(e){this.parameters.set(kX,encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(ui.CCS_HEADER,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(ui.CCS_HEADER,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set(AX,encodeURIComponent(e))}addClaims(e,n){const r=this.addClientCapabilitiesToClaims(e,n);gl.validateClaims(r),this.parameters.set(JJ,encodeURIComponent(r))}addCorrelationId(e){this.parameters.set(sX,encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set(cX,e.sku),this.parameters.set(lX,e.version),e.os&&this.parameters.set(uX,e.os),e.cpu&&this.parameters.set(dX,e.cpu)}addApplicationTelemetry(e){e!=null&&e.appName&&this.parameters.set(mX,e.appName),e!=null&&e.appVersion&&this.parameters.set(gX,e.appVersion)}addPrompt(e){gl.validatePrompt(e),this.parameters.set(`${nX}`,encodeURIComponent(e))}addState(e){e&&this.parameters.set(eX,encodeURIComponent(e))}addNonce(e){this.parameters.set(tX,encodeURIComponent(e))}addCodeChallengeParams(e,n){if(gl.validateCodeChallengeParams(e,n),e&&n)this.parameters.set(oX,encodeURIComponent(e)),this.parameters.set(iX,encodeURIComponent(n));else throw Kt(TE)}addAuthorizationCode(e){this.parameters.set(rX,encodeURIComponent(e))}addDeviceCode(e){this.parameters.set(bX,encodeURIComponent(e))}addRefreshToken(e){this.parameters.set(ZJ,encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set(aX,encodeURIComponent(e))}addClientSecret(e){this.parameters.set(_X,encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set(CX,encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set(SX,encodeURIComponent(e))}addOboAssertion(e){this.parameters.set(wX,encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set(EX,encodeURIComponent(e))}addGrantType(e){this.parameters.set(QJ,encodeURIComponent(e))}addClientInfo(){this.parameters.set(rJ,"1")}addExtraQueryParameters(e){Object.entries(e).forEach(([n,r])=>{!this.parameters.has(n)&&r&&this.parameters.set(n,r)})}addClientCapabilitiesToClaims(e,n){let r;if(!e)r={};else try{r=JSON.parse(e)}catch{throw Kt(EE)}return n&&n.length>0&&(r.hasOwnProperty(dp.ACCESS_TOKEN)||(r[dp.ACCESS_TOKEN]={}),r[dp.ACCESS_TOKEN][dp.XMS_CC]={values:n}),JSON.stringify(r)}addUsername(e){this.parameters.set(zk.username,encodeURIComponent(e))}addPassword(e){this.parameters.set(zk.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(e1,Bt.POP),this.parameters.set(t1,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(e1,Bt.SSH),this.parameters.set(t1,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set(fX,e.generateCurrentRequestHeaderValue()),this.parameters.set(hX,e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(pX,bf.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set(IX,encodeURIComponent(e))}createQueryString(){const e=new Array;return this.parameters.forEach((n,r)=>{e.push(`${r}=${n}`)}),e.join("&")}}/*! @azure/msal-common v14.15.0 2024-09-20 */function PX(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v14.15.0 2024-09-20 */function OX(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}/*! @azure/msal-common v14.15.0 2024-09-20 */function NX(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}/*! @azure/msal-common v14.15.0 2024-09-20 */const L={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},MX=new Map([[L.AcquireTokenByCode,"ATByCode"],[L.AcquireTokenByRefreshToken,"ATByRT"],[L.AcquireTokenSilent,"ATS"],[L.AcquireTokenSilentAsync,"ATSAsync"],[L.AcquireTokenPopup,"ATPopup"],[L.AcquireTokenRedirect,"ATRedirect"],[L.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[L.CryptoOptsSignJwt,"CryptoSignJwt"],[L.SilentCacheClientAcquireToken,"SltCacheClientAT"],[L.SilentIframeClientAcquireToken,"SltIframeClientAT"],[L.SilentRefreshClientAcquireToken,"SltRClientAT"],[L.SsoSilent,"SsoSlt"],[L.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[L.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[L.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[L.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[L.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[L.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[L.BrokerHandhshake,"BrokerHandshake"],[L.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[L.AcquireTokenByBroker,"ATByBroker"],[L.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[L.RefreshTokenClientAcquireToken,"RTClientAT"],[L.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[L.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[L.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[L.AcquireTokenFromCache,"ATFromCache"],[L.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[L.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[L.AcquireTokenBySilentIframe,"ATBySltIframe"],[L.InitializeBaseRequest,"InitBaseReq"],[L.InitializeSilentRequest,"InitSltReq"],[L.InitializeClientApplication,"InitClientApplication"],[L.SilentIframeClientTokenHelper,"SIClientTHelper"],[L.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[L.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[L.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[L.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[L.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[L.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[L.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[L.StandardInteractionClientInitializeAuthorizationCodeRequest,"StdIntClientInitAuthCodeReq"],[L.GetAuthCodeUrl,"GetAuthCodeUrl"],[L.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[L.HandleCodeResponse,"HandleCodeResp"],[L.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[L.AuthClientAcquireToken,"AuthClientAT"],[L.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[L.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[L.AuthClientCreateQueryString,"AuthClientCreateQueryStr"],[L.PopTokenGenerateCnf,"PopTGenCnf"],[L.PopTokenGenerateKid,"PopTGenKid"],[L.HandleServerTokenResponse,"HandleServerTRes"],[L.DeserializeResponse,"DeserializeRes"],[L.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[L.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[L.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[L.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[L.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[L.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[L.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[L.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[L.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[L.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[L.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[L.AcquireTokenByCodeAsync,"ATByCodeAsync"],[L.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[L.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[L.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[L.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[L.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[L.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[L.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[L.NativeGenerateAuthResult,"NtvGenAuthRes"],[L.RemoveHiddenIframe,"RemoveHiddenIframe"],[L.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[L.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[L.GeneratePkceCodes,"GenPkceCodes"],[L.GenerateCodeVerifier,"GenCodeVerifier"],[L.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[L.Sha256Digest,"Sha256Digest"],[L.GetRandomValues,"GetRandomValues"]]),iS={InProgress:1,Completed:2},LX=new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT"]);/*! @azure/msal-common v14.15.0 2024-09-20 */const Dc=(t,e,n,r,o)=>(...i)=>{n.trace(`Executing function ${e}`);const a=r==null?void 0:r.startMeasurement(e,o);if(o){const s=e+"CallCount";r==null||r.incrementFields({[s]:1},o)}try{const s=t(...i);return a==null||a.end({success:!0}),n.trace(`Returning result from ${e}`),s}catch(s){n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(s))}catch{n.trace("Unable to print error message.")}throw a==null||a.end({success:!1},s),s}},Re=(t,e,n,r,o)=>(...i)=>{n.trace(`Executing function ${e}`);const a=r==null?void 0:r.startMeasurement(e,o);if(o){const s=e+"CallCount";r==null||r.incrementFields({[s]:1},o)}return r==null||r.setPreQueueTime(e,o),t(...i).then(s=>(n.trace(`Returning result from ${e}`),a==null||a.end({success:!0}),s)).catch(s=>{n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(s))}catch{n.trace("Unable to print error message.")}throw a==null||a.end({success:!1},s),s})};/*! @azure/msal-common v14.15.0 2024-09-20 */class Dv{constructor(e,n,r,o){this.networkInterface=e,this.logger=n,this.performanceClient=r,this.correlationId=o}async detectRegion(e,n){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(L.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)n.region_source=nl.ENVIRONMENT_VARIABLE;else{const i=Dv.IMDS_OPTIONS;try{const a=await Re(this.getRegionFromIMDS.bind(this),L.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(ae.IMDS_VERSION,i);if(a.status===hp.httpSuccess&&(r=a.body,n.region_source=nl.IMDS),a.status===hp.httpBadRequest){const s=await Re(this.getCurrentVersion.bind(this),L.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!s)return n.region_source=nl.FAILED_AUTO_DETECTION,null;const c=await Re(this.getRegionFromIMDS.bind(this),L.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(s,i);c.status===hp.httpSuccess&&(r=c.body,n.region_source=nl.IMDS)}}catch{return n.region_source=nl.FAILED_AUTO_DETECTION,null}}return r||(n.region_source=nl.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,n){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(L.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${ae.IMDS_ENDPOINT}?api-version=${e}&format=text`,n,ae.IMDS_TIMEOUT)}async getCurrentVersion(e){var n;(n=this.performanceClient)==null||n.addQueueMeasurement(L.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const r=await this.networkInterface.sendGetRequestAsync(`${ae.IMDS_ENDPOINT}?format=json`,e);return r.status===hp.httpBadRequest&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}}Dv.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v14.15.0 2024-09-20 */class nr{constructor(e,n,r,o,i,a,s,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=n,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=s,this.correlationId=a,this.managedIdentity=c||!1,this.regionDiscovery=new Dv(n,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(ae.CIAM_AUTH_URL))return Lo.Ciam;const n=e.PathSegments;if(n.length)switch(n[0].toLowerCase()){case ae.ADFS:return Lo.Adfs;case ae.DSTS:return Lo.Dsts}return Lo.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new St(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Ce(Mi)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Ce(Mi)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Ce(Mi)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Ce(DL);return this.replacePath(this.metadata.end_session_endpoint)}else throw Ce(Mi)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Ce(Mi)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Ce(Mi)}canReplaceTenant(e){return e.PathSegments.length===1&&!nr.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Lo.Default&&this.protocolMode===$i.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let n=e;const o=new St(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((s,c)=>{let u=i[c];if(c===0&&this.canReplaceTenant(o)){const d=new St(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];u!==d&&(this.logger.verbose(`Replacing tenant domain name ${u} with id ${d}`),u=d)}s!==u&&(n=n.replace(`/${u}/`,`/${s}/`))}),this.replaceTenant(n)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Lo.Adfs||this.protocolMode!==$i.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var o,i;(o=this.performanceClient)==null||o.addQueueMeasurement(L.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),n=await Re(this.updateCloudDiscoveryMetadata.bind(this),L.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await Re(this.updateEndpointMetadata.bind(this),L.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,n,{source:r}),(i=this.performanceClient)==null||i.addFields({cloudDiscoverySource:n,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Yk(),jwks_uri:""}),e}updateCachedMetadata(e,n,r){n!==Br.CACHE&&(r==null?void 0:r.source)!==Br.CACHE&&(e.expiresAt=Yk(),e.canonical_authority=this.canonicalAuthority);const o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}async updateEndpointMetadata(e){var o,i,a;(o=this.performanceClient)==null||o.addQueueMeasurement(L.AuthorityUpdateEndpointMetadata,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){if(n.source===Br.HARDCODED_VALUES&&(i=this.authorityOptions.azureRegionConfiguration)!=null&&i.azureRegion&&n.metadata){const s=await Re(this.updateMetadataWithRegionalInformation.bind(this),L.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n.metadata);pp(e,s,!1),e.canonical_authority=this.canonicalAuthority}return n.source}let r=await Re(this.getEndpointMetadataFromNetwork.bind(this),L.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return(a=this.authorityOptions.azureRegionConfiguration)!=null&&a.azureRegion&&(r=await Re(this.updateMetadataWithRegionalInformation.bind(this),L.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),pp(e,r,!0),Br.NETWORK;throw Ce(wL,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const n=this.getEndpointMetadataFromConfig();if(n)return this.logger.verbose("Found endpoint metadata in authority configuration"),pp(e,n,!1),{source:Br.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const o=this.getEndpointMetadataFromHardcodedValues();if(o)return pp(e,o,!1),{source:Br.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=Qk(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Br.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new St(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Kt(qL)}return null}async getEndpointMetadataFromNetwork(){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(L.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${n}`);try{const o=await this.networkInterface.sendGetRequestAsync(n,e);return PX(o.body)?o.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(o){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${o}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Jk?Jk[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var r,o,i;(r=this.performanceClient)==null||r.addQueueMeasurement(L.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const n=(o=this.authorityOptions.azureRegionConfiguration)==null?void 0:o.azureRegion;if(n){if(n!==ae.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Eb.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=n,nr.replaceWithRegionalInformation(e,n);const a=await Re(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),L.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((i=this.authorityOptions.azureRegionConfiguration)==null?void 0:i.environmentRegion,this.regionDiscoveryMetadata);if(a)return this.regionDiscoveryMetadata.region_outcome=Eb.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=a,nr.replaceWithRegionalInformation(e,a);this.regionDiscoveryMetadata.region_outcome=Eb.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(L.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const r=await Re(this.getCloudDiscoveryMetadataFromNetwork.bind(this),L.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return Tb(e,r,!0),Br.NETWORK;throw Kt(YL)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||ae.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||ae.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||ae.NOT_APPLICABLE}`);const n=this.getCloudDiscoveryMetadataFromConfig();if(n)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Tb(e,n,!1),Br.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const o=DJ(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Tb(e,o,!1),Br.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=Qk(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),Br.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Lo.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),nr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),n=og(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),n)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),n;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Kt(IE)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),nr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(L.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${ae.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,n={};let r=null;try{const i=await this.networkInterface.sendGetRequestAsync(e,n);let a,s;if(OX(i.body))a=i.body,s=a.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${a.tenant_discovery_endpoint}`);else if(NX(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),a=i.body,a.error===ae.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${a.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${a.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),s=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=og(s,this.hostnameAndPort)}catch(i){if(i instanceof Yt)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{const a=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${a.name}
Error Description: ${a.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=nr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(n=>n&&St.getDomainFromUrl(n).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,n){let r;if(n&&n.azureCloudInstance!==qf.None){const o=n.tenant?n.tenant:ae.DEFAULT_COMMON_TENANT;r=`${n.azureCloudInstance}/${o}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return ae.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Ce(Mi)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return rD.has(e)}static isPublicCloudAuthority(e){return ae.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,n,r){const o=new St(e);o.validateAsUri();const i=o.getUrlComponents();let a=`${n}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(a=`${n}.${ae.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const s=St.constructAuthorityUriFromObject({...o.getUrlComponents(),HostNameAndPort:a}).urlString;return r?`${s}?${r}`:s}static replaceWithRegionalInformation(e,n){const r={...e};return r.authorization_endpoint=nr.buildRegionalAuthorityString(r.authorization_endpoint,n),r.token_endpoint=nr.buildRegionalAuthorityString(r.token_endpoint,n),r.end_session_endpoint&&(r.end_session_endpoint=nr.buildRegionalAuthorityString(r.end_session_endpoint,n)),r}static transformCIAMAuthority(e){let n=e;const o=new St(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(ae.CIAM_AUTH_URL)){const i=o.HostNameAndPort.split(".")[0];n=`${n}${i}${ae.AAD_TENANT_DOMAIN_SUFFIX}`}return n}}nr.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Ha.COMMON,Ha.CONSUMERS,Ha.ORGANIZATIONS]);function DX(t){var o;const r=(o=new St(t).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:o.toLowerCase();switch(r){case Ha.COMMON:case Ha.ORGANIZATIONS:case Ha.CONSUMERS:return;default:return r}}function aD(t){return t.endsWith(ae.FORWARD_SLASH)?t:`${t}${ae.FORWARD_SLASH}`}function jX(t){const e=t.cloudDiscoveryMetadata;let n;if(e)try{n=JSON.parse(e)}catch{throw Kt(IE)}return{canonicalAuthority:t.authority?aD(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:n}}/*! @azure/msal-common v14.15.0 2024-09-20 */async function sD(t,e,n,r,o,i,a){a==null||a.addQueueMeasurement(L.AuthorityFactoryCreateDiscoveredInstance,i);const s=nr.transformCIAMAuthority(aD(t)),c=new nr(s,e,n,r,o,i,a);try{return await Re(c.resolveEndpointsAsync.bind(c),L.AuthorityResolveEndpointsAsync,o,a,i)(),c}catch{throw Ce(Mi)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class OE{constructor(e,n){this.config=GJ(e),this.logger=new Zi(this.config.loggerOptions,jL,SE),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new WJ(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n}createTokenRequestHeaders(e){const n={};if(n[ui.CONTENT_TYPE]=ae.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case qr.HOME_ACCOUNT_ID:try{const r=xl(e.credential);n[ui.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case qr.UPN:n[ui.CCS_HEADER]=`UPN: ${e.credential}`;break}return n}async executePostToTokenEndpoint(e,n,r,o,i,a){var c,u,d,h;a&&((c=this.performanceClient)==null||c.addQueueMeasurement(a,i));const s=await this.networkManager.sendPostRequest(o,e,{body:n,headers:r});return(h=this.performanceClient)==null||h.addFields({refreshTokenSize:((u=s.body.refresh_token)==null?void 0:u.length)||0,httpVerToken:((d=s.headers)==null?void 0:d[ui.X_MS_HTTP_VERSION])||""},i),this.config.serverTelemetryManager&&s.status<500&&s.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),s}async updateAuthority(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(L.UpdateTokenEndpointAuthority,n);const r=`https://${e}/${this.authority.tenant}/`,o=await sD(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,n,this.performanceClient);this.authority=o}createTokenQueryParameters(e){const n=new _f;return e.tokenQueryParameters&&n.addExtraQueryParameters(e.tokenQueryParameters),n.createQueryString()}}/*! @azure/msal-common v14.15.0 2024-09-20 */const ig="no_tokens_found",cD="native_account_unavailable",NE="refresh_token_expired",UX="interaction_required",FX="consent_required",BX="login_required",jv="bad_token";/*! @azure/msal-common v14.15.0 2024-09-20 */const r1=[UX,FX,BX,jv],HX=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],VX={[ig]:"No refresh token found in the cache. Please sign-in.",[cD]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[NE]:"Refresh token has expired.",[jv]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class Zr extends Yt{constructor(e,n,r,o,i,a,s,c){super(e,n,r),Object.setPrototypeOf(this,Zr.prototype),this.timestamp=o||ae.EMPTY_STRING,this.traceId=i||ae.EMPTY_STRING,this.correlationId=a||ae.EMPTY_STRING,this.claims=s||ae.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function o1(t,e,n){const r=!!t&&r1.indexOf(t)>-1,o=!!n&&HX.indexOf(n)>-1,i=!!e&&r1.some(a=>e.indexOf(a)>-1);return r||i||o}function aS(t){return new Zr(t,VX[t])}/*! @azure/msal-common v14.15.0 2024-09-20 */class Fo{static setRequestState(e,n,r){const o=Fo.generateLibraryState(e,r);return n?`${o}${ae.RESOURCE_DELIM}${n}`:o}static generateLibraryState(e,n){if(!e)throw Ce(tS);const r={id:e.createNewGuid()};n&&(r.meta=n);const o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,n){if(!e)throw Ce(tS);if(!n)throw Ce(gu);try{const r=n.split(ae.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(ae.RESOURCE_DELIM):ae.EMPTY_STRING,a=e.base64Decode(o),s=JSON.parse(a);return{userRequestState:i||ae.EMPTY_STRING,libraryState:s}}catch{throw Ce(gu)}}}/*! @azure/msal-common v14.15.0 2024-09-20 */const zX={SW:"sw"};class bu{constructor(e,n){this.cryptoUtils=e,this.performanceClient=n}async generateCnf(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(L.PopTokenGenerateCnf,e.correlationId);const r=await Re(this.generateKid.bind(this),L.PopTokenGenerateCnf,n,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}}async generateKid(e){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(L.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:zX.SW}}async signPopToken(e,n,r){return this.signPayload(e,n,r)}async signPayload(e,n,r,o){const{resourceRequestMethod:i,resourceRequestUri:a,shrClaims:s,shrNonce:c,shrOptions:u}=r,d=a?new St(a):void 0,h=d==null?void 0:d.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:bi(),m:i==null?void 0:i.toUpperCase(),u:h==null?void 0:h.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:h==null?void 0:h.AbsolutePath,q:h!=null&&h.QueryString?[[],h.QueryString]:void 0,client_claims:s||void 0,...o},n,u,r.correlationId)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class $X{constructor(e,n){this.cache=e,this.hasChanged=n}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v14.15.0 2024-09-20 */function GX(t){var r,o;const e="code=",n=(r=t.error_uri)==null?void 0:r.lastIndexOf(e);return n&&n>=0?(o=t.error_uri)==null?void 0:o.substring(n+e.length):void 0}class dc{constructor(e,n,r,o,i,a,s){this.clientId=e,this.cacheStorage=n,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=a,this.performanceClient=s}validateServerAuthorizationCodeResponse(e,n){if(!e.state||!n)throw e.state?Ce(Zm,"Cached State"):Ce(Zm,"Server State");let r,o;try{r=decodeURIComponent(e.state)}catch{throw Ce(gu,e.state)}try{o=decodeURIComponent(n)}catch{throw Ce(gu,e.state)}if(r!==o)throw Ce(TL);if(e.error||e.error_description||e.suberror){const i=GX(e);throw o1(e.error,e.error_description,e.suberror)?new Zr(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",i):new ea(e.error||"",e.error_description,e.suberror,i)}}validateTokenResponse(e,n){var r;if(e.error||e.error_description||e.suberror){const o=`Error(s): ${e.error_codes||ae.NOT_AVAILABLE} - Timestamp: ${e.timestamp||ae.NOT_AVAILABLE} - Description: ${e.error_description||ae.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||ae.NOT_AVAILABLE} - Trace ID: ${e.trace_id||ae.NOT_AVAILABLE}`,i=(r=e.error_codes)!=null&&r.length?e.error_codes[0]:void 0,a=new ea(e.error,o,e.suberror,i,e.status);if(n&&e.status&&e.status>=up.SERVER_ERROR_RANGE_START&&e.status<=up.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${a}`);return}else if(n&&e.status&&e.status>=up.CLIENT_ERROR_RANGE_START&&e.status<=up.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${a}`);return}throw o1(e.error,e.error_description,e.suberror)?new Zr(e.error,e.error_description,e.suberror,e.timestamp||ae.EMPTY_STRING,e.trace_id||ae.EMPTY_STRING,e.correlation_id||ae.EMPTY_STRING,e.claims||ae.EMPTY_STRING,i):a}}async handleServerTokenResponse(e,n,r,o,i,a,s,c,u){var v;(v=this.performanceClient)==null||v.addQueueMeasurement(L.HandleServerTokenResponse,e.correlation_id);let d;if(e.id_token){if(d=Lc(e.id_token||ae.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&d.nonce!==i.nonce)throw Ce(IL);if(o.maxAge||o.maxAge===0){const y=d.auth_time;if(!y)throw Ce(yE);UL(y,o.maxAge)}}this.homeAccountIdentifier=Dn.generateHomeAccountId(e.client_info||ae.EMPTY_STRING,n.authorityType,this.logger,this.cryptoObj,d);let h;i&&i.state&&(h=Fo.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;const p=this.generateCacheRecord(e,n,r,o,d,a,i);let g;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new $X(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(g)),s&&!c&&p.account){const y=p.account.generateAccountKey();if(!this.cacheStorage.getAccount(y,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await dc.generateAuthenticationResult(this.cryptoObj,n,p,!1,o,d,h,void 0,u)}await this.cacheStorage.saveCacheRecord(p,o.storeInCache,o.correlationId)}finally{this.persistencePlugin&&this.serializableCache&&g&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(g))}return dc.generateAuthenticationResult(this.cryptoObj,n,p,!1,o,d,h,e,u)}generateCacheRecord(e,n,r,o,i,a,s){const c=n.getPreferredCache();if(!c)throw Ce(_E);const u=eD(i);let d,h;e.id_token&&i&&(d=Nv(this.homeAccountIdentifier,c,e.id_token,this.clientId,u||""),h=ME(this.cacheStorage,n,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i,e.client_info,c,u,s,void 0,this.logger));let p=null;if(e.access_token){const y=e.scope?Sn.fromString(e.scope):new Sn(o.scopes||[]),_=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,b=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,C=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,w=r+_,S=w+b,E=C&&C>0?r+C:void 0;p=Mv(this.homeAccountIdentifier,c,e.access_token,this.clientId,u||n.tenant||"",y.printScopes(),w,S,this.cryptoObj.base64Decode,E,e.token_type,a,e.key_id,o.claims,o.requestedClaimsHash)}let g=null;if(e.refresh_token){let y;if(e.refresh_token_expires_in){const _=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;y=r+_}g=FL(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,a,y)}let v=null;return e.foci&&(v={clientId:this.clientId,environment:c,familyId:e.foci}),{account:h,idToken:d,accessToken:p,refreshToken:g,appMetadata:v}}static async generateAuthenticationResult(e,n,r,o,i,a,s,c,u){var w,S,E,I,x;let d=ae.EMPTY_STRING,h=[],p=null,g,v,y=ae.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===Bt.POP&&!i.popKid){const A=new bu(e),{secret:N,keyId:R}=r.accessToken;if(!R)throw Ce(CE);d=await A.signPopToken(N,R,i)}else d=r.accessToken.secret;h=Sn.fromString(r.accessToken.target).asArray(),p=new Date(Number(r.accessToken.expiresOn)*1e3),g=new Date(Number(r.accessToken.extendedExpiresOn)*1e3),r.accessToken.refreshOn&&(v=new Date(Number(r.accessToken.refreshOn)*1e3))}r.appMetadata&&(y=r.appMetadata.familyId===yf?yf:"");const _=(a==null?void 0:a.oid)||(a==null?void 0:a.sub)||"",b=(a==null?void 0:a.tid)||"";c!=null&&c.spa_accountid&&r.account&&(r.account.nativeAccountId=c==null?void 0:c.spa_accountid);const C=r.account?xE(r.account.getAccountInfo(),void 0,a,(w=r.idToken)==null?void 0:w.secret):null;return{authority:n.canonicalAuthority,uniqueId:_,tenantId:b,scopes:h,account:C,idToken:((S=r==null?void 0:r.idToken)==null?void 0:S.secret)||"",idTokenClaims:a||{},accessToken:d,fromCache:o,expiresOn:p,extExpiresOn:g,refreshOn:v,correlationId:i.correlationId,requestId:u||ae.EMPTY_STRING,familyId:y,tokenType:((E=r.accessToken)==null?void 0:E.tokenType)||ae.EMPTY_STRING,state:s?s.userRequestState:ae.EMPTY_STRING,cloudGraphHostName:((I=r.account)==null?void 0:I.cloudGraphHostName)||ae.EMPTY_STRING,msGraphHost:((x=r.account)==null?void 0:x.msGraphHost)||ae.EMPTY_STRING,code:c==null?void 0:c.spa_code,fromNativeBroker:!1}}}function ME(t,e,n,r,o,i,a,s,c,u,d){d==null||d.verbose("setCachedAccount called");const p=t.getAccountKeys().find(b=>b.startsWith(n));let g=null;p&&(g=t.getAccount(p,d));const v=g||Dn.createAccount({homeAccountId:n,idTokenClaims:o,clientInfo:i,environment:a,cloudGraphHostName:c==null?void 0:c.cloud_graph_host_name,msGraphHost:c==null?void 0:c.msgraph_host,nativeAccountId:u},e,r),y=v.tenantProfiles||[],_=s||v.realm;if(_&&!y.find(b=>b.tenantId===_)){const b=kE(n,v.localAccountId,_,o);y.push(b)}return v.tenantProfiles=y,v}/*! @azure/msal-common v14.15.0 2024-09-20 */async function lD(t,e,n){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:n})}/*! @azure/msal-common v14.15.0 2024-09-20 */class uD extends OE{constructor(e,n){var r;super(e,n),this.includeRedirectUri=!0,this.oidcDefaultScopes=(r=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:r.defaultScopes}async getAuthCodeUrl(e){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(L.GetAuthCodeUrl,e.correlationId);const n=await Re(this.createAuthCodeUrlQueryString.bind(this),L.AuthClientCreateQueryString,this.logger,this.performanceClient,e.correlationId)(e);return St.appendQueryString(this.authority.authorizationEndpoint,n)}async acquireToken(e,n){var s,c;if((s=this.performanceClient)==null||s.addQueueMeasurement(L.AuthClientAcquireToken,e.correlationId),!e.code)throw Ce(xL);const r=bi(),o=await Re(this.executeTokenRequest.bind(this),L.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=(c=o.headers)==null?void 0:c[ui.X_MS_REQUEST_ID],a=new dc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return a.validateTokenResponse(o.body),Re(a.handleServerTokenResponse.bind(a),L.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,n,void 0,void 0,void 0,i)}handleFragmentResponse(e,n){if(new dc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,n),!e.code)throw Ce(ML);return e}getLogoutUri(e){if(!e)throw Kt(KL);const n=this.createLogoutUrlQueryString(e);return St.appendQueryString(this.authority.endSessionEndpoint,n)}async executeTokenRequest(e,n){var u,d;(u=this.performanceClient)==null||u.addQueueMeasurement(L.AuthClientExecuteTokenRequest,n.correlationId);const r=this.createTokenQueryParameters(n),o=St.appendQueryString(e.tokenEndpoint,r),i=await Re(this.createTokenRequestBody.bind(this),L.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,n.correlationId)(n);let a;if(n.clientInfo)try{const h=tg(n.clientInfo,this.cryptoUtils.base64Decode);a={credential:`${h.uid}${rr.CLIENT_INFO_SEPARATOR}${h.utid}`,type:qr.HOME_ACCOUNT_ID}}catch(h){this.logger.verbose("Could not parse client info for CCS Header: "+h)}const s=this.createTokenRequestHeaders(a||n.ccsCredential),c={clientId:((d=n.tokenBodyParameters)==null?void 0:d.clientId)||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:n.scopes,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid};return Re(this.executePostToTokenEndpoint.bind(this),L.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,n.correlationId)(o,i,s,c,n.correlationId,L.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var i,a;(i=this.performanceClient)==null||i.addQueueMeasurement(L.AuthClientCreateTokenRequestBody,e.correlationId);const n=new _f;if(n.addClientId(((a=e.tokenBodyParameters)==null?void 0:a[yu])||this.config.authOptions.clientId),this.includeRedirectUri?n.addRedirectUri(e.redirectUri):gl.validateRedirectUri(e.redirectUri),n.addScopes(e.scopes,!0,this.oidcDefaultScopes),n.addAuthorizationCode(e.code),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&!oS(this.config)&&n.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&n.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const s=this.config.clientCredentials.clientAssertion;n.addClientAssertion(await lD(s.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),n.addClientAssertionType(s.assertionType)}if(n.addGrantType(yL.AUTHORIZATION_CODE_GRANT),n.addClientInfo(),e.authenticationScheme===Bt.POP){const s=new bu(this.cryptoUtils,this.performanceClient);let c;e.popKid?c=this.cryptoUtils.encodeKid(e.popKid):c=(await Re(s.generateCnf.bind(s),L.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,n.addPopToken(c)}else if(e.authenticationScheme===Bt.SSH)if(e.sshJwk)n.addSshJwk(e.sshJwk);else throw Kt(Lv);const r=e.correlationId||this.config.cryptoInterface.createNewGuid();n.addCorrelationId(r),(!Uo.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities);let o;if(e.clientInfo)try{const s=tg(e.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${s.uid}${rr.CLIENT_INFO_SEPARATOR}${s.utid}`,type:qr.HOME_ACCOUNT_ID}}catch(s){this.logger.verbose("Could not parse client info for CCS Header: "+s)}else o=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case qr.HOME_ACCOUNT_ID:try{const s=xl(o.credential);n.addCcsOid(s)}catch(s){this.logger.verbose("Could not parse home account ID for CCS Header: "+s)}break;case qr.UPN:n.addCcsUpn(o.credential);break}return e.tokenBodyParameters&&n.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[n1])&&n.addExtraQueryParameters({[n1]:"1"}),n.createQueryString()}async createAuthCodeUrlQueryString(e){var i,a;(i=this.performanceClient)==null||i.addQueueMeasurement(L.AuthClientCreateQueryString,e.correlationId);const n=new _f;n.addClientId(((a=e.extraQueryParameters)==null?void 0:a[yu])||this.config.authOptions.clientId);const r=[...e.scopes||[],...e.extraScopesToConsent||[]];n.addScopes(r,!0,this.oidcDefaultScopes),n.addRedirectUri(e.redirectUri);const o=e.correlationId||this.config.cryptoInterface.createNewGuid();if(n.addCorrelationId(o),n.addResponseMode(e.responseMode),n.addResponseTypeCode(),n.addLibraryInfo(this.config.libraryInfo),oS(this.config)||n.addApplicationTelemetry(this.config.telemetry.application),n.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&n.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&n.addPrompt(e.prompt),e.domainHint&&n.addDomainHint(e.domainHint),e.prompt!==$n.SELECT_ACCOUNT)if(e.sid&&e.prompt===$n.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),n.addSid(e.sid);else if(e.account){const s=this.extractAccountSid(e.account);let c=this.extractLoginHint(e.account);if(c&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),c=null),c){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),n.addLoginHint(c);try{const u=xl(e.account.homeAccountId);n.addCcsOid(u)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(s&&e.prompt===$n.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),n.addSid(s);try{const u=xl(e.account.homeAccountId);n.addCcsOid(u)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),n.addLoginHint(e.loginHint),n.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),n.addLoginHint(e.account.username);try{const u=xl(e.account.homeAccountId);n.addCcsOid(u)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),n.addLoginHint(e.loginHint),n.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&n.addNonce(e.nonce),e.state&&n.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.addExtraQueryParams(e,n),e.nativeBroker&&(n.addNativeBroker(),e.authenticationScheme===Bt.POP)){const s=new bu(this.cryptoUtils);let c;e.popKid?c=this.cryptoUtils.encodeKid(e.popKid):c=(await Re(s.generateCnf.bind(s),L.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,n.addPopToken(c)}return n.createQueryString()}createLogoutUrlQueryString(e){const n=new _f;return e.postLogoutRedirectUri&&n.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&n.addCorrelationId(e.correlationId),e.idTokenHint&&n.addIdTokenHint(e.idTokenHint),e.state&&n.addState(e.state),e.logoutHint&&n.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,n),n.createQueryString()}addExtraQueryParams(e,n){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&n.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){var n;return((n=e.idTokenClaims)==null?void 0:n.sid)||null}extractLoginHint(e){var n;return((n=e.idTokenClaims)==null?void 0:n.login_hint)||null}}/*! @azure/msal-common v14.15.0 2024-09-20 */const KX=300;class sS extends OE{constructor(e,n){super(e,n)}async acquireToken(e){var a,s;(a=this.performanceClient)==null||a.addQueueMeasurement(L.RefreshTokenClientAcquireToken,e.correlationId);const n=bi(),r=await Re(this.executeTokenRequest.bind(this),L.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=(s=r.headers)==null?void 0:s[ui.X_MS_REQUEST_ID],i=new dc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),Re(i.handleServerTokenResponse.bind(i),L.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,n,e,void 0,void 0,!0,e.forceCache,o)}async acquireTokenByRefreshToken(e){var r;if(!e)throw Kt(GL);if((r=this.performanceClient)==null||r.addQueueMeasurement(L.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw Ce(bE);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await Re(this.acquireTokenWithCachedRefreshToken.bind(this),L.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(o){const i=o instanceof Zr&&o.errorCode===ig,a=o instanceof ea&&o.errorCode===Vk.INVALID_GRANT_ERROR&&o.subError===Vk.CLIENT_MISMATCH_ERROR;if(i||a)return Re(this.acquireTokenWithCachedRefreshToken.bind(this),L.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw o}return Re(this.acquireTokenWithCachedRefreshToken.bind(this),L.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(L.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const r=Dc(this.cacheManager.getRefreshToken.bind(this.cacheManager),L.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,n,void 0,this.performanceClient,e.correlationId);if(!r)throw aS(ig);if(r.expiresOn&&rS(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||KX))throw aS(NE);const o={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||Bt.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:qr.HOME_ACCOUNT_ID}};try{return await Re(this.acquireToken.bind(this),L.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(a){if(a instanceof Zr&&a.subError===jv){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const s=kl(r);this.cacheManager.removeRefreshToken(s)}throw a}}async executeTokenRequest(e,n){var c,u;(c=this.performanceClient)==null||c.addQueueMeasurement(L.RefreshTokenClientExecuteTokenRequest,e.correlationId);const r=this.createTokenQueryParameters(e),o=St.appendQueryString(n.tokenEndpoint,r),i=await Re(this.createTokenRequestBody.bind(this),L.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),a=this.createTokenRequestHeaders(e.ccsCredential),s={clientId:((u=e.tokenBodyParameters)==null?void 0:u.clientId)||this.config.authOptions.clientId,authority:n.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return Re(this.executePostToTokenEndpoint.bind(this),L.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,i,a,s,e.correlationId,L.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var o,i,a;(o=this.performanceClient)==null||o.addQueueMeasurement(L.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const n=e.correlationId,r=new _f;if(r.addClientId(((i=e.tokenBodyParameters)==null?void 0:i[yu])||this.config.authOptions.clientId),e.redirectUri&&r.addRedirectUri(e.redirectUri),r.addScopes(e.scopes,!0,(a=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:a.defaultScopes),r.addGrantType(yL.REFRESH_TOKEN_GRANT),r.addClientInfo(),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&!oS(this.config)&&r.addServerTelemetry(this.serverTelemetryManager),r.addCorrelationId(n),r.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&r.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const s=this.config.clientCredentials.clientAssertion;r.addClientAssertion(await lD(s.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(s.assertionType)}if(e.authenticationScheme===Bt.POP){const s=new bu(this.cryptoUtils,this.performanceClient);let c;e.popKid?c=this.cryptoUtils.encodeKid(e.popKid):c=(await Re(s.generateCnf.bind(s),L.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,r.addPopToken(c)}else if(e.authenticationScheme===Bt.SSH)if(e.sshJwk)r.addSshJwk(e.sshJwk);else throw Kt(Lv);if((!Uo.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case qr.HOME_ACCOUNT_ID:try{const s=xl(e.ccsCredential.credential);r.addCcsOid(s)}catch(s){this.logger.verbose("Could not parse home account ID for CCS Header: "+s)}break;case qr.UPN:r.addCcsUpn(e.ccsCredential.credential);break}return e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),r.createQueryString()}}/*! @azure/msal-common v14.15.0 2024-09-20 */class WX extends OE{constructor(e,n){super(e,n)}async acquireToken(e){var n;try{const[r,o]=await this.acquireCachedToken({...e,scopes:(n=e.scopes)!=null&&n.length?e.scopes:[...Ju]});return o===Ea.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new sS(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),r}catch(r){if(r instanceof Ov&&r.errorCode===Vi)return new sS(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw r}}async acquireCachedToken(e){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(L.SilentFlowClientAcquireCachedToken,e.correlationId);let n=Ea.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Uo.isEmptyObj(e.claims))throw this.setCacheOutcome(Ea.FORCE_REFRESH_OR_CLAIMS,e.correlationId),Ce(Vi);if(!e.account)throw Ce(bE);const r=e.account.tenantId||DX(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r,this.performanceClient,e.correlationId);if(i){if(_J(i.cachedAt)||rS(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Ea.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),Ce(Vi);i.refreshOn&&rS(i.refreshOn,0)&&(n=Ea.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Ea.NO_CACHED_ACCESS_TOKEN,e.correlationId),Ce(Vi);const a=e.authority||this.authority.getPreferredCache(),s={account:this.cacheManager.readAccountFromCache(e.account),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,o,r,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(a)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await Re(this.generateResultFromCacheRecord.bind(this),L.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(s,e),n]}setCacheOutcome(e,n){var r,o;(r=this.serverTelemetryManager)==null||r.setCacheOutcome(e),(o=this.performanceClient)==null||o.addFields({cacheOutcome:e},n),e!==Ea.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,n){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(L.SilentFlowClientGenerateResultFromCacheRecord,n.correlationId);let r;if(e.idToken&&(r=Lc(e.idToken.secret,this.config.cryptoInterface.base64Decode)),n.maxAge||n.maxAge===0){const i=r==null?void 0:r.auth_time;if(!i)throw Ce(yE);UL(i,n.maxAge)}return dc.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,n,r)}}/*! @azure/msal-common v14.15.0 2024-09-20 */const qX={sendGetRequestAsync:()=>Promise.reject(Ce(pt)),sendPostRequestAsync:()=>Promise.reject(Ce(pt))};/*! @azure/msal-common v14.15.0 2024-09-20 */const i1=",",dD="|";function YX(t){const{skus:e,libraryName:n,libraryVersion:r,extensionName:o,extensionVersion:i}=t,a=new Map([[0,[n,r]],[2,[o,i]]]);let s=[];if(e!=null&&e.length){if(s=e.split(i1),s.length<4)return e}else s=Array.from({length:4},()=>dD);return a.forEach((c,u)=>{var d,h;c.length===2&&((d=c[0])!=null&&d.length)&&((h=c[1])!=null&&h.length)&&QX({skuArr:s,index:u,skuName:c[0],skuVersion:c[1]})}),s.join(i1)}function QX(t){const{skuArr:e,index:n,skuName:r,skuVersion:o}=t;n>=e.length||(e[n]=[r,o].join(dD))}class Yf{constructor(e,n){this.cacheOutcome=Ea.NOT_APPLICABLE,this.cacheManager=n,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||ae.EMPTY_STRING,this.wrapperVer=e.wrapperVer||ae.EMPTY_STRING,this.telemetryCacheKey=Kn.CACHE_KEY+rr.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${Kn.VALUE_SEPARATOR}${this.cacheOutcome}`,n=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r!=null&&r.length&&n.push(`broker_error=${r}`);const o=n.join(Kn.VALUE_SEPARATOR),i=this.getRegionDiscoveryFields(),a=[e,i].join(Kn.VALUE_SEPARATOR);return[Kn.SCHEMA_VERSION,a,o].join(Kn.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),n=Yf.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*n).join(Kn.VALUE_SEPARATOR),o=e.errors.slice(0,n).join(Kn.VALUE_SEPARATOR),i=e.errors.length,a=n<i?Kn.OVERFLOW_TRUE:Kn.OVERFLOW_FALSE,s=[i,a].join(Kn.VALUE_SEPARATOR);return[Kn.SCHEMA_VERSION,e.cacheHits,r,o,s].join(Kn.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const n=this.getLastRequests();n.errors.length>=Kn.MAX_CACHED_ERRORS&&(n.failedRequests.shift(),n.failedRequests.shift(),n.errors.shift()),n.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Yt?e.subError?n.errors.push(e.subError):e.errorCode?n.errors.push(e.errorCode):n.errors.push(e.toString()):n.errors.push(e.toString()):n.errors.push(Kn.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),n=Yf.maxErrorsToSend(e),r=e.errors.length;if(n===r)this.cacheManager.removeItem(this.telemetryCacheKey);else{const o={failedRequests:e.failedRequests.slice(n*2),errors:e.errors.slice(n),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o)}}static maxErrorsToSend(e){let n,r=0,o=0;const i=e.errors.length;for(n=0;n<i;n++){const a=e.failedRequests[2*n]||ae.EMPTY_STRING,s=e.failedRequests[2*n+1]||ae.EMPTY_STRING,c=e.errors[n]||ae.EMPTY_STRING;if(o+=a.toString().length+s.toString().length+c.length+3,o<Kn.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||ae.EMPTY_STRING),e.push(this.regionSource||ae.EMPTY_STRING),e.push(this.regionOutcome||ae.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const n=this.getLastRequests();n.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return YX(e)}}/*! @azure/msal-common v14.15.0 2024-09-20 */const fD="missing_kid_error",hD="missing_alg_error";/*! @azure/msal-common v14.15.0 2024-09-20 */const JX={[fD]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[hD]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class LE extends Yt{constructor(e,n){super(e,n),this.name="JoseHeaderError",Object.setPrototypeOf(this,LE.prototype)}}function a1(t){return new LE(t,JX[t])}/*! @azure/msal-common v14.15.0 2024-09-20 */class DE{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw a1(fD);if(!e.alg)throw a1(hD);const n=new DE({typ:e.typ||oJ.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(n)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class cS{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class pD{generateId(){return"callback-id"}startMeasurement(e,n){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:iS.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:n||""},measurement:new cS}}startPerformanceMeasurement(){return new cS}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-common v14.15.0 2024-09-20 */function XX(t,e,n){n&&n.push({name:e.get(t.name)||t.name})}function ZX(t,e,n,r){if(!(n!=null&&n.length))return;const o=g=>g.length?g[g.length-1]:void 0,i=e.get(t.name)||t.name,a=o(n);if((a==null?void 0:a.name)!==i)return;const s=n==null?void 0:n.pop();if(!s)return;const c=r instanceof Yt?r.errorCode:r instanceof Error?r.name:void 0,u=r instanceof Yt?r.subError:void 0;c&&s.childErr!==c&&(s.err=c,u&&(s.subErr=u)),delete s.name,delete s.childErr;const d={...s,dur:t.durationMs};t.success||(d.fail=1);const h=o(n);if(!h)return{[i]:d};c&&(h.childErr=c);let p;if(!h[i])p=i;else{const g=Object.keys(h).filter(v=>v.startsWith(i)).length;p=`${i}_${g+1}`}return h[p]=d,h}function eZ(t,e,n,r=5){var o,i;if(t instanceof Error){if(t instanceof Yt){n.errorCode=t.errorCode,n.subErrorCode=t.subError,(t instanceof ea||t instanceof Zr)&&(n.serverErrorNo=t.errorNo);return}else if(t instanceof Ws){n.errorCode=t.errorCode;return}else if((o=n.errorStack)!=null&&o.length){e.trace("PerformanceClient.addErrorStack: Stack already exist",n.correlationId);return}else if(!((i=t.stack)!=null&&i.length)){e.trace("PerformanceClient.addErrorStack: Input stack is empty",n.correlationId);return}}else{e.trace("PerformanceClient.addErrorStack: Input error is not instance of Error",n.correlationId);return}t.stack&&(n.errorStack=tZ(t.stack,r)),n.errorName=t.name}function tZ(t,e){if(e<0)return[];const n=t.split(`
`)||[];if(n.length<2)return[];const r=[];for(let o=Math.max(n.length-e-1,1);o<n.length;o++){const i=n[o];if(r.length>=e)break;r.push(nZ(i))}return r}function nZ(t){const e=t.lastIndexOf(" ")+1;if(e<1)return t;const n=t.substring(e);let r=n.lastIndexOf("/");return r=r<0?n.lastIndexOf("\\"):r,r>=0?(t.substring(0,e)+"("+n.substring(r+1)+(n.charAt(n.length-1)===")"?"":")")).trimStart():t.trimStart()}class rZ{constructor(e,n,r,o,i,a,s,c){this.authority=n,this.libraryName=o,this.libraryVersion=i,this.applicationTelemetry=a,this.clientId=e,this.logger=r,this.callbacks=new Map,this.eventsByCorrelationId=new Map,this.eventStack=new Map,this.queueMeasurements=new Map,this.preQueueTimeByCorrelationId=new Map,this.intFields=s||new Set;for(const u of LX)this.intFields.add(u);this.abbreviations=c||new Map;for(const[u,d]of MX)this.abbreviations.set(u,d)}startPerformanceMeasurement(e,n){return{}}getPreQueueTime(e,n){const r=this.preQueueTimeByCorrelationId.get(n);if(r){if(r.name!==e){this.logger.trace(`PerformanceClient.getPreQueueTime: no pre-queue time found for ${e}, unable to add queue measurement`);return}}else{this.logger.trace(`PerformanceClient.getPreQueueTime: no pre-queue times found for correlationId: ${n}, unable to add queue measurement`);return}return r.time}calculateQueuedTime(e,n){return e<1?(this.logger.trace(`PerformanceClient: preQueueTime should be a positive integer and not ${e}`),0):n<1?(this.logger.trace(`PerformanceClient: currentTime should be a positive integer and not ${n}`),0):n<e?(this.logger.trace("PerformanceClient: currentTime is less than preQueueTime, check how time is being retrieved"),0):n-e}addQueueMeasurement(e,n,r,o){if(!n){this.logger.trace(`PerformanceClient.addQueueMeasurement: correlationId not provided for ${e}, cannot add queue measurement`);return}if(r===0)this.logger.trace(`PerformanceClient.addQueueMeasurement: queue time provided for ${e} is ${r}`);else if(!r){this.logger.trace(`PerformanceClient.addQueueMeasurement: no queue time provided for ${e}`);return}const i={eventName:e,queueTime:o?0:r,manuallyCompleted:o},a=this.queueMeasurements.get(n);if(a)a.push(i),this.queueMeasurements.set(n,a);else{this.logger.trace(`PerformanceClient.addQueueMeasurement: adding correlationId ${n} to queue measurements`);const s=[i];this.queueMeasurements.set(n,s)}this.preQueueTimeByCorrelationId.delete(n)}startMeasurement(e,n){var i,a;const r=n||this.generateId();n||this.logger.info(`PerformanceClient: No correlation id provided for ${e}, generating`,r),this.logger.trace(`PerformanceClient: Performance measurement started for ${e}`,r);const o={eventId:this.generateId(),status:iS.InProgress,authority:this.authority,libraryName:this.libraryName,libraryVersion:this.libraryVersion,clientId:this.clientId,name:e,startTimeMs:Date.now(),correlationId:r,appName:(i=this.applicationTelemetry)==null?void 0:i.appName,appVersion:(a=this.applicationTelemetry)==null?void 0:a.appVersion};return this.cacheEventByCorrelationId(o),XX(o,this.abbreviations,this.eventStack.get(r)),{end:(s,c)=>this.endMeasurement({...o,...s},c),discard:()=>this.discardMeasurements(o.correlationId),add:s=>this.addFields(s,o.correlationId),increment:s=>this.incrementFields(s,o.correlationId),event:o,measurement:new cS}}endMeasurement(e,n){var u,d;const r=this.eventsByCorrelationId.get(e.correlationId);if(!r)return this.logger.trace(`PerformanceClient: Measurement not found for ${e.eventId}`,e.correlationId),null;const o=e.eventId===r.eventId;let i={totalQueueTime:0,totalQueueCount:0,manuallyCompletedCount:0};e.durationMs=Math.round(e.durationMs||this.getDurationMs(e.startTimeMs));const a=JSON.stringify(ZX(e,this.abbreviations,this.eventStack.get(r.correlationId),n));if(o?(i=this.getQueueInfo(e.correlationId),this.discardMeasurements(r.correlationId)):(u=r.incompleteSubMeasurements)==null||u.delete(e.eventId),this.logger.trace(`PerformanceClient: Performance measurement ended for ${e.name}: ${e.durationMs} ms`,e.correlationId),!o)return r[e.name+"DurationMs"]=Math.floor(e.durationMs),{...r};n&&eZ(n,this.logger,r);let s={...r,...e},c=0;return(d=s.incompleteSubMeasurements)==null||d.forEach(h=>{this.logger.trace(`PerformanceClient: Incomplete submeasurement ${h.name} found for ${e.name}`,s.correlationId),c++}),s.incompleteSubMeasurements=void 0,s={...s,queuedTimeMs:i.totalQueueTime,queuedCount:i.totalQueueCount,queuedManuallyCompletedCount:i.manuallyCompletedCount,status:iS.Completed,incompleteSubsCount:c,context:a},this.truncateIntegralFields(s),this.emitEvents([s],e.correlationId),s}addFields(e,n){this.logger.trace("PerformanceClient: Updating static fields");const r=this.eventsByCorrelationId.get(n);r?this.eventsByCorrelationId.set(n,{...r,...e}):this.logger.trace("PerformanceClient: Event not found for",n)}incrementFields(e,n){this.logger.trace("PerformanceClient: Updating counters");const r=this.eventsByCorrelationId.get(n);if(r)for(const o in e){if(!r.hasOwnProperty(o))r[o]=0;else if(isNaN(Number(r[o])))return;r[o]+=e[o]}else this.logger.trace("PerformanceClient: Event not found for",n)}cacheEventByCorrelationId(e){const n=this.eventsByCorrelationId.get(e.correlationId);n?(this.logger.trace(`PerformanceClient: Performance measurement for ${e.name} added/updated`,e.correlationId),n.incompleteSubMeasurements=n.incompleteSubMeasurements||new Map,n.incompleteSubMeasurements.set(e.eventId,{name:e.name,startTimeMs:e.startTimeMs})):(this.logger.trace(`PerformanceClient: Performance measurement for ${e.name} started`,e.correlationId),this.eventsByCorrelationId.set(e.correlationId,{...e}),this.eventStack.set(e.correlationId,[]))}getQueueInfo(e){const n=this.queueMeasurements.get(e);n||this.logger.trace(`PerformanceClient: no queue measurements found for for correlationId: ${e}`);let r=0,o=0,i=0;return n==null||n.forEach(a=>{r+=a.queueTime,o++,i+=a.manuallyCompleted?1:0}),{totalQueueTime:r,totalQueueCount:o,manuallyCompletedCount:i}}discardMeasurements(e){this.logger.trace("PerformanceClient: Performance measurements discarded",e),this.eventsByCorrelationId.delete(e),this.logger.trace("PerformanceClient: QueueMeasurements discarded",e),this.queueMeasurements.delete(e),this.logger.trace("PerformanceClient: Pre-queue times discarded",e),this.preQueueTimeByCorrelationId.delete(e),this.logger.trace("PerformanceClient: Event stack discarded",e),this.eventStack.delete(e)}addPerformanceCallback(e){for(const[r,o]of this.callbacks)if(o.toString()===e.toString())return this.logger.warning(`PerformanceClient: Performance callback is already registered with id: ${r}`),r;const n=this.generateId();return this.callbacks.set(n,e),this.logger.verbose(`PerformanceClient: Performance callback registered with id: ${n}`),n}removePerformanceCallback(e){const n=this.callbacks.delete(e);return n?this.logger.verbose(`PerformanceClient: Performance callback ${e} removed.`):this.logger.verbose(`PerformanceClient: Performance callback ${e} not removed.`),n}emitEvents(e,n){this.logger.verbose("PerformanceClient: Emitting performance events",n),this.callbacks.forEach((r,o)=>{this.logger.trace(`PerformanceClient: Emitting event to callback ${o}`,n),r.apply(null,[e])})}truncateIntegralFields(e){this.intFields.forEach(n=>{n in e&&typeof e[n]=="number"&&(e[n]=Math.floor(e[n]))})}getDurationMs(e){const n=Date.now()-e;return n<0?n:0}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const jE="pkce_not_created",mD="crypto_nonexistent",Uv="empty_navigate_uri",gD="hash_empty_error",UE="no_state_in_hash",vD="hash_does_not_contain_known_properties",yD="unable_to_parse_state",bD="state_interaction_type_mismatch",_D="interaction_in_progress",CD="popup_window_error",SD="empty_window_error",fc="user_cancelled",oZ="monitor_popup_timeout",wD="monitor_window_timeout",ED="redirect_in_iframe",TD="block_iframe_reload",ID="block_nested_popups",iZ="iframe_closed_prematurely",Fv="silent_logout_unsupported",AD="no_account_error",aZ="silent_prompt_value_error",kD="no_token_request_cache_error",xD="unable_to_parse_token_request_cache_error",FE="no_cached_authority_error",sZ="auth_request_not_set_error",cZ="invalid_cache_type",BE="non_browser_environment",vl="database_not_open",ag="no_network_connectivity",RD="post_request_failed",PD="get_request_failed",lS="failed_to_parse_response",OD="unable_to_load_token",HE="crypto_key_not_found",ND="auth_code_required",MD="auth_code_or_nativeAccountId_required",LD="spa_code_and_nativeAccountId_present",VE="database_unavailable",DD="unable_to_acquire_token_from_native_platform",jD="native_handshake_timeout",UD="native_extension_not_installed",Mh="native_connection_not_established",FD="uninitialized_public_client_application",BD="native_prompt_not_supported",HD="invalid_base64_string",VD="invalid_pop_token_request";/*! @azure/msal-browser v3.26.1 2024-10-08 */const Pi="For more visit: aka.ms/msaljs/browser-errors",lZ={[jE]:"The PKCE code challenge and verifier could not be generated.",[mD]:"The crypto object or function is not available.",[Uv]:"Navigation URI is empty. Please check stack trace for more info.",[gD]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Pi}`,[UE]:"Hash does not contain state. Please verify that the request originated from msal.",[vD]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Pi}`,[yD]:"Unable to parse state. Please verify that the request originated from msal.",[bD]:"Hash contains state but the interaction type does not match the caller.",[_D]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Pi}`,[CD]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[SD]:"window.open returned null or undefined window object.",[fc]:"User cancelled the flow.",[oZ]:`Token acquisition in popup failed due to timeout.  ${Pi}`,[wD]:`Token acquisition in iframe failed due to timeout.  ${Pi}`,[ED]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[TD]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Pi}`,[ID]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[iZ]:"The iframe being monitored was closed prematurely.",[Fv]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[AD]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[aZ]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[kD]:"No token request found in cache.",[xD]:"The cached token request could not be parsed.",[FE]:"No cached authority found.",[sZ]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[cZ]:"Invalid cache type",[BE]:"Login and token requests are not supported in non-browser environments.",[vl]:"Database is not open!",[ag]:"No network connectivity. Check your internet connection.",[RD]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[PD]:"Network request failed. Please check the network trace to determine root cause.",[lS]:"Failed to parse network response. Check network trace.",[OD]:"Error loading token to cache.",[HE]:"Cryptographic Key or Keypair not found in browser storage.",[ND]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[MD]:"An authorization code or nativeAccountId must be provided to this flow.",[LD]:"Request cannot contain both spa code and native account id.",[VE]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[DD]:`Unable to acquire token from native platform.  ${Pi}`,[jD]:"Timed out while attempting to establish connection to browser extension",[UD]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Mh]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Pi}`,[FD]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Pi}`,[BD]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[HD]:"Invalid base64 encoded string.",[VD]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true."};class Lh extends Yt{constructor(e){super(e,lZ[e]),Object.setPrototypeOf(this,Lh.prototype),this.name="BrowserAuthError"}}function Ge(t){return new Lh(t)}/*! @azure/msal-browser v3.26.1 2024-10-08 */const Gr={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Rl={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},js={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},Cn={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},s1={GET:"GET",POST:"POST"},Dt={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},va={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},mp={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},an={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var Xe;(function(t){t.Redirect="redirect",t.Popup="popup",t.Silent="silent",t.None="none"})(Xe||(Xe={}));const c1={scopes:Ju},zD="jwk",uS="msal.db",uZ=1,dZ=`${uS}.keys`,Hr={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},fZ=[Hr.Default,Hr.Skip,Hr.RefreshTokenAndNetwork],hZ="msal.browser.log.level",pZ="msal.browser.log.pii",mZ="msal.browser.performance.enabled";/*! @azure/msal-browser v3.26.1 2024-10-08 */function gp(t){return encodeURIComponent(zE(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Bv(t){return $D(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zE(t){return $D(new TextEncoder().encode(t))}function $D(t){const e=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(e)}/*! @azure/msal-browser v3.26.1 2024-10-08 */const gZ="RSASSA-PKCS1-v1_5",GD="SHA-256",vZ=2048,yZ=new Uint8Array([1,0,1]),l1="0123456789abcdef",u1=new Uint32Array(1),$E={name:gZ,hash:GD,modulusLength:vZ,publicExponent:yZ};function bZ(t){if("crypto"in window)t.verbose("BrowserCrypto: modern crypto interface available");else throw t.error("BrowserCrypto: crypto interface is unavailable"),Ge(mD)}async function KD(t,e,n){e==null||e.addQueueMeasurement(L.Sha256Digest,n);const o=new TextEncoder().encode(t);return window.crypto.subtle.digest(GD,o)}function _Z(t){return window.crypto.getRandomValues(t)}function Ab(){return window.crypto.getRandomValues(u1),u1[0]}function _i(){const t=Date.now(),e=Ab()*1024+(Ab()&1023),n=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=Ab();n[0]=t/2**40,n[1]=t/2**32,n[2]=t/2**24,n[3]=t/2**16,n[4]=t/2**8,n[5]=t,n[6]=112|r>>>8,n[7]=r,n[8]=128|o>>>24,n[9]=o>>>16,n[10]=o>>>8,n[11]=o,n[12]=i>>>24,n[13]=i>>>16,n[14]=i>>>8,n[15]=i;let a="";for(let s=0;s<n.length;s++)a+=l1.charAt(n[s]>>>4),a+=l1.charAt(n[s]&15),(s===3||s===5||s===7||s===9)&&(a+="-");return a}async function CZ(t,e){return window.crypto.subtle.generateKey($E,t,e)}async function kb(t){return window.crypto.subtle.exportKey(zD,t)}async function SZ(t,e,n){return window.crypto.subtle.importKey(zD,t,$E,e,n)}async function wZ(t,e){return window.crypto.subtle.sign($E,t,e)}async function WD(t){const e=await KD(t),n=new Uint8Array(e);return Bv(n)}/*! @azure/msal-browser v3.26.1 2024-10-08 */const qD="storage_not_supported",EZ="stubbed_public_client_application_called",YD="in_mem_redirect_unavailable";/*! @azure/msal-browser v3.26.1 2024-10-08 */const TZ={[qD]:"Given storage configuration option was not supported.",[EZ]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[YD]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class GE extends Yt{constructor(e,n){super(e,n),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,GE.prototype)}}function QD(t){return new GE(t,TZ[t])}/*! @azure/msal-browser v3.26.1 2024-10-08 */function IZ(t){t.location.hash="",typeof t.history.replaceState=="function"&&t.history.replaceState(null,"",`${t.location.origin}${t.location.pathname}${t.location.search}`)}function AZ(t){const e=t.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function KE(){return window.parent!==window}function kZ(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${Gr.POPUP_NAME_PREFIX}.`)===0}function zi(){return window.location.href.split("?")[0].split("#")[0]}function xZ(){const e=new St(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function RZ(){if(St.hashContainsKnownProperties(window.location.hash)&&KE())throw Ge(TD)}function PZ(t){if(KE()&&!t)throw Ge(ED)}function OZ(){if(kZ())throw Ge(ID)}function JD(){if(typeof window>"u")throw Ge(BE)}function XD(t){if(!t)throw Ge(FD)}function WE(t){JD(),RZ(),OZ(),XD(t)}function d1(t,e){if(WE(t),PZ(e.system.allowRedirectInIframe),e.cache.cacheLocation===Cn.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw QD(YD)}function ZD(t){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(t).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function dS(){return _i()}/*! @azure/msal-browser v3.26.1 2024-10-08 */class sg{navigateInternal(e,n){return sg.defaultNavigateWindow(e,n)}navigateExternal(e,n){return sg.defaultNavigateWindow(e,n)}static defaultNavigateWindow(e,n){return n.noHistory?window.location.replace(e):window.location.assign(e),new Promise(r=>{setTimeout(()=>{r(!0)},n.timeout)})}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class NZ{async sendGetRequestAsync(e,n){let r;try{r=await fetch(e,{method:s1.GET,headers:this.getFetchHeaders(n)})}catch{throw window.navigator.onLine?Ge(PD):Ge(ag)}try{return{headers:this.getHeaderDict(r.headers),body:await r.json(),status:r.status}}catch{throw Ge(lS)}}async sendPostRequestAsync(e,n){const r=n&&n.body||ae.EMPTY_STRING;let o;try{o=await fetch(e,{method:s1.POST,headers:this.getFetchHeaders(n),body:r})}catch{throw window.navigator.onLine?Ge(RD):Ge(ag)}try{return{headers:this.getHeaderDict(o.headers),body:await o.json(),status:o.status}}catch{throw Ge(lS)}}getFetchHeaders(e){const n=new Headers;if(!(e&&e.headers))return n;const r=e.headers;return Object.keys(r).forEach(o=>{n.append(o,r[o])}),n}getHeaderDict(e){const n={};return e.forEach((r,o)=>{n[o]=r}),n}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const MZ=6e4,fS=1e4,LZ=3e4,DZ=2e3;function jZ({auth:t,cache:e,system:n,telemetry:r},o){const i={clientId:ae.EMPTY_STRING,authority:`${ae.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:ae.EMPTY_STRING,authorityMetadata:ae.EMPTY_STRING,redirectUri:ae.EMPTY_STRING,postLogoutRedirectUri:ae.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:$i.AAD,OIDCOptions:{serverResponseType:Nh.FRAGMENT,defaultScopes:[ae.OPENID_SCOPE,ae.PROFILE_SCOPE,ae.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:qf.None,tenant:ae.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},a={cacheLocation:Cn.SessionStorage,temporaryCacheLocation:Cn.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===Cn.LocalStorage),claimsBasedCachingEnabled:!1},s={loggerCallback:()=>{},logLevel:un.Info,piiLoggingEnabled:!1},u={...{...iD,loggerOptions:s,networkClient:o?new NZ:qX,navigationClient:new sg,loadFrameTimeout:0,windowHashTimeout:(n==null?void 0:n.loadFrameTimeout)||MZ,iframeHashTimeout:(n==null?void 0:n.loadFrameTimeout)||fS,navigateFrameWait:0,redirectNavigationTimeout:LZ,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:(n==null?void 0:n.nativeBrokerHandshakeTimeout)||DZ,pollIntervalMilliseconds:Gr.DEFAULT_POLL_INTERVAL_MS},...n,loggerOptions:(n==null?void 0:n.loggerOptions)||s},d={application:{appName:ae.EMPTY_STRING,appVersion:ae.EMPTY_STRING},client:new pD};if((t==null?void 0:t.protocolMode)!==$i.OIDC&&(t!=null&&t.OIDCOptions)&&new Zi(u.loggerOptions).warning(JSON.stringify(Kt(JL))),t!=null&&t.protocolMode&&t.protocolMode!==$i.AAD&&(u!=null&&u.allowNativeBroker))throw Kt(XL);return{auth:{...i,...t,OIDCOptions:{...i.OIDCOptions,...t==null?void 0:t.OIDCOptions}},cache:{...a,...e},system:u,telemetry:{...d,...r}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const hS="@azure/msal-browser",_u="3.26.1";/*! @azure/msal-browser v3.26.1 2024-10-08 */class qE{static loggerCallback(e,n){switch(e){case un.Error:console.error(n);return;case un.Info:console.info(n);return;case un.Verbose:console.debug(n);return;case un.Warning:console.warn(n);return;default:console.log(n);return}}constructor(e){var c;this.browserEnvironment=typeof window<"u",this.config=jZ(e,this.browserEnvironment);let n;try{n=window[Cn.SessionStorage]}catch{}const r=n==null?void 0:n.getItem(hZ),o=(c=n==null?void 0:n.getItem(pZ))==null?void 0:c.toLowerCase(),i=o==="true"?!0:o==="false"?!1:void 0,a={...this.config.system.loggerOptions},s=r&&Object.keys(un).includes(r)?un[r]:void 0;s&&(a.loggerCallback=qE.loggerCallback,a.logLevel=s),i!==void 0&&(a.piiLoggingEnabled=i),this.logger=new Zi(a,hS,_u),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class hc extends qE{getModuleName(){return hc.MODULE_NAME}getId(){return hc.ID}async initialize(){return this.available=typeof window<"u",this.available}}hc.MODULE_NAME="";hc.ID="StandardOperatingContext";/*! @azure/msal-browser v3.26.1 2024-10-08 */function hi(t){return new TextDecoder().decode(UZ(t))}function UZ(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw Ge(HD)}const n=atob(e);return Uint8Array.from(n,r=>r.codePointAt(0)||0)}/*! @azure/msal-browser v3.26.1 2024-10-08 */class FZ{constructor(){this.dbName=uS,this.version=uZ,this.tableName=dZ,this.dbOpen=!1}async open(){return new Promise((e,n)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",o=>{o.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",o=>{const i=o;this.db=i.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>n(Ge(VE)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(Ge(vl));const a=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);a.addEventListener("success",s=>{const c=s;this.closeConnection(),n(c.target.result)}),a.addEventListener("error",s=>{this.closeConnection(),r(s)})})}async setItem(e,n){return await this.validateDbIsOpen(),new Promise((r,o)=>{if(!this.db)return o(Ge(vl));const s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(n,e);s.addEventListener("success",()=>{this.closeConnection(),r()}),s.addEventListener("error",c=>{this.closeConnection(),o(c)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(Ge(vl));const a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);a.addEventListener("success",()=>{this.closeConnection(),n()}),a.addEventListener("error",s=>{this.closeConnection(),r(s)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,n)=>{if(!this.db)return n(Ge(vl));const i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();i.addEventListener("success",a=>{const s=a;this.closeConnection(),e(s.target.result)}),i.addEventListener("error",a=>{this.closeConnection(),n(a)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(Ge(vl));const a=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);a.addEventListener("success",s=>{const c=s;this.closeConnection(),n(c.target.result===1)}),a.addEventListener("error",s=>{this.closeConnection(),r(s)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,n)=>{const r=window.indexedDB.deleteDatabase(uS),o=setTimeout(()=>n(!1),200);r.addEventListener("success",()=>(clearTimeout(o),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(o),e(!0))),r.addEventListener("error",()=>(clearTimeout(o),n(!1)))})}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class pS{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,n){this.cache.set(e,n)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((n,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class BZ{constructor(e){this.inMemoryCache=new pS,this.indexedDBCache=new FZ,this.logger=e}handleDatabaseAccessError(e){if(e instanceof Lh&&e.errorCode===VE)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const n=this.inMemoryCache.getItem(e);if(!n)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return n}async setItem(e,n){this.inMemoryCache.setItem(e,n);try{await this.indexedDBCache.setItem(e,n)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(n){this.handleDatabaseAccessError(n)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(n){this.handleDatabaseAccessError(n)}return e}async containsKey(e){const n=this.inMemoryCache.containsKey(e);if(!n)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return n}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Cu{constructor(e,n){this.logger=e,bZ(e),this.cache=new BZ(this.logger),this.performanceClient=n}createNewGuid(){return _i()}base64Encode(e){return zE(e)}base64Decode(e){return hi(e)}base64UrlEncode(e){return gp(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var d;const n=(d=this.performanceClient)==null?void 0:d.startMeasurement(L.CryptoOptsGetPublicKeyThumbprint,e.correlationId),r=await CZ(Cu.EXTRACTABLE,Cu.POP_KEY_USAGES),o=await kb(r.publicKey),i={e:o.e,kty:o.kty,n:o.n},a=f1(i),s=await this.hashString(a),c=await kb(r.privateKey),u=await SZ(c,!1,["sign"]);return await this.cache.setItem(s,{privateKey:u,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),s}async removeTokenBindingKey(e){return await this.cache.removeItem(e),!await this.cache.containsKey(e)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,n,r,o){var w;const i=(w=this.performanceClient)==null?void 0:w.startMeasurement(L.CryptoOptsSignJwt,o),a=await this.cache.getItem(n);if(!a)throw Ge(HE);const s=await kb(a.publicKey),c=f1(s),u=gp(JSON.stringify({kid:n})),d=DE.getShrHeaderString({...r==null?void 0:r.header,alg:s.alg,kid:u}),h=gp(d);e.cnf={jwk:JSON.parse(c)};const p=gp(JSON.stringify(e)),g=`${h}.${p}`,y=new TextEncoder().encode(g),_=await wZ(a.privateKey,y),b=Bv(new Uint8Array(_)),C=`${g}.${b}`;return i&&i.end({success:!0}),C}async hashString(e){return WD(e)}}Cu.POP_KEY_USAGES=["sign","verify"];Cu.EXTRACTABLE=!0;function f1(t){return JSON.stringify(t,Object.keys(t).sort())}/*! @azure/msal-browser v3.26.1 2024-10-08 */class mS{constructor(e){this.validateWindowStorage(e),this.windowStorage=window[e]}validateWindowStorage(e){if(e!==Cn.LocalStorage&&e!==Cn.SessionStorage||!window[e])throw QD(qD)}getItem(e){return this.windowStorage.getItem(e)}setItem(e,n){this.windowStorage.setItem(e,n)}removeItem(e){this.windowStorage.removeItem(e)}getKeys(){return Object.keys(this.windowStorage)}containsKey(e){return this.windowStorage.hasOwnProperty(e)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */function e5(t,e){if(!e)return null;try{return Fo.parseRequestState(t,e).libraryState.meta}catch{throw Ce(gu)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class gS extends vu{constructor(e,n,r,o,i,a){super(e,r,o,i),this.COOKIE_LIFE_MULTIPLIER=24*60*60*1e3,this.cacheConfig=n,this.logger=o,this.internalStorage=new pS,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupTemporaryCacheStorage(this.cacheConfig.temporaryCacheLocation,this.cacheConfig.cacheLocation),n.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=a}setupBrowserStorage(e){switch(e){case Cn.LocalStorage:case Cn.SessionStorage:try{return new mS(e)}catch(n){this.logger.verbose(n);break}}return this.cacheConfig.cacheLocation=Cn.MemoryStorage,new pS}setupTemporaryCacheStorage(e,n){switch(n){case Cn.LocalStorage:case Cn.SessionStorage:try{return new mS(e||Cn.SessionStorage)}catch(r){return this.logger.verbose(r),this.internalStorage}case Cn.MemoryStorage:default:return this.internalStorage}}migrateCacheEntries(){const e=`${ae.CACHE_PREFIX}.${Bn.ID_TOKEN}`,n=`${ae.CACHE_PREFIX}.${Bn.CLIENT_INFO}`,r=`${ae.CACHE_PREFIX}.${Bn.ERROR}`,o=`${ae.CACHE_PREFIX}.${Bn.ERROR_DESC}`,i=this.browserStorage.getItem(e),a=this.browserStorage.getItem(n),s=this.browserStorage.getItem(r),c=this.browserStorage.getItem(o),u=[i,a,s,c];[Bn.ID_TOKEN,Bn.CLIENT_INFO,Bn.ERROR,Bn.ERROR_DESC].forEach((h,p)=>{const g=u[p];g&&this.setTemporaryCache(h,g,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const e=this.getItem(va.ACCOUNT_KEYS),n=this.getItem(`${va.TOKEN_KEYS}.${this.clientId}`);if(e&&n){this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");return}this.browserStorage.getKeys().forEach(o=>{if(this.isCredentialKey(o)){const i=this.getItem(o);if(i){const a=this.validateAndParseJson(i);if(a&&a.hasOwnProperty("credentialType"))switch(a.credentialType){case rt.ID_TOKEN:if(Wk(a)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${o} found, saving key to token key map`);const s=a,c=this.updateCredentialCacheKey(o,s);this.addTokenKey(c,rt.ID_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${o}`);break;case rt.ACCESS_TOKEN:case rt.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(Kk(a)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${o} found, saving key to token key map`);const s=a,c=this.updateCredentialCacheKey(o,s);this.addTokenKey(c,rt.ACCESS_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${o}`);break;case rt.REFRESH_TOKEN:if(qk(a)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${o} found, saving key to token key map`);const s=a,c=this.updateCredentialCacheKey(o,s);this.addTokenKey(c,rt.REFRESH_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${o}`);break}}}if(this.isAccountKey(o)){const i=this.getItem(o);if(i){const a=this.validateAndParseJson(i);a&&Dn.isAccountEntity(a)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${o} found, saving key to account key map`),this.addAccountKeyToMap(o))}}})}validateAndParseJson(e){try{const n=JSON.parse(e);return n&&typeof n=="object"?n:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,n){this.browserStorage.setItem(e,n)}getAccount(e,n){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.getCachedAccountEntity(e);return this.updateOutdatedCachedAccount(e,r,n)}getCachedAccountEntity(e){const n=this.getItem(e);if(!n)return this.removeAccountKeyFromMap(e),null;const r=this.validateAndParseJson(n);return!r||!Dn.isAccountEntity(r)?(this.removeAccountKeyFromMap(e),null):vu.toObject(new Dn,r)}setAccount(e){this.logger.trace("BrowserCacheManager.setAccount called");const n=e.generateAccountKey();this.setItem(n,JSON.stringify(e)),this.addAccountKeyToMap(n)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const e=this.getItem(va.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const n=this.getAccountKeys();n.indexOf(e)===-1?(n.push(e),this.setItem(va.ACCOUNT_KEYS,JSON.stringify(n)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const n=this.getAccountKeys(),r=n.indexOf(e);r>-1?(n.splice(r,1),this.setItem(va.ACCOUNT_KEYS,JSON.stringify(n)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}removeOutdatedAccount(e){this.removeItem(e),this.removeAccountKeyFromMap(e)}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,rt.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,rt.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,rt.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const e=this.getItem(`${va.TOKEN_KEYS}.${this.clientId}`);if(e){const n=this.validateAndParseJson(e);if(n&&n.hasOwnProperty("idToken")&&n.hasOwnProperty("accessToken")&&n.hasOwnProperty("refreshToken"))return n;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(e,n){this.logger.trace("BrowserCacheManager addTokenKey called");const r=this.getTokenKeys();switch(n){case rt.ID_TOKEN:r.idToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),r.idToken.push(e));break;case rt.ACCESS_TOKEN:r.accessToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),r.accessToken.push(e));break;case rt.REFRESH_TOKEN:r.refreshToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),r.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${n}`),Ce(nS)}this.setItem(`${va.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}removeTokenKey(e,n){this.logger.trace("BrowserCacheManager removeTokenKey called");const r=this.getTokenKeys();switch(n){case rt.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const o=r.idToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),r.idToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case rt.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const i=r.accessToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),r.accessToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case rt.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const a=r.refreshToken.indexOf(e);a>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),r.refreshToken.splice(a,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${n}`),Ce(nS)}this.setItem(`${va.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}getIdTokenCredential(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,rt.ID_TOKEN),null;const r=this.validateAndParseJson(n);return!r||!Wk(r)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,rt.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),r)}setIdTokenCredential(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const n=kl(e);this.setItem(n,JSON.stringify(e)),this.addTokenKey(n,rt.ID_TOKEN)}getAccessTokenCredential(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,rt.ACCESS_TOKEN),null;const r=this.validateAndParseJson(n);return!r||!Kk(r)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,rt.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),r)}setAccessTokenCredential(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const n=kl(e);this.setItem(n,JSON.stringify(e)),this.addTokenKey(n,rt.ACCESS_TOKEN)}getRefreshTokenCredential(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,rt.REFRESH_TOKEN),null;const r=this.validateAndParseJson(n);return!r||!qk(r)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,rt.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),r)}setRefreshTokenCredential(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const n=kl(e);this.setItem(n,JSON.stringify(e)),this.addTokenKey(n,rt.REFRESH_TOKEN)}getAppMetadata(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!xJ(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const n=kJ(e);this.setItem(n,JSON.stringify(e))}getServerTelemetry(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!IJ(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,n){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(n))}getAuthorityMetadata(e){const n=this.internalStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&RJ(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(n=>this.isAuthorityMetadata(n))}setWrapperMetadata(e,n){this.internalStorage.setItem(mp.WRAPPER_SKU,e),this.internalStorage.setItem(mp.WRAPPER_VER,n)}getWrapperMetadata(){const e=this.internalStorage.getItem(mp.WRAPPER_SKU)||ae.EMPTY_STRING,n=this.internalStorage.getItem(mp.WRAPPER_VER)||ae.EMPTY_STRING;return[e,n]}setAuthorityMetadata(e,n){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(n))}getActiveAccount(){const e=this.generateCacheKey(Bn.ACTIVE_ACCOUNT_FILTERS),n=this.getItem(e);if(!n){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const o=this.generateCacheKey(Bn.ACTIVE_ACCOUNT),i=this.getItem(o);if(!i)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const a=this.getAccountInfoFilteredBy({localAccountId:i});return a?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(a),a):null}const r=this.validateAndParseJson(n);return r?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:r.homeAccountId,localAccountId:r.localAccountId,tenantId:r.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const n=this.generateCacheKey(Bn.ACTIVE_ACCOUNT_FILTERS),r=this.generateCacheKey(Bn.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");const o={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(n,JSON.stringify(o)),this.browserStorage.setItem(r,e.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(n),this.browserStorage.removeItem(r)}getThrottlingCache(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!AJ(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,n){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(n))}getTemporaryCache(e,n){const r=n?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const i=this.getItemCookie(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}const o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===Cn.LocalStorage){const i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,n,r){const o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(o,n))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(e))}getKeys(){return this.browserStorage.getKeys()}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach(e=>{(e.indexOf(ae.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{(e.indexOf(ae.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(e)}),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e,n){e.addQueueMeasurement(L.ClearTokensAndKeysWithClaims,n);const r=this.getTokenKeys(),o=[];r.accessToken.forEach(i=>{const a=this.getAccessTokenCredential(i);a!=null&&a.requestedClaimsHash&&i.includes(a.requestedClaimsHash.toLowerCase())&&o.push(this.removeAccessToken(i))}),await Promise.all(o),o.length>0&&this.logger.warning(`${o.length} access tokens with claims in the cache keys have been removed from the cache.`)}setItemCookie(e,n,r){let o=`${encodeURIComponent(e)}=${encodeURIComponent(n)};path=/;SameSite=Lax;`;if(r){const i=this.getCookieExpirationTime(r);o+=`expires=${i};`}this.cacheConfig.secureCookies&&(o+="Secure;"),document.cookie=o}getItemCookie(e){const n=`${encodeURIComponent(e)}=`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){let i=r[o];for(;i.charAt(0)===" ";)i=i.substring(1);if(i.indexOf(n)===0)return decodeURIComponent(i.substring(n.length,i.length))}return ae.EMPTY_STRING}clearMsalCookies(){const e=`${ae.CACHE_PREFIX}.${this.clientId}`;document.cookie.split(";").forEach(r=>{for(;r.charAt(0)===" ";)r=r.substring(1);if(r.indexOf(e)===0){const o=r.split("=")[0];this.clearItemCookie(o)}})}clearItemCookie(e){this.setItemCookie(e,ae.EMPTY_STRING,-1)}getCookieExpirationTime(e){const n=new Date;return new Date(n.getTime()+e*this.COOKIE_LIFE_MULTIPLIER).toUTCString()}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):Uo.startsWith(e,ae.CACHE_PREFIX)||Uo.startsWith(e,Bn.ADAL_ID_TOKEN)?e:`${ae.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){const{libraryState:{id:n}}=Fo.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Dt.AUTHORITY}.${n}`)}generateNonceKey(e){const{libraryState:{id:n}}=Fo.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Dt.NONCE_IDTOKEN}.${n}`)}generateStateKey(e){const{libraryState:{id:n}}=Fo.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Dt.REQUEST_STATE}.${n}`)}getCachedAuthority(e){const n=this.generateStateKey(e),r=this.getTemporaryCache(n);if(!r)return null;const o=this.generateAuthorityKey(r);return this.getTemporaryCache(o)}updateCacheEntries(e,n,r,o,i){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const a=this.generateStateKey(e);this.setTemporaryCache(a,e,!1);const s=this.generateNonceKey(e);this.setTemporaryCache(s,n,!1);const c=this.generateAuthorityKey(e);if(this.setTemporaryCache(c,r,!1),i){const u={credential:i.homeAccountId,type:qr.HOME_ACCOUNT_ID};this.setTemporaryCache(Dt.CCS_CREDENTIAL,JSON.stringify(u),!0)}else if(o){const u={credential:o,type:qr.UPN};this.setTemporaryCache(Dt.CCS_CREDENTIAL,JSON.stringify(u),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(n=>{n.indexOf(e)!==-1&&this.removeTemporaryItem(n)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey(Dt.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Dt.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Dt.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Dt.CORRELATION_ID)),this.removeTemporaryItem(this.generateCacheKey(Dt.CCS_CREDENTIAL)),this.removeTemporaryItem(this.generateCacheKey(Dt.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const n=this.generateStateKey(e),r=this.temporaryCacheStorage.getItem(n);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r||ae.EMPTY_STRING)}this.clearMsalCookies()}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(n=>{if(n.indexOf(Dt.REQUEST_STATE)===-1)return;const r=this.temporaryCacheStorage.getItem(n);if(!r)return;const o=e5(this.cryptoImpl,r);o&&o.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const n=zE(JSON.stringify(e));this.setTemporaryCache(Dt.REQUEST_PARAMS,n,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const n=this.getTemporaryCache(Dt.REQUEST_PARAMS,!0);if(!n)throw Ge(kD);let r;try{r=JSON.parse(hi(n))}catch(o){throw this.logger.errorPii(`Attempted to parse: ${n}`),this.logger.error(`Parsing cached token request threw with error: ${o}`),Ge(xD)}if(this.removeTemporaryItem(this.generateCacheKey(Dt.REQUEST_PARAMS)),!r.authority){const o=this.generateAuthorityKey(e),i=this.getTemporaryCache(o);if(!i)throw Ge(FE);r.authority=i}return r}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(Dt.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const n=this.validateAndParseJson(e);return n||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){const n=this.getInteractionInProgress();return e?n===this.clientId:!!n}getInteractionInProgress(){const e=`${ae.CACHE_PREFIX}.${Dt.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){const n=`${ae.CACHE_PREFIX}.${Dt.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw Ge(_D);this.setTemporaryCache(n,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(n)}getLegacyLoginHint(){const e=this.getTemporaryCache(Bn.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(Bn.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const n=this.getTemporaryCache(Bn.ID_TOKEN,!0);n&&(this.browserStorage.removeItem(this.generateCacheKey(Bn.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const r=n||e;if(r){const o=Lc(r,hi);if(o.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),o.preferred_username;if(o.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),o.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,n){const r=kl(n);if(e!==r){const o=this.getItem(e);if(o)return this.browserStorage.removeItem(e),this.setItem(r,o),this.logger.verbose(`Updated an outdated ${n.credentialType} cache key`),r;this.logger.error(`Attempted to update an outdated ${n.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}async hydrateCache(e,n){var s,c,u;const r=Nv((s=e.account)==null?void 0:s.homeAccountId,(c=e.account)==null?void 0:c.environment,e.idToken,this.clientId,e.tenantId);let o;n.claims&&(o=await this.cryptoImpl.hashString(n.claims));const i=Mv((u=e.account)==null?void 0:u.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,hi,void 0,e.tokenType,void 0,n.sshKid,n.claims,o),a={idToken:r,accessToken:i};return this.saveCacheRecord(a)}async saveCacheRecord(e,n,r){try{await super.saveCacheRecord(e,n,r)}catch(o){if(o instanceof Ws&&this.performanceClient&&r)try{const i=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:i.refreshToken.length,cacheIdCount:i.idToken.length,cacheAtCount:i.accessToken.length},r)}catch{}throw o}}}const HZ=(t,e)=>{const n={cacheLocation:Cn.MemoryStorage,temporaryCacheLocation:Cn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new gS(t,n,eg,e)};/*! @azure/msal-browser v3.26.1 2024-10-08 */function VZ(t,e,n,r){return t.verbose("getAllAccounts called"),n?e.getAllAccounts(r):[]}function zZ(t,e,n){if(e.trace("getAccount called"),Object.keys(t).length===0)return e.warning("getAccount: No accountFilter provided"),null;const r=n.getAccountInfoFilteredBy(t);return r?(e.verbose("getAccount: Account matching provided filter found, returning"),r):(e.verbose("getAccount: No matching account found, returning null"),null)}function $Z(t,e,n){if(e.trace("getAccountByUsername called"),!t)return e.warning("getAccountByUsername: No username provided"),null;const r=n.getAccountInfoFilteredBy({username:t});return r?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${t}`),r):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function GZ(t,e,n){if(e.trace("getAccountByHomeId called"),!t)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const r=n.getAccountInfoFilteredBy({homeAccountId:t});return r?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${t}`),r):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function KZ(t,e,n){if(e.trace("getAccountByLocalId called"),!t)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const r=n.getAccountInfoFilteredBy({localAccountId:t});return r?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${t}`),r):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function WZ(t,e){e.setActiveAccount(t)}function qZ(t){return t.getActiveAccount()}/*! @azure/msal-browser v3.26.1 2024-10-08 */const Le={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};/*! @azure/msal-browser v3.26.1 2024-10-08 */class YZ{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Zi({})}addEventCallback(e,n,r){if(typeof window<"u"){const o=r||dS();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,n||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,n,r,o){if(typeof window<"u"){const i={eventType:e,interactionType:n||null,payload:r||null,error:o||null,timestamp:Date.now()};this.eventCallbacks.forEach(([a,s],c)=>{(s.length===0||s.includes(e))&&(this.logger.verbose(`Emitting event to callback ${c}: ${e}`),a.apply(null,[i]))})}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class t5{constructor(e,n,r,o,i,a,s,c,u){this.config=e,this.browserStorage=n,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=a,this.nativeMessageHandler=c,this.correlationId=u||_i(),this.logger=o.clone(Gr.MSAL_SKU,_u,this.correlationId),this.performanceClient=s}async clearCacheOnLogout(e){if(e){Dn.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(Dn.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const n=e||this.config.auth.redirectUri||zi();return St.getAbsoluteUrl(n,zi())}initializeServerTelemetryManager(e,n){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:n||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Yf(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:n}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(L.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},i=e.requestAuthority||this.config.auth.authority,a=r!=null&&r.length?r==="true":this.config.auth.instanceAware,s=n&&a?this.config.auth.authority.replace(St.getDomainFromUrl(i),n.environment):i,c=nr.generateAuthority(s,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),u=await Re(sD,L.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(c,this.config.system.networkClient,this.browserStorage,o,this.logger,this.correlationId,this.performanceClient);if(n&&!u.isAlias(n.environment))throw Kt(ZL);return u}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const QZ=32;async function JZ(t,e,n){t.addQueueMeasurement(L.GeneratePkceCodes,n);const r=Dc(XZ,L.GenerateCodeVerifier,e,t,n)(t,e,n),o=await Re(ZZ,L.GenerateCodeChallengeFromVerifier,e,t,n)(r,t,e,n);return{verifier:r,challenge:o}}function XZ(t,e,n){try{const r=new Uint8Array(QZ);return Dc(_Z,L.GetRandomValues,e,t,n)(r),Bv(r)}catch{throw Ge(jE)}}async function ZZ(t,e,n,r){e.addQueueMeasurement(L.GenerateCodeChallengeFromVerifier,r);try{const o=await Re(KD,L.Sha256Digest,n,e,r)(t,e,r);return Bv(new Uint8Array(o))}catch{throw Ge(jE)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */async function YE(t,e,n,r){n.addQueueMeasurement(L.InitializeBaseRequest,t.correlationId);const o=t.authority||e.auth.authority,i=[...t&&t.scopes||[]],a={...t,correlationId:t.correlationId,authority:o,scopes:i};if(!a.authenticationScheme)a.authenticationScheme=Bt.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(a.authenticationScheme===Bt.SSH){if(!t.sshJwk)throw Kt(Lv);if(!t.sshKid)throw Kt(QL)}r.verbose(`Authentication Scheme set to "${a.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&t.claims&&!Uo.isEmptyObj(t.claims)&&(a.requestedClaimsHash=await WD(t.claims)),a}async function eee(t,e,n,r,o){r.addQueueMeasurement(L.InitializeSilentRequest,t.correlationId);const i=await Re(YE,L.InitializeBaseRequest,o,r,t.correlationId)(t,n,r,o);return{...t,...i,account:e,forceRefresh:t.forceRefresh||!1}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Xu extends t5{async initializeAuthorizationCodeRequest(e){this.performanceClient.addQueueMeasurement(L.StandardInteractionClientInitializeAuthorizationCodeRequest,this.correlationId);const n=await Re(JZ,L.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),r={...e,redirectUri:e.redirectUri,code:ae.EMPTY_STRING,codeVerifier:n.verifier};return e.codeChallenge=n.challenge,e.codeChallengeMethod=ae.S256_CODE_CHALLENGE_METHOD,r}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const n={correlationId:this.correlationId||_i(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),n.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",n.correlationId),n.postLogoutRedirectUri=St.getAbsoluteUrl(e.postLogoutRedirectUri,zi())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",n.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",n.correlationId),n.postLogoutRedirectUri=St.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,zi())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",n.correlationId),n.postLogoutRedirectUri=St.getAbsoluteUrl(zi(),zi())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",n.correlationId),n}getLogoutHintFromIdTokenClaims(e){const n=e.idTokenClaims;if(n){if(n.login_hint)return n.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(L.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const n=await Re(this.getClientConfiguration.bind(this),L.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new uD(n,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:n,requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:a}=e;this.performanceClient.addQueueMeasurement(L.StandardInteractionClientGetClientConfiguration,this.correlationId);const s=await Re(this.getDiscoveredAuthority.bind(this),L.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:a}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:s,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:n,libraryInfo:{sku:Gr.MSAL_SKU,version:_u,cpu:ae.EMPTY_STRING,os:ae.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,n){this.performanceClient.addQueueMeasurement(L.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(e.redirectUri),o={interactionType:n},i=Fo.setRequestState(this.browserCrypto,e&&e.state||ae.EMPTY_STRING,o),s={...await Re(YE,L.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:i,nonce:e.nonce||_i(),responseMode:this.config.auth.OIDCOptions.serverResponseType},c=e.account||this.browserStorage.getActiveAccount();if(c&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${c.homeAccountId}`,this.correlationId),s.account=c),!s.loginHint&&!c){const u=this.browserStorage.getLegacyLoginHint();u&&(s.loginHint=u)}return s}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const tee="ContentError",n5="user_switch";/*! @azure/msal-browser v3.26.1 2024-10-08 */const nee="USER_INTERACTION_REQUIRED",ree="USER_CANCEL",oee="NO_NETWORK",iee="PERSISTENT_ERROR",aee="DISABLED",see="ACCOUNT_UNAVAILABLE";/*! @azure/msal-browser v3.26.1 2024-10-08 */const cee=-2147186943,lee={[n5]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class ii extends Yt{constructor(e,n,r){super(e,n),Object.setPrototypeOf(this,ii.prototype),this.name="NativeAuthError",this.ext=r}}function yl(t){if(t.ext&&t.ext.status&&(t.ext.status===iee||t.ext.status===aee)||t.ext&&t.ext.error&&t.ext.error===cee)return!0;switch(t.errorCode){case tee:return!0;default:return!1}}function vS(t,e,n){if(n&&n.status)switch(n.status){case see:return aS(cD);case nee:return new Zr(t,e);case ree:return Ge(fc);case oee:return Ge(ag)}return new ii(t,lee[t]||e,n)}/*! @azure/msal-browser v3.26.1 2024-10-08 */class r5 extends Xu{async acquireToken(e){this.performanceClient.addQueueMeasurement(L.SilentCacheClientAcquireToken,e.correlationId);const n=this.initializeServerTelemetryManager(an.acquireTokenSilent_silentFlow),r=await Re(this.getClientConfiguration.bind(this),L.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),o=new WX(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const a=(await Re(o.acquireCachedToken.bind(o),L.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),a}catch(i){throw i instanceof Lh&&i.errorCode===HE&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),i}}logout(e){this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(n==null?void 0:n.account)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const xb={BROKER_CLIENT_ID:"brk_client_id",BROKER_REDIRECT_URI:"brk_redirect_uri"};class $l extends t5{constructor(e,n,r,o,i,a,s,c,u,d,h,p){var v;super(e,n,r,o,i,a,c,u,p),this.apiId=s,this.accountId=d,this.nativeMessageHandler=u,this.nativeStorageManager=h,this.silentCacheClient=new r5(e,this.nativeStorageManager,r,o,i,a,c,u,p),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);const g=this.nativeMessageHandler.getExtensionId()===Rl.PREFERRED_EXTENSION_ID?"chrome":(v=this.nativeMessageHandler.getExtensionId())!=null&&v.length?"unknown":void 0;this.skus=Yf.makeExtraSkuString({libraryName:Gr.MSAL_SKU,libraryVersion:_u,extensionName:g,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[RX]:this.skus}}async acquireToken(e){this.performanceClient.addQueueMeasurement(L.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const n=this.performanceClient.startMeasurement(L.NativeInteractionClientAcquireToken,e.correlationId),r=bi();try{const o=await this.initializeNativeRequest(e);try{const u=await this.acquireTokensFromCache(this.accountId,o);return n.end({success:!0,isNativeBroker:!1,fromCache:!0}),u}catch{this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const{...i}=o,a={method:js.GetToken,request:i},s=await this.nativeMessageHandler.sendMessage(a),c=this.validateNativeResponse(s);return await this.handleNativeResponse(c,o,r).then(u=>(n.end({success:!0,isNativeBroker:!0,requestId:u.requestId}),this.serverTelemetryManager.clearNativeBrokerErrorCode(),u)).catch(u=>{throw n.end({success:!1,errorCode:u.errorCode,subErrorCode:u.subError,isNativeBroker:!0}),u})}catch(o){throw o instanceof ii&&this.serverTelemetryManager.setNativeBrokerErrorCode(o.errorCode),o}}createSilentCacheRequest(e,n){return{authority:e.authority,correlationId:this.correlationId,scopes:Sn.fromString(e.scope).asArray(),account:n,forceRefresh:!1}}async acquireTokensFromCache(e,n){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),Ce(eS);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!r)throw Ce(eS);try{const o=this.createSilentCacheRequest(n,r),i=await this.silentCacheClient.acquireToken(o),a={...r,idTokenClaims:i==null?void 0:i.idTokenClaims,idToken:i==null?void 0:i.idToken};return{...i,account:a}}catch(o){throw o}}async acquireTokenRedirect(e,n){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=e;delete r.onRedirectNavigate;const o=await this.initializeNativeRequest(r),i={method:js.GetToken,request:o};try{const c=await this.nativeMessageHandler.sendMessage(i);this.validateNativeResponse(c)}catch(c){if(c instanceof ii&&(this.serverTelemetryManager.setNativeBrokerErrorCode(c.errorCode),yl(c)))throw c}this.browserStorage.setTemporaryCache(Dt.NATIVE_REQUEST,JSON.stringify(o),!0);const a={apiId:an.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},s=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);n.end({success:!0}),await this.navigationClient.navigateExternal(s,a)}async handleRedirectPromise(e,n){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&n&&(e==null||e.addFields({errorCode:"no_cached_request"},n)),null;const{prompt:o,...i}=r;o&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Dt.NATIVE_REQUEST));const a={method:js.GetToken,request:i},s=bi();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const c=await this.nativeMessageHandler.sendMessage(a);this.validateNativeResponse(c);const u=this.handleNativeResponse(c,i,s);this.browserStorage.setInteractionInProgress(!1);const d=await u;return this.serverTelemetryManager.clearNativeBrokerErrorCode(),d}catch(c){throw this.browserStorage.setInteractionInProgress(!1),c}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,n,r){var d;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const o=Lc(e.id_token,hi),i=this.createHomeAccountIdentifier(e,o),a=(d=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:n.accountId}))==null?void 0:d.homeAccountId;if(i!==a&&e.account.id!==n.accountId)throw vS(n5);const s=await this.getDiscoveredAuthority({requestAuthority:n.authority}),c=ME(this.browserStorage,s,i,hi,o,e.client_info,void 0,o.tid,void 0,e.account.id,this.logger),u=await this.generateAuthenticationResult(e,n,o,c,s.canonicalAuthority,r);return this.cacheAccount(c),this.cacheNativeTokens(e,n,i,o,e.access_token,u.tenantId,r),u}createHomeAccountIdentifier(e,n){return Dn.generateHomeAccountId(e.client_info||ae.EMPTY_STRING,Lo.Default,this.logger,this.browserCrypto,n)}generateScopes(e,n){return e.scope?Sn.fromString(e.scope):Sn.fromString(n.scope)}async generatePopAccessToken(e,n){if(n.tokenType===Bt.POP&&n.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new bu(this.browserCrypto),o={resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,shrNonce:n.shrNonce};if(!n.keyId)throw Ce(CE);return r.signPopToken(e.access_token,n.keyId,o)}else return e.access_token}async generateAuthenticationResult(e,n,r,o,i,a){const s=this.addTelemetryFromNativeResponse(e),c=e.scope?Sn.fromString(e.scope):Sn.fromString(n.scope),u=e.account.properties||{},d=u.UID||r.oid||r.sub||ae.EMPTY_STRING,h=u.TenantId||r.tid||ae.EMPTY_STRING,p=xE(o.getAccountInfo(),void 0,r,e.id_token);p.nativeAccountId!==e.account.id&&(p.nativeAccountId=e.account.id);const g=await this.generatePopAccessToken(e,n),v=n.tokenType===Bt.POP?Bt.POP:Bt.BEARER;return{authority:i,uniqueId:d,tenantId:h,scopes:c.asArray(),account:p,idToken:e.id_token,idTokenClaims:r,accessToken:g,fromCache:s?this.isResponseFromCache(s):!1,expiresOn:new Date(Number(a+e.expires_in)*1e3),tokenType:v,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}cacheAccount(e){this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch(n=>{this.logger.error(`Error occurred while removing account context from browser storage. ${n}`)})}cacheNativeTokens(e,n,r,o,i,a,s){const c=Nv(r,n.authority,e.id_token||"",n.clientId,o.tid||""),u=n.tokenType===Bt.POP?ae.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,d=s+u,h=this.generateScopes(e,n),p=Mv(r,n.authority,i,n.clientId,o.tid||a,h.printScopes(),d,0,hi,void 0,n.tokenType,void 0,n.keyId),g={idToken:c,accessToken:p};this.nativeStorageManager.saveCacheRecord(g,n.storeInCache)}addTelemetryFromNativeResponse(e){const n=this.getMATSFromResponse(e);return n?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:n.broker_version,matsAccountJoinOnStart:n.account_join_on_start,matsAccountJoinOnEnd:n.account_join_on_end,matsDeviceJoin:n.device_join,matsPromptBehavior:n.prompt_behavior,matsApiErrorCode:n.api_error_code,matsUiVisible:n.ui_visible,matsSilentCode:n.silent_code,matsSilentBiSubCode:n.silent_bi_sub_code,matsSilentMessage:n.silent_message,matsSilentStatus:n.silent_status,matsHttpStatus:n.http_status,matsHttpEventCount:n.http_event_count},this.correlationId),n):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw bL(mE,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const n=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:n,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new St(n);r.validateAsUri();const{scopes:o,...i}=e,a=new Sn(o||[]);a.appendScopes(Ju);const s=()=>{switch(this.apiId){case an.ssoSilent:case an.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),$n.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case $n.NONE:case $n.CONSENT:case $n.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),Ge(BD)}},c={...i,accountId:this.accountId,clientId:this.config.auth.clientId,authority:r.urlString,scope:a.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:s(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(c.signPopToken&&e.popKid)throw Ge(VD);if(this.handleExtraBrokerParams(c),c.extraParameters=c.extraParameters||{},c.extraParameters.telemetry=Rl.MATS_TELEMETRY,e.authenticationScheme===Bt.POP){const u={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},d=new bu(this.browserCrypto);let h;if(c.keyId)h=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:c.keyId})),c.signPopToken=!1;else{const p=await Re(d.generateCnf.bind(d),L.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(u,this.logger);h=p.reqCnfString,c.keyId=p.kid,c.signPopToken=!0}c.reqCnf=h}return this.addRequestSKUs(c),c}handleExtraBrokerParams(e){if(e.extraParameters&&e.extraParameters.hasOwnProperty(xb.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(xb.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(yu)){const n=e.extraParameters[yu],r=e.redirectUri,o=e.extraParameters[xb.BROKER_REDIRECT_URI];e.extraParameters={child_client_id:n,child_redirect_uri:r},e.redirectUri=o}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class di{constructor(e,n,r,o){this.logger=e,this.handshakeTimeoutMs=n,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(L.NativeMessageHandlerHandshake)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const n={channel:Rl.CHANNEL_ID,extensionId:this.extensionId,responseId:_i(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(n)}`),this.messageChannel.port1.postMessage(n),new Promise((r,o)=>{this.resolvers.set(n.responseId,{resolve:r,reject:o})})}static async createProvider(e,n,r){e.trace("NativeMessageHandler - createProvider called.");try{const o=new di(e,n,r,Rl.PREFERRED_EXTENSION_ID);return await o.sendHandshakeRequest(),o}catch{const i=new di(e,n,r);return await i.sendHandshakeRequest(),i}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:Rl.CHANNEL_ID,extensionId:this.extensionId,responseId:_i(),body:{method:js.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=n=>{this.onChannelMessage(n)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((n,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:n,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(Ge(jD)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const n=e.data;if(!(!n.channel||n.channel!==Rl.CHANNEL_ID)&&!(n.extensionId&&n.extensionId!==this.extensionId)&&n.body.method===js.HandshakeRequest){const r=this.handshakeResolvers.get(n.responseId);if(!r){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${n.responseId}`);return}this.logger.verbose(n.extensionId?`Extension with id: ${n.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(Ge(UD))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const n=e.data,r=this.resolvers.get(n.responseId),o=this.handshakeResolvers.get(n.responseId);try{const i=n.body.method;if(i===js.Response){if(!r)return;const a=n.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(a)}`),a.status!=="Success")r.reject(vS(a.code,a.description,a.ext));else if(a.result)a.result.code&&a.result.description?r.reject(vS(a.result.code,a.result.description,a.result.ext)):r.resolve(a.result);else throw bL(mE,"Event does not contain result.");this.resolvers.delete(n.responseId)}else if(i===js.HandshakeResponse){if(!o){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${n.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=n.extensionId,this.extensionVersion=n.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(n.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,n,r,o){if(n.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return n.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!r)return n.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(o)switch(o){case Bt.BEARER:case Bt.POP:return n.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return n.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class QE{constructor(e,n,r,o,i){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}async handleCodeResponse(e,n){this.performanceClient.addQueueMeasurement(L.HandleCodeResponse,n.correlationId);let r;try{r=this.authModule.handleFragmentResponse(e,n.state)}catch(o){throw o instanceof ea&&o.subError===fc?Ge(fc):o}return Re(this.handleCodeResponseFromServer.bind(this),L.HandleCodeResponseFromServer,this.logger,this.performanceClient,n.correlationId)(r,n)}async handleCodeResponseFromServer(e,n,r=!0){if(this.performanceClient.addQueueMeasurement(L.HandleCodeResponseFromServer,n.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await Re(this.authModule.updateAuthority.bind(this.authModule),L.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,n.correlationId)(e.cloud_instance_host_name,n.correlationId),r&&(e.nonce=n.nonce||void 0),e.state=n.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const i=this.createCcsCredentials(n);i&&(this.authCodeRequest.ccsCredential=i)}return await Re(this.authModule.acquireToken.bind(this.authModule),L.AuthClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:qr.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:qr.UPN}:null}}/*! @azure/msal-browser v3.26.1 2024-10-08 */function o5(t,e,n){const r=rg(t);if(!r)throw tD(t)?(n.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),n.errorPii(`The ${e} detected is: ${t}`),Ge(vD)):(n.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),Ge(gD));return r}function uee(t,e,n){if(!t.state)throw Ge(UE);const r=e5(e,t.state);if(!r)throw Ge(yD);if(r.interactionType!==n)throw Ge(bD)}/*! @azure/msal-browser v3.26.1 2024-10-08 */class dee extends Xu{constructor(e,n,r,o,i,a,s,c,u,d){super(e,n,r,o,i,a,s,u,d),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c}acquireToken(e){try{const r={popupName:this.generatePopupName(e.scopes||Ju,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(e,r))}catch(n){return Promise.reject(n)}}logout(e){try{this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:(e==null?void 0:e.popupWindowAttributes)||{},popupWindowParent:(e==null?void 0:e.popupWindowParent)??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,o,i))}catch(n){return Promise.reject(n)}}async acquireTokenPopupAsync(e,n){var i;this.logger.verbose("acquireTokenPopupAsync called");const r=this.initializeServerTelemetryManager(an.acquireTokenPopup),o=await Re(this.initializeAuthorizationRequest.bind(this),L.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,Xe.Popup);ZD(o.authority);try{const a=await Re(this.initializeAuthorizationCodeRequest.bind(this),L.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(o),s=await Re(this.createAuthCodeClient.bind(this),L.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),c=di.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);let u;c&&(u=this.performanceClient.startMeasurement(L.FetchAccountIdWithNativeBroker,e.correlationId));const d=await s.getAuthCodeUrl({...o,nativeBroker:c}),h=new QE(s,this.browserStorage,a,this.logger,this.performanceClient),p=this.initiateAuthRequest(d,n);this.eventHandler.emitEvent(Le.POPUP_OPENED,Xe.Popup,{popupWindow:p},null);const g=await this.monitorPopupForHash(p,n.popupWindowParent),v=Dc(o5,L.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(g,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(oi.removeThrottle(this.browserStorage,this.config.auth.clientId,a),v.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),u&&u.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw Ge(Mh);const _=new $l(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,an.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,v.accountId,this.nativeStorage,o.correlationId),{userRequestState:b}=Fo.parseRequestState(this.browserCrypto,o.state);return await _.acquireToken({...o,state:b,prompt:void 0})}return await h.handleCodeResponse(v,o)}catch(a){throw(i=n.popup)==null||i.close(),a instanceof Yt&&(a.setCorrelationId(this.correlationId),r.cacheFailedRequest(a)),a}}async logoutPopupAsync(e,n,r,o){var a,s,c,u;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Le.LOGOUT_START,Xe.Popup,e);const i=this.initializeServerTelemetryManager(an.logoutPopup);try{await this.clearCacheOnLogout(e.account);const d=await Re(this.createAuthCodeClient.bind(this),L.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:r,account:e.account||void 0});try{d.authority.endSessionEndpoint}catch{if((a=e.account)!=null&&a.homeAccountId&&e.postLogoutRedirectUri&&d.authority.protocolMode===$i.OIDC){if(this.browserStorage.removeAccount((s=e.account)==null?void 0:s.homeAccountId),this.eventHandler.emitEvent(Le.LOGOUT_SUCCESS,Xe.Popup,e),o){const g={apiId:an.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},v=St.getAbsoluteUrl(o,zi());await this.navigationClient.navigateInternal(v,g)}(c=n.popup)==null||c.close();return}}const h=d.getLogoutUri(e);this.eventHandler.emitEvent(Le.LOGOUT_SUCCESS,Xe.Popup,e);const p=this.openPopup(h,n);if(this.eventHandler.emitEvent(Le.POPUP_OPENED,Xe.Popup,{popupWindow:p},null),await this.monitorPopupForHash(p,n.popupWindowParent).catch(()=>{}),o){const g={apiId:an.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},v=St.getAbsoluteUrl(o,zi());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${v}`),await this.navigationClient.navigateInternal(v,g)}else this.logger.verbose("No main window navigation requested")}catch(d){throw(u=n.popup)==null||u.close(),d instanceof Yt&&(d.setCorrelationId(this.correlationId),i.cacheFailedRequest(d)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(Le.LOGOUT_FAILURE,Xe.Popup,null,d),this.eventHandler.emitEvent(Le.LOGOUT_END,Xe.Popup),d}this.eventHandler.emitEvent(Le.LOGOUT_END,Xe.Popup)}initiateAuthRequest(e,n){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,n);throw this.logger.error("Navigate url is empty"),Ge(Uv)}monitorPopupForHash(e,n){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const i=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),o(Ge(fc));return}let a="";try{a=e.location.href}catch{}if(!a||a==="about:blank")return;clearInterval(i);let s="";const c=this.config.auth.OIDCOptions.serverResponseType;e&&(c===Nh.QUERY?s=e.location.search:s=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(s)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,n)})}openPopup(e,n){try{let r;if(n.popup?(r=n.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof n.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,n)),!r)throw Ge(SD);return r.focus&&r.focus(),this.currentWindow=r,n.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),this.browserStorage.setInteractionInProgress(!1),Ge(CD)}}openSizedPopup(e,{popupName:n,popupWindowAttributes:r,popupWindowParent:o}){var g,v,y,_;const i=o.screenLeft?o.screenLeft:o.screenX,a=o.screenTop?o.screenTop:o.screenY,s=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let u=(g=r.popupSize)==null?void 0:g.width,d=(v=r.popupSize)==null?void 0:v.height,h=(y=r.popupPosition)==null?void 0:y.top,p=(_=r.popupPosition)==null?void 0:_.left;return(!u||u<0||u>s)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),u=Gr.POPUP_WIDTH),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),d=Gr.POPUP_HEIGHT),(!h||h<0||h>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),h=Math.max(0,c/2-Gr.POPUP_HEIGHT/2+a)),(!p||p<0||p>s)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),p=Math.max(0,s/2-Gr.POPUP_WIDTH/2+i)),o.open(e,n,`width=${u}, height=${d}, top=${h}, left=${p}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(Xe.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,n){e.close(),n.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,n){return`${Gr.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${n}.${this.correlationId}`}generateLogoutPopupName(e){const n=e.account&&e.account.homeAccountId;return`${Gr.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n}.${this.correlationId}`}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class h1{constructor(e,n,r,o,i){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}async initiateAuthRequest(e,n){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){n.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(Dt.ORIGIN_URI,n.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(Dt.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:an.acquireTokenRedirect,timeout:n.redirectTimeout,noHistory:!1};if(typeof n.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),n.onRedirectNavigate(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await n.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await n.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Ge(Uv)}async handleCodeResponse(e,n){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);const r=this.browserStorage.generateStateKey(n),o=this.browserStorage.getTemporaryCache(r);if(!o)throw Ce(Zm,"Cached State");let i;try{i=this.authModule.handleFragmentResponse(e,o)}catch(u){throw u instanceof ea&&u.subError===fc?Ge(fc):u}const a=this.browserStorage.generateNonceKey(o),s=this.browserStorage.getTemporaryCache(a);if(this.authCodeRequest.code=i.code,i.cloud_instance_host_name&&await Re(this.authModule.updateAuthority.bind(this.authModule),L.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(i.cloud_instance_host_name,this.authCodeRequest.correlationId),i.nonce=s||void 0,i.state=o,i.client_info)this.authCodeRequest.clientInfo=i.client_info;else{const u=this.checkCcsCredentials();u&&(this.authCodeRequest.ccsCredential=u)}const c=await this.authModule.acquireToken(this.authCodeRequest,i);return this.browserStorage.cleanRequestByState(n),c}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache(Dt.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}}/*! @azure/msal-browser v3.26.1 2024-10-08 */function fee(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const t=window.performance.getEntriesByType("navigation"),e=t.length?t[0]:void 0;return e==null?void 0:e.type}class hee extends Xu{constructor(e,n,r,o,i,a,s,c,u,d){super(e,n,r,o,i,a,s,u,d),this.nativeStorage=c}async acquireToken(e){const n=await Re(this.initializeAuthorizationRequest.bind(this),L.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,Xe.Redirect);this.browserStorage.updateCacheEntries(n.state,n.nonce,n.authority,n.loginHint||"",n.account||null);const r=this.initializeServerTelemetryManager(an.acquireTokenRedirect),o=i=>{i.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(n.state),this.eventHandler.emitEvent(Le.RESTORE_FROM_BFCACHE,Xe.Redirect))};try{const i=await Re(this.initializeAuthorizationCodeRequest.bind(this),L.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(n),a=await Re(this.createAuthCodeClient.bind(this),L.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),s=new h1(a,this.browserStorage,i,this.logger,this.performanceClient),c=await a.getAuthCodeUrl({...n,nativeBroker:di.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)}),u=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${u}`),window.addEventListener("pageshow",o),await s.initiateAuthRequest(c,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:u,onRedirectNavigate:e.onRedirectNavigate||this.config.auth.onRedirectNavigate})}catch(i){throw i instanceof Yt&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),window.removeEventListener("pageshow",o),this.browserStorage.cleanRequestByState(n.state),i}}async handleRedirectPromise(e="",n){const r=this.initializeServerTelemetryManager(an.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[o,i]=this.getRedirectResponse(e||"");if(!o)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(Xe.Redirect),fee()!=="back_forward"?n.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const a=this.browserStorage.getTemporaryCache(Dt.ORIGIN_URI,!0)||ae.EMPTY_STRING,s=St.removeHashFromUrl(a),c=St.removeHashFromUrl(window.location.href);if(s===c&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),a.indexOf("#")>-1&&AZ(a),await this.handleResponse(o,r);if(this.config.auth.navigateToLoginRequestUrl){if(!KE()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Dt.URL_HASH,i,!0);const u={apiId:an.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let d=!0;if(!a||a==="null"){const h=xZ();this.browserStorage.setTemporaryCache(Dt.ORIGIN_URI,h,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),d=await this.navigationClient.navigateInternal(h,u)}else this.logger.verbose(`Navigating to loginRequestUrl: ${a}`),d=await this.navigationClient.navigateInternal(a,u);if(!d)return await this.handleResponse(o,r)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(o,r);return null}catch(o){throw o instanceof Yt&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),this.browserStorage.cleanRequestByInteractionType(Xe.Redirect),o}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let n=e;n||(this.config.auth.OIDCOptions.serverResponseType===Nh.QUERY?n=window.location.search:n=window.location.hash);let r=rg(n);if(r){try{uee(r,this.browserCrypto,Xe.Redirect)}catch(i){return i instanceof Yt&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return IZ(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,n]}const o=this.browserStorage.getTemporaryCache(Dt.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Dt.URL_HASH)),o&&(r=rg(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}async handleResponse(e,n){const r=e.state;if(!r)throw Ge(UE);const o=this.browserStorage.getCachedRequest(r);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw Ge(Mh);const c=new $l(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,an.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,o.correlationId),{userRequestState:u}=Fo.parseRequestState(this.browserCrypto,r);return c.acquireToken({...o,state:u,prompt:void 0}).finally(()=>{this.browserStorage.cleanRequestByState(r)})}const i=this.browserStorage.getCachedAuthority(r);if(!i)throw Ge(FE);const a=await Re(this.createAuthCodeClient.bind(this),L.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:i});return oi.removeThrottle(this.browserStorage,this.config.auth.clientId,o),new h1(a,this.browserStorage,o,this.logger,this.performanceClient).handleCodeResponse(e,r)}async logout(e){var o,i;this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(an.logout);try{this.eventHandler.emitEvent(Le.LOGOUT_START,Xe.Redirect,e),await this.clearCacheOnLogout(n.account);const a={apiId:an.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},s=await Re(this.createAuthCodeClient.bind(this),L.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e==null?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(s.authority.protocolMode===$i.OIDC)try{s.authority.endSessionEndpoint}catch{if((o=n.account)!=null&&o.homeAccountId){this.browserStorage.removeAccount((i=n.account)==null?void 0:i.homeAccountId),this.eventHandler.emitEvent(Le.LOGOUT_SUCCESS,Xe.Redirect,n);return}}const c=s.getLogoutUri(n);if(this.eventHandler.emitEvent(Le.LOGOUT_SUCCESS,Xe.Redirect,n),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(c)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(c,a);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(c,a);return}}catch(a){throw a instanceof Yt&&(a.setCorrelationId(this.correlationId),r.cacheFailedRequest(a)),this.eventHandler.emitEvent(Le.LOGOUT_FAILURE,Xe.Redirect,null,a),this.eventHandler.emitEvent(Le.LOGOUT_END,Xe.Redirect),a}this.eventHandler.emitEvent(Le.LOGOUT_END,Xe.Redirect)}getRedirectStartPage(e){const n=e||window.location.href;return St.getAbsoluteUrl(n,zi())}}/*! @azure/msal-browser v3.26.1 2024-10-08 */async function pee(t,e,n,r,o){if(e.addQueueMeasurement(L.SilentHandlerInitiateAuthRequest,r),!t)throw n.info("Navigate url is empty"),Ge(Uv);return o?Re(gee,L.SilentHandlerLoadFrame,n,e,r)(t,o,e,r):Dc(vee,L.SilentHandlerLoadFrameSync,n,e,r)(t)}async function mee(t,e,n,r,o,i,a){return r.addQueueMeasurement(L.SilentHandlerMonitorIframeForHash,i),new Promise((s,c)=>{e<fS&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${fS}ms). This may result in timeouts.`);const u=window.setTimeout(()=>{window.clearInterval(d),c(Ge(wD))},e),d=window.setInterval(()=>{let h="";const p=t.contentWindow;try{h=p?p.location.href:""}catch{}if(!h||h==="about:blank")return;let g="";p&&(a===Nh.QUERY?g=p.location.search:g=p.location.hash),window.clearTimeout(u),window.clearInterval(d),s(g)},n)}).finally(()=>{Dc(yee,L.RemoveHiddenIframe,o,r,i)(t)})}function gee(t,e,n,r){return n.addQueueMeasurement(L.SilentHandlerLoadFrame,r),new Promise((o,i)=>{const a=i5();window.setTimeout(()=>{if(!a){i("Unable to load iframe");return}a.src=t,o(a)},e)})}function vee(t){const e=i5();return e.src=t,e}function i5(){const t=document.createElement("iframe");return t.className="msalSilentIframe",t.style.visibility="hidden",t.style.position="absolute",t.style.width=t.style.height="0",t.style.border="0",t.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(t),t}function yee(t){document.body===t.parentNode&&document.body.removeChild(t)}/*! @azure/msal-browser v3.26.1 2024-10-08 */class bee extends Xu{constructor(e,n,r,o,i,a,s,c,u,d,h){super(e,n,r,o,i,a,c,d,h),this.apiId=s,this.nativeStorage=u}async acquireToken(e){this.performanceClient.addQueueMeasurement(L.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const n={...e};n.prompt?n.prompt!==$n.NONE&&n.prompt!==$n.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${n.prompt} with ${$n.NONE}`),n.prompt=$n.NONE):n.prompt=$n.NONE;const r=await Re(this.initializeAuthorizationRequest.bind(this),L.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(n,Xe.Silent);ZD(r.authority);const o=this.initializeServerTelemetryManager(this.apiId);let i;try{return i=await Re(this.createAuthCodeClient.bind(this),L.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),await Re(this.silentTokenHelper.bind(this),L.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(i,r)}catch(a){if(a instanceof Yt&&(a.setCorrelationId(this.correlationId),o.cacheFailedRequest(a)),!i||!(a instanceof Yt)||a.errorCode!==Gr.INVALID_GRANT_ERROR)throw a;this.performanceClient.addFields({retryError:a.errorCode},this.correlationId);const s=await Re(this.initializeAuthorizationRequest.bind(this),L.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(n,Xe.Silent);return await Re(this.silentTokenHelper.bind(this),L.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(i,s)}}logout(){return Promise.reject(Ge(Fv))}async silentTokenHelper(e,n){const r=n.correlationId;this.performanceClient.addQueueMeasurement(L.SilentIframeClientTokenHelper,r);const o=await Re(this.initializeAuthorizationCodeRequest.bind(this),L.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,r)(n),i=await Re(e.getAuthCodeUrl.bind(e),L.GetAuthCodeUrl,this.logger,this.performanceClient,r)({...n,nativeBroker:di.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,n.authenticationScheme)}),a=new QE(e,this.browserStorage,o,this.logger,this.performanceClient),s=await Re(pee,L.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(i,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait),c=this.config.auth.OIDCOptions.serverResponseType,u=await Re(mee,L.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(s,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,c),d=Dc(o5,L.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(u,c,this.logger);if(d.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw Ge(Mh);const h=new $l(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,d.accountId,this.browserStorage,r),{userRequestState:p}=Fo.parseRequestState(this.browserCrypto,n.state);return Re(h.acquireToken.bind(h),L.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,r)({...n,state:p,prompt:n.prompt||$n.NONE})}return Re(a.handleCodeResponse.bind(a),L.HandleCodeResponse,this.logger,this.performanceClient,r)(d,n)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class _ee extends Xu{async acquireToken(e){this.performanceClient.addQueueMeasurement(L.SilentRefreshClientAcquireToken,e.correlationId);const n=await Re(YE,L.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r={...e,...n};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const o=this.initializeServerTelemetryManager(an.acquireTokenSilent_silentFlow),i=await this.createRefreshTokenClient({serverTelemetryManager:o,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return Re(i.acquireTokenByRefreshToken.bind(i),L.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(a=>{throw a.setCorrelationId(this.correlationId),o.cacheFailedRequest(a),a})}logout(){return Promise.reject(Ge(Fv))}async createRefreshTokenClient(e){const n=await Re(this.getClientConfiguration.bind(this),L.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new sS(n,this.performanceClient)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Cee{constructor(e,n,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=n,this.logger=r,this.cryptoObj=o}loadExternalTokens(e,n,r){if(!this.isBrowserEnvironment)throw Ge(BE);const o=n.id_token?Lc(n.id_token,hi):void 0,i={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new nr(nr.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,i,this.logger,e.correlationId||_i()):void 0,s=this.loadAccount(e,r.clientInfo||n.client_info||"",o,a),c=this.loadIdToken(n,s.homeAccountId,s.environment,s.realm),u=this.loadAccessToken(e,n,s.homeAccountId,s.environment,s.realm,r),d=this.loadRefreshToken(n,s.homeAccountId,s.environment);return this.generateAuthenticationResult(e,{account:s,idToken:c,accessToken:u,refreshToken:d},o,a)}loadAccount(e,n,r,o){if(this.logger.verbose("TokenCache - loading account"),e.account){const c=Dn.createFromAccountInfo(e.account);return this.storage.setAccount(c),c}else if(!o||!n&&!r)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),Ge(OD);const i=Dn.generateHomeAccountId(n,o.authorityType,this.logger,this.cryptoObj,r),a=r==null?void 0:r.tid,s=ME(this.storage,o,i,hi,r,n,o.hostnameAndPort,a,void 0,void 0,this.logger);return this.storage.setAccount(s),s}loadIdToken(e,n,r,o){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const i=Nv(n,r,e.id_token,this.config.auth.clientId,o);return this.storage.setIdTokenCredential(i),i}loadAccessToken(e,n,r,o,i,a){if(n.access_token)if(n.expires_in){if(!n.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const s=n.scope?Sn.fromString(n.scope):new Sn(e.scopes),c=a.expiresOn||n.expires_in+new Date().getTime()/1e3,u=a.extendedExpiresOn||(n.ext_expires_in||n.expires_in)+new Date().getTime()/1e3,d=Mv(r,o,n.access_token,this.config.auth.clientId,i,s.printScopes(),c,u,hi);return this.storage.setAccessTokenCredential(d),d}loadRefreshToken(e,n,r){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const o=FL(n,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(o),o}generateAuthenticationResult(e,n,r,o){var d,h,p;let i="",a=[],s=null,c;n!=null&&n.accessToken&&(i=n.accessToken.secret,a=Sn.fromString(n.accessToken.target).asArray(),s=new Date(Number(n.accessToken.expiresOn)*1e3),c=new Date(Number(n.accessToken.extendedExpiresOn)*1e3));const u=n.account;return{authority:o?o.canonicalAuthority:"",uniqueId:n.account.localAccountId,tenantId:n.account.realm,scopes:a,account:u.getAccountInfo(),idToken:((d=n.idToken)==null?void 0:d.secret)||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:s,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:((h=n.refreshToken)==null?void 0:h.familyId)||"",tokenType:((p=n==null?void 0:n.accessToken)==null?void 0:p.tokenType)||"",state:e.state||"",cloudGraphHostName:u.cloudGraphHostName||"",msGraphHost:u.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class See extends uD{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class wee extends Xu{constructor(e,n,r,o,i,a,s,c,u,d){super(e,n,r,o,i,a,c,u,d),this.apiId=s}async acquireToken(e){if(!e.code)throw Ge(ND);const n=await Re(this.initializeAuthorizationRequest.bind(this),L.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,Xe.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const o={...n,code:e.code},i=await Re(this.getClientConfiguration.bind(this),L.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),a=new See(i);this.logger.verbose("Auth code client created");const s=new QE(a,this.browserStorage,o,this.logger,this.performanceClient);return await Re(s.handleCodeResponseFromServer.bind(s),L.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},n,!1)}catch(o){throw o instanceof Yt&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),o}}logout(){return Promise.reject(Ge(Fv))}}/*! @azure/msal-browser v3.26.1 2024-10-08 */function Go(t){const e=t==null?void 0:t.idTokenClaims;if(e!=null&&e.tfp||e!=null&&e.acr)return"B2C";if(e!=null&&e.tid){if((e==null?void 0:e.tid)==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function vp(t,e){try{WE(t)}catch(n){throw e.end({success:!1},n),n}}class Hv{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Cu(this.logger,this.performanceClient):eg,this.eventHandler=new YZ(this.logger),this.browserStorage=this.isBrowserEnvironment?new gS(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,jX(this.config.auth),this.performanceClient):HZ(this.config.auth.clientId,this.logger);const n={cacheLocation:Cn.MemoryStorage,temporaryCacheLocation:Cn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new gS(this.config.auth.clientId,n,this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new Cee(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this),this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}static async createController(e,n){const r=new Hv(e);return await r.initialize(n),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(Le.INITIALIZE_END);return}const n=(e==null?void 0:e.correlationId)||this.getRequestCorrelationId(),r=this.config.system.allowNativeBroker,o=this.performanceClient.startMeasurement(L.InitializeClientApplication,n);if(this.eventHandler.emitEvent(Le.INITIALIZE_START),r)try{this.nativeExtensionProvider=await di.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(i){this.logger.verbose(i)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await Re(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),L.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,n)(this.performanceClient,n)),this.initialized=!0,this.eventHandler.emitEvent(Le.INITIALIZE_END),o.end({allowNativeBroker:r,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),XD(this.initialized),this.isBrowserEnvironment){const n=e||"";let r=this.redirectResponse.get(n);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(n,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){const n=this.getAllAccounts(),r=this.browserStorage.getCachedNativeRequest(),o=r&&di.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,i=o?r==null?void 0:r.correlationId:this.browserStorage.getTemporaryCache(Dt.CORRELATION_ID,!0)||"",a=this.performanceClient.startMeasurement(L.AcquireTokenRedirect,i);this.eventHandler.emitEvent(Le.HANDLE_REDIRECT_START,Xe.Redirect);let s;if(o&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");const c=new $l(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,an.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,r.accountId,this.nativeInternalStorage,r.correlationId);s=Re(c.handleRedirectPromise.bind(c),L.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,a.event.correlationId)(this.performanceClient,a.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");const c=this.createRedirectClient(i);s=Re(c.handleRedirectPromise.bind(c),L.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,a.event.correlationId)(e,a)}return s.then(c=>(c?(n.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Le.LOGIN_SUCCESS,Xe.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_SUCCESS,Xe.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),a.end({success:!0,accountType:Go(c.account)})):a.event.errorCode?a.end({success:!1}):a.discard(),this.eventHandler.emitEvent(Le.HANDLE_REDIRECT_END,Xe.Redirect),c)).catch(c=>{const u=c;throw n.length>0?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,Xe.Redirect,null,u):this.eventHandler.emitEvent(Le.LOGIN_FAILURE,Xe.Redirect,null,u),this.eventHandler.emitEvent(Le.HANDLE_REDIRECT_END,Xe.Redirect),a.end({success:!1},u),c})}async acquireTokenRedirect(e){const n=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",n);const r=this.performanceClient.startMeasurement(L.AcquireTokenPreRedirect,n);r.add({accountType:Go(e.account),scenarioId:e.scenarioId});const o=e.onRedirectNavigate;if(o)e.onRedirectNavigate=a=>{const s=typeof o=="function"?o(a):void 0;return s!==!1?r.end({success:!0}):r.discard(),s};else{const a=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=s=>{const c=typeof a=="function"?a(s):void 0;return c!==!1?r.end({success:!0}):r.discard(),c}}const i=this.getAllAccounts().length>0;try{d1(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),i?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_START,Xe.Redirect,e):this.eventHandler.emitEvent(Le.LOGIN_START,Xe.Redirect,e);let a;return this.nativeExtensionProvider&&this.canUseNative(e)?a=new $l(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,an.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,n).acquireTokenRedirect(e,r).catch(c=>{if(c instanceof ii&&yl(c))return this.nativeExtensionProvider=void 0,this.createRedirectClient(n).acquireToken(e);if(c instanceof Zr)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(n).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),c}):a=this.createRedirectClient(n).acquireToken(e),await a}catch(a){throw r.end({success:!1},a),i?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,Xe.Redirect,null,a):this.eventHandler.emitEvent(Le.LOGIN_FAILURE,Xe.Redirect,null,a),a}}acquireTokenPopup(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(L.AcquireTokenPopup,n);r.add({scenarioId:e.scenarioId,accountType:Go(e.account)});try{this.logger.verbose("acquireTokenPopup called",n),vp(this.initialized,r),this.browserStorage.setInteractionInProgress(!0)}catch(a){return Promise.reject(a)}const o=this.getAllAccounts();o.length>0?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_START,Xe.Popup,e):this.eventHandler.emitEvent(Le.LOGIN_START,Xe.Popup,e);let i;return this.canUseNative(e)?i=this.acquireTokenNative({...e,correlationId:n},an.acquireTokenPopup).then(a=>(this.browserStorage.setInteractionInProgress(!1),r.end({success:!0,isNativeBroker:!0,requestId:a.requestId,accountType:Go(a.account)}),a)).catch(a=>{if(a instanceof ii&&yl(a))return this.nativeExtensionProvider=void 0,this.createPopupClient(n).acquireToken(e);if(a instanceof Zr)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(n).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),a}):i=this.createPopupClient(n).acquireToken(e),i.then(a=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Le.LOGIN_SUCCESS,Xe.Popup,a):this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_SUCCESS,Xe.Popup,a),r.end({success:!0,requestId:a.requestId,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:Go(a.account)}),a)).catch(a=>(o.length>0?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,Xe.Popup,null,a):this.eventHandler.emitEvent(Le.LOGIN_FAILURE,Xe.Popup,null,a),r.end({success:!1},a),Promise.reject(a)))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var i,a;const n=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:n};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(L.SsoSilent,n),(i=this.ssoSilentMeasurement)==null||i.add({scenarioId:e.scenarioId,accountType:Go(e.account)}),vp(this.initialized,this.ssoSilentMeasurement),(a=this.ssoSilentMeasurement)==null||a.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",n),this.eventHandler.emitEvent(Le.SSO_SILENT_START,Xe.Silent,r);let o;return this.canUseNative(r)?o=this.acquireTokenNative(r,an.ssoSilent).catch(s=>{if(s instanceof ii&&yl(s))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw s}):o=this.createSilentIframeClient(r.correlationId).acquireToken(r),o.then(s=>{var c;return this.eventHandler.emitEvent(Le.SSO_SILENT_SUCCESS,Xe.Silent,s),(c=this.ssoSilentMeasurement)==null||c.end({success:!0,isNativeBroker:s.fromNativeBroker,requestId:s.requestId,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:Go(s.account)}),s}).catch(s=>{var c;throw this.eventHandler.emitEvent(Le.SSO_SILENT_FAILURE,Xe.Silent,null,s),(c=this.ssoSilentMeasurement)==null||c.end({success:!1},s),s}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const n=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",n);const r=this.performanceClient.startMeasurement(L.AcquireTokenByCode,n);vp(this.initialized,r),this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_BY_CODE_START,Xe.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw Ge(LD);if(e.code){const o=e.code;let i=this.hybridAuthCodeResponses.get(o);return i?(this.logger.verbose("Existing acquireTokenByCode request found",n),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",n),i=this.acquireTokenByCodeAsync({...e,correlationId:n}).then(a=>(this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_BY_CODE_SUCCESS,Xe.Silent,a),this.hybridAuthCodeResponses.delete(o),r.end({success:!0,isNativeBroker:a.fromNativeBroker,requestId:a.requestId,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:Go(a.account)}),a)).catch(a=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_BY_CODE_FAILURE,Xe.Silent,null,a),r.end({success:!1},a),a}),this.hybridAuthCodeResponses.set(o,i)),await i}else if(e.nativeAccountId)if(this.canUseNative(e,e.nativeAccountId)){const o=await this.acquireTokenNative({...e,correlationId:n},an.acquireTokenByCode,e.nativeAccountId).catch(i=>{throw i instanceof ii&&yl(i)&&(this.nativeExtensionProvider=void 0),i});return r.end({accountType:Go(o.account),success:!0}),o}else throw Ge(DD);else throw Ge(MD)}catch(o){throw this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_BY_CODE_FAILURE,Xe.Silent,null,o),r.end({success:!1},o),o}}async acquireTokenByCodeAsync(e){var o;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(L.AcquireTokenByCodeAsync,e.correlationId),(o=this.acquireTokenByCodeAsyncMeasurement)==null||o.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(i=>{var a;return(a=this.acquireTokenByCodeAsyncMeasurement)==null||a.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker,requestId:i.requestId}),i}).catch(i=>{var a;throw(a=this.acquireTokenByCodeAsyncMeasurement)==null||a.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,n){switch(this.performanceClient.addQueueMeasurement(L.AcquireTokenFromCache,e.correlationId),n){case Hr.Default:case Hr.AccessToken:case Hr.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(e.correlationId);return Re(r.acquireToken.bind(r),L.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw Ce(Vi)}}async acquireTokenByRefreshToken(e,n){switch(this.performanceClient.addQueueMeasurement(L.AcquireTokenByRefreshToken,e.correlationId),n){case Hr.Default:case Hr.AccessTokenAndRefreshToken:case Hr.RefreshToken:case Hr.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(e.correlationId);return Re(r.acquireToken.bind(r),L.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw Ce(Vi)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(L.AcquireTokenBySilentIframe,e.correlationId);const n=this.createSilentIframeClient(e.correlationId);return Re(n.acquireToken.bind(n),L.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const n=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",n),this.logoutRedirect({correlationId:n,...e})}async logoutRedirect(e){const n=this.getRequestCorrelationId(e);return d1(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),this.createRedirectClient(n).logout(e)}logoutPopup(e){try{const n=this.getRequestCorrelationId(e);return WE(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(n).logout(e)}catch(n){return Promise.reject(n)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const n=this.getRequestCorrelationId(e);return this.createSilentCacheClient(n).logout(e)}getAllAccounts(e){return VZ(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return zZ(e,this.logger,this.browserStorage)}getAccountByUsername(e){return $Z(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return GZ(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return KZ(e,this.logger,this.browserStorage)}setActiveAccount(e){WZ(e,this.browserStorage)}getActiveAccount(){return qZ(this.browserStorage)}async hydrateCache(e,n){this.logger.verbose("hydrateCache called");const r=Dn.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return this.browserStorage.setAccount(r),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,n)):this.browserStorage.hydrateCache(e,n)}async acquireTokenNative(e,n,r){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw Ge(Mh);return new $l(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,n,this.performanceClient,this.nativeExtensionProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)}canUseNative(e,n){if(this.logger.trace("canUseNative called"),!di.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case $n.NONE:case $n.CONSENT:case $n.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!n&&!this.getNativeAccountId(e)?(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const n=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return n&&n.nativeAccountId||""}createPopupClient(e){return new dee(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new hee(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new bee(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,an.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new r5(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new _ee(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new wee(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,an.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,n){return this.eventHandler.addEventCallback(e,n)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return JD(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}handleAccountCacheChange(e){var n;try{(n=e.key)!=null&&n.includes(Bn.ACTIVE_ACCOUNT_FILTERS)&&this.eventHandler.emitEvent(Le.ACTIVE_ACCOUNT_CHANGED);const r=e.newValue||e.oldValue;if(!r)return;const o=JSON.parse(r);if(typeof o!="object"||!Dn.isAccountEntity(o))return;const a=vu.toObject(new Dn,o).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.eventHandler.emitEvent(Le.ACCOUNT_ADDED,void 0,a)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.eventHandler.emitEvent(Le.ACCOUNT_REMOVED,void 0,a))}catch{return}}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,n){this.browserStorage.setWrapperMetadata(e,n)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?_i():ae.EMPTY_STRING}async loginRedirect(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",n),this.acquireTokenRedirect({correlationId:n,...e||c1})}loginPopup(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",n),this.acquireTokenPopup({correlationId:n,...e||c1})}async acquireTokenSilent(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(L.AcquireTokenSilent,n);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),vp(this.initialized,r),this.logger.verbose("acquireTokenSilent called",n);const o=e.account||this.getActiveAccount();if(!o)throw Ge(AD);r.add({accountType:Go(o)});const i={clientId:this.config.auth.clientId,authority:e.authority||ae.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:o.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},a=JSON.stringify(i),s=this.activeSilentTokenRequests.get(a);if(typeof s>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",n);const c=Re(this.acquireTokenSilentAsync.bind(this),L.AcquireTokenSilentAsync,this.logger,this.performanceClient,n)({...e,correlationId:n},o).then(u=>(this.activeSilentTokenRequests.delete(a),r.end({success:!0,fromCache:u.fromCache,isNativeBroker:u.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,requestId:u.requestId,accessTokenSize:u.accessToken.length,idTokenSize:u.idToken.length}),u)).catch(u=>{throw this.activeSilentTokenRequests.delete(a),r.end({success:!1},u),u});return this.activeSilentTokenRequests.set(a,c),{...await c,state:e.state}}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",n),r.discard(),{...await s,state:e.state}}async acquireTokenSilentAsync(e,n){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(L.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_START,Xe.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const o=await Re(eee,L.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,n,this.config,this.performanceClient,this.logger),i=e.cacheLookupPolicy||Hr.Default;return this.acquireTokenSilentNoIframe(o,i).catch(async s=>{if(Eee(s,i))if(this.activeIframeRequest)if(i!==Hr.Skip){const[u,d]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${d}`,o.correlationId);const h=this.performanceClient.startMeasurement(L.AwaitConcurrentIframe,o.correlationId);h.add({awaitIframeCorrelationId:d});const p=await u;if(h.end({success:p}),p)return this.logger.verbose(`Parallel iframe request with correlationId: ${d} succeeded. Retrying cache and/or RT redemption`,o.correlationId),this.acquireTokenSilentNoIframe(o,i);throw this.logger.info(`Iframe request with correlationId: ${d} failed. Interaction is required.`),s}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",o.correlationId),Re(this.acquireTokenBySilentIframe.bind(this),L.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o);else{let u;return this.activeIframeRequest=[new Promise(d=>{u=d}),o.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",o.correlationId),Re(this.acquireTokenBySilentIframe.bind(this),L.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o).then(d=>(u(!0),d)).catch(d=>{throw u(!1),d}).finally(()=>{this.activeIframeRequest=void 0})}else throw s}).then(s=>(this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_SUCCESS,Xe.Silent,s),e.correlationId&&this.performanceClient.addFields({fromCache:s.fromCache,isNativeBroker:s.fromNativeBroker,requestId:s.requestId},e.correlationId),s)).catch(s=>{throw this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,Xe.Silent,null,s),s}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,n){return di.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,an.acquireTokenSilent_silentFlow).catch(async r=>{throw r instanceof ii&&yl(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,Ce(Vi)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),Re(this.acquireTokenFromCache.bind(this),L.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,n).catch(r=>{if(n===Hr.AccessToken)throw r;return this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_NETWORK_START,Xe.Silent,e),Re(this.acquireTokenByRefreshToken.bind(this),L.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,n)}))}}function Eee(t,e){const n=!(t instanceof Zr&&t.subError!==jv),r=t.errorCode===Gr.INVALID_GRANT_ERROR||t.errorCode===Vi,o=n&&r||t.errorCode===ig||t.errorCode===NE,i=fZ.includes(e);return o&&i}/*! @azure/msal-browser v3.26.1 2024-10-08 */async function Tee(t,e){const n=new hc(t);return await n.initialize(),Hv.createController(n,e)}/*! @azure/msal-browser v3.26.1 2024-10-08 */let Iee=class a5{static async createPublicClientApplication(e){const n=await Tee(e);return new a5(e,n)}constructor(e,n){this.controller=n||new Hv(new hc(e))}async initialize(e){return this.controller.initialize(e)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,n){return this.controller.addEventCallback(e,n)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,n){return this.controller.initializeWrapperLibrary(e,n)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,n){return this.controller.hydrateCache(e,n)}clearCache(e){return this.controller.clearCache(e)}};function p1(){let t;try{t=window[Cn.SessionStorage];const e=t==null?void 0:t.getItem(mZ);if(Number(e)===1)return T(()=>import("./BrowserPerformanceMeasurement-CIsv1iQ0.js"),[])}catch{}}function im(){return typeof window<"u"&&typeof window.performance<"u"&&typeof window.performance.now=="function"}function Aee(t){if(!(!t||!im()))return Math.round(window.performance.now()-t)}class kee extends rZ{constructor(e,n,r){var o,i;super(e.auth.clientId,e.auth.authority||`${ae.DEFAULT_AUTHORITY}`,new Zi(((o=e.system)==null?void 0:o.loggerOptions)||{},hS,_u),hS,_u,((i=e.telemetry)==null?void 0:i.application)||{appName:"",appVersion:""},n,r)}generateId(){return _i()}getPageVisibility(){var e;return((e=document.visibilityState)==null?void 0:e.toString())||null}deleteIncompleteSubMeasurements(e){var n;(n=p1())==null||n.then(r=>{const o=this.eventsByCorrelationId.get(e.event.correlationId),i=o&&o.eventId===e.event.eventId,a=[];i&&(o!=null&&o.incompleteSubMeasurements)&&o.incompleteSubMeasurements.forEach(s=>{a.push({...s})}),r.BrowserPerformanceMeasurement.flushMeasurements(e.event.correlationId,a)})}startMeasurement(e,n){var s;const r=this.getPageVisibility(),o=super.startMeasurement(e,n),i=im()?window.performance.now():void 0,a=(s=p1())==null?void 0:s.then(c=>new c.BrowserPerformanceMeasurement(e,o.event.correlationId));return a==null||a.then(c=>c.startMeasurement()),{...o,end:(c,u)=>{const d=o.end({...c,startPageVisibility:r,endPageVisibility:this.getPageVisibility(),durationMs:Aee(i)},u);return a==null||a.then(h=>h.endMeasurement()),this.deleteIncompleteSubMeasurements(o),d},discard:()=>{o.discard(),a==null||a.then(c=>c.flushMeasurement()),this.deleteIncompleteSubMeasurements(o)}}}setPreQueueTime(e,n){if(!im()){this.logger.trace(`BrowserPerformanceClient: window performance API not available, unable to set telemetry queue time for ${e}`);return}if(!n){this.logger.trace(`BrowserPerformanceClient: correlationId for ${e} not provided, unable to set telemetry queue time`);return}const r=this.preQueueTimeByCorrelationId.get(n);r&&(this.logger.trace(`BrowserPerformanceClient: Incomplete pre-queue ${r.name} found`,n),this.addQueueMeasurement(r.name,n,void 0,!0)),this.preQueueTimeByCorrelationId.set(n,{name:e,time:window.performance.now()})}addQueueMeasurement(e,n,r,o){if(!im()){this.logger.trace(`BrowserPerformanceClient: window performance API not available, unable to add queue measurement for ${e}`);return}if(!n){this.logger.trace(`BrowserPerformanceClient: correlationId for ${e} not provided, unable to add queue measurement`);return}const i=super.getPreQueueTime(e,n);if(!i)return;const a=window.performance.now(),s=r||super.calculateQueuedTime(i,a);return super.addQueueMeasurement(e,n,s,o)}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const dn={...L,PairwiseBrokerApplicationInitializeBrokering:"pairwiseBrokerApplicationInitializeBrokering",BrokerClientApplicationHandleBrokerHandshake:"brokerClientApplicationHandleBrokerHandshake",BrokerClientApplicationBrokeredSSOSilentRequest:"brokerClientApplicationBrokeredSSOSilentRequest",BrokerClientApplicationBrokeredSilentRequest:"brokerClientApplicationBrokeredSilentRequest",EmbeddedClientApplicationSendSSOSilentRequest:"embeddedSSOSilent",EmbeddedClientApplicationSendPopupRequest:"embeddedPopup",EmbeddedClientApplicationSendRedirectRequest:"embeddedRedirect",EmbeddedClientApplicationHandleRedirectRequest:"embeddedHandleRedirect",EmbeddedClientApplicationSendSilentRefreshRequest:"embeddedSilentRefresh"},xee=new Map([[dn.PairwiseBrokerApplicationInitializeBrokering,"PWBInitBrk"],[dn.BrokerClientApplicationHandleBrokerHandshake,"BrkClientHandeBrkHandshake"],[dn.BrokerClientApplicationBrokeredSSOSilentRequest,"BrkClientBrkSSOReq"],[dn.BrokerClientApplicationBrokeredSilentRequest,"BrkClientBrkSltReq"],[dn.EmbeddedClientApplicationSendSSOSilentRequest,"EmbClientSendSSOReq"],[dn.EmbeddedClientApplicationSendPopupRequest,"EmbClientSendPopupReq"],[dn.EmbeddedClientApplicationSendRedirectRequest,"EmbClientSendRedirectReq"],[dn.EmbeddedClientApplicationHandleRedirectRequest,"EmbClientHandleRedirectReq"],[dn.EmbeddedClientApplicationSendSilentRefreshRequest,"EmbClientSendSltRefreshReq"]]),Ree=new Set(["brokerInteractionTimeoutMs","brokerMessageTimeoutMs","brokerHandshakeTimeoutMs","brokerIframeTimeoutMs"]);var Pee="function",JE="object",XE="undefined",Cf="prototype",ZE=Object,Oee=ZE[Cf];/*! https://github.com/nevware21/ts-utils v0.11.5 */function aa(t,e){return t||e}function Cr(t,e){return t[e]}var Kr=void 0,Ln=null,eT="",Vv="function",Dh="object",Gi="prototype",yS="__proto__",Us="undefined",cg="constructor",tT="Symbol",Nee="_polyfill",qs="length",lg="name",Jn="call",zv="toString",To=aa(Object),nT=Cr(To,Gi),s5=aa(String),jc=Cr(s5,Gi),Mee=aa(Math),c5=aa(Array),l5=Cr(c5,Gi),ta=Cr(l5,"slice");function Xn(t,e){try{return{v:t.apply(this,e)}}catch(n){return{e:n}}}function Lee(t,e){var n=Xn(t);return n.e?e:n.v}var Rb;function $v(t){return function(e){return typeof e===t}}function u5(t){var e="[object "+t+"]";return function(n){return!!(n&&Dee(n)===e)}}function Dee(t){return nT[zv].call(t)}function Ht(t){return typeof t===Us||t===Us}function jee(t){return!rT(t)}function Vt(t){return t===Ln||Ht(t)}function Uee(t){return t===Ln||!rT(t)}function rT(t){return!!t||t!==Kr}function Fee(t){return!Rb&&(Rb=["string","number","boolean",Us,"symbol","bigint"]),t!==Dh&&Rb.indexOf(t)!==-1}var or=$v("string"),Qt=$v(Vv);function Su(t){return!t&&Vt(t)?!1:!!t&&typeof t===Dh}var Ct=Cr(c5,"isArray"),Bee=u5("Date"),Ga=$v("number"),pc=$v("boolean"),Hee=u5("Error");function wu(t){return!!(t&&t.then&&Qt(t.then))}function m1(t){return!(!t||Lee(function(){return!(t&&0+t)},!t))}var oT=Cr(To,"getOwnPropertyDescriptor");function _o(t,e){return!!t&&nT.hasOwnProperty[Jn](t,e)}var Gl=aa(Cr(To,"hasOwn"),Vee);function Vee(t,e){return _o(t,e)||!!oT(t,e)}function Jt(t,e,n){if(t&&Su(t)){for(var r in t)if(Gl(t,r)&&e[Jn](t,r,t[r])===-1)break}}var yp={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function d5(t){var e={};if(e[yp.c]=!0,e[yp.e]=!0,t.l){e.get=function(){return t.l.v};var n=oT(t.l,"v");n&&n.set&&(e.set=function(r){t.l.v=r})}return Jt(t,function(r,o){e[yp[r]]=jee(o)?e[yp[r]]:o}),e}var na=Cr(To,"defineProperty"),zee=Cr(To,"defineProperties");function fn(t,e,n){return na(t,e,d5(n))}function f5(t,e){var n={};return Jt(e,function(r,o){n[r]=d5(o)}),zee(t,n)}function h5(t,e,n,r,o){var i={};return Jt(t,function(a,s){ug(i,a,e?s:a),ug(i,s,a)}),r?r(i):i}function ug(t,e,n,r){na(t,e,{value:n,enumerable:!0,writable:!1})}var Do=aa(s5),$ee="[object Error]";function Tt(t,e){var n=eT,r=nT[zv][Jn](t);r===$ee&&(t={stack:Do(t.stack),message:Do(t.message),name:Do(t.name)});try{n=JSON.stringify(t,Ln,e?typeof e=="number"?e:4:Kr),n=(n?n.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):Ln)||Do(t)}catch(o){n=" - "+Tt(o,e)}return r+": "+n}function uo(t){throw new Error(t)}function Io(t){throw new TypeError(t)}var p5=Cr(To,"freeze");function Gee(t){return t}function Kee(t){return t[yS]||Ln}var g1=Cr(To,"assign"),Ki=Cr(To,"keys");function Zu(t){return p5&&Jt(t,function(e,n){(Ct(n)||Su(n))&&Zu(n)}),mc(t)}var mc=aa(p5,Gee),bS=aa(Cr(To,"getPrototypeOf"),Kee);function Wee(t){return h5(t,1,0,mc)}function qee(t){return h5(t,0,0,mc)}function Yee(t){var e={};return Jt(t,function(n,r){ug(e,n,r[1]),ug(e,r[0],r[1])}),mc(e)}function Qee(t){return Yee(t)}var m5=qee({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),v1="__tsUtils$gblCfg",Pb;function g5(){var t;return typeof globalThis!==Us&&(t=globalThis),!t&&typeof self!==Us&&(t=self),!t&&typeof window!==Us&&(t=window),!t&&typeof global!==Us&&(t=global),t}function v5(){if(!Pb){var t=Xn(g5).v||{};Pb=t[v1]=t[v1]||{}}return Pb}var Gv=jh;function jh(t,e,n){var r=e?e[t]:Ln;return function(o){var i=(o?o[t]:Ln)||r;if(i||n){var a=arguments;return(i||n).apply(o,i?ta[Jn](a,1):a)}Io('"'+Do(t)+'" not defined for '+Tt(o))}}function Jee(t){return function(e){return e[t]}}var Xee=Cr(Mee,"max"),y1=Gv("slice",jc),ai=Gv("substring",jc),bl=jh("substr",jc,Zee);function Zee(t,e,n){return Vt(t)&&Io("Invalid "+Tt(t)),n<0?eT:(e=e||0,e<0&&(e=Xee(e+t[qs],0)),Ht(n)?y1(t,e):y1(t,e,e+n))}function iT(t,e){return ai(t,0,e)}var b1="_urid",Ob;function ete(){if(!Ob){var t=v5();Ob=t.gblSym=t.gblSym||{k:{},s:{}}}return Ob}var bp;function aT(t){var e={description:Do(t),toString:function(){return tT+"("+t+")"}};return e[Nee]=!0,e}function tte(t){var e=ete();if(!Gl(e.k,t)){var n=aT(t),r=Ki(e.s).length;n[b1]=function(){return r+"_"+n[zv]()},e.k[t]=n,e.s[n[b1]()]=Do(t)}return e.k[t]}function nte(t){!bp&&(bp={});var e,n=m5[t];return n&&(e=bp[n]=bp[n]||aT(tT+"."+n)),e}var In;function ns(){In=v5()}function rte(t){var e={};return!In&&ns(),e.b=In.lzy,na(e,"v",{configurable:!0,get:function(){var n=t();return In.lzy||na(e,"v",{value:n}),e.b=In.lzy,n}}),e}function Ao(t){return na({toJSON:function(){return t}},"v",{value:t})}var y5="window",Sf;function Kv(t,e){var n;return function(){return!In&&ns(),(!n||In.lzy)&&(n=Ao(Xn(t,e).v)),n.v}}function ed(t){return!In&&ns(),(!Sf||t===!1||In.lzy)&&(Sf=Ao(Xn(g5).v||Ln)),Sf.v}function An(t,e){var n;if(!Sf||e===!1?n=ed(e):n=Sf.v,n&&n[t])return n[t];if(t===y5)try{return window}catch{}return Ln}function b5(){return!!ra()}var ra=Kv(An,["document"]);function ote(){return!!rs()}var rs=Kv(An,[y5]);function ite(){return!!Ai()}var Ai=Kv(An,["navigator"]),ate=Kv(function(){return!!Xn(function(){return process&&(process.versions||{}).node}).v}),Eu,Nb;function Wv(){return Eu=Ao(Xn(An,[tT]).v),Eu}function ste(t){var e=(In.lzy?0:Eu)||Wv();return e.v?e.v[t]:Kr}function cte(){return!!lte()}function lte(){return!In&&ns(),((In.lzy?0:Eu)||Wv()).v}function sT(t,e){var n=m5[t];!In&&ns();var r=(In.lzy?0:Eu)||Wv();return r.v?r.v[n||t]:nte(t)}function Nd(t,e){!In&&ns();var n=(In.lzy?0:Eu)||Wv();return n.v?n.v(t):aT(t)}function cT(t){return!In&&ns(),Nb=(In.lzy?0:Nb)||Ao(Xn(ste,["for"]).v),(Nb.v||tte)(t)}function _S(t){return!!t&&Qt(t.next)}function _5(t){return!Uee(t)&&Qt(t[sT(3)])}var _p;function lT(t,e,n){if(t&&(_S(t)||(!_p&&(_p=Ao(sT(3))),t=t[_p.v]?t[_p.v]():Ln),_S(t))){var r=Kr,o=Kr;try{for(var i=0;!(o=t.next()).done&&e[Jn](n||t,o.value,i,t)!==-1;)i++}catch(a){r={e:a},t.throw&&(o=Ln,t.throw(r))}finally{try{o&&!o.done&&t.return&&t.return(o)}finally{if(r)throw r.e}}}}function Pl(t,e,n){return t.apply(e,n)}function Ma(t,e){return!Ht(e)&&t&&(Ct(e)?Pl(t.push,t,e):_S(e)||_5(e)?lT(e,function(n){t.push(n)}):t.push(e)),t}function qe(t,e,n){if(t)for(var r=t[qs]>>>0,o=0;o<r&&!(o in t&&e[Jn](t,t[o],o,t)===-1);o++);}var Co=Gv("indexOf",l5);function qv(t,e,n){return((t?t.slice:Ln)||ta).apply(t,ta[Jn](arguments,1))}var Ka=aa(Cr(To,"create"),ute);function ute(t){if(!t)return{};var e=typeof t;e!==Dh&&e!==Vv&&Io("Prototype must be an Object or function: "+Tt(t));function n(){}return n[Gi]=t,new n}var Mb;function C5(t,e){var n=To.setPrototypeOf||function(r,o){var i;!Mb&&(Mb=Ao((i={},i[yS]=[],i instanceof Array))),Mb.v?r[yS]=o:Jt(o,function(a,s){return r[a]=s})};return n(t,e)}function dte(t,e,n){Xn(fn,[e,lg,{v:t,c:!0,e:!1}]),e=C5(e,n);function r(){this[cg]=e,Xn(fn,[this,lg,{v:t,c:!0,e:!1}])}return e[Gi]=n===Ln?Ka(n):(r[Gi]=n[Gi],new r),e}function _1(t,e){e&&(t[lg]=e)}function fte(t,e,n){var r=Error,o=r[Gi][lg],i=Error.captureStackTrace;return dte(t,function(){var a=this,s=arguments;try{Xn(_1,[r,t]);var c=Pl(r,a,ta[Jn](s))||a;if(c!==a){var u=bS(a);u!==bS(c)&&C5(c,u)}return i&&i(c,a[cg]),e&&e(c,s),c}finally{Xn(_1,[r,o])}},r)}function Wa(){return(Date.now||hte)()}function hte(){return new Date().getTime()}function pte(t){return function(n){return Vt(n)&&Io("strTrim called ["+Tt(n)+"]"),n&&n.replace&&(n=n.replace(t,eT)),n}}var mte=pte(/^\s+|(?=\s)\s+$/g),Ar=jh("trim",jc,mte),Lb,Db,jb;function jo(t){if(!t||typeof t!==Dh)return!1;jb||(jb=ote()?rs():!0);var e=!1;if(t!==jb){Db||(Lb=Function[Gi][zv],Db=Lb[Jn](To));try{var n=bS(t);e=!n,e||(_o(n,cg)&&(n=n[cg]),e=!!(n&&typeof n===Vv&&Lb[Jn](n)===Db))}catch{}}return e}function gte(t){return t.value&&w5(t),!0}var C1=[_te,w5,Ste,Cte];function vte(t,e,n,r){var o;return qe(t,function(i){if(i.k===e)return o=i,-1}),o||(o={k:e,v:e},t.push(o),r(o)),o.v}function uT(t,e,n,r){var o=n.handler,i=n.path?r?n.path.concat(r):n.path:[],a={handler:n.handler,src:n.src,path:i},s=typeof e,c=!1,u=e===Ln;u||(e&&s===Dh?c=jo(e):u=Fee(s));var d={type:s,isPrim:u,isPlain:c,value:e,result:e,path:i,origin:n.src,copy:function(h,p){return uT(t,h,p?a:n,p)},copyTo:function(h,p){return S5(t,h,p,a)}};return d.isPrim?o&&o[Jn](n,d)?d.result:e:vte(t,e,i,function(h){fn(d,"result",{g:function(){return h.v},s:function(v){h.v=v}});for(var p=0,g=o;!(g||(p<C1.length?C1[p++]:gte))[Jn](n,d);)g=Ln})}function S5(t,e,n,r){if(!Vt(n))for(var o in n)e[o]=uT(t,n[o],r,o);return e}function yte(t,e,n){var r={handler:n,src:e,path:[]};return S5([],t,e,r)}function bte(t,e){var n={handler:e,src:t};return uT([],t,n)}function _te(t){var e=t.value;if(Ct(e)){var n=t.result=[];return n.length=e.length,t.copyTo(n,e),!0}return!1}function Cte(t){var e=t.value;return Bee(e)?(t.result=new Date(e.getTime()),!0):!1}function Ste(t){return t.type===Vv}function w5(t){var e=t.value;if(e&&t.isPlain){var n=t.result={};return t.copyTo(n,e),!0}return!1}function wte(t,e){return qe(e,function(n){yte(t,n)}),t}function S1(t,e,n,r,o,i,a){return wte(bte(t)||{},ta[Jn](arguments))}var Ete=Jee(qs),Ub;function Tte(){return!In&&ns(),(!Ub||In.lzy)&&(Ub=Ao(Xn(An,["performance"]).v)),Ub.v}function Ite(){var t=Tte();return t&&t.now?t.now():Wa()}var Ate=jh("endsWith",jc,kte);function kte(t,e,n){or(t)||Io("'"+Tt(t)+"' is not a string");var r=or(e)?e:Do(e),o=!Ht(n)&&n<t[qs]?n:t[qs];return ai(t,o-r[qs],o)===r}var Yv=Gv("indexOf",jc),w1=jh("startsWith",jc,xte);function xte(t,e,n){or(t)||Io("'"+Tt(t)+"' is not a string");var r=or(e)?e:Do(e),o=n>0?n:0;return ai(t,o,o+r[qs])===r}var Fb="ref",Bb="unref",Hb="hasRef",Rte="enabled";function Pte(t,e,n){var r=!0,o=t?e(Ln):Ln,i;function a(){return r=!1,o&&o[Bb]&&o[Bb](),i}function s(){o&&n(o),o=Ln}function c(){return o=e(o),r||a(),i}function u(d){!d&&o&&s(),d&&!o&&c()}return i={cancel:s,refresh:c},i[Hb]=function(){return o&&o[Hb]?o[Hb]():r},i[Fb]=function(){return r=!0,o&&o[Fb]&&o[Fb](),i},i[Bb]=a,i=na(i,Rte,{get:function(){return!!o},set:u}),{h:i,dn:function(){o=Ln}}}function dT(t,e,n){var r=Ct(e),o=r?e.length:0,i=(o>0?e[0]:r?Kr:e)||setTimeout,a=(o>1?e[1]:Kr)||clearTimeout,s=n[0];n[0]=function(){c.dn(),Pl(s,Kr,ta[Jn](arguments))};var c=Pte(t,function(u){if(u){if(u.refresh)return u.refresh(),u;Pl(a,Kr,[u])}return Pl(i,Kr,n)},function(u){Pl(a,Kr,[u])});return c.h}function gc(t,e){return dT(!0,Kr,ta[Jn](arguments))}function Ote(t,e,n){return dT(!0,t,ta[Jn](arguments,1))}function Nte(t,e){return dT(!1,Kr,ta[Jn](arguments))}(ed()||{}).Symbol;(ed()||{}).Reflect;var Mte="hasOwnProperty",CS=function(t,e){return CS=ZE.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r[Mte](o)&&(n[o]=r[o])},CS(t,e)};function Uh(t,e){typeof e!==Pee&&e!==null&&Io("Class extends value "+String(e)+" is not a constructor or null"),CS(t,e);function n(){this.constructor=t}t[Cf]=e===null?Ka(e):(n[Cf]=e[Cf],new n)}function E1(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t}var Cp,dg="constructor",oa="prototype",fg="function",hg="_dynInstFuncs",SS="_isDynProxy",Kl="_dynClass",Lte="_dynCls$",wS="_dynInstChk",Qf=wS,E5="_dfOpts",T1="_unknown_",fT="__proto__",Sp="_dyn"+fT,I1="__dynProto$Gbl",Vb="_dynInstProto",am="useBaseInst",ES="setInstFuncs",hT=Object,Jf=hT.getPrototypeOf,A1=hT.getOwnPropertyNames,k1=ed(),TS=k1[I1]||(k1[I1]={o:(Cp={},Cp[ES]=!0,Cp[am]=!0,Cp),n:1e3});function sm(t){return t&&(t===hT[oa]||t===Array[oa])}function pT(t){return sm(t)||t===Function[oa]}function vc(t){var e;if(t){if(Jf)return Jf(t);var n=t[fT]||t[oa]||(t[dg]?t[dg][oa]:null);e=t[Sp]||n,_o(t,Sp)||(delete t[Vb],e=t[Sp]=t[Vb]||t[Sp],t[Vb]=n)}return e}function pg(t,e){var n=[];if(A1)n=A1(t);else for(var r in t)typeof r=="string"&&_o(t,r)&&n.push(r);if(n&&n.length>0)for(var o=0;o<n.length;o++)e(n[o])}function mT(t,e,n){return e!==dg&&typeof t[e]===fg&&(n||_o(t,e))&&e!==fT&&e!==oa}function mg(t){Io("DynamicProto: "+t)}function Dte(t){var e=Ka(null);return pg(t,function(n){!e[n]&&mT(t,n,!1)&&(e[n]=t[n])}),e}function gT(t,e){for(var n=t.length-1;n>=0;n--)if(t[n]===e)return!0;return!1}function jte(t,e,n,r){function o(c,u,d){var h=u[d];if(h[SS]&&r){var p=c[hg]||{};p[Qf]!==!1&&(h=(p[u[Kl]]||{})[d]||h)}return function(){return h.apply(c,arguments)}}var i=Ka(null);pg(n,function(c){i[c]=o(e,n,c)});for(var a=vc(t),s=[];a&&!pT(a)&&!gT(s,a);)pg(a,function(c){!i[c]&&mT(a,c,!Jf)&&(i[c]=o(e,a,c))}),s.push(a),a=vc(a);return i}function Ute(t,e,n,r){var o=null;if(t&&_o(n,Kl)){var i=t[hg]||Ka(null);if(o=(i[n[Kl]]||Ka(null))[e],o||mg("Missing ["+e+"] "+fg),!o[wS]&&i[Qf]!==!1){for(var a=!_o(t,e),s=vc(t),c=[];a&&s&&!pT(s)&&!gT(c,s);){var u=s[e];if(u){a=u===r;break}c.push(s),s=vc(s)}try{a&&(t[e]=o),o[wS]=1}catch{i[Qf]=!1}}}return o}function Fte(t,e,n){var r=e[t];return r===n&&(r=vc(e)[t]),typeof r!==fg&&mg("["+t+"] is not a "+fg),r}function Bte(t,e,n,r,o){function i(c,u){var d=function(){var h=Ute(this,u,c,d)||Fte(u,c,d);return h.apply(this,arguments)};return d[SS]=1,d}if(!sm(t)){var a=n[hg]=n[hg]||Ka(null);if(!sm(a)){var s=a[e]=a[e]||Ka(null);a[Qf]!==!1&&(a[Qf]=!!o),sm(s)||pg(n,function(c){mT(n,c,!1)&&n[c]!==r[c]&&(s[c]=n[c],delete n[c],(!_o(t,c)||t[c]&&!t[c][SS])&&(t[c]=i(t,c)))})}}}function Hte(t,e){if(Jf){for(var n=[],r=vc(e);r&&!pT(r)&&!gT(n,r);){if(r===t)return!0;n.push(r),r=vc(r)}return!1}return!0}function zb(t,e){return _o(t,oa)?t.name||e||T1:((t||{})[dg]||{}).name||e||T1}function cn(t,e,n,r){_o(t,oa)||mg("theClass is an invalid class definition.");var o=t[oa];Hte(o,e)||mg("["+zb(t)+"] not in hierarchy of ["+zb(e)+"]");var i=null;_o(o,Kl)?i=o[Kl]:(i=Lte+zb(t,"_")+"$"+TS.n,TS.n++,o[Kl]=i);var a=cn[E5],s=!!a[am];s&&r&&r[am]!==void 0&&(s=!!r[am]);var c=Dte(e),u=jte(o,e,c,s);n(e,u);var d=!!Jf&&!!a[ES];d&&r&&(d=!!r[ES]),Bte(o,i,e,c,d!==!1)}cn[E5]=TS.o;var T5=Wee,Nr=Qee,fs=T5({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),rl=T5({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),vT="toLowerCase",gg="blkVal",ut="length",vg="rdOnly",yg="notify",bg="warnToConsole",Fh="throwInternal",td="setDf",Va="watch",_n="logger",Qv="apply",Mt="push",Bh="splice",I5="hdlr",Ol="cancel",Hh="initialize",ka="identifier",_g="removeNotificationListener",Cg="addNotificationListener",fi="isInitialized",x1="instrumentationKey",$b="INACTIVE",wf="value",wp="getNotifyMgr",Xf="getPlugin",Ys="name",Md="iKey",Wl="time",gr="processNext",A5="getProcessTelContext",R1="pollInternalLogs",Nl="enabled",P1="stopPollingInternalLogs",qa="unload",Ep="onComplete",O1="version",k5="loggingLevelConsole",yc="createNew",ji="teardown",Sg="messageId",Qs="message",Tu="isAsync",Wi="diagLog",wg="_doTeardown",Zf="update",pi="getNext",eh="setNextPlugin",x5="protocol",IS="userAgent",Jv="split",Gb="nodeType",Js="replace",Vte="logInternalMessage",qi="type",yT="handler",tf="status",N1="getResponseHeader",M1="getAllResponseHeaders",AS="isChildEvt",_l="data",ql="getCtx",Qo="setCtx",kS="complete",Ld="urlString",L1="sendPOST",Kb="headers",ol="timeout",D1="setRequestHeader",j1="traceId",U1="spanId",F1="traceFlags",Wb;function zte(t,e){Wb||(Wb=fte("AggregationError",function(r,o){o[ut]>1&&(r.errors=o[1])}));var n=t;throw qe(e,function(r,o){n+=`
`.concat(o," > ").concat(Tt(r))}),new Wb(n,e||[])}/*!
 * NevWare21 Solutions LLC - ts-async, 0.5.2
 * https://github.com/nevware21/ts-async
 * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
 * Licensed under the MIT license.
 */var Eg="Promise",bT="rejected";function Iu(t,e){return R5(t,function(n){return e?e({status:"fulfilled",rejected:!1,value:n}):n},function(n){return e?e({status:bT,rejected:!0,reason:n}):n})}function R5(t,e,n,r){var o=t;try{if(wu(t))(e||n)&&(o=t.then(e,n));else try{e&&(o=e(t))}catch(i){if(n)o=n(i);else throw i}}finally{}return o}var P5=["pending","resolving","resolved",bT],B1="dispatchEvent",Tp;function $te(t){var e;return t&&t.createEvent&&(e=t.createEvent("Event")),!!e&&e.initEvent}function Gte(t,e,n,r){var o=ra();!Tp&&(Tp=Ao(!!Xn($te,[o]).v));var i=Tp.v?o.createEvent("Event"):r?new Event(e):{};if(n&&n(i),Tp.v&&i.initEvent(e,!1,!0),i&&t[B1])t[B1](i);else{var a=t["on"+e];if(a)a(i);else{var s=An("console");s&&(s.error||s.log)(e,Tt(i))}}}var O5="unhandledRejection",Kte=O5.toLowerCase(),H1=[],Wte=0,qte=10,qb;function V1(t){return Qt(t)?t.toString():Tt(t)}function N5(t,e,n){var r=qv(arguments,3),o=0,i=!1,a,s=[],c=Wte++,u=!1,d=null,h;function p(S,E){try{H1.push(c),u=!0,d&&d.cancel(),d=null;var I=t(function(x,A){s.push(function(){try{var N=o===2?S:E,R=Ht(N)?a:Qt(N)?N(a):N;wu(R)?R.then(x,A):N?x(R):o===3?A(R):x(R)}catch(z){A(z)}}),i&&_()},r);return I}finally{H1.pop()}}function g(S){return p(void 0,S)}function v(S){var E=S,I=S;return Qt(S)&&(E=function(x){return S&&S(),x},I=function(x){throw S&&S(),x}),p(E,I)}function y(){return P5[o]}function _(){if(s.length>0){var S=s.slice();s=[],u=!0,d&&d.cancel(),d=null,e(S)}}function b(S,E){return function(I){if(o===E){if(S===2&&wu(I)){o=1,I.then(b(2,1),b(3,1));return}o=S,i=!0,a=I,_(),!u&&S===3&&!d&&(d=gc(C,qte))}}}function C(){if(!u)if(u=!0,ate())process.emit(O5,a,h);else{var S=rs()||ed();!qb&&(qb=Ao(Xn(An,[Eg+"RejectionEvent"]).v)),Gte(S,Kte,function(E){return fn(E,"promise",{g:function(){return h}}),E.reason=a,E},!!qb.v)}}h={then:p,catch:g,finally:v},na(h,"state",{get:y}),cte()&&(h[sT(11)]="IPromise");function w(){return"IPromise "+y()+(i?" - "+V1(a):"")}return h.toString=w,function(){Qt(n)||Io(Eg+": executor is not a function - "+V1(n));var E=b(3,0);try{n.call(h,b(2,0),E)}catch(I){E(I)}}(),h}function Yte(t){return function(e){var n=qv(arguments,1);return t(function(r,o){try{var i=[],a=1;lT(e,function(s,c){s&&(a++,R5(s,function(u){i[c]=u,--a===0&&r(i)},o))}),a--,a===0&&r(i)}catch(s){o(s)}},n)}}function Qte(t){return Ao(function(e){var n=qv(arguments,1);return t(function(r,o){var i=[],a=1;function s(c,u){a++,Iu(c,function(d){d.rejected?i[u]={status:bT,reason:d.reason}:i[u]={status:"fulfilled",value:d.value},--a===0&&r(i)})}try{Ct(e)?qe(e,s):_5(e)?lT(e,s):Io("Input is not an iterable"),a--,a===0&&r(i)}catch(c){o(c)}},n)})}function M5(t){qe(t,function(e){try{e()}catch{}})}function Jte(t){var e=Ga(t)?t:0;return function(n){gc(function(){M5(n)},e)}}function L5(t,e){return N5(L5,Jte(e),t,e)}var Yb;function Xte(t,e){!Yb&&(Yb=Ao(Xn(An,[Eg]).v||null));var n=Yb.v;if(!n)return L5(t);Qt(t)||Io(Eg+": executor is not a function - "+Tt(t));var r=0;function o(){return P5[r]}var i=new n(function(a,s){function c(d){r=2,a(d)}function u(d){r=3,s(d)}t(c,u)});return na(i,"state",{get:o}),i}var Qb;function D5(t){return N5(D5,M5,t)}function Zte(t,e){return!Qb&&(Qb=Qte(D5)),Qb.v(t,e)}var Jb;function bc(t,e){return!Jb&&(Jb=Ao(Xte)),Jb.v.call(this,t,e)}var ene=Yte(bc),ni=void 0,Et="",Rs="channels",Mn="core",xS="createPerfMgr",RS="disabled",Yl="extensionConfig",Cl="extensions",Ci="processTelemetry",Tg="priority",cm="eventsSent",Ef="eventsDiscarded",lm="eventsSendRequest",Fs="perfEvent",Xb="offlineEventsStored",Zb="offlineBatchSent",e_="offlineBatchDrop",Ig="getPerfMgr",PS="domain",t_="path",tne="Not dynamic - ",nne=/-([a-z])/g,rne=/([^\w\d_$])/g,one=/^(\d+[\w\d_$])/;function Ag(t){return!Vt(t)}function OS(t){var e=t;return e&&or(e)&&(e=e[Js](nne,function(n,r){return r.toUpperCase()}),e=e[Js](rne,"_"),e=e[Js](one,function(n,r){return"_"+r})),e}function wr(t,e){return t&&e?Yv(t,e)!==-1:!1}function NS(t){return t&&t.toISOString()||""}function j5(t){return Hee(t)?t[Ys]:Et}function il(t,e,n,r,o){var i=n;return t&&(i=t[e],i!==n&&(!o||o(i))&&(!r||r(n))&&(i=n,t[e]=i)),i}function ine(t,e,n){var r;return t?(r=t[e],!r&&Vt(r)&&(r=Ht(n)?{}:n,t[e]=r)):r=Ht(n)?{}:n,r}function ane(t,e){var n=null,r=null;return Qt(t)?n=t:r=t,function(){var o=arguments;if(n&&(r=n()),r)return r[e][Qv](r,o)}}function kg(t,e,n,r,o){t&&e&&n&&(t[e]=ane(n,r))}function U5(t,e,n,r){return t&&e&&Su(t)&&Ct(n)&&qe(n,function(o){or(o)&&kg(t,o,e,o)}),t}function Sl(t){return t&&g1&&(t=ZE(g1({},t))),t}function Au(t){try{return t.responseText}catch{}return null}function sne(t,e){return t?"XDomainRequest,Response:"+Au(t)||"":e}function z1(t,e){return t?"XMLHttpRequest,Status:"+t[tf]+",Response:"+Au(t)||t.response||"":e}function $1(t,e){return e&&(Ga(e)?t=[e].concat(t):Ct(e)&&(t=e.concat(t))),t}var cne="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",G1="withCredentials",lne="timeout";function une(t,e,n,r,o,i){o===void 0&&(o=!1);function a(c,u,d){try{c[u]=d}catch{}}var s=new XMLHttpRequest;return a(s,cne,r),n&&a(s,G1,n),s.open(t,e,!o),n&&a(s,G1,n),!o&&i&&a(s,lne,i),s}function dne(t){var e={};if(or(t)){var n=Ar(t)[Jv](/[\r\n]+/);qe(n,function(r){if(r){var o=r.indexOf(": ");if(o!==-1){var i=Ar(r.substring(0,o))[vT](),a=Ar(r.substring(o+1));e[i]=a}else e[Ar(r)]=1}})}return e}function n_(t,e,n){if(!t[n]&&e&&e[N1]){var r=e[N1](n);r&&(t[n]=Ar(r))}return t}var fne="kill-duration",hne="kill-duration-seconds",pne="time-delta-millis";function um(t,e){var n={};return t[M1]?n=dne(t[M1]()):e&&(n=n_(n,t,pne),n=n_(n,t,fne),n=n_(n,t,hne)),n}var mne="location",gne="console",F5="JSON",vne="crypto",yne="msCrypto",bne="ReactNative",_ne="msie",Cne="trident/",B5="XMLHttpRequest",r_=null,o_=null,al=null,i_=null;function H5(t,e){var n=!1;if(t){try{if(n=e in t,!n){var r=t[Cf];r&&(n=e in r)}}catch{}if(!n)try{var o=new t;n=!Ht(o[e])}catch{}}return n}function Xv(t){return typeof location===JE&&location?location:An(mne)}function Sne(){return typeof console!==XE?console:An(gne)}function V5(){return!!(typeof JSON===JE&&JSON||An(F5)!==null)}function wne(){return V5()?JSON||An(F5):null}function Ene(){return An(vne)}function Tne(){return An(yne)}function MS(){var t=Ai();return t&&t.product?t.product===bne:!1}function LS(){var t=Ai();if(t&&(t[IS]!==o_||r_===null)){o_=t[IS];var e=(o_||Et)[vT]();r_=wr(e,_ne)||wr(e,Cne)}return r_}function z5(t){return(i_===null||t===!1)&&(i_=ite()&&!!Ai().sendBeacon),i_}function $5(t){var e=!1;try{e=!!An("fetch");var n=An("Request");e&&t&&n&&(e=H5(n,"keepalive"))}catch{}return e}function Ine(){return al===null&&(al=typeof XDomainRequest!==XE,al&&G5()&&(al=al&&!H5(An(B5),"withCredentials"))),al}function G5(){var t=!1;try{var e=An(B5);t=!!e}catch{}return t}var K5=4294967296,Xs=4294967295,W5=123456789,q5=987654321,Y5=!1,nf=W5,rf=q5;function Ane(t){t<0&&(t>>>=0),nf=W5+t&Xs,rf=q5-t&Xs,Y5=!0}function kne(){try{var t=Wa()&2147483647;Ane((Math.random()*K5^t)+t)}catch{}}function th(t){var e=0,n=Ene()||Tne();return n&&n.getRandomValues&&(e=n.getRandomValues(new Uint32Array(1))[0]&Xs),e===0&&LS()&&(Y5||kne(),e=xne()&Xs),e===0&&(e=Math.floor(K5*Math.random()|0)),t||(e>>>=0),e}function xne(t){rf=36969*(rf&65535)+(rf>>16)&Xs,nf=18e3*(nf&65535)+(nf>>16)&Xs;var e=(rf<<16)+(nf&65535)>>>0&Xs|0;return e>>>=0,e}function _T(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=th()>>>0,r=0,o=Et;o[ut]<t;)r++,o+=e.charAt(n&63),n>>>=6,r===5&&(n=(th()<<2&4294967295|n&3)>>>0,r=0);return o}var Q5="3.3.3",Rne="."+_T(6),Pne=0;function J5(t){return t[Gb]===1||t[Gb]===9||!+t[Gb]}function One(t,e){var n=e[t.id];if(!n){n={};try{J5(e)&&fn(e,t.id,{e:!1,v:n})}catch{}}return n}function nd(t,e){return e===void 0&&(e=!1),OS(t+Pne+++(e?"."+Q5:Et)+Rne)}function X5(t){var e={id:nd("_aiData-"+(t||Et)+"."+Q5),accept:function(n){return J5(n)},get:function(n,r,o,i){var a=n[e.id];return a?a[OS(r)]:(i&&(a=One(e,n),a[OS(r)]=o),o)},kill:function(n,r){if(n&&n[r])try{delete n[r]}catch{}}};return e}function dm(t){return t&&Su(t)&&(t.isVal||t.fb||Gl(t,"v")||Gl(t,"mrg")||Gl(t,"ref")||t.set)}function Z5(t,e,n){var r,o=n.dfVal||rT;if(e&&n.fb){var i=n.fb;Ct(i)||(i=[i]);for(var a=0;a<i[ut];a++){var s=i[a],c=e[s];if(o(c)?r=c:t&&(c=t.cfg[s],o(c)&&(r=c),t.set(t.cfg,Do(s),c)),o(r))break}}return!o(r)&&o(n.v)&&(r=n.v),r}function DS(t,e,n){var r=n;if(n&&dm(n)&&(r=Z5(t,e,n)),r){dm(r)&&(r=DS(t,e,r));var o;Ct(r)?(o=[],o[ut]=r[ut]):jo(r)&&(o={}),o&&(Jt(r,function(i,a){a&&dm(a)&&(a=DS(t,e,a)),o[i]=a}),r=o)}return r}function CT(t,e,n,r){var o,i,a,s=r,c,u,d,h;dm(s)?(o=s.isVal,i=s.set,d=s[vg],h=s[gg],c=s.mrg,u=s.ref,!u&&Ht(u)&&(u=!!c),a=Z5(t,e,s)):a=r,h&&t[gg](e,n);var p,g=!0,v=e[n];(v||!Vt(v))&&(p=v,g=!1,o&&p!==a&&!o(p)&&(p=a,g=!0),i&&(p=i(p,a,e),g=p===a)),g?a?p=DS(t,e,a):p=a:(jo(p)||Ct(a))&&c&&a&&(jo(a)||Ct(a))&&Jt(a,function(y,_){CT(t,p,y,_)}),t.set(e,n,p),u&&t.ref(e,n),d&&t[vg](e,n)}var Ya=cT("[[ai_dynCfg_1]]"),e3=cT("[[ai_blkDynCfg_1]]"),Nne=cT("[[ai_frcDynCfg_1]]");function t3(t){if(t){var e;if(Ct(t)?(e=[],e[ut]=t[ut]):jo(t)&&(e={}),e)return Jt(t,function(n,r){e[n]=t3(r)}),e}return t}function Mne(t){if(t){var e=t[Ya]||t;if(e.cfg&&(e.cfg===t||e.cfg[Ya]===e))return e}return null}function Lne(t){if(t&&(jo(t)||Ct(t)))try{t[e3]=!0}catch{}return t}function a_(t,e,n){var r=!1;return n&&!t[e.blkVal]&&(r=n[Nne],!r&&!n[e3]&&(r=jo(n)||Ct(n))),r}function n3(t){Io("InvalidAccess:"+t)}var Dne=["push","pop","shift","unshift","splice"],nh=function(t,e,n,r){t&&t[Fh](3,108,"".concat(n," [").concat(e,"] failed - ")+Tt(r))};function jne(t,e,n){Ct(e)&&qe(Dne,function(r){var o=e[r];e[r]=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=o[Qv](this,i);return Rg(t,e,n,"Patching"),s}})}function xg(t,e){var n=oT(t,e);return n&&n.get}function Une(t,e,n,r){var o={n,h:[],trk:function(u){u&&u.fn&&(Co(o.h,u)===-1&&o.h[Mt](u),t.trk(u,o))},clr:function(u){var d=Co(o.h,u);d!==-1&&o.h[Bh](d,1)}},i=!0,a=!1;function s(){i&&(a=a||a_(s,t,r),r&&!r[Ya]&&a&&(r=Rg(t,r,n,"Converting")),i=!1);var u=t.act;return u&&o.trk(u),r}s[t.prop]={chng:function(){t.add(o)}};function c(u){if(r!==u){s[t.ro]&&!t.upd&&n3("["+n+"] is read-only:"+Tt(e)),i&&(a=a||a_(s,t,r),i=!1);var d=a&&s[t.rf];if(a)if(d){Jt(r,function(p){r[p]=u?u[p]:ni});try{Jt(u,function(p,g){Zv(t,r,p,g)}),u=r}catch(p){nh((t.hdlr||{})[_n],n,"Assigning",p),a=!1}}else r&&r[Ya]&&Jt(r,function(p){var g=xg(r,p);if(g){var v=g[t.prop];v&&v.chng()}});if(u!==r){var h=u&&a_(s,t,u);!d&&h&&(u=Rg(t,u,n,"Converting")),r=u,a=h}t.add(o)}}fn(e,o.n,{g:s,s:c})}function Zv(t,e,n,r){if(e){var o=xg(e,n),i=o&&!!o[t.prop];i?e[n]=r:Une(t,e,n,r)}return e}function s_(t,e,n,r){if(e){var o=xg(e,n),i=o&&!!o[t.prop],a=r&&r[0],s=r&&r[1],c=r&&r[2];if(!i){if(c)try{Lne(e)}catch(u){nh((t.hdlr||{})[_n],n,"Blocking",u)}try{Zv(t,e,n,e[n]),o=xg(e,n)}catch(u){nh((t.hdlr||{})[_n],n,"State",u)}}a&&(o[t.rf]=a),s&&(o[t.ro]=s),c&&(o[t.blkVal]=!0)}return e}function Rg(t,e,n,r){try{Jt(e,function(o,i){Zv(t,e,o,i)}),e[Ya]||(na(e,Ya,{get:function(){return t[I5]}}),jne(t,e,n))}catch(o){nh((t.hdlr||{})[_n],n,r,o)}return e}var Dd="[[ai_",jd="]]";function Fne(t){var e,n=Nd(Dd+"get"+t.uid+jd),r=Nd(Dd+"ro"+t.uid+jd),o=Nd(Dd+"rf"+t.uid+jd),i=Nd(Dd+"blkVal"+t.uid+jd),a=Nd(Dd+"dtl"+t.uid+jd),s=null,c=null,u;function d(v,y){var _=u.act;try{u.act=v,v&&v[a]&&(qe(v[a],function(C){C.clr(v)}),v[a]=[]),y({cfg:t.cfg,set:t.set.bind(t),setDf:t[td].bind(t),ref:t.ref.bind(t),rdOnly:t[vg].bind(t)})}catch(C){var b=t[_n];throw b&&b[Fh](1,107,Tt(C)),C}finally{u.act=_||null}}function h(){if(s){var v=s;s=null,c&&c[Ol](),c=null;var y=[];if(qe(v,function(_){if(_&&(_[a]&&(qe(_[a],function(b){b.clr(_)}),_[a]=null),_.fn))try{d(_,_.fn)}catch(b){y[Mt](b)}}),s)try{h()}catch(_){y[Mt](_)}y[ut]>0&&zte("Watcher error(s): ",y)}}function p(v){if(v&&v.h[ut]>0){s||(s=[]),c||(c=gc(function(){c=null,h()},0));for(var y=0;y<v.h[ut];y++){var _=v.h[y];_&&Co(s,_)===-1&&s[Mt](_)}}}function g(v,y){if(v){var _=v[a]=v[a]||[];Co(_,y)===-1&&_[Mt](y)}}return u=(e={prop:n,ro:r,rf:o},e[gg]=i,e[I5]=t,e.add=p,e[yg]=h,e.use=d,e.trk=g,e),u}function Bne(t,e){var n={fn:e,rm:function(){n.fn=null,t=null,e=null}};return fn(n,"toJSON",{v:function(){return"WatcherHandler"+(n.fn?"":"[X]")}}),t.use(n,e),n}function Hne(t,e,n){var r,o=Mne(e);if(o)return o;var i=nd("dyncfg",!0),a=e&&n!==!1?e:t3(e),s;function c(){s[yg]()}function u(b,C,w){try{b=Zv(s,b,C,w)}catch(S){nh(t,C,"Setting value",S)}return b[C]}function d(b){return Bne(s,b)}function h(b,C){s.use(null,function(w){var S=s.upd;try{Ht(C)||(s.upd=C),b(w)}finally{s.upd=S}})}function p(b,C){var w;return s_(s,b,C,(w={},w[0]=!0,w))[C]}function g(b,C){var w;return s_(s,b,C,(w={},w[1]=!0,w))[C]}function v(b,C){var w;return s_(s,b,C,(w={},w[2]=!0,w))[C]}function y(b,C){return C&&Jt(C,function(w,S){CT(_,b,w,S)}),b}var _=(r={uid:null,cfg:a},r[_n]=t,r[yg]=c,r.set=u,r[td]=y,r[Va]=d,r.ref=p,r[vg]=g,r[gg]=v,r._block=h,r);return fn(_,"uid",{c:!1,e:!1,w:!1,v:i}),s=Fne(_),Rg(s,a,"config","Creating"),_}function Vne(t,e){t?(t[bg](e),t[Fh](2,108,e)):n3(e)}function eo(t,e,n,r){var o=Hne(n,t||{},r);return e&&o[td](o.cfg,e),o}function sr(t,e,n){var r=t[Ya]||t;return r.cfg&&(r.cfg===t||r.cfg[Ya]===r)?r[Va](e):(Vne(n,tne+Tt(t)),eo(t,null,n)[Va](e))}function of(t,e){if(t&&t[qa])return t[qa](e)}function r3(t,e,n){var r;return n||(r=bc(function(o){n=o})),t&&Ete(t)>0?Iu(of(t[0],e),function(){r3(qv(t,1),e,n)}):n(),r}var zne=500,K1="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function jS(t){return{mrg:!0,v:t}}function hs(t){return{isVal:or,v:Do(Et)}}var c_=[cm,Ef,lm,Fs],Pg=null,Ip;function $ne(t,e){return function(){var n=arguments,r=o3(e);if(r){var o=r.listener;o&&o[t]&&o[t][Qv](o,n)}}}function Gne(){var t=An("Microsoft");return t&&(Pg=t.ApplicationInsights),Pg}function o3(t){var e=Pg;return!e&&t.disableDbgExt!==!0&&(e=Pg||Gne()),e?e.ChromeDbgExt:null}function Kne(t){if(!Ip){Ip={};for(var e=0;e<c_[ut];e++)Ip[c_[e]]=$ne(c_[e],t)}return Ip}var sl,i3="warnToConsole",Wne="AI (Internal): ",qne="AI: ",Yne="AITR_",Qne={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Jne=(sl={},sl[0]=null,sl[1]="errorToConsole",sl[2]=i3,sl[3]="debugToConsole",sl);function W1(t){return t?'"'+t[Js](/\"/g,Et)+'"':Et}function l_(t,e){var n=Sne();if(n){var r="log";n[t]&&(r=t),Qt(n[r])&&n[r](e)}}var US=function(){function t(e,n,r,o){r===void 0&&(r=!1);var i=this;i[Sg]=e,i[Qs]=(r?qne:Wne)+e;var a=Et;V5()&&(a=wne().stringify(o));var s=(n?" message:"+W1(n):Et)+(o?" props:"+W1(a):Et);i[Qs]+=s}return t.dataType="MessageData",t}();function ST(t,e){return(t||{})[_n]||new Og(e)}var Og=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var n=0,r={},o,i,a,s,c;cn(t,this,function(u){c=h(e||{}),u.consoleLoggingLevel=function(){return o},u[Fh]=function(v,y,_,b,C){C===void 0&&(C=!1);var w=new US(y,_,C,b);if(s)throw Tt(w);var S=Jne[v]||i3;if(Ht(w[Qs]))g("throw"+(v===1?"Critical":"Warning"),w);else{if(C){var E=+w[Sg];!r[E]&&o>=v&&(u[S](w[Qs]),r[E]=!0)}else o>=v&&u[S](w[Qs]);d(v,w)}},u.debugToConsole=function(v){l_("debug",v),g("warning",v)},u[bg]=function(v){l_("warn",v),g("warning",v)},u.errorToConsole=function(v){l_("error",v),g("error",v)},u.resetInternalMessageCount=function(){n=0,r={}},u[Vte]=d,u[qa]=function(v){c&&c.rm(),c=null};function d(v,y){if(!p()){var _=!0,b=Yne+y[Sg];if(r[b]?_=!1:r[b]=!0,_&&(v<=i&&(u.queue[Mt](y),n++,g(v===1?"error":"warn",y)),n===a)){var C="Internal events throttle limit per PageView reached for this app.",w=new US(23,C,!1);u.queue[Mt](w),v===1?u.errorToConsole(C):u[bg](C)}}}function h(v){return sr(eo(v,Qne,u).cfg,function(y){var _=y.cfg;o=_[k5],i=_.loggingLevelTelemetry,a=_.maxMessageLimit,s=_.enableDebug})}function p(){return n>=a}function g(v,y){var _=o3(e||{});_&&_[Wi]&&_[Wi](v,y)}})}return t.__ieDyn=1,t}();function a3(t){return t||new Og}function Wt(t,e,n,r,o,i){i===void 0&&(i=!1),a3(t)[Fh](e,n,r,o,i)}function Tf(t,e){a3(t)[bg](e)}var u_,ps,q1="toGMTString",Y1="toUTCString",wT="cookie",d_="expires",Q1="isCookieUseDisabled",FS="disableCookiesUsage",Ml="_ckMgr",Ap=null,f_=null,J1=null,mi,X1={},Ng={},Xne=(u_={cookieCfg:jS((ps={},ps[PS]={fb:"cookieDomain",dfVal:Ag},ps.path={fb:"cookiePath",dfVal:Ag},ps.enabled=ni,ps.ignoreCookies=ni,ps.blockedCookies=ni,ps)),cookieDomain:ni,cookiePath:ni},u_[FS]=ni,u_);function ET(){!mi&&(mi=rte(function(){return ra()}))}function Zne(t,e){var n=fm[Ml]||Ng[Ml];return n||(n=fm[Ml]=fm(t,e),Ng[Ml]=n),n}function kp(t){return t?t.isEnabled():!0}function s3(t,e){return e&&t&&Ct(t.ignoreCookies)?Co(t.ignoreCookies,e)!==-1:!1}function ere(t,e){return e&&t&&Ct(t.blockedCookies)&&Co(t.blockedCookies,e)!==-1?!0:s3(t,e)}function Z1(t,e){var n=e[Nl];if(Vt(n)){var r=void 0;Ht(t[Q1])||(r=!t[Q1]),Ht(t[FS])||(r=!t[FS]),n=r}return n}function c3(t,e){var n;return t&&(n=t.getCookieMgr()),n||(n=Zne(e,(t||{})[_n])),n}function fm(t,e){var n,r,o,i,a,s,c,u,d;t=eo(t||Ng,null,e).cfg,a=sr(t,function(p){p[td](p.cfg,Xne),r=p.ref(p.cfg,"cookieCfg"),o=r[t_]||"/",i=r[PS],s=Z1(t,r)!==!1,c=r.getCookie||tre,u=r.setCookie||rx,d=r.delCookie||rx},e);var h=(n={isEnabled:function(){var p=Z1(t,r)!==!1&&s&&ex(e),g=Ng[Ml];return p&&g&&h!==g&&(p=kp(g)),p},setEnabled:function(p){s=p!==!1,r[Nl]=p},set:function(p,g,v,y,_){var b=!1;if(kp(h)&&!ere(r,p)){var C={},w=Ar(g||Et),S=Yv(w,";");if(S!==-1&&(w=Ar(iT(g,S)),C=l3(ai(g,S+1))),il(C,PS,y||i,m1,Ht),!Vt(v)){var E=LS();if(Ht(C[d_])){var I=Wa(),x=I+v*1e3;if(x>0){var A=new Date;A.setTime(x),il(C,d_,tx(A,E?q1:Y1)||tx(A,E?q1:Y1)||Et,m1)}}E||il(C,"max-age",Et+v,null,Ht)}var N=Xv();N&&N[x5]==="https:"&&(il(C,"secure",null,null,Ht),f_===null&&(f_=!nre((Ai()||{})[IS])),f_&&il(C,"SameSite","None",null,Ht)),il(C,t_,_||o,null,Ht),u(p,nx(w,C)),b=!0}return b},get:function(p){var g=Et;return kp(h)&&!s3(r,p)&&(g=c(p)),g},del:function(p,g){var v=!1;return kp(h)&&(v=h.purge(p,g)),v},purge:function(p,g){var v,y=!1;if(ex(e)){var _=(v={},v[t_]=g||"/",v[d_]="Thu, 01 Jan 1970 00:00:01 GMT",v);LS()||(_["max-age"]="0"),d(p,nx(Et,_)),y=!0}return y}},n[qa]=function(p){a&&a.rm(),a=null},n);return h[Ml]=h,h}function ex(t){if(Ap===null){Ap=!1,!mi&&ET();try{var e=mi.v||{};Ap=e[wT]!==void 0}catch(n){Wt(t,2,68,"Cannot access document.cookie - "+j5(n),{exception:Tt(n)})}}return Ap}function l3(t){var e={};if(t&&t[ut]){var n=Ar(t)[Jv](";");qe(n,function(r){if(r=Ar(r||Et),r){var o=Yv(r,"=");o===-1?e[r]=null:e[Ar(iT(r,o))]=Ar(ai(r,o+1))}})}return e}function tx(t,e){return Qt(t[e])?t[e]():null}function nx(t,e){var n=t||Et;return Jt(e,function(r,o){n+="; "+r+(Vt(o)?Et:"="+o)}),n}function tre(t){var e=Et;if(!mi&&ET(),mi.v){var n=mi.v[wT]||Et;J1!==n&&(X1=l3(n),J1=n),e=Ar(X1[t]||Et)}return e}function rx(t,e){!mi&&ET(),mi.v&&(mi.v[wT]=t+"="+e)}function nre(t){return or(t)?!!(wr(t,"CPU iPhone OS 12")||wr(t,"iPad; CPU OS 12")||wr(t,"Macintosh; Intel Mac OS X 10_14")&&wr(t,"Version/")&&wr(t,"Safari")||wr(t,"Macintosh; Intel Mac OS X 10_14")&&Ate(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||wr(t,"Chrome/5")||wr(t,"Chrome/6")||wr(t,"UnrealEngine")&&!wr(t,"Chrome")||wr(t,"UCBrowser/12")||wr(t,"UCBrowser/11")):!1}var rre={perfEvtsSendAll:!1};function ore(t){t.h=null;var e=t.cb;t.cb=[],qe(e,function(n){Xn(n.fn,[n.arg])})}function ya(t,e,n,r){qe(t,function(o){o&&o[e]&&(n?(n.cb[Mt]({fn:r,arg:o}),n.h=n.h||gc(ore,0,n)):Xn(r,[o]))})}var ire=function(){function t(e){this.listeners=[];var n,r,o=[],i={h:null,cb:[]},a=eo(e,rre);r=a[Va](function(s){n=!!s.cfg.perfEvtsSendAll}),cn(t,this,function(s){fn(s,"listeners",{g:function(){return o}}),s[Cg]=function(c){o[Mt](c)},s[_g]=function(c){for(var u=Co(o,c);u>-1;)o[Bh](u,1),u=Co(o,c)},s[cm]=function(c){ya(o,cm,i,function(u){u[cm](c)})},s[Ef]=function(c,u){ya(o,Ef,i,function(d){d[Ef](c,u)})},s[lm]=function(c,u){ya(o,lm,u?i:null,function(d){d[lm](c,u)})},s[Fs]=function(c){c&&(n||!c[AS]())&&ya(o,Fs,null,function(u){c[Tu]?gc(function(){return u[Fs](c)},0):u[Fs](c)})},s[Xb]=function(c){c&&c[ut]&&ya(o,Xb,i,function(u){u[Xb](c)})},s[Zb]=function(c){c&&c[_l]&&ya(o,Zb,i,function(u){u[Zb](c)})},s[e_]=function(c,u){if(c>0){var d=u||0;ya(o,e_,i,function(h){h[e_](c,d)})}},s[qa]=function(c){var u=function(){r&&r.rm(),r=null,o=[],i.h&&i.h[Ol](),i.h=null,i.cb=[]},d;if(ya(o,"unload",null,function(h){var p=h[qa](c);p&&(d||(d=[]),d[Mt](p))}),d)return bc(function(h){return Iu(ene(d),function(){u(),h()})});u()}})}return t.__ieDyn=1,t}(),Ql="ctx",BS="ParentContextKey",If="ChildrenContextKey",are=null,hm=function(){function t(e,n,r){var o=this;if(o.start=Wa(),o[Ys]=e,o[Tu]=r,o[AS]=function(){return!1},Qt(n)){var i;fn(o,"payload",{g:function(){return!i&&Qt(n)&&(i=n(),n=null),i}})}o[ql]=function(a){return a?a===t[BS]||a===t[If]?o[a]:(o[Ql]||{})[a]:null},o[Qo]=function(a,s){if(a)if(a===t[BS])o[a]||(o[AS]=function(){return!0}),o[a]=s;else if(a===t[If])o[a]=s;else{var c=o[Ql]=o[Ql]||{};c[a]=s}},o[kS]=function(){var a=0,s=o[ql](t[If]);if(Ct(s))for(var c=0;c<s[ut];c++){var u=s[c];u&&(a+=u[Wl])}o[Wl]=Wa()-o.start,o.exTime=o[Wl]-a,o[kS]=function(){}}}return t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t}(),sre=function(){function t(e){this.ctx={},cn(t,this,function(n){n.create=function(r,o,i){return new hm(r,o,i)},n.fire=function(r){r&&(r[kS](),e&&Qt(e[Fs])&&e[Fs](r))},n[Qo]=function(r,o){if(r){var i=n[Ql]=n[Ql]||{};i[r]=o}},n[ql]=function(r){return(n[Ql]||{})[r]}})}return t.__ieDyn=1,t}(),h_="CoreUtils.doPerf";function Ir(t,e,n,r,o){if(t){var i=t;if(i[Ig]&&(i=i[Ig]()),i){var a=void 0,s=i[ql](h_);try{if(a=i.create(e(),r,o),a){if(s&&a[Qo]&&(a[Qo](hm[BS],s),s[ql]&&s[Qo])){var c=s[ql](hm[If]);c||(c=[],s[Qo](hm[If],c)),c[Mt](a)}return i[Qo](h_,a),n(a)}}catch(u){a&&a[Qo]&&a[Qo]("exception",u)}finally{a&&i.fire(a),i[Qo](h_,s)}}}return n()}function cre(){return are}function u3(){var t=HS();return ai(t,0,8)+"-"+ai(t,8,12)+"-"+ai(t,12,16)+"-"+ai(t,16,20)+"-"+ai(t,20)}function HS(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e=Et,n,r=0;r<4;r++)n=th(),e+=t[n&15]+t[n>>4&15]+t[n>>8&15]+t[n>>12&15]+t[n>>16&15]+t[n>>20&15]+t[n>>24&15]+t[n>>28&15];var o=t[8+(th()&3)|0];return bl(e,0,8)+bl(e,9,4)+"4"+bl(e,13,3)+o+bl(e,16,3)+bl(e,19,12)}var lre="00000000000000000000000000000000",ure="0000000000000000";function d3(t,e,n){return t&&t[ut]===e&&t!==n?!!t.match(/^[\da-f]*$/i):!1}function f3(t){return d3(t,32,lre)}function h3(t){return d3(t,16,ure)}var dre=X5("plugin");function Zs(t){return dre.get(t,"state",{},!0)}function ox(t,e){for(var n=[],r=null,o=t[pi](),i;o;){var a=o[Xf]();if(a){r&&r[eh]&&a[Ci]&&r[eh](a),i=Zs(a);var s=!!i[fi];a[fi]&&(s=a[fi]()),s||n[Mt](a),r=a,o=o[pi]()}}qe(n,function(c){var u=t[Mn]();c[Hh](t.getCfg(),u,e,t[pi]()),i=Zs(c),!c[Mn]&&!i[Mn]&&(i[Mn]=u),i[fi]=!0,delete i[ji]})}function p_(t){return t.sort(function(e,n){var r=0;if(n){var o=n[Ci];e[Ci]?r=o?e[Tg]-n[Tg]:1:o&&(r=-1)}else r=e?1:-1;return r})}function fre(t){var e={};return{getName:function(){return e[Ys]},setName:function(n){e[Ys]=n},getTraceId:function(){return e[j1]},setTraceId:function(n){f3(n)&&(e[j1]=n)},getSpanId:function(){return e[U1]},setSpanId:function(n){h3(n)&&(e[U1]=n)},getTraceFlags:function(){return e[F1]},setTraceFlags:function(n){e[F1]=n}}}var hre="TelemetryPluginChain",ix="_hasRun",ax="_getTelCtx",sx=0;function pre(t,e,n){for(;t;){if(t[Xf]()===n)return t;t=t[pi]()}return Cc([n],e.config||{},e)}function TT(t,e,n,r){var o=null,i=[];e||(e=eo({},null,n[_n])),r!==null&&(o=r?pre(t,n,r):t);var a={_next:c,ctx:{core:function(){return n},diagLog:function(){return ST(n,e.cfg)},getCfg:function(){return e.cfg},getExtCfg:d,getConfig:h,hasNext:function(){return!!o},getNext:function(){return o},setNext:function(g){o=g},iterate:p,onComplete:s}};function s(g,v){for(var y=[],_=2;_<arguments.length;_++)y[_-2]=arguments[_];g&&i[Mt]({func:g,self:Ht(v)?a.ctx:v,args:y})}function c(){var g=o;if(o=g?g[pi]():null,!g){var v=i;v&&v[ut]>0&&(qe(v,function(y){try{y.func.call(y.self,y.args)}catch(_){Wt(n[_n],2,73,"Unexpected Exception during onComplete - "+Tt(_))}}),i=[])}return g}function u(g,v){var y=null,_=e.cfg;if(_&&g){var b=_[Yl];!b&&v&&(b={}),_[Yl]=b,b=e.ref(_,Yl),b&&(y=b[g],!y&&v&&(y={}),b[g]=y,y=e.ref(b,g))}return y}function d(g,v){var y=u(g,!0);return v&&Jt(v,function(_,b){if(Vt(y[_])){var C=e.cfg[_];(C||!Vt(C))&&(y[_]=C)}CT(e,y,_,b)}),e[td](y,v)}function h(g,v,y){y===void 0&&(y=!1);var _,b=u(g,!1),C=e.cfg;return b&&(b[v]||!Vt(b[v]))?_=b[v]:(C[v]||!Vt(C[v]))&&(_=C[v]),_||!Vt(_)?_:y}function p(g){for(var v;v=a._next();){var y=v[Xf]();y&&g(y)}}return a}function _c(t,e,n,r){var o=eo(e),i=TT(t,o,n,r),a=i.ctx;function s(u){var d=i._next();return d&&d[Ci](u,a),!d}function c(u,d){return u===void 0&&(u=null),Ct(u)&&(u=Cc(u,o.cfg,n,d)),_c(u||a[pi](),o.cfg,n,d)}return a[gr]=s,a[yc]=c,a}function Mg(t,e,n){var r=eo(e.config),o=TT(t,r,e,n),i=o.ctx;function a(c){var u=o._next();return u&&u[qa](i,c),!u}function s(c,u){return c===void 0&&(c=null),Ct(c)&&(c=Cc(c,r.cfg,e,u)),Mg(c||i[pi](),e,u)}return i[gr]=a,i[yc]=s,i}function IT(t,e,n){var r=eo(e.config),o=TT(t,r,e,n),i=o.ctx;function a(c){return i.iterate(function(u){Qt(u[Zf])&&u[Zf](i,c)})}function s(c,u){return c===void 0&&(c=null),Ct(c)&&(c=Cc(c,r.cfg,e,u)),IT(c||i[pi](),e,u)}return i[gr]=a,i[yc]=s,i}function Cc(t,e,n,r){var o=null,i=!r;if(Ct(t)&&t[ut]>0){var a=null;qe(t,function(s){if(!i&&r===s&&(i=!0),i&&s&&Qt(s[Ci])){var c=mre(s,e,n);o||(o=c),a&&a._setNext(c),a=c}})}return r&&!o?Cc([r],e,n):o}function mre(t,e,n){var r=null,o=Qt(t[Ci]),i=Qt(t[eh]),a;t?a=t[ka]+"-"+t[Tg]+"-"+sx++:a="Unknown-0-"+sx++;var s={getPlugin:function(){return t},getNext:function(){return r},processTelemetry:d,unload:h,update:p,_id:a,_setNext:function(g){r=g}};function c(){var g;return t&&Qt(t[ax])&&(g=t[ax]()),g||(g=_c(s,e,n)),g}function u(g,v,y,_,b){var C=!1,w=t?t[ka]:hre,S=g[ix];return S||(S=g[ix]={}),g.setNext(r),t&&Ir(g[Mn](),function(){return w+":"+y},function(){S[a]=!0;try{var E=r?r._id:Et;E&&(S[E]=!1),C=v(g)}catch(x){var I=r?S[r._id]:!0;I&&(C=!0),(!r||!I)&&Wt(g[Wi](),1,73,"Plugin ["+w+"] failed during "+y+" - "+Tt(x)+", run flags: "+Tt(S))}},_,b),C}function d(g,v){v=v||c();function y(_){if(!t||!o)return!1;var b=Zs(t);return b[ji]||b[RS]?!1:(i&&t[eh](r),t[Ci](g,_),!0)}u(v,y,"processTelemetry",function(){return{item:g}},!g.sync)||v[gr](g)}function h(g,v){function y(){var _=!1;if(t){var b=Zs(t),C=t[Mn]||b[Mn];t&&(!C||C===g.core())&&!b[ji]&&(b[Mn]=null,b[ji]=!0,b[fi]=!1,t[ji]&&t[ji](g,v)===!0&&(_=!0))}return _}u(g,y,"unload",function(){},v[Tu])||g[gr](v)}function p(g,v){function y(){var _=!1;if(t){var b=Zs(t),C=t[Mn]||b[Mn];t&&(!C||C===g.core())&&!b[ji]&&t[Zf]&&t[Zf](g,v)===!0&&(_=!0)}return _}u(g,y,"update",function(){},!1)||g[gr](v)}return mc(s)}function p3(){var t=[];function e(r){r&&t[Mt](r)}function n(r,o){qe(t,function(i){try{i(r,o)}catch(a){Wt(r[Wi](),2,73,"Unexpected error calling unload handler - "+Tt(a))}}),t=[]}return{add:e,run:n}}function m3(){var t=[];function e(r){var o=t;t=[],qe(o,function(i){try{(i.rm||i.remove).call(i)}catch(a){Wt(r,2,73,"Unloading:"+Tt(a))}})}function n(r){r&&Ma(t,r)}return{run:e,add:n}}var m_,ba="getPlugin",gre=(m_={},m_[Yl]={isVal:Ag,v:{}},m_),AT=function(){function t(){var e=this,n,r,o,i,a;u(),cn(t,e,function(d){d[Hh]=function(h,p,g,v){c(h,p,v),n=!0},d[ji]=function(h,p){var g,v=d[Mn];if(!v||h&&v!==h[Mn]())return;var y,_=!1,b=h||Mg(null,v,o&&o[ba]?o[ba]():o),C=p||(g={reason:0},g[Tu]=!1,g);function w(){_||(_=!0,i.run(b,p),a.run(b[Wi]()),y===!0&&b[gr](C),u())}return!d[wg]||d[wg](b,C,w)!==!0?w():y=!0,y},d[Zf]=function(h,p){var g=d[Mn];if(!g||h&&g!==h[Mn]())return;var v,y=!1,_=h||IT(null,g,o&&o[ba]?o[ba]():o),b=p||{reason:0};function C(){y||(y=!0,c(_.getCfg(),_.core(),_[pi]()))}return!d._doUpdate||d._doUpdate(_,b,C)!==!0?C():v=!0,v},kg(d,"_addUnloadCb",function(){return i},"add"),kg(d,"_addHook",function(){return a},"add"),fn(d,"_unloadHooks",{g:function(){return a}})}),e[Wi]=function(d){return s(d)[Wi]()},e[fi]=function(){return n},e.setInitialized=function(d){n=d},e[eh]=function(d){o=d},e[gr]=function(d,h){h?h[gr](d):o&&Qt(o[Ci])&&o[Ci](d,null)},e._getTelCtx=s;function s(d){d===void 0&&(d=null);var h=d;if(!h){var p=r||_c(null,{},e[Mn]);o&&o[ba]?h=p[yc](null,o[ba]):h=p[yc](null,o)}return h}function c(d,h,p){eo(d,gre,ST(h)),!p&&h&&(p=h[A5]()[pi]());var g=o;o&&o[ba]&&(g=o[ba]()),e[Mn]=h,r=_c(p,d,h,g)}function u(){n=!1,e[Mn]=null,r=null,o=null,a=m3(),i=p3()}}return t.__ieDyn=1,t}();function vre(t,e,n){var r={id:e,fn:n};Ma(t,r);var o={remove:function(){qe(t,function(i,a){if(i.id===r.id)return t[Bh](a,1),-1})}};return o}function yre(t,e,n){for(var r=!1,o=t[ut],i=0;i<o;++i){var a=t[i];if(a)try{if(a.fn[Qv](null,[e])===!1){r=!0;break}}catch(s){Wt(n,2,64,"Telemetry initializer failed: "+j5(s),{exception:Tt(s)},!0)}}return!r}var bre=function(t){Uh(e,t);function e(){var n=t.call(this)||this;n.identifier="TelemetryInitializerPlugin",n.priority=199;var r,o;i(),cn(e,n,function(a,s){a.addTelemetryInitializer=function(c){return vre(o,r++,c)},a[Ci]=function(c,u){yre(o,c,u?u[Wi]():a[Wi]())&&a[gr](c,u)},a[wg]=function(){i()}});function i(){r=0,o=[]}return n}return e.__ieDyn=1,e}(AT),_a,g3="Plugins must provide initialize method",_re="_notificationManager",cx="SDK is still unloading...",Cre="SDK is not initialized",Sre=100,wre=5e4,g_=Zu((_a={cookieCfg:{}},_a[Cl]={rdOnly:!0,ref:!0,v:[]},_a[Rs]={rdOnly:!0,ref:!0,v:[]},_a[Yl]={ref:!0,v:{}},_a[xS]=ni,_a.loggingLevelConsole=0,_a.diagnosticLogInterval=ni,_a));function Ere(t,e){return new sre(e)}function Tre(t,e,n){var r,o=[],i=[],a={};return qe(n,function(s){(Vt(s)||Vt(s[Hh]))&&uo(g3);var c=s[Tg],u=s[ka];s&&c&&(Vt(a[c])?a[c]=u:Tf(t,"Two extensions have same priority #"+c+" - "+a[c]+", "+u)),!c||c<e?o[Mt](s):i[Mt](s)}),r={},r[Mn]=o,r[Rs]=i,r}function lx(t,e){var n=!1;return qe(e,function(r){if(r===t)return n=!0,-1}),n}function VS(t,e,n,r){n&&Jt(n,function(o,i){r&&jo(i)&&jo(e[o])&&VS(t,e[o],i,r),r&&jo(i)&&jo(e[o])?VS(t,e[o],i,r):t.set(e,o,i)})}function ux(t,e){var n=null,r=-1;return qe(t,function(o,i){if(o.w===e)return n=o,r=i,-1}),{i:r,l:n}}function Ire(t,e){var n=ux(t,e).l;return n||(n={w:e,rm:function(){var r=ux(t,e);r.i!==-1&&t[Bh](r.i,1)}},t[Mt](n)),n}function Are(t,e,n){qe(e,function(r){var o=sr(t,r.w,n);delete r.w,r.rm=function(){o.rm()}})}function kre(t,e,n,r){return e.add(t[Va](function(o){var i=o.cfg.disableDbgExt;i===!0&&r&&(n[_g](r),r=null),n&&!r&&i!==!0&&(r=Kne(o.cfg),n[Cg](r))})),r}function xre(t){return fn({rm:function(){t.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(t)+">"}})}var Rre=function(){function t(){var e,n,r,o,i,a,s,c,u,d,h,p,g,v,y,_,b,C,w,S,E,I,x,A,N,R,z,P,X,M,k,U;cn(t,this,function(O){ne(),O._getDbgPlgTargets=function(){return[x,o]},O[fi]=function(){return n},O.activeStatus=function(){return R},O._setPendingStatus=function(){R=3},O[Hh]=function(D,ce,ge,te){g&&uo(cx),O[fi]()&&uo("Core cannot be initialized more than once"),e=eo(D,g_,ge||O[_n],!1),D=e.cfg,be(e[Va](function(Je){var at=Je.cfg,nt=R===3;if(!nt){P=at.initInMemoMaxSize||Sre;var Ue=at[x1],Ve=at.endpointUrl;if(Vt(Ue)){E=null,R=rl[$b];var bt="Please provide instrumentation key";n?(Wt(r,1,100,bt),K()):uo(bt);return}var Lt=[];if(wu(Ue)?(Lt[Mt](Ue),E=null):E=Ue,wu(Ve)?(Lt[Mt](Ve),z=null):z=Ve,Lt[ut]){X=!1,R=3;var Pt=Ag(at.initTimeOut)?at.initTimeOut:wre,zt=Zte(Lt);gc(function(){X||$()},Pt),Iu(zt,function(B){try{if(X)return;if(!B.rejected){var Q=B[wf];if(Q&&Q[ut]){var ee=Q[0];if(E=ee&&ee[wf],Q[ut]>1){var ye=Q[1];z=ye&&ye[wf]}}E&&(D[x1]=E,D.endpointUrl=z)}$()}catch{X||$()}})}else $();var $t=Je.ref(Je.cfg,Yl);Jt($t,function(B){Je.ref($t,B)})}})),i=te,w=kre(e,C,i&&O[wp](),w),j(),O[_n]=ge;var fe=D[Cl];if(d=[],d[Mt].apply(d,E1(E1([],ce,!1),fe)),h=D[Rs],Be(null),(!p||p[ut]===0)&&uo("No "+Rs+" available"),h&&h[ut]>1){var je=O[Xf]("TeeChannelController");(!je||!je.plugin)&&Wt(r,1,28,"TeeChannel required")}Are(D,I,r),I=null,n=!0,R===rl.ACTIVE&&K()},O.getChannels=function(){var D=[];return p&&qe(p,function(ce){D[Mt](ce)}),mc(D)},O.track=function(D){Ir(O[Ig](),function(){return"AppInsightsCore:track"},function(){D===null&&(re(D),uo("Invalid telemetry item")),!D[Ys]&&Vt(D[Ys])&&(re(D),uo("telemetry name required")),D[Md]=D[Md]||E,D[Wl]=D[Wl]||NS(new Date),D.ver=D.ver||"4.0",!g&&O[fi]()&&R===rl.ACTIVE?ve()[gr](D):R!==rl[$b]&&o[ut]<=P&&o[Mt](D)},function(){return{item:D}},!D.sync)},O[A5]=ve,O[wp]=function(){return i||(i=new ire(e.cfg),O[_re]=i),i},O[Cg]=function(D){O.getNotifyMgr()[Cg](D)},O[_g]=function(D){i&&i[_g](D)},O.getCookieMgr=function(){return c||(c=fm(e.cfg,O[_n])),c},O.setCookieMgr=function(D){c!==D&&(of(c,!1),c=D)},O[Ig]=function(){return a||s||cre()},O.setPerfMgr=function(D){a=D},O.eventCnt=function(){return o[ut]},O.releaseQueue=function(){if(n&&o[ut]>0){var D=o;o=[],R===2?qe(D,function(ce){ce[Md]=ce[Md]||E,ve()[gr](ce)}):Wt(r,2,20,"core init status is not active")}},O[R1]=function(D){return y=D||null,U=!1,M&&M[Ol](),J(!0)};function $(){X=!0,Vt(E)?(R=rl[$b],Wt(r,1,112,"ikey can't be resolved from promises")):R=rl.ACTIVE,K()}function K(){n&&(O.releaseQueue(),O[R1]())}function J(D){if((!M||!M[Nl])&&!U){var ce=D||r&&r.queue[ut]>0;ce&&(k||(k=!0,be(e[Va](function(ge){var te=ge.cfg.diagnosticLogInterval;(!te||!(te>0))&&(te=1e4);var fe=!1;M&&(fe=M[Nl],M[Ol]()),M=Nte(Ze,te),M.unref(),M[Nl]=fe}))),M[Nl]=!0)}return M}O[P1]=function(){U=!0,M&&M[Ol](),Ze()},U5(O,function(){return v},["addTelemetryInitializer"]),O[qa]=function(D,ce,ge){var te;D===void 0&&(D=!0),n||uo(Cre),g&&uo(cx);var fe=(te={reason:50},te[Tu]=D,te.flushComplete=!1,te),je;D&&!ce&&(je=bc(function(nt){ce=nt}));var Je=Mg(Pe(),O);Je[Ep](function(){C.run(O[_n]),r3([c,i,r],D,function(){ne(),ce&&ce(fe)})},O);function at(nt){fe.flushComplete=nt,g=!0,b.run(Je,fe),O[P1](),Je[gr](fe)}return Ze(),he(D,at,6,ge),je},O[Xf]=Te,O.addPlugin=function(D,ce,ge,te){if(!D){te&&te(!1),W(g3);return}var fe=Te(D[ka]);if(fe&&!ce){te&&te(!1),W("Plugin ["+D[ka]+"] is already loaded!");return}var je={reason:16};function Je(Ue){d[Mt](D),je.added=[D],Be(je),te&&te(!0)}if(fe){var at=[fe.plugin],nt={reason:2,isAsync:!!ge};He(at,nt,function(Ue){Ue?(je.removed=at,je.reason|=32,Je()):te&&te(!1)})}else Je()},O.updateCfg=function(D,ce){ce===void 0&&(ce=!0);var ge;if(O[fi]()){ge={reason:1,cfg:e.cfg,oldCfg:S1({},e.cfg),newConfig:S1({},D),merge:ce},D=ge.newConfig;var te=e.cfg;D[Cl]=te[Cl],D[Rs]=te[Rs]}e._block(function(fe){var je=fe.cfg;VS(fe,je,D,ce),ce||Jt(je,function(Je){Gl(D,Je)||fe.set(je,Je,ni)}),fe[td](je,g_)},!0),e[yg](),ge&&pe(ge)},O.evtNamespace=function(){return _},O.flush=he,O.getTraceCtx=function(D){return S||(S=fre()),S},O.setTraceCtx=function(D){S=D||null},O.addUnloadHook=be,kg(O,"addUnloadCb",function(){return b},"add"),O.onCfgChange=function(D){var ce;return n?ce=sr(e.cfg,D,O[_n]):ce=Ire(I,D),xre(ce)},O.getWParam=function(){return b5()||e.cfg.enableWParam?0:-1};function se(){var D={};A=[];var ce=function(ge){ge&&qe(ge,function(te){if(te[ka]&&te[O1]&&!D[te.identifier]){var fe=te[ka]+"="+te[O1];A[Mt](fe),D[te.identifier]=te}})};ce(p),h&&qe(h,function(ge){ce(ge)}),ce(d)}function ne(){n=!1,e=eo({},g_,O[_n]),e.cfg[k5]=1,fn(O,"config",{g:function(){return e.cfg},s:function(ce){O.updateCfg(ce,!1)}}),fn(O,"pluginVersionStringArr",{g:function(){return A||se(),A}}),fn(O,"pluginVersionString",{g:function(){return N||(A||se(),N=A.join(";")),N||Et}}),fn(O,"logger",{g:function(){return r||(r=new Og(e.cfg),e[_n]=r),r},s:function(ce){e[_n]=ce,r!==ce&&(of(r,!1),r=ce)}}),O[_n]=new Og(e.cfg),x=[];var D=O.config[Cl]||[];D.splice(0,D[ut]),Ma(D,x),v=new bre,o=[],of(i,!1),i=null,a=null,s=null,of(c,!1),c=null,u=null,d=[],h=null,p=null,g=!1,y=null,_=nd("AIBaseCore",!0),b=p3(),S=null,E=null,C=m3(),I=[],N=null,A=null,U=!1,M=null,k=!1,R=0,z=null,P=null,X=!1}function ve(){var D=_c(Pe(),e.cfg,O);return D[Ep](J),D}function Be(D){var ce=Tre(O[_n],zne,d);u=null,N=null,A=null,p=(h||[])[0]||[],p=p_(Ma(p,ce[Rs]));var ge=Ma(p_(ce[Mn]),p);x=mc(ge);var te=O.config[Cl]||[];te.splice(0,te[ut]),Ma(te,x);var fe=ve();p&&p[ut]>0&&ox(fe[yc](p),ge),ox(fe,ge),D&&pe(D)}function Te(D){var ce=null,ge=null,te=[];return qe(x,function(fe){if(fe[ka]===D&&fe!==v)return ge=fe,-1;fe.getChannel&&te[Mt](fe)}),!ge&&te[ut]>0&&qe(te,function(fe){if(ge=fe.getChannel(D),!ge)return-1}),ge&&(ce={plugin:ge,setEnabled:function(fe){Zs(ge)[RS]=!fe},isEnabled:function(){var fe=Zs(ge);return!fe[ji]&&!fe[RS]},remove:function(fe,je){var Je;fe===void 0&&(fe=!0);var at=[ge],nt=(Je={reason:1},Je[Tu]=fe,Je);He(at,nt,function(Ue){Ue&&Be({reason:32,removed:at}),je&&je(Ue)})}}),ce}function Pe(){if(!u){var D=(x||[]).slice();Co(D,v)===-1&&D[Mt](v),u=Cc(p_(D),e.cfg,O)}return u}function He(D,ce,ge){if(D&&D[ut]>0){var te=Cc(D,e.cfg,O),fe=Mg(te,O);fe[Ep](function(){var je=!1,Je=[];qe(d,function(nt,Ue){lx(nt,D)?je=!0:Je[Mt](nt)}),d=Je,N=null,A=null;var at=[];h&&(qe(h,function(nt,Ue){var Ve=[];qe(nt,function(bt){lx(bt,D)?je=!0:Ve[Mt](bt)}),at[Mt](Ve)}),h=at),ge&&ge(je),J()}),fe[gr](ce)}else ge(!1)}function Ze(){if(r&&r.queue){var D=r.queue.slice(0);r.queue[ut]=0,qe(D,function(ce){var ge,te=(ge={},ge[Ys]=y||"InternalMessageId: "+ce[Sg],ge[Md]=E,ge[Wl]=NS(new Date),ge.baseType=US.dataType,ge.baseData={message:ce[Qs]},ge);O.track(te)})}}function he(D,ce,ge,te){var fe=1,je=!1,Je=null;te=te||5e3;function at(){fe--,je&&fe===0&&(Je&&Je[Ol](),Je=null,ce&&ce(je),ce=null)}if(p&&p[ut]>0){var nt=ve()[yc](p);nt.iterate(function(Ue){if(Ue.flush){fe++;var Ve=!1;Ue.flush(D,function(){Ve=!0,at()},ge)||Ve||(D&&Je==null?Je=gc(function(){Je=null,at()},te):at())}})}return je=!0,at(),!0}function j(){var D;be(e[Va](function(ce){var ge=ce.cfg.enablePerfMgr;if(ge){var te=ce.cfg[xS];D!==te&&(te||(te=Ere),ine(ce.cfg,xS,te),D=te,s=null),!a&&!s&&Qt(te)&&(s=te(O,O[wp]()))}else s=null,D=null}))}function pe(D){var ce=IT(Pe(),O);ce[Ep](J),(!O._updateHook||O._updateHook(ce,D)!==!0)&&ce[gr](D)}function W(D){var ce=O[_n];ce?(Wt(ce,2,73,D),J()):uo(D)}function re(D){var ce=O[wp]();ce&&ce[Ef]([D],2)}function be(D){C.add(D)}})}return t.__ieDyn=1,t}(),Ko="",Pre="NoResponseBody",dx="&"+Pre+"=true",v_="POST",Ore=function(){function t(){var e=0,n,r,o,i,a,s,c,u,d,h,p,g,v,y;cn(t,this,function(_,b){var C=!0;X(),_[Hh]=function(M,k){o=k,r&&Wt(o,1,28,"Sender is already initialized"),_.SetConfig(M),r=!0},_._getDbgPlgTargets=function(){return[r,i,s,n]},_.SetConfig=function(M){try{if(a=M.senderOnCompleteCallBack||{},s=!!M.disableCredentials,c=M.fetchCredentials,i=!!M.isOneDs,n=!!M.enableSendPromise,d=!!M.disableXhr,h=!!M.disableBeacon,p=!!M.disableBeaconSync,y=M.timeWrapper,v=!!M.addNoResponse,g=!!M.disableFetchKeepAlive,u={sendPOST:R},i||(C=!1),s){var k=Xv();k&&k.protocol&&k.protocol[vT]()==="file:"&&(C=!1)}return!0}catch{}return!1},_.getSyncFetchPayload=function(){return e},_.getSenderInst=function(M,k){return M&&M[ut]?I(M,k):null},_.getFallbackInst=function(){return u},_[wg]=function(M,k){X()};function w(M,k){x(k,200,{},M)}function S(M,k){Wt(o,2,26,"Failed to send telemetry.",{message:M}),x(k,400,{})}function E(M){S("No endpoint url is provided for the batch",M)}function I(M,k){for(var U,O=0,$=null,K=0;$==null&&K<M[ut];)O=M[K],!d&&O===1?Ine()?$=P:G5()&&($=R):O===2&&$5(k)&&(!k||!g)?$=z:O===3&&z5()&&(k?!p:!h)&&($=N),K++;return $?(U={_transport:O,_isSync:k},U[L1]=$,U):null}function x(M,k,U,O){try{M&&M(k,U,O)}catch{}}function A(M,k){var U=Ai(),O=M[Ld];if(!O)return E(k),!0;O=M[Ld]+(v?dx:Ko);var $=M[_l],K=i?$:new Blob([$],{type:"text/plain;charset=UTF-8"}),J=U.sendBeacon(O,K);return J}function N(M,k,U){var O=M[_l];try{if(O)if(A(M,k))w(Ko,k);else{var $=a&&a.beaconOnRetry;$&&Qt($)?$(M,k,A):(u&&u[L1](M,k,!0),Wt(o,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(K){i&&Tf(o,"Failed to send telemetry using sendBeacon API. Ex:"+Tt(K)),x(k,i?0:400,{},Ko)}}function R(M,k,U){var O,$,K,J=M[Kb]||{};!U&&n&&(O=bc(function(Be,Te){$=Be,K=Te})),i&&U&&M.disableXhrSync&&(U=!1);var se=M[Ld];if(!se){E(k),$&&$(!1);return}var ne=une(v_,se,C,!0,U,M[ol]);i||ne[D1]("Content-type","application/json"),qe(Ki(J),function(Be){ne[D1](Be,J[Be])}),ne.onreadystatechange=function(){i||(ve(ne),ne.readyState===4&&$&&$(!0))},ne.onload=function(){i&&ve(ne)};function ve(Be){var Te=a&&a.xhrOnComplete,Pe=Te&&Qt(Te);if(Pe)Te(Be,k,M);else{var He=Au(Be);x(k,Be[tf],um(Be,i),He)}}return ne.onerror=function(Be){x(k,i?ne[tf]:400,um(ne,i),i?Ko:z1(ne)),K&&K(Be)},ne.ontimeout=function(){x(k,i?ne[tf]:500,um(ne,i),i?Ko:z1(ne)),$&&$(!1)},ne.send(M[_l]),O}function z(M,k,U){var O,$=M[Ld],K=M[_l],J=i?K:new Blob([K],{type:"application/json"}),se,ne,ve,Be=new Headers,Te=K[ut],Pe=!1,He=!1,Ze=M[Kb]||{},he=(O={method:v_,body:J},O[K1]=!0,O);M.headers&&Ki(M.headers)[ut]>0&&(qe(Ki(Ze),function(re){Be.append(re,Ze[re])}),he[Kb]=Be),c?he.credentials=c:C&&i&&(he.credentials="include"),U&&(he.keepalive=!0,e+=Te,i?M._sendReason===2&&(Pe=!0,v&&($+=dx)):Pe=!0);var j=new Request($,he);try{j[K1]=!0}catch{}if(!U&&n&&(se=bc(function(re,be){ne=re,ve=be})),!$){E(k),ne&&ne(!1);return}function pe(re){x(k,i?0:400,{},i?Ko:re)}function W(re,be,D){var ce=re[tf],ge=a.fetchOnComplete;ge&&Qt(ge)?ge(re,k,D||Ko,be):x(k,ce,{},D||Ko)}try{Iu(fetch(i?$:j,i?he:null),function(re){if(U&&(e-=Te,Te=0),!He)if(He=!0,re.rejected)pe(re.reason&&re.reason[Qs]),ve&&ve(re.reason);else{var be=re[wf];try{!i&&!be.ok?(pe(be.statusText),ne&&ne(!1)):i&&!be.body?(W(be,null,Ko),ne&&ne(!0)):Iu(be.text(),function(D){W(be,M,D[wf]),ne&&ne(!0)})}catch(D){pe(Tt(D)),ve&&ve(D)}}})}catch(re){He||(pe(Tt(re)),ve&&ve(re))}return Pe&&!He&&(He=!0,x(k,200,{}),ne&&ne(!0)),i&&!He&&M[ol]>0&&y&&y.set(function(){He||(He=!0,x(k,500,{}),ne&&ne(!0))},M[ol]),se}function P(M,k,U){var O=rs(),$=new XDomainRequest,K=M[_l];$.onload=function(){var Be=Au($),Te=a&&a.xdrOnComplete;Te&&Qt(Te)?Te($,k,M):x(k,200,{},Be)},$.onerror=function(){x(k,400,{},i?Ko:sne($))},$.ontimeout=function(){x(k,500,{})},$.onprogress=function(){};var J=O&&O.location&&O.location[x5]||"",se=M[Ld];if(!se){E(k);return}if(!i&&se.lastIndexOf(J,0)!==0){var ne="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Wt(o,2,40,". "+ne),S(ne,k);return}var ve=i?se:se[Js](/^(https?:)/,"");$.open(v_,ve),M[ol]&&($[ol]=M[ol]),$.send(K),i&&U?y&&y.set(function(){$.send(K)},0):$.send(K)}function X(){e=0,r=!1,n=!1,o=null,i=null,a=null,s=null,c=null,u=null,d=!1,h=!1,p=!1,g=!1,v=!1,y=null}})}return t.__ieDyn=1,t}(),v3="on",fx="attachEvent",hx="addEventListener",px="detachEvent",mx="removeEventListener",zS="events",rh="visibilitychange",ey="pagehide",y3="pageshow",b3="unload",_3="beforeunload",C3=nd("aiEvtPageHide"),S3=nd("aiEvtPageShow"),Nre=/\.[\.]+/g,Mre=/[\.]+$/,Lre=1,Lg=X5("events"),Dre=/^([^.]*)(?:\.(.+)|)/;function gx(t){return t&&t[Js]?t[Js](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Et):t}function kT(t,e){var n;if(e){var r=Et;Ct(e)?(r=Et,qe(e,function(i){i=gx(i),i&&(i[0]!=="."&&(i="."+i),r+=i)})):r=gx(e),r&&(r[0]!=="."&&(r="."+r),t=(t||Et)+r)}var o=Dre.exec(t||Et)||[];return n={},n[qi]=o[1],n.ns=(o[2]||Et).replace(Nre,".").replace(Mre,Et)[Jv](".").sort().join("."),n}function w3(t,e,n){n===void 0&&(n=!0);var r=Lg.get(t,zS,{},n),o=r[e];return o||(o=r[e]=[]),o}function E3(t,e,n,r){t&&e&&e[qi]&&(t[mx]?t[mx](e[qi],n,r):t[px]&&t[px](v3+e[qi],n))}function jre(t,e,n,r){var o=!1;return t&&e&&e[qi]&&n&&(t[hx]?(t[hx](e[qi],n,r),o=!0):t[fx]&&(t[fx](v3+e[qi],n),o=!0)),o}function vx(t,e,n,r){for(var o=e[ut];o--;){var i=e[o];i&&(!n.ns||n.ns===i.evtName.ns)&&(!r||r(i))&&(E3(t,i.evtName,i[yT],i.capture),e[Bh](o,1))}}function Ure(t,e,n){if(e[qi])vx(t,w3(t,e[qi]),e,n);else{var r=Lg.get(t,zS,{});Jt(r,function(o,i){vx(t,i,e,n)}),Ki(r)[ut]===0&&Lg.kill(t,zS)}}function Vh(t,e){var n;return e?(Ct(e)?n=[t].concat(e):n=[t,e],n=kT("xx",n).ns[Jv](".")):n=t,n}function y_(t,e,n,r,o){var i;o===void 0&&(o=!1);var a=!1;if(t)try{var s=kT(e,r);if(a=jre(t,s,n,o),a&&Lg.accept(t)){var c=(i={guid:Lre++,evtName:s},i[yT]=n,i.capture=o,i);w3(t,s.type)[Mt](c)}}catch{}return a}function b_(t,e,n,r,o){if(o===void 0&&(o=!1),t)try{var i=kT(e,r),a=!1;Ure(t,i,function(s){return i.ns&&!n||s[yT]===n?(a=!0,!0):!1}),a||E3(t,i,n,o)}catch{}}function Fre(t,e,n){var r=!1,o=rs();o&&(r=y_(o,t,e,n),r=y_(o.body,t,e,n)||r);var i=ra();return i&&(r=y_(i,t,e,n)||r),r}function Bre(t,e,n){var r=rs();r&&(b_(r,t,e,n),b_(r.body,t,e,n));var o=ra();o&&b_(o,t,e,n)}function ku(t,e,n,r){var o=!1;return e&&t&&t[ut]>0&&qe(t,function(i){i&&(!n||Co(n,i)===-1)&&(o=Fre(i,e,r)||o)}),o}function Hre(t,e,n,r){var o=!1;return e&&t&&Ct(t)&&(o=ku(t,e,n,r),!o&&n&&n[ut]>0&&(o=ku(t,e,null,r))),o}function oh(t,e,n){t&&Ct(t)&&qe(t,function(r){r&&Bre(r,e,n)})}function Vre(t,e,n){return Hre([_3,b3,ey],t,e,n)}function zre(t,e){oh([_3,b3,ey],t,e)}function T3(t,e,n){function r(a){var s=ra();t&&s&&s.visibilityState==="hidden"&&t(a)}var o=Vh(C3,n),i=ku([ey],t,e,o);return(!e||Co(e,rh)===-1)&&(i=ku([rh],r,e,o)||i),!i&&e&&(i=T3(t,null,n)),i}function $re(t,e){var n=Vh(C3,e);oh([ey],t,n),oh([rh],null,n)}function I3(t,e,n){function r(a){var s=ra();t&&s&&s.visibilityState==="visible"&&t(a)}var o=Vh(S3,n),i=ku([y3],t,e,o);return i=ku([rh],r,e,o)||i,!i&&e&&(i=I3(t,null,n)),i}function Gre(t,e){var n=Vh(S3,e);oh([y3],t,n),oh([rh],null,n)}var rd="",Kre="https://browser.events.data.microsoft.com/OneCollector/1.0/",yx="version",__="properties",bx="initialize",_x="logger",pm="indexOf",xa="timings",Cx="pollInternalLogs",so="value",Sx="kind",xT="length",C_="processTelemetryStart",Oi,Wre="4.3.3",A3="1DS-Web-JS-"+Wre,k3=Oee.hasOwnProperty,qre=(Oi={},Oi[0]=0,Oi[2]=6,Oi[1]=1,Oi[3]=7,Oi[4098]=6,Oi[4097]=1,Oi[4099]=7,Oi),S_=null;function Ra(t){return!(t===rd||Vt(t))}function Yre(t){if(t){var e=Yv(t,"-");if(e>-1)return iT(t,e)}return rd}function WTe(){return S_===null&&(S_=!Ht(Uint8Array)&&!eoe()&&!MS()),S_}function Qre(t){return!!(t&&Ga(t)&&t>=1&&t<=4)}function Jre(t,e,n){if(!e&&!Ra(e)||typeof t!="string")return null;var r=typeof e;if(r==="string"||r==="number"||r==="boolean"||Ct(e))e={value:e};else if(r==="object"&&!k3.call(e,"value"))e={value:n?JSON.stringify(e):e};else if(Vt(e[so])||e[so]===rd||!or(e[so])&&!Ga(e[so])&&!pc(e[so])&&!Ct(e[so]))return null;if(Ct(e[so])&&!toe(e[so]))return null;if(!Vt(e[Sx])){if(Ct(e[so])||!Xre(e[Sx]))return null;e[so]=e[so].toString()}return e}function x3(t,e,n){var r=-1;if(!Ht(t))if(e>0&&(e===32?r=8192:e<=13&&(r=e<<5)),Zre(n))r===-1&&(r=0),r|=n;else{var o=qre[GS(t)]||-1;r!==-1&&o!==-1?r|=o:o===6&&(r=o)}return r}function xu(t,e,n){n===void 0&&(n=!0);var r;return t&&(r=t.get(e),n&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||rd}function wx(t){t===void 0&&(t="D");var e=u3();return t==="B"?e="{"+e+"}":t==="P"?e="("+e+")":t==="N"&&(e=e.replace(/-/g,rd)),e}function Dg(t,e,n,r,o){var i={},a=!1,s=0,c=arguments[xT],u=arguments;for(pc(u[0])&&(a=u[0],s++);s<c;s++){var t=u[s];Jt(t,function(h,p){a&&p&&Su(p)?Ct(p)?(i[h]=i[h]||[],qe(p,function(g,v){g&&Su(g)?i[h][v]=Dg(!0,i[h][v],g):i[h][v]=g})):i[h]=Dg(!0,i[h],p):i[h]=p})}return i}var Jo=Ite;function Xre(t){return t===0||t>0&&t<=13||t===32}function Zre(t){return t>=0&&t<=9}function eoe(){var t=Ai();if(!Ht(t)&&t.userAgent){var e=t.userAgent.toLowerCase();if((e[pm]("safari")>=0||e[pm]("firefox")>=0)&&e[pm]("chrome")<0)return!0}return!1}function toe(t){return t[xT]>0}function $S(t,e){var n=t;n[xa]=n[xa]||{},n[xa][C_]=n[xa][C_]||{},n[xa][C_][e]=Jo()}function GS(t){var e=0;if(t!=null){var n=typeof t;n==="string"?e=1:n==="number"?e=2:n==="boolean"?e=3:n===JE&&(e=4,Ct(t)?(e=4096,t[xT]>0&&(e|=GS(t[0]))):k3.call(t,"value")&&(e=8192|GS(t[so])))}return e}function noe(){return!!An("chrome")}function Af(t){return t>0}var roe=Zu({endpointUrl:Kre,propertyStorageOverride:{isVal:ooe}});function ooe(t){return t&&(!t.getProperty||!t.setProperty)&&uo("Invalid property storage override passed."),!0}var ioe=function(t){Uh(e,t);function e(){var n=t.call(this)||this;return cn(e,n,function(r,o){r[bx]=function(i,a,s,c){Ir(r,function(){return"AppInsightsCore.initialize"},function(){try{o[bx](eo(i,roe,s||r[_x],!1).cfg,a,s,c)}catch(h){var u=r[_x],d=Tt(h);d[pm]("channels")!==-1&&(d+=`
 - Channels must be provided through config.channels only!`),Wt(u,1,514,"SDK Initialization Failed - no telemetry will be sent: "+d)}},function(){return{config:i,extensions:a,logger:s,notificationManager:c}})},r.track=function(i){Ir(r,function(){return"AppInsightsCore.track"},function(){var a=i;if(a){a[xa]=a[xa]||{},a[xa].trackStart=Jo(),Qre(a.latency)||(a.latency=1);var s=a.ext=a.ext||{};s.sdk=s.sdk||{},s.sdk.ver=A3;var c=a.baseData=a.baseData||{};c[__]=c[__]||{};var u=c[__];u[yx]=u[yx]||r.pluginVersionString||rd}o.track(a)},function(){return{item:i}},!i.sync)},r[Cx]=function(i){return o[Cx](i||"InternalLog")}}),n}return e.__ieDyn=1,e}(Rre),aoe="device",R3="locale",RT="ver",soe="browser",coe="browserVer",loe="popSample",uoe="eventFlags",PT="name",doe="serviceName",Fr=Nr({UserExt:[0,"user"],DeviceExt:[1,aoe],TraceExt:[2,"trace"],WebExt:[3,"web"],AppExt:[4,"app"],OSExt:[5,"os"],SdkExt:[6,"sdk"],IntWebExt:[7,"intweb"],UtcExt:[8,"utc"],LocExt:[9,"loc"],CloudExt:[10,"cloud"],DtExt:[11,"dt"]}),foe=Nr({id:[0,"id"],ver:[1,RT],appName:[2,PT],locale:[3,R3],expId:[4,"expId"],env:[5,"env"]}),hoe=Nr({domain:[0,"domain"],browser:[1,soe],browserVer:[2,coe],screenRes:[3,"screenRes"],userConsent:[4,"userConsent"],consentDetails:[5,"consentDetails"]}),poe=Nr({locale:[0,R3],localId:[1,"localId"],id:[2,"id"]}),moe=Nr({osName:[0,PT],ver:[1,RT]}),goe=Nr({ver:[0,RT],seq:[1,"seq"],installId:[2,"installId"],epoch:[3,"epoch"]}),voe=Nr({msfpc:[0,"msfpc"],anid:[1,"anid"],serviceName:[2,doe]}),yoe=Nr({popSample:[0,loe],eventFlags:[1,uoe]}),boe=Nr({tz:[0,"tz"]}),_oe=Nr({sessionId:[0,"sesId"]}),Coe=Nr({localId:[0,"localId"],deviceClass:[1,"deviceClass"],make:[2,"make"],model:[3,"model"]}),Soe=Nr({role:[0,"role"],roleInstance:[1,"roleInstance"],roleVer:[2,"roleVer"]}),woe=Nr({traceId:[0,"traceID"],traceName:[1,PT],parentId:[2,"parentID"]}),Eoe=Nr({traceId:[0,"traceId"],spanId:[1,"spanId"],traceFlags:[2,"traceFlags"]}),kf;function P3(){return kf===void 0&&(kf=!!N3(0)),kf}function O3(){return P3()?N3(0):null}function N3(t){var e=null,n,r;try{var o=ed();if(!o)return null;r=new Date,e=t===0?o.localStorage:o.sessionStorage,e&&Qt(e.setItem)&&(e.setItem(r,r),n=e.getItem(r)!==r,e.removeItem(r),n&&(e=null))}catch{e=null}return e}function Toe(t,e,n){var r=O3();if(r!==null)try{return r.setItem(e,n),!0}catch(o){kf=!1,Wt(t,1,504,"Browser failed write to local storage. "+o)}return!1}function Ioe(t,e){var n=O3();if(n!==null)try{return n.getItem(e)}catch(r){kf=!1,Wt(t,1,503,"Browser failed read of local storage. "+r)}return null}function Aoe(){return this.getId()}function koe(t){this.setId(t)}var M3=function(){function t(){cn(t,this,function(e){e.setId=function(n){e.customId=n},e.getId=function(){return or(e.customId)?e.customId:e.automaticId}})}return t._staticInit=function(){fn(t.prototype,"id",{g:Aoe,s:koe})}(),t}(),Ex="ai_session",xoe=function(){function t(e,n,r){var o,i=ST(e),a=c3(e),s,c;cn(t,this,function(u){var d=sr(n,function(){c=n,u.config=c});r&&r.add(d),s=function(){return u.config.namePrefix?Ex+u.config.namePrefix:Ex},u.automaticSession=new M3,u.update=function(){u.automaticSession.getId()||h();var _=u.automaticSession,b=u.config,C=new Date().getTime(),w=C-_.acquisitionDate>b.sessionExpirationMs,S=C-_.renewalDate>b.sessionRenewalMs;if(w||S)g();else{var E=o;(!E||C-E>t.cookieUpdateInterval)&&(_.renewalDate=C,v(_.getId(),_.acquisitionDate,_.renewalDate))}},u.backup=function(){var _=u.automaticSession;y(_.getId(),_.acquisitionDate,_.renewalDate)};function h(){var _=a.get(s());if(_&&Qt(_.split))p(_);else{var b=Ioe(i,s());b&&p(b)}u.automaticSession.getId()||g()}function p(_){var b=u.automaticSession,C=_.split("|");C.length>0&&b.setId(C[0]);try{if(C.length>1){var w=+C[1];b.acquisitionDate=+new Date(w),b.acquisitionDate=b.acquisitionDate>0?b.acquisitionDate:0}if(C.length>2){var S=+C[2];b.renewalDate=+new Date(S),b.renewalDate=b.renewalDate>0?b.renewalDate:0}}catch(E){Wt(i,1,510,"Error parsing ai_session cookie, session will be reset: "+E)}b.renewalDate===0&&Wt(i,2,517,"AI session renewal date is 0, session will be reset.")}function g(){var _=u.automaticSession,b=new Date().getTime(),C=u.config.sessionAsGuid;!Ht(C)&&C?pc(C)?_.setId(wx()):_.setId(wx(C)):_.setId(_T(c.idLength||22)),_.acquisitionDate=b,_.renewalDate=b,v(_.getId(),_.acquisitionDate,_.renewalDate),P3()||Wt(i,2,505,"Browser does not support local storage. Session durations will be inaccurate.")}function v(_,b,C){var w=b+u.config.sessionExpirationMs,S=C+u.config.sessionRenewalMs,E=new Date,I=[_,b,C];w<S?E.setTime(w):E.setTime(S);var x=u.config.cookieDomain||null;a.set(s(),I.join("|")+";expires="+E.toUTCString(),null,x),o=new Date().getTime()}function y(_,b,C){Toe(i,s(),[_,b,C].join("|"))}})}return t.cookieUpdateInterval=6e4,t}(),OT=["AX","EX","SF","CS","CF","CT","CU","DC","DF","H5","HL","WS","WP"];function Tx(t,e){e===void 0&&(e=OT);var n=null;if(t)for(var r=t.split(","),o=0;o<r.length;o++)Roe(r[o],e)&&(n?n+=","+r[o]:n=r[o]);return n}function Roe(t,e){if(e===void 0&&(e=OT),!t||t.length<4)return!1;for(var n=!1,r=256,o=t.substring(0,3).toString().toUpperCase(),i=0;i<e.length;i++)if(e[i]+":"===o&&t.length<=r){n=!0;break}return n}function Poe(){return this.getExpId()}var Ooe=function(){function t(e,n,r){var o=null,i=OT.slice(0),a="Treatments",s,c=null;cn(t,this,function(u){if(y(e),b5()){var d=ra().documentElement;d&&(u.locale=d.lang)}u.getExpId=function(){return c.expId?v(c.expId):g()};function h(_){var b,C={},w=ra();if(w){b=w&&w.querySelectorAll("meta");for(var S=0;S<b.length;S++){var E=b[S];if(E.name){var I=E.name.toLowerCase();if(I.indexOf(_)===0){var x=E.name.replace(_,"");C[x]=E.content}}}}return C}function p(_){_!==o&&(o=Tx(_,i))}function g(){var _=xu(s,a);return p(_),o}function v(_){return p(_),o}function y(_){var b=sr(_,function(){s=n&&n.getCookieMgr(),c=_||{},u.env=c.env||h("awa-").env});r&&r.add(b)}})}return t.validateAppExpId=Tx,t._staticInit=function(){fn(t.prototype,"expId",{g:Poe})}(),t}(),Noe=function(){function t(){}return t}(),Moe=function(){function t(){}return t}();function Loe(){return this.getMsfpc()}function Doe(){return this.getAnid()}var joe=function(){function t(e,n,r){var o;cn(t,this,function(i){a(e),i.getMsfpc=function(){return xu(o,"MSFPC")},i.getAnid=function(){return xu(o,"ANON").slice(0,34)};function a(s){var c=sr(s,function(){o=n&&n.getCookieMgr();var u=s||{};u.serviceName&&(i.serviceName=u.serviceName)});r&&r.add(c)}})}return t._staticInit=function(){var e=t.prototype;fn(e,"msfpc",{g:Loe}),fn(e,"anid",{g:Doe})}(),t}(),Uoe=function(){function t(){var e=new Date().getTimezoneOffset(),n=e%60,r=(e-n)/60,o="+";r>0&&(o="-"),r=Math.abs(r),n=Math.abs(n),this.tz=o+(r<10?"0"+r:r.toString())+":"+(n<10?"0"+n:n.toString())}return t}(),Ca={WIN:/(windows|win32)/i,WINRT:/ arm;/i,WINPHONE:/windows\sphone\s\d+\.\d+/i,OSX:/(macintosh|mac os x)/i,IOS:/(ipad|iphone|ipod)(?=.*like mac os x)/i,LINUX:/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)/i,ANDROID:/android/i,CROS:/CrOS/i},Ix={"5.1":"XP","6.0":"Vista","6.1":"7","6.2":"8","6.3":"8.1","10.0":"10"},Foe="([\\d,.]+)",L3="([\\d,_,.]+)",od="Unknown",Ax=[{r:Ca.WINPHONE,os:"Windows Phone"},{r:Ca.WINRT,os:"Windows RT"},{r:Ca.WIN,os:"Windows"},{r:Ca.IOS,os:"iOS"},{r:Ca.ANDROID,os:"Android"},{r:Ca.LINUX,os:"Linux"},{r:Ca.CROS,os:"Chrome OS"},{s:"x11",os:"Unix"},{s:"blackberry",os:"BlackBerry"},{s:"symbian",os:"Symbian"},{s:"nokia",os:"Nokia"},{r:Ca.OSX,os:"Mac OS X"}];function Boe(t){for(var e=0;e<Ax.length;e++){var n=Ax[e];if(n.r&&t.match(n.r))return n.os;if(n.s&&t.indexOf(n.s)!==-1)return n.os}return od}function Hoe(t,e){return e==="Windows"?kx(t,"Windows NT"):e==="Android"?kx(t,e):e==="Mac OS X"?Voe(t):e==="iOS"?zoe(t):od}function kx(t,e){var n=t.match(new RegExp(e+" "+Foe));return n?Ix[n[1]]?Ix[n[1]]:n[1]:od}function Voe(t){var e=t.match(new RegExp("Mac OS X "+L3));if(e){var n=e[1].replace(/_/g,".");if(n){var r=D3(n);if(r){var o=n.split(r);return o[0]}else return n}}return od}function zoe(t){var e=t.match(new RegExp("OS "+L3));if(e){var n=e[1].replace(/_/g,".");if(n){var r=D3(n);if(r){var o=n.split(r);return o[0]}else return n}}return od}function D3(t){return t.indexOf(".")>-1?".":t.indexOf("_")>-1?"_":null}var $oe=function(){function t(e,n){var r=this,o,i=null,a=null,s=null,c=null,u=function(v){s=v},d=function(v){c=v},h=function(){return s||i},p=function(){return c||a},g=sr(e,function(){if(o=e||{},o.populateOperatingSystemInfo){var v=Ai()||{},y=e.userAgent||v.userAgent||"",_=(e.userAgentData||{}).platform||(v.userAgentData||{}).platform;if(y){var b=Boe(y.toLowerCase());i=b,a=Hoe(y,b)}(!i||i===od)&&or(_)&&(i=_)}});n&&n.add(g),fn(r,"name",{s:u,g:h}),fn(r,"ver",{s:d,g:p})}return t}(),w_="MicrosoftApplicationsTelemetryDeviceId";function Goe(t,e,n,r){e?e.setProperty(n,r):t.set(n,r,31536e3)}function Koe(t,e,n){return e?e.getProperty(n)||"":xu(t,n)}var Woe=function(){function t(e,n,r){var o=0,i;cn(t,this,function(a){a.seq=o,a.epoch=th(!1).toString(),a.getSequenceId=function(){return++o};var s=sr(e,function(c){i=n&&n.getCookieMgr();var u=c.cfg,d=u.propertyStorageOverride,h=i.isEnabled();if(h||d){var p=Koe(i,d,w_);p||(p=u3()),Goe(i,d,w_,p),a.installId=p}else i.purge(w_)});r&&r.add(s)})}return t.__ieDyn=1,t}(),qoe=function(){function t(e,n,r,o,i){var a=this;a.traceId=n||HS();var s=sr(e,function(){var c=e;if(c.enableDistributedTracing&&!r&&(r=HS().substring(0,16)),a.parentId=a.parentId||r,c.enableApplicationInsightsTrace&&!o){var u=Xv();u&&u.pathname&&(o=u.pathname)}a.name=a.name||o});i&&i.add(s)}return t}(),j3="setLocalId";function Yoe(){return this.getLocalId()}function Qoe(t){this[j3](t)}var Joe=function(){function t(e,n,r,o){var i,a,s;cn(t,this,function(c){if(h(n),typeof navigator<"u"){var u=navigator;c.locale=u.userLanguage||u.language}c.getLocalId=function(){return a||d()},c[j3]=function(p){a=p};function d(){if(!i.hashIdentifiers&&!i.dropIdentifiers){var p=xu(s,"MUID");p&&(a="t:"+p)}return a}function h(p){var g=sr(p,function(){if(s=r&&r.getCookieMgr(),i=p,a=null,s&&s.isEnabled()&&(d(),i.enableApplicationInsightsUser)){var v=xu(s,t.userCookieName);if(v){var y=v.split(t.cookieSeparator);y.length>0&&(c.id=y[0])}if(!c.id){c.id=_T(e&&!Ht(e.idLength)?e.idLength:22);var _=NS(new Date);c.accountAcquisitionDate=_;var b=[c.id,_],C=i.cookieDomain?i.cookieDomain:void 0;s.set(t.userCookieName,b.join(t.cookieSeparator),31536e3,C)}}});o&&o.add(g)}})}return t.cookieSeparator="|",t.userCookieName="ai_user",t._staticInit=function(){fn(t.prototype,"localId",{g:Yoe,s:Qoe})}(),t}(),Xoe=1048576,Zoe=2097152,eie=4194304,tie=function(){function t(e,n){var r=this;r.popSample=100;var o=sr(e,function(){r.eventFlags=0,e.hashIdentifiers&&(r.eventFlags=r.eventFlags|Xoe),e.dropIdentifiers&&(r.eventFlags=r.eventFlags|Zoe),e.scrubIpOnly&&(r.eventFlags=r.eventFlags|eie)});n&&n.add(o)}return t}(),xx=["Required","Analytics","SocialMedia","Advertising"],jg="([\\d,.]+)",U3="Unknown",F3="Edg/",B3="EdgiOS/",E_=[{ua:"OPR/",b:"Opera"},{ua:"PhantomJS",b:"PhantomJS"},{ua:"Edge",b:"Edge"},{ua:F3,b:"Edge"},{ua:B3,b:"Edge"},{ua:"Electron",b:"Electron"},{ua:"Chrome",b:"Chrome"},{ua:"Trident",b:"MSIE"},{ua:"MSIE ",b:"MSIE"},{ua:"Firefox",b:"Firefox"},{ua:"Safari",b:"Safari"},{ua:"SkypeShell",b:"SkypeShell"}],T_=[{br:"Microsoft Edge",b:"Edge"},{br:"Google Chrome",b:"Chrome"},{br:"Opera",b:"Opera"}];function KS(t,e){return e.indexOf(t)>-1}function nie(t,e){for(var n=0;n<e.length;n++)if(t==e[n].brand)return e[n].version;return null}function rie(t){if(t)for(var e=0;e<E_.length;e++){var n=E_[e].ua;if(KS(n,t))return E_[e].b}return U3}function oie(t,e){return e==="MSIE"?iie(t):aie(e,t)}function iie(t){var e=t.match(new RegExp("MSIE "+jg));if(e)return e[1];var n=t.match(new RegExp("rv:"+jg));if(n)return n[1]}function aie(t,e){t==="Safari"?t="Version":t==="Edge"&&(KS(F3,e)?t="Edg":KS(B3,e)&&(t="EdgiOS"));var n=e.match(new RegExp(t+"/"+jg));return n||t==="Opera"&&(n=e.match(new RegExp("OPR/"+jg)),n)?n[1]:U3}function sie(){var t={h:0,w:0},e=rs();return e&&e.screen&&(t.h=screen.height,t.w=screen.width),t}function cie(){return this.getUserConsent()}var lie=function(){function t(e,n,r){c3(n);var o=e||{},i=null,a=null,s=null,c=null,u=null,d=null,h=null;cn(t,this,function(p){x(e);var g=Xv();if(g){var v=g.hostname;v&&(p.domain=g.protocol==="file:"?"local":v)}var y=sie();p.screenRes=y.w+"X"+y.h,p.getUserConsent=function(){return!1},p.getUserConsentDetails=function(){var A=null;try{var N=o.callback;if(N&&N.userConsentDetails){var R=N.userConsentDetails();if(R){o.disableConsentDetailsSanitize?A=R:A={};for(var z=0;z<xx.length;z++){var P=xx[z];A[P]=R[P]||!1}}}return h!==null&&(A=A||{},A.GPC_DataSharingOptIn=!!h),A?JSON.stringify(A):null}catch{}};function _(A,N){if(Ct(N))try{for(var R=0;R<T_.length;R++){var z=nie(T_[R].br,N);if(z){u=T_[R].b,d=z;return}}}catch{}if(A){var P=rie(A);u=P,d=oie(A,P)}}function b(A){s=A}function C(A){c=A}function w(){return s||u}function S(){return c||d}var E=function(){return h},I=function(A){h=pc(A)?A:null,o.gpcDataSharingOptIn=h};function x(A){var N=sr(A,function(){if(o=A,o.populateBrowserInfo){var R=o.userAgent,z=(o.userAgentData||{}).brands;if(R!==i||z!==a){if(!R||!z||z.length===0){var P=Ai();P&&(R=R||P.userAgent||"",z=z||(P.userAgentData||{}).brands)}_(R,z),i=R,a=z}}h=pc(o.gpcDataSharingOptIn)?o.gpcDataSharingOptIn:null});r&&r.add(N)}f5(p,{userConsent:{g:p.getUserConsent},browser:{s:b,g:w},browserVer:{s:C,g:S},gpcDataSharingOptIn:{g:E,s:I}})})}return t._staticInit=function(){fn(t.prototype,"userConsent",{g:cie})}(),t}();function jr(t,e,n,r,o){var i=e.ext[Fr[t]];if(i)try{Jt(r,function(a,s){if(or(s)||Ga(s)||pc(s)){var c=i[n[a]];!o&&(c||or(c)||Ga(c)||pc(c))&&(s=c),i[n[a]]=s}})}catch{}return i}var uie=function(){function t(e,n,r,o){cn(t,this,function(i){i.app=new Ooe(n,r,o),i.cloud=new Noe,i.user=new Joe(e,n,r,o),i.os=new $oe(n,o),i.web=new lie(n,r,o);var a=new Woe(e,r,o),s=new joe(n,r,o),c=new tie(n,o);i.loc=new Uoe,i.device=new Moe;var u=new xoe(r,n,o);i.session=new M3;var d=void 0,h=die(new qoe(n,d,d,d,o),v()),p=!(n||{}).eventContainExtFields;function g(){var y=i.session;if(y&&or(y.customId))return y.customId;u.update();var _=u.automaticSession;if(_){var b=_.getId();b&&or(b)&&(y.automaticId=b)}return y.automaticId}i.getTraceCtx=function(){return h},i.getSessionId=g,i.applyApplicationContext=function(y){var _,b=i.app;jr(4,y,foe,(_={},_[0]=b.id,_[1]=b.ver,_[2]=b.name,_[3]=b.locale,_[4]=b.getExpId(),_[5]=b.env,_),p)},i.applyUserContext=function(y){var _,b=i.user;jr(0,y,poe,(_={},_[1]=b.getLocalId(),_[0]=b.locale,_[2]=b.id,_),p)},i.applyWebContext=function(y){var _,b=i.web;jr(3,y,hoe,(_={},_[0]=b.domain,_[1]=b.browser,_[2]=b.browserVer,_[3]=b.screenRes,_[5]=b.getUserConsentDetails(),_[4]=!1,_),p)},i.applyOsContext=function(y){var _,b=i.os;jr(5,y,moe,(_={},_[0]=b.name,_[1]=b.ver,_),p)},i.applySdkContext=function(y){var _;jr(6,y,goe,(_={},_[2]=a.installId,_[1]=a.getSequenceId(),_[3]=a.epoch,_),p)},i.applyIntWebContext=function(y){var _;jr(7,y,voe,(_={},_[0]=s.getMsfpc(),_[1]=s.getAnid(),_[2]=s.serviceName,_),p)},i.applyUtcContext=function(y){var _,b=(_={},_[0]=c.popSample,_);c.eventFlags>0&&(b[1]=c.eventFlags),jr(8,y,yoe,b,p)},i.applyLocContext=function(y){var _;jr(9,y,boe,(_={},_[0]=i.loc.tz,_),p)},i.applySessionContext=function(y){var _;jr(4,y,_oe,(_={},_[0]=g(),_),p)},i.applyDeviceContext=function(y){var _,b=i.device;jr(1,y,Coe,(_={},_[0]=b.localId,_[2]=b.make,_[3]=b.model,_[1]=b.deviceClass,_),p)},i.applyCloudContext=function(y){var _,b=i.cloud;jr(10,y,Soe,(_={},_[0]=b.role,_[1]=b.roleInstance,_[2]=b.roleVer,_),p)},i.applyAITraceContext=function(y){var _;if(n.enableApplicationInsightsTrace){var b=v();b&&jr(2,y,woe,(_={},_[0]=b.getTraceId(),_[1]=b.getName(),_[2]=b.getSpanId(),_),!1)}},i.applyDistributedTraceContext=function(y){var _,b=v();if(b){var C=(_={},_[0]=b.getTraceId(),_[1]=b.getSpanId(),_),w=b.getTraceFlags();Vt(w)||(C[2]=w),jr(11,y,Eoe,C,!1)}};function v(){var y=h;return r&&r.getTraceCtx&&(y=r.getTraceCtx(!1)||h),y}})}return t.__ieDyn=1,t}();function die(t,e){var n=t||{};return{getName:function(){return n.name},setName:function(r){e&&e.setName(r),n.name=r},getTraceId:function(){return n.traceId},setTraceId:function(r){e&&e.setTraceId(r),f3(r)&&(n.traceId=r)},getSpanId:function(){return n.parentId},setSpanId:function(r){e&&e.setSpanId(r),h3(r)&&(n.parentId=r)},getTraceFlags:function(){return n.traceFlags},setTraceFlags:function(r){e&&e.setTraceFlags(r),n.traceFlags=r}}}var xp,fie=[Fr[4],Fr[0],Fr[3],Fr[5],Fr[6],Fr[7],Fr[8],Fr[9],Fr[1],Fr[2],Fr[11],Fr[10]],hie=Zu({populateBrowserInfo:!1,populateOperatingSystemInfo:!1,userAgent:hs(),userAgentData:jS({brands:xp,mobile:xp,platform:xp}),userConsentCookieName:hs(),userConsented:!1,serviceName:hs(),env:hs(),expId:hs(),sessionRenewalMs:18e5,sessionExpirationMs:864e5,sessionAsGuid:null,cookieDomain:hs(),namePrefix:hs(),enableApplicationInsightsTrace:!1,enableApplicationInsightsUser:!1,hashIdentifiers:!1,dropIdentifiers:!1,scrubIpOnly:!1,callback:jS({userConsentDetails:null}),gpcDataSharingOptIn:xp,idLength:22,enableDistributedTracing:!1,eventContainExtFields:!1}),pie=function(t){Uh(e,t);function e(){var n=t.call(this)||this;n.identifier="SystemPropertiesCollector",n.priority=3,n.version="4.3.3";var r,o,i;return cn(e,n,function(a,s){c(),a.initialize=function(h,p,g){s.initialize(h,p,g),u(h)},a.processTelemetry=function(h,p){$S(h,a.identifier),p=a._getTelCtx(p);var g=h.ext=h.ext?h.ext:{};h.data=h.data?h.data:{},qe(fie,function(v){g[v]=g[v]||{}}),r&&(r.applyUtcContext(h),r.applyApplicationContext(h),r.applyUserContext(h),r.applyWebContext(h),r.applyOsContext(h),r.applySdkContext(h),r.applyIntWebContext(h),r.applyLocContext(h),r.applySessionContext(h),r.applyDeviceContext(h),i.enableApplicationInsightsTrace&&r.applyAITraceContext(h),i.enableDistributedTracing&&r.applyDistributedTraceContext(h),r.applyCloudContext(h)),qe(Ki(g),function(v){Ki(g[v]).length===0&&delete g[v]}),d(o,h.data),a.processNext(h,p)},a.getPropertiesContext=function(){return r},a.setProperty=function(h,p){o[h]=p},a._doTeardown=function(h,p){var g=(h||{}).core();if(g&&g.getTraceCtx&&r){var v=g.getTraceCtx(!1);v&&v===r.getTraceCtx()&&g.setTraceCtx(null)}c()},a._getDbgPlgTargets=function(){return[i]};function c(){r=null,o={}}function u(h){var p=a.identifier,g=a.core;a._addHook(sr(h,function(){var v=_c(null,h,g);i=v.getExtCfg(p,hie)})),r=new uie(h,i,g,a._unloadHooks),g&&g.setTraceCtx&&g.setTraceCtx(r.getTraceCtx())}function d(h,p){h&&Jt(h,function(g,v){p[g]||(p[g]=v)})}}),n}return e.__ieDyn=1,e}(AT),Rp="REAL_TIME",mie="NEAR_REAL_TIME",gie="BEST_EFFORT",Aa="",WS="drop",vie="send",Rx="requeue",yie="rspFail",bie="oth",Px="no-cache, no-store",qS="application/x-json-stream",Pp="cache-control",af="content-type",_ie="kill-tokens",Cie="kill-duration",Sie="time-delta-millis",YS="client-version",H3="client-id",QS="time-delta-to-apply-millis",JS="upload-time",XS="apikey",ZS="AuthMsaDeviceTicket",Ox="WebAuthToken",Nx="AuthXToken",wie="NoResponseBody",Ug="msfpc",Mx="trace",I_="user",e0="allowRequestSending",V3="firstRequestSent",z3="shouldAddClockSkewHeaders",$3="getClockSkewHeaderValue",t0="setClockSkew",vt="length",ec="concat",si="iKey",Nn="count",Bs="events",hr="push",Jl="split",ty="splice",n0="toLowerCase",wl="hdrs",r0="useHdrs",xf="initialize",G3="setTimeoutOverride",K3="clearTimeoutOverride",Eie="payloadPreprocessor",Lx="overrideEndpointUrl",Dx="avoidOptions",Tie="disableEventTimings",Iie="stringifyObjects",A_="enableCompoundKey",jx="disableXhrSync",Ux="disableFetchKeepAlive",Aie="addNoResponse",kie="excludeCsMetaData",Fx="useSendBeacon",Bx="fetchCredentials",Hx="alwaysUseXhrOverride",xie="unloadTransports",W3="serializeOfflineEvt",q3="getOfflineRequestDetails",k_="createPayload",o0="createOneDSPayload",Vx="payloadBlob",Wo="headers",Ud="_thePayload",zx="urlString",Er="batches",Ur="sendType",i0="addHeader",a0="canSendRequest",Fg="sendQueuedRequests",Y3="isCompletelyIdle",s0="setUnloading",Rie="isTenantKilled",mm="resume",Q3="sendSynchronousBatch",x_="_transport",Bg="getWParam",$x="isBeacon",Op="timings",R_="isTeardown",P_="isSync",gm="data",Pie="timeout",O_="_sendReason",J3="setKillSwitchTenants",X3="_backOffTransmission",Np="identifier",Oie="disableOptimizeObj",Nie="ignoreMc1Ms0CookieProcessing",Gx="eventsLimitInMem",Kx="autoFlushEventsLimit",Mie="disableAutoBatchFlushLimit",Lie="overrideInstrumentationKey",Die="disableTelemetry",N_="baseData",Mp="sendAttempt",ms="latency",cl="sync";function Z3(t){var e=(t.ext||{}).intweb;return e&&Ra(e[Ug])?e[Ug]:null}function Wx(t){for(var e=null,n=0;e===null&&n<t[vt];n++)e=Z3(t[n]);return e}var ih=function(){function t(e,n){var r=n?[][ec](n):[],o=this,i=Wx(r);o[si]=function(){return e},o.Msfpc=function(){return i||Aa},o[Nn]=function(){return r[vt]},o[Bs]=function(){return r},o.addEvent=function(a){return a?(r[hr](a),i||(i=Z3(a)),!0):!1},o[Jl]=function(a,s){var c;if(a<r[vt]){var u=r[vt]-a;Vt(s)||(u=s<u?s:u),c=r[ty](a,u),i=Wx(r)}return new t(e,c)}}return t.create=function(e,n){return new t(e,n)},t}(),jie=function(){function t(){var e=!0,n=!0,r=!0,o="use-collector-delta",i=!1;cn(t,this,function(a){a[e0]=function(){return e},a[V3]=function(){r&&(r=!1,i||(e=!1))},a[z3]=function(){return n},a[$3]=function(){return o},a[t0]=function(s){i||(s?(o=s,n=!0,i=!0):n=!1,e=!0)}})}return t.__ieDyn=1,t}(),Uie=1e3,Fie=function(){function t(){var e={};function n(r){var o=[];return r&&qe(r,function(i){o[hr](Ar(i))}),o}cn(t,this,function(r){r[J3]=function(o,i){if(o&&i)try{var a=n(o[Jl](","));if(i==="this-request-only")return a;for(var s=parseInt(i,10)*Uie,c=0;c<a[vt];++c)e[a[c]]=Wa()+s}catch{return[]}return[]},r[Rie]=function(o){var i=e,a=Ar(o);return i[a]!==void 0&&i[a]>Wa()?!0:(delete i[a],!1)}})}return t.__ieDyn=1,t}(),Bie=.8,Hie=1.2,qx=3e3,Vie=6e5;function zie(t){return!(t>=300&&t<500&&t!=429||t==501||t==505)}function ej(t){var e=0,n=qx*Bie,r=qx*Hie,o=Math.floor(Math.random()*(r-n))+n;return e=Math.pow(2,t)*o,Math.min(e,Vie)}var $ie=20,Gie=3984588,tj=65e3,nj=2e6,Kie=Math.min(nj,tj),Yx="metadata",Lp="f",Wie=/\./,qie=function(){function t(e,n,r,o,i,a){var s="data",c="baseData",u="ext",d=!!o,h=!0,p=n,g={},v=!!a,y=i||x3;cn(t,this,function(_){_.createPayload=function(w,S,E,I,x,A){return{apiKeys:[],payloadBlob:Aa,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:w,isTeardown:S,isSync:E,isBeacon:I,sendType:A,sendReason:x}},_.appendPayload=function(w,S,E){var I=w&&S&&!w.overflow;return I&&Ir(e,function(){return"Serializer:appendPayload"},function(){for(var x=S.events(),A=w.payloadBlob,N=w.numEvents,R=!1,z=[],P=[],X=w.isBeacon,M=X?tj:Gie,k=X?Kie:nj,U=0,O=0;U<x.length;){var $=x[U];if($){if(N>=E){w.overflow=S.split(U);break}var K=_.getEventBlob($);if(K&&K.length<=k){var J=K.length,se=A.length;if(se+J>M){w.overflow=S.split(U);break}A&&(A+=`
`),A+=K,O++,O>$ie&&(bl(A,0,1),O=0),R=!0,N++}else K?z.push($):P.push($),x.splice(U,1),U--}U++}if(z.length>0&&w.sizeExceed.push(ih.create(S.iKey(),z)),P.length>0&&w.failedEvts.push(ih.create(S.iKey(),P)),R){w.batches.push(S),w.payloadBlob=A,w.numEvents=N;var ne=S.iKey();Co(w.apiKeys,ne)===-1&&w.apiKeys.push(ne)}},function(){return{payload:w,theBatch:{iKey:S.iKey(),evts:S.events()},max:E}}),I},_.getEventBlob=function(w){try{return Ir(e,function(){return"Serializer.getEventBlob"},function(){var S={};S.name=w.name,S.time=w.time,S.ver=w.ver,S.iKey="o:"+Yre(w.iKey);var E={},I;v||(I=function(R,z,P){Yie(y,E,R,z,P)});var x=w[u];x&&(S[u]=E,Jt(x,function(R,z){var P=E[R]={};C(z,P,"ext."+R,!0,null,null,!0)}));var A=S[s]={};A.baseType=w.baseType;var N=A[c]={};return C(w.baseData,N,c,!1,[c],I,h),C(w.data,A,s,!1,[],I,h),JSON.stringify(S)},function(){return{item:w}})}catch{return null}};function b(w,S){var E=g[w];return E===void 0&&(w.length>=7&&(E=w1(w,"ext.metadata")||w1(w,"ext.web")),g[w]=E),E}function C(w,S,E,I,x,A,N){Jt(w,function(R,z){var P=null;if(z||Ra(z)){var X=E,M=R,k=x,U=S;if(d&&!I&&Wie.test(R)){var O=R.split("."),$=O.length;if($>1){k&&(k=k.slice());for(var K=0;K<$-1;K++){var J=O[K];U=U[J]=U[J]||{},X+="."+J,k&&k.push(J)}M=O[$-1]}}var se=I&&b(X);if(!se&&p&&p.handleField(X,M)?P=p.value(X,M,z,r):P=Jre(M,z,r),P){var ne=P.value;if(U[M]=ne,A&&A(k,M,P),typeof ne=="object"&&!Ct(ne)){var ve=k;ve&&(ve=ve.slice(),ve.push(M)),C(z,ne,X+"."+M,I,ve,A)}}}})}})}return t.__ieDyn=1,t}();function Yie(t,e,n,r,o){if(o&&e){var i=t(o.value,o.kind,o.propertyType);if(i>-1){var a=e[Yx];a||(a=e[Yx]={f:{}});var s=a[Lp];if(s||(s=a[Lp]={}),n)for(var c=0;c<n.length;c++){var u=n[c];s[u]||(s[u]={f:{}});var d=s[u][Lp];d||(d=s[u][Lp]={}),s=d}s=s[r]={},Ct(o.value)?s.a={t:i}:s.t=i}}}function Hg(t,e){return{set:function(n,r){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];return Ote([t,e],n,r,o)}}}var gs,M_="sendAttempt",Qie="&"+wie+"=true",Jie="?cors=true&"+af[n0]()+"="+qS,Xie=(gs={},gs[1]=Rx,gs[100]=Rx,gs[200]="sent",gs[8004]=WS,gs[8003]=WS,gs),c0={},l0={};function Uc(t,e,n){c0[t]=e,n!==!1&&(l0[e]=t)}Uc(ZS,ZS,!1);Uc(YS,YS);Uc(H3,"Client-Id");Uc(XS,XS);Uc(QS,QS);Uc(JS,JS);Uc(Nx,Nx);function Dp(t,e){var n=!1;if(t&&e){var r=Ki(t);if(r&&r[vt]>0)for(var o=e[n0](),i=0;i<r[vt];i++){var a=r[i];if(a&&_o(e,a)&&a[n0]()===o){n=!0;break}}}return n}function ll(t,e,n,r){e&&n&&n[vt]>0&&(r&&c0[e]?(t[wl][c0[e]]=n,t[r0]=!0):t.url+="&"+e+"="+n)}function Zie(t,e,n){for(var r=0;r<t[vt];r++)if(t[r].name===e){t[r].value=n;return}t[hr]({name:e,value:n})}function eae(t,e){for(var n=0;n<t[vt];n++)if(t[n].name===e){t[ty](n,1);return}}var tae=function(){function t(e,n,r,o){var i,a,s,c,u=!1,d,h,p,g,v,y,_,b,C,w,S,E,I,x,A,N,R,z,P,X,M,k,U,O,$,K,J,se;cn(t,this,function(ne){He();var ve=!0;ne[xf]=function(B,Q,ee){O||(v=Q,E=Q.getCookieMgr(),h=ee,p=h.diagLog(),Ma(X,sr(B,function(ye){var Ne,Ke=ye.cfg,xe=ye.cfg.extensionConfig[ee.identifier];$=Hg(xe[G3],xe[K3]),Ra(Ke.anonCookieName)?Zie(_,"anoncknm",Ke.anonCookieName):eae(_,"anoncknm"),M=xe[Eie],k=xe.payloadListener;var V=xe.httpXHROverride,oe=xe[Lx]?xe[Lx]:Ke.endpointUrl;i=oe+Jie,x=Ht(xe[Dx])?!0:!xe[Dx],S=!xe[Tie];var le=xe.valueSanitizer,me=xe[Iie],ke=!!Ke[A_];Ht(xe[A_])||(ke=!!xe[A_]),A=xe.xhrTimeout,N=!!xe[jx],R=!!xe[Ux],P=xe[Aie]!==!1,K=!!xe[kie],Q.getPlugin("LocalStorage")&&(R=!0),u=!MS(),w=new qie(v,le,me,ke,x3,K),Vt(xe[Fx])||(u=!!xe[Fx]),xe[Bx]&&(se=xe[Bx]);var Ye=Te();J?J.SetConfig(Ye):(J=new Ore,J[xf](Ye,p));var st=V,it=xe[Hx]?V:null,ht=xe[Hx]?V:null,en=[3,2];if(!V){y=!1;var At=[];MS()?(At=[2,1],en=[2,1,3]):At=[1,2,3],At=$1(At,xe.transports),V=Be(At,!1),V||Tf(p,"No available transport to send events"),st=Be(At,!0)}it||(en=$1(en,xe[xie]),it=Be(en,!0)),z=!y&&(u&&z5()||!R&&$5(!0)),g=(Ne={},Ne[0]=V,Ne[1]=st||Be([1,2,3],!0),Ne[2]=it||st||Be([1],!0),Ne[3]=ht||Be([2,3],!0)||st||Be([1],!0),Ne)})),O=!0)},ne.addResponseHandler=function(B){return U[hr](B),{rm:function(){var Q=U.indexOf(B);Q>=0&&U[ty](Q,1)}}},ne[W3]=function(B){try{if(w)return w.getEventBlob(B)}catch{}return Aa},ne[q3]=function(){try{var B=w&&w[k_](0,!1,!1,!1,1,0);return fe(B,x)}catch{}return null},ne[o0]=function(B,Q){try{var ee=[];qe(B,function(V){Q&&(V=Sl(V));var oe=ih.create(V[si],[V]);ee[hr](oe)});for(var ye=null;ee[vt]>0&&w;){var Ne=ee.shift();Ne&&Ne[Nn]()>0&&(ye=ye||w[k_](0,!1,!1,!1,1,0),w.appendPayload(ye,Ne,e))}var Ke=fe(ye,x),xe={data:ye[Vx],urlString:Ke.url,headers:Ke[wl],timeout:A,disableXhrSync:N,disableFetchKeepAlive:R};return x&&(Dp(xe[Wo],Pp)||(xe[Wo][Pp]=Px),Dp(xe[Wo],af)||(xe[Wo][af]=qS)),xe}catch{}return null};function Be(B,Q){try{return J&&J.getSenderInst(B,Q)}catch{}return null}ne._getDbgPlgTargets=function(){return[g[0],a,w,g,Te(),i]};function Te(){try{var B={xdrOnComplete:Pe,fetchOnComplete:Ze,xhrOnComplete:he,beaconOnRetry:pe},Q={enableSendPromise:!1,isOneDs:!0,disableCredentials:!ve,fetchCredentials:se,disableXhr:!1,disableBeacon:!u,disableBeaconSync:!u,disableFetchKeepAlive:R,timeWrapper:$,addNoResponse:P,senderOnCompleteCallBack:B};return Q}catch{}return null}function Pe(B,Q,ee){var ye=Au(B);j(Q,200,{},ye),Pt(ye)}function He(){var B;i=null,a=new Fie,s=!1,c=new jie,u=!1,d=0,h=null,p=null,g=null,v=null,y=!0,_=[],b={},C=[],w=null,S=!1,E=null,I=!1,x=!1,A=B,N=B,R=B,z=B,P=B,X=[],M=B,k=B,U=[],O=!1,$=Hg(),K=!1,J=null}function Ze(B,Q,ee,ye){var Ne=function(V,oe,le){j(Q,V,oe,le),Pt(le)},Ke={},xe=B[Wo];xe&&xe.forEach(function(V,oe){Ke[oe]=V}),Ne(B.status,Ke,ee||Aa)}function he(B,Q,ee){var ye=Au(B);j(Q,B.status,um(B,!0),ye),Pt(ye)}function j(B,Q,ee,ye){try{B(Q,ee,ye)}catch(Ne){Wt(p,2,518,Tt(Ne))}}function pe(B,Q,ee){var ye=B,Ne=200,Ke=ye[Ud],xe=B[zx]+(P?Qie:Aa);try{var V=Ai();if(Ke){var oe=!!v.getPlugin("LocalStorage"),le=[],me=[];qe(Ke[Er],function(ke){if(le&&ke&&ke[Nn]()>0)for(var Ye=ke[Bs](),st=0;st<Ye[vt];st++)if(V.sendBeacon(xe,w.getEventBlob(Ye[st])))me[hr](ke[st]);else{le[hr](ke[Jl](st));break}else le[hr](ke[Jl](0))}),me[vt]>0&&(Ke.sentEvts=me),oe||zt(le,8003,Ke[Ur],!0)}else Ne=0}catch(ke){Tf(p,"Failed to send telemetry using sendBeacon API. Ex:"+Tt(ke)),Ne=0}finally{j(Q,Ne,{},Aa)}}function W(B){return B===2||B===3}function re(B){return I&&W(B)&&(B=2),B}ne[i0]=function(B,Q){b[B]=Q},ne.removeHeader=function(B){delete b[B]},ne[a0]=function(){return be()&&c[e0]()},ne[Fg]=function(B,Q){Ht(B)&&(B=0),I&&(B=re(B),Q=2),ce(C,B,0)&&te(D(),0,!1,B,Q||0)},ne[Y3]=function(){return!s&&d===0&&C[vt]===0},ne[s0]=function(B){I=B},ne.addBatch=function(B){if(B&&B[Nn]()>0){if(a.isTenantKilled(B[si]()))return!1;C[hr](B)}return!0},ne.teardown=function(){C[vt]>0&&te(D(),0,!0,2,2),qe(X,function(B){B&&B.rm&&B.rm()}),X=[]},ne.pause=function(){s=!0},ne[mm]=function(){s=!1,ne[Fg](0,4)},ne[Q3]=function(B,Q,ee){B&&B[Nn]()>0&&(Vt(Q)&&(Q=1),I&&(Q=re(Q),ee=2),te([B],0,!1,Q,ee||0))};function be(){return!s&&d<n}function D(){var B=C;return C=[],B}function ce(B,Q,ee){var ye=!1;return B&&B[vt]>0&&!s&&g[Q]&&w&&(ye=Q!==0||be()&&(ee>0||c[e0]())),ye}function ge(B){var Q={};return B&&qe(B,function(ee,ye){Q[ye]={iKey:ee[si](),evts:ee[Bs]()}}),Q}function te(B,Q,ee,ye,Ne){if(!(!B||B[vt]===0)){if(s){zt(B,1,ye);return}ye=re(ye);try{var Ke=B,xe=ye!==0;Ir(v,function(){return"HttpManager:_sendBatches"},function(V){V&&(B=B.slice(0));for(var oe=[],le=null,me=Jo(),ke=g[ye]||(xe?g[1]:g[0]),Ye=ke&&ke[x_],st=z&&(I||W(ye)||Ye===3||ke._isSync&&Ye===2);ce(B,ye,Q);){var it=B.shift();it&&it[Nn]()>0&&(a.isTenantKilled(it[si]())?oe[hr](it):(le=le||w[k_](Q,ee,xe,st,Ne,ye),w.appendPayload(le,it,e)?le.overflow!==null&&(B=[le.overflow][ec](B),le.overflow=null,Je(le,me,Jo(),Ne),me=Jo(),le=null):(Je(le,me,Jo(),Ne),me=Jo(),B=[it][ec](B),le=null)))}le&&Je(le,me,Jo(),Ne),B[vt]>0&&(C=B[ec](C)),zt(oe,8004,ye)},function(){return{batches:ge(Ke),retryCount:Q,isTeardown:ee,isSynchronous:xe,sendReason:Ne,useSendBeacon:W(ye),sendType:ye}},!xe)}catch(V){Wt(p,2,48,"Unexpected Exception sending batch: "+Tt(V))}}}function fe(B,Q){var ee={url:i,hdrs:{},useHdrs:!1};Q?(ee[wl]=Dg(ee[wl],b),ee.useHdrs=Ki(ee.hdrs)[vt]>0):Jt(b,function(V,oe){l0[V]?ll(ee,l0[V],oe,!1):(ee[wl][V]=oe,ee[r0]=!0)}),ll(ee,H3,"NO_AUTH",Q),ll(ee,YS,A3,Q);var ye=Aa;qe(B.apiKeys,function(V){ye[vt]>0&&(ye+=","),ye+=V}),ll(ee,XS,ye,Q),ll(ee,JS,Wa().toString(),Q);var Ne=Lt(B);if(Ra(Ne)&&(ee.url+="&ext.intweb.msfpc="+Ne),c[z3]()&&ll(ee,QS,c[$3](),Q),v[Bg]){var Ke=v[Bg]();Ke>=0&&(ee.url+="&w="+Ke)}for(var xe=0;xe<_[vt];xe++)ee.url+="&"+_[xe].name+"="+_[xe].value;return ee}function je(B,Q,ee){B[Q]=B[Q]||{},B[Q][h.identifier]=ee}function Je(B,Q,ee,ye){if(B&&B.payloadBlob&&B.payloadBlob[vt]>0){var Ne=!!M,Ke=g[B.sendType];!W(B[Ur])&&B[$x]&&B.sendReason===2&&(Ke=g[2]||g[3]||Ke);var xe=x;(B.isBeacon||Ke[x_]===3)&&(xe=!1);var V=fe(B,xe);xe=xe||V[r0];var oe=Jo();Ir(v,function(){return"HttpManager:_doPayloadSend"},function(){for(var le=0;le<B.batches[vt];le++)for(var me=B[Er][le],ke=me[Bs](),Ye=0;Ye<ke[vt];Ye++){var st=ke[Ye];if(S){var it=st[Op]=st[Op]||{};je(it,"sendEventStart",oe),je(it,"serializationStart",Q),je(it,"serializationCompleted",ee)}st[M_]>0?st[M_]++:st[M_]=1}zt(B[Er],1e3+(ye||0),B[Ur],!0);var ht={data:B[Vx],urlString:V.url,headers:V[wl],_thePayload:B,_sendReason:ye,timeout:A,disableXhrSync:N,disableFetchKeepAlive:R};xe&&(Dp(ht[Wo],Pp)||(ht[Wo][Pp]=Px),Dp(ht[Wo],af)||(ht[Wo][af]=qS));var en=null;Ke&&(en=function(At){c[V3]();var oo=function(xi,Gc){nt(xi,Gc,B,ye)},ln=B[R_]||B[P_];try{Ke.sendPOST(At,oo,ln),k&&k(ht,At,ln,B[$x])}catch(xi){Tf(p,"Unexpected exception sending payload. Ex:"+Tt(xi)),j(oo,0,{})}}),Ir(v,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(en)if(B[Ur]===0&&d++,Ne&&!B.isBeacon&&Ke[x_]!==3){var At={data:ht[gm],urlString:ht[zx],headers:Dg({},ht[Wo]),timeout:ht[Pie],disableXhrSync:ht[jx],disableFetchKeepAlive:ht[Ux]},oo=!1;Ir(v,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{M(At,function(ln){oo=!0,!y&&!ln[Ud]&&(ln[Ud]=ln[Ud]||ht[Ud],ln[O_]=ln[O_]||ht[O_]),en(ln)},B.isSync||B[R_])}catch{oo||en(ht)}})}else en(ht)})},function(){return{thePayload:B,serializationStart:Q,serializationCompleted:ee,sendReason:ye}},B[P_])}B.sizeExceed&&B.sizeExceed[vt]>0&&zt(B.sizeExceed,8003,B[Ur]),B.failedEvts&&B.failedEvts[vt]>0&&zt(B.failedEvts,8002,B[Ur])}function at(B,Q){S&&qe(B,function(ee){var ye=ee[Op]=ee[Op]||{};je(ye,"sendEventCompleted",Q)})}function nt(B,Q,ee,ye){var Ne=9e3,Ke=null,xe=!1,V=!1;try{var oe=!0;if(typeof B!==XE){if(Q){c[t0](Q[Sie]);var le=Q[Cie]||Q["kill-duration-seconds"];qe(a[J3](Q[_ie],le),function(ke){qe(ee[Er],function(Ye){if(Ye[si]()===ke){Ke=Ke||[];var st=Ye[Jl](0);ee.numEvents-=st[Nn](),Ke[hr](st)}})})}if(B==200||B==204){Ne=200;return}(!zie(B)||ee.numEvents<=0)&&(oe=!1),Ne=9e3+B%1e3}if(oe){Ne=100;var me=ee.retryCnt;ee[Ur]===0&&(me<r?(xe=!0,bt(function(){ee[Ur]===0&&d--,te(ee[Er],me+1,ee[R_],I?2:ee[Ur],5)},I,ej(me))):(V=!0,I&&(Ne=8001)))}}finally{xe||(c[t0](),Ue(ee,Ne,ye,V)),zt(Ke,8004,ee[Ur])}}function Ue(B,Q,ee,ye){try{ye&&h[X3]();var Ne=B[Er];Q===200&&(Ne=B.sentEvts||B[Er],!ye&&!B[P_]&&h._clearBackOff(),Ve(Ne)),zt(Ne,Q,B[Ur],!0)}finally{B[Ur]===0&&(d--,ee!==5&&ne.sendQueuedRequests(B[Ur],ee))}}function Ve(B){if(S){var Q=Jo();qe(B,function(ee){ee&&ee[Nn]()>0&&at(ee[Bs](),Q)})}}function bt(B,Q,ee){Q?B():$.set(B,ee)}function Lt(B){for(var Q=0;Q<B.batches[vt];Q++){var ee=B[Er][Q].Msfpc();if(ee)return encodeURIComponent(ee)}return Aa}function Pt(B){var Q=U;try{for(var ee=0;ee<Q[vt];ee++)try{Q[ee](B)}catch(Ne){Wt(p,1,519,"Response handler failed: "+Ne)}if(B){var ye=JSON.parse(B);Ra(ye.webResult)&&Ra(ye.webResult[Ug])&&E.set("MSFPC",ye.webResult[Ug],365*86400)}}catch{}}function zt(B,Q,ee,ye){if(B&&B[vt]>0&&o){var Ne=o[$t(Q)];if(Ne){var Ke=ee!==0;Ir(v,function(){return"HttpManager:_sendBatchesNotification"},function(){bt(function(){try{Ne.call(o,B,Q,Ke,ee)}catch(xe){Wt(p,1,74,"send request notification failed: "+xe)}},ye||Ke,0)},function(){return{batches:ge(B),reason:Q,isSync:Ke,sendSync:ye,sendType:ee}},!Ke)}}}function $t(B){var Q=Xie[B];return Ra(Q)||(Q=bie,B>=9e3&&B<=9999?Q=yie:B>=8e3&&B<=8999?Q=WS:B>=1e3&&B<=1999&&(Q=vie)),Q}})}return t.__ieDyn=1,t}(),nae=.25,Qx=500,rae=20,rj=6,oj=2,oae=4,Jx=2,iae=1,u0=1e4,vs="eventsDiscarded",Xx="",Tn=void 0,aae=Zu({eventsLimitInMem:{isVal:Af,v:u0},immediateEventLimit:{isVal:Af,v:500},autoFlushEventsLimit:{isVal:Af,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:sae,v:Tn},overrideInstrumentationKey:Tn,overrideEndpointUrl:Tn,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:Tn,clearTimeoutOverride:Tn,payloadPreprocessor:Tn,payloadListener:Tn,disableEventTimings:Tn,valueSanitizer:Tn,stringifyObjects:Tn,enableCompoundKey:Tn,disableOptimizeObj:!1,fetchCredentials:Tn,transports:Tn,unloadTransports:Tn,useSendBeacon:Tn,disableFetchKeepAlive:Tn,avoidOptions:!1,xhrTimeout:Tn,disableXhrSync:Tn,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:Ga,v:rj},maxUnloadEventRetryAttempts:{isVal:Ga,v:oj},addNoResponse:Tn,excludeCsMetaData:Tn});function sae(t){return t&&t.sendPOST}var cae=function(t){Uh(e,t);function e(){var n=t.call(this)||this;n.identifier="PostChannel",n.priority=1011,n.version="4.3.3";var r,o=!1,i=[],a,s=!1,c=0,u,d=0,h,p={},g=Rp,v,y,_,b,C,w,S,E,I,x,A,N,R,z,P,X,M,k,U,O,$,K;return cn(e,n,function(J,se){re(),J._getDbgPlgTargets=function(){return[C,r]},J[xf]=function(V,oe,le){Ir(oe,function(){return"PostChannel:initialize"},function(){se[xf](V,oe,le),U=oe.getNotifyMgr();try{P=Vh(nd(J[Np]),oe.evtNamespace&&oe.evtNamespace()),J._addHook(sr(V,function(me){var ke=me.cfg,Ye=_c(null,ke,oe);r=Ye.getExtCfg(J[Np],aae),X=Hg(r[G3],r[K3]),A=!r[Oie]&&noe(),M=r[Nie],ve(oe),h=r[Gx],u=r.immediateEventLimit,S=r[Kx],R=r.maxEventRetryAttempts,z=r.maxUnloadEventRetryAttempts,k=r[Mie],wu(ke.endpointUrl)?J.pause():s&&J[mm](),xe(),$=r[Lie],K=!!r[Die],O&&ne();var st=ke.disablePageUnloadEvents||[];O=Vre(Pe,st,P),O=T3(Pe,st,P)||O,O=I3(He,ke.disablePageShowEvents,P)||O})),C[xf](V,J.core,J)}catch(me){throw J.setInitialized(!1),me}},function(){return{theConfig:V,core:oe,extensions:le}})},J.processTelemetry=function(V,oe){$S(V,J[Np]),oe=oe||J._getTelCtx(oe);var le=V;!K&&!o&&($&&(le[si]=$),he(le,!0),N?ce(2,2):W()),J.processNext(le,oe)},J.getOfflineSupport=function(){try{var V=C&&C[q3]();if(C)return{getUrl:function(){return V?V.url:null},serialize:Te,batch:Be,shouldProcess:function(oe){return!K},createPayload:function(oe){return null},createOneDSPayload:function(oe){if(C[o0])return C[o0](oe,A)}}}catch{}return null},J._doTeardown=function(V,oe){ce(2,2),o=!0,C.teardown(),ne(),re()};function ne(){zre(null,P),$re(null,P),Gre(null,P)}function ve(V){var oe=V[Bg];V[Bg]=function(){var le=0;return M&&(le=le|2),le|oe.call(V)}}function Be(V){var oe=Xx;return V&&V[vt]&&qe(V,function(le){oe&&(oe+=`
`),oe+=le}),oe}function Te(V){var oe=Xx;try{Ze(V),oe=C[W3](V)}catch{}return oe}function Pe(V){var oe=V||rs().event;oe.type!=="beforeunload"&&(N=!0,C[s0](N)),ce(2,2)}function He(V){N=!1,C[s0](N)}function Ze(V){V.ext&&V.ext[Mx]&&delete V.ext[Mx],V.ext&&V.ext[I_]&&V.ext[I_].id&&delete V.ext[I_].id,A&&(V.ext=Sl(V.ext),V[N_]&&(V[N_]=Sl(V[N_])),V[gm]&&(V[gm]=Sl(V[gm])))}function he(V,oe){if(V[Mp]||(V[Mp]=0),V[ms]||(V[ms]=1),Ze(V),V[cl]){if(_||s)V[ms]=3,V[cl]=!1;else if(C){A&&(V=Sl(V)),C[Q3](ih.create(V[si],[V]),V[cl]===!0?1:V[cl],3);return}}var le=V[ms],me=d,ke=h;le===4&&(me=c,ke=u);var Ye=!1;if(me<ke)Ye=!je(V,oe);else{var st=1,it=rae;le===4&&(st=4,it=1),Ye=!0,Je(V[si],V[ms],st,it)&&(Ye=!je(V,oe))}Ye&&$t(vs,[V],fs.QueueFull)}J.setEventQueueLimits=function(V,oe){r[Gx]=h=Af(V)?V:u0,r[Kx]=S=Af(oe)?oe:0,xe();var le=d>V;if(!le&&E>0)for(var me=1;!le&&me<=3;me++){var ke=w[me];ke&&ke[Er]&&qe(ke[Er],function(Ye){Ye&&Ye[Nn]()>=E&&(le=!0)})}fe(!0,le)},J.pause=function(){D(),s=!0,C&&C.pause()},J[mm]=function(){s=!1,C&&C[mm](),W()},J._loadTransmitProfiles=function(V){bt(),Jt(V,function(oe,le){var me=le[vt];if(me>=2){var ke=me>2?le[2]:0;if(le[ty](0,me-2),le[1]<0&&(le[0]=-1),le[1]>0&&le[0]>0){var Ye=le[0]/le[1];le[0]=Math.ceil(Ye)*le[1]}ke>=0&&le[1]>=0&&ke>le[1]&&(ke=le[1]),le[hr](ke),p[oe]=le}})},J.flush=function(V,oe,le){V===void 0&&(V=!0);var me;if(!s)if(le=le||1,V)oe||(me=bc(function(Ye){oe=Ye})),a==null?(D(),nt(1,0,le),a=be(function(){a=null,Ue(oe,le)},0)):i[hr](oe);else{var ke=D();j(1,1,le),oe&&oe(),ke&&W()}return me},J.setMsaAuthTicket=function(V){C[i0](ZS,V)},J.setAuthPluginHeader=function(V){C[i0](Ox,V)},J.removeAuthPluginHeader=function(){C.removeHeader(Ox)},J.hasEvents=pe,J._setTransmitProfile=function(V){g!==V&&p[V]!==void 0&&(D(),g=V,W())},U5(J,function(){return C},["addResponseHandler"]);function j(V,oe,le){var me=nt(V,oe,le);return C[Fg](oe,le),me}function pe(){return d>0}function W(){if(I>=0&&nt(I,0,x)&&C[Fg](0,x),c>0&&!y&&!s){var V=p[g][2];V>=0&&(y=be(function(){y=null,j(4,0,1),W()},V))}var oe=p[g][1];!v&&!a&&oe>=0&&!s&&(pe()?v=be(function(){v=null,j(b===0?3:1,0,1),b++,b%=2,W()},oe):b=0)}J[X3]=function(){_<oae&&(_++,D(),W())},J._clearBackOff=function(){_&&(_=0,D(),W())};function re(){r=null,o=!1,i=[],a=null,s=!1,c=0,u=500,d=0,h=u0,p={},g=Rp,v=null,y=null,_=0,b=0,w={},S=0,O=!1,E=0,I=-1,x=null,A=!0,N=!1,R=rj,z=oj,P=null,$=null,K=!1,X=Hg(),C=new tae(Qx,Jx,iae,{requeue:Pt,send:Q,sent:ee,drop:ye,rspFail:Ne,oth:Ke}),Lt(),ge(),xe()}function be(V,oe){oe===0&&_&&(oe=1);var le=1e3;return _&&(le=ej(_-1)),X.set(V,oe*le)}function D(){return v!==null?(v.cancel(),v=null,b=0,!0):!1}function ce(V,oe){D(),a&&(a.cancel(),a=null),s||j(1,V,oe)}function ge(){w[4]={batches:[],iKeyMap:{}},w[3]={batches:[],iKeyMap:{}},w[2]={batches:[],iKeyMap:{}},w[1]={batches:[],iKeyMap:{}}}function te(V,oe,le){var me=w[oe];me||(oe=1,me=w[oe]);var ke=me.iKeyMap[V];return!ke&&le&&(ke=ih.create(V),me.batches[hr](ke),me.iKeyMap[V]=ke),ke}function fe(V,oe){C[a0]()&&!_&&(S>0&&d>S&&(oe=!0),oe&&a==null&&J.flush(V,function(){},20))}function je(V,oe){A&&(V=Sl(V));var le=V[ms],me=te(V[si],le,!0);return me.addEvent(V)?(le!==4?(d++,oe&&V[Mp]===0&&fe(!V.sync,E>0&&me[Nn]()>=E)):c++,!0):!1}function Je(V,oe,le,me){for(;le<=oe;){var ke=te(V,oe,!0);if(ke&&ke[Nn]()>0){var Ye=ke[Jl](0,me),st=Ye[Nn]();if(st>0)return le===4?c-=st:d-=st,B(vs,[Ye],fs.QueueFull),!0}le++}return at(),!1}function at(){for(var V=0,oe=0,le=function(ke){var Ye=w[ke];Ye&&Ye[Er]&&qe(Ye[Er],function(st){ke===4?V+=st[Nn]():oe+=st[Nn]()})},me=1;me<=4;me++)le(me);d=oe,c=V}function nt(V,oe,le){var me=!1,ke=oe===0;return!ke||C[a0]()?Ir(J.core,function(){return"PostChannel._queueBatches"},function(){for(var Ye=[],st=4;st>=V;){var it=w[st];it&&it.batches&&it.batches[vt]>0&&(qe(it[Er],function(ht){C.addBatch(ht)?me=me||ht&&ht[Nn]()>0:Ye=Ye[ec](ht[Bs]()),st===4?c-=ht[Nn]():d-=ht[Nn]()}),it[Er]=[],it.iKeyMap={}),st--}Ye[vt]>0&&$t(vs,Ye,fs.KillSwitch),me&&I>=V&&(I=-1,x=0)},function(){return{latency:V,sendType:oe,sendReason:le}},!ke):(I=I>=0?Math.min(I,V):V,x=Math.max(x,le)),me}function Ue(V,oe){j(1,0,oe),at(),Ve(function(){V&&V(),i[vt]>0?a=be(function(){a=null,Ue(i.shift(),oe)},0):(a=null,W())})}function Ve(V){C[Y3]()?V():a=be(function(){a=null,Ve(V)},nae)}function bt(){D(),Lt(),g=Rp,W()}function Lt(){p={},p[Rp]=[2,1,0],p[mie]=[6,3,0],p[gie]=[18,9,0]}function Pt(V,oe){var le=[],me=R;N&&(me=z),qe(V,function(ke){ke&&ke[Nn]()>0&&qe(ke[Bs](),function(Ye){Ye&&(Ye[cl]&&(Ye[ms]=4,Ye[cl]=!1),Ye[Mp]<me?($S(Ye,J[Np]),he(Ye,!1)):le[hr](Ye))})}),le[vt]>0&&$t(vs,le,fs.NonRetryableStatus),N&&ce(2,2)}function zt(V,oe){var le=U||{},me=le[V];if(me)try{me.apply(le,oe)}catch(ke){Wt(J.diagLog(),1,74,V+" notification failed: "+ke)}}function $t(V,oe){for(var le=[],me=2;me<arguments.length;me++)le[me-2]=arguments[me];oe&&oe[vt]>0&&zt(V,[oe][ec](le))}function B(V,oe){for(var le=[],me=2;me<arguments.length;me++)le[me-2]=arguments[me];oe&&oe[vt]>0&&qe(oe,function(ke){ke&&ke[Nn]()>0&&zt(V,[ke.events()][ec](le))})}function Q(V,oe,le){V&&V[vt]>0&&zt("eventsSendRequest",[oe>=1e3&&oe<=1999?oe-1e3:0,le!==!0])}function ee(V,oe){B("eventsSent",V,oe),W()}function ye(V,oe){B(vs,V,oe>=8e3&&oe<=8999?oe-8e3:fs.Unknown)}function Ne(V){B(vs,V,fs.NonRetryableStatus),W()}function Ke(V,oe){B(vs,V,fs.Unknown),W()}function xe(){k?E=0:E=Math.max(Qx*(Jx+1),h/6)}}),n}return e.__ieDyn=1,e}(AT),lae=Zu({cookieCfg:{ref:!0,v:{}},extensions:{rdOnly:!0,ref:!0,v:[]},channels:{rdOnly:!0,ref:!0,v:[]},extensionConfig:{ref:!0,v:{}}}),ij=function(t){Uh(e,t);function e(){var n=t.call(this)||this,r,o;return cn(e,n,function(i,a){i.initialize=function(s,c){var u=n;Ir(n,function(){return"ApplicationInsights:initialize"},function(){s=eo(s,lae,u.logger,!1).cfg,r=new cae,o=new pie;var d=[o];c&&(d=d.concat(c)),s||uo("You must provide a config object!");var h=s.channels;if(h&&h.length>0){for(var p=!1,g=0;g<h[0].length;g++)if(h[0][g].identifier===r.identifier){p=!0;break}p||Ma(h[0],r)}else s.channels.push([r]);var v=s.extensionConfig;v[r.identifier]=v[r.identifier]||s&&s.channelConfiguration||{},v[o.identifier]=v[o.identifier]||s&&s.propertyConfiguration||{};try{a.initialize(s,d),u.isInitialized()&&f5(s,{channelConfiguration:{g:function(){return s.extensionConfig[r.identifier]}},propertyConfiguration:{g:function(){return s.extensionConfig[o.identifier]}}})}catch(y){Wt(u.logger,1,514,"Failed to initialize SDK."+Tt(y))}},function(){return{config:s,extensions:c}})},i.getPropertyManager=function(){return o},i.getPostChannel=function(){return r}}),n}return e.__ieDyn=1,e}(ioe);/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const uae="msal.request";/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const dae="faab4ead691e451eb230afc98a28e0f2-698cf73d-7930-426b-87d8-d36936f6912f-7401",fae="https://eu-mobile.events.data.microsoft.com/OneCollector/1.0/",Zx=`${uae}.mats-telemetry-profile-id`;class hae{constructor(e,n,r,o){this.logger=e,this.appName=r,this.appVersion=o,this.eventsToEmit=new Set(n),this.sessionId=dS();const i={instrumentationKey:dae,endpointUrl:fae,extensions:[],propertyConfiguration:{gpcDataSharingOptIn:!1},disableCookiesUsage:!0};this.appInsightsMATS=new ij,this.appInsightsMATS.initialize(i,[]),this.logger.verbose("MATSTelemetryReporter: Initialized");try{const a=new mS(Cn.LocalStorage),s=a.getItem(Zx);if(s!=null&&s.length)this.profileTelemetryId=s;else{const c=dS();this.profileTelemetryId=c,a.setItem(Zx,c)}}catch{e.warning("MATSTelemetryReporter: local storage is not available"),this.profileTelemetryId=""}}sendCustomEvent(e){if(!this.eventsToEmit.has(e.name)){this.logger.verbose(`MATSTelemetryReporter: Skipping telemetry for ${e.name}`,e.correlationId);return}const n={...e,appName:this.appName,appVersion:this.appVersion,libraryName:"MSAL-JS",profileTelemetryId:this.profileTelemetryId,sessionId:this.sessionId};delete n.context,delete n.errorStack;const r={name:"actionmsaljs".concat(e.name.toLowerCase()||""),data:n};this.logger.verbose(`MATSTelemetryReporter: Sending ${r.name} for tracking`),this.appInsightsMATS.track(r),e.name===dn.AcquireTokenPreRedirect&&this.appInsightsMATS.flush()}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const pae="d634483c08244c1ca09af2b2d952c92e-ab2bba03-2ba3-49d8-a82c-ef6da750d8ab-7725";function mae(t){return Math.random()<=t}class gae{constructor(e,n,r){this.synthetic=!1,this.redactionRatio=.1,this.logger=e,this.eventsToEmit=new Set(n);const o={instrumentationKey:pae,extensions:[],propertyConfiguration:{gpcDataSharingOptIn:!1},disableCookiesUsage:!0};this.appInsights=new ij,this.appInsights.initialize(o,[]),this.synthetic=r||!1,this.logger.verbose("PerformanceTelemetryReporter: Initialized")}sendCustomEvent(e){if(!this.eventsToEmit.has(e.name)){this.logger.verbose(`PerformanceTelemetryReporter: Skipping telemetry for ${e.name}`,e.correlationId);return}let n;!e.success||mae(this.redactionRatio)?(n={...e,appName:void 0,synthetic:this.synthetic},this.logger.verbose(`PerformanceTelemetryReporter: Sending ${n.name} for tracking`)):(n={name:e.name,eventId:e.eventId,correlationId:e.correlationId,requestId:e.requestId,success:e.success,status:e.status,fromCache:e.fromCache,startPageVisibility:e.startPageVisibility,endPageVisibility:e.endPageVisibility,authority:e.authority,durationMs:e.durationMs,startTimeMs:e.startTimeMs,clientId:e.clientId,libraryName:e.libraryName,libraryVersion:e.libraryVersion,accountType:e.accountType,synthetic:this.synthetic,isBroker:e.isBroker,isBackground:e.isBackground},this.logger.verbose(`PerformanceTelemetryReporter: Sending redacted ${n.name} for tracking`));const r={name:e.name,data:n};this.appInsights.track(r),e.name===dn.AcquireTokenPreRedirect&&this.appInsights.flush()}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const jp=new Set([dn.AcquireTokenSilent,dn.AcquireTokenByCode,dn.AcquireTokenPopup,dn.AcquireTokenRedirect,dn.AcquireTokenPreRedirect,dn.PairwiseBrokerApplicationInitializeBrokering,dn.SsoSilent,dn.EmbeddedClientApplicationSendSSOSilentRequest,dn.EmbeddedClientApplicationSendPopupRequest,dn.EmbeddedClientApplicationSendRedirectRequest,dn.EmbeddedClientApplicationHandleRedirectRequest,dn.EmbeddedClientApplicationSendSilentRefreshRequest]);class vae{constructor(e,n){var o;this.logger=e;const r=((o=n==null?void 0:n.eventsToEmit)==null?void 0:o.filter(i=>jp==null?void 0:jp.has(i)))||[...jp];this.matsTelemetryReporter=n!=null&&n.enableMATS?new hae(e,r,n==null?void 0:n.appName,n==null?void 0:n.appVersion):null,this.perfTelemetryReporter=new gae(e,r,n==null?void 0:n.synthetic)}sendCustomEvent(e){var n;this.perfTelemetryReporter.sendCustomEvent(e),(n=this.matsTelemetryReporter)==null||n.sendCustomEvent(e)}getTelemetryCallback(){this.logger.trace("TelemetryReporter: Attaching callback to send custom metrics.");const e=n=>{n.forEach(r=>{r.name===dn.AcquireTokenByBroker&&(r.name=r.brokerEventName||r.name,r.isBroker=!0,delete r.brokerEventName,this.logger.verbosePii(`TelemetryReporter: Updated broker event ${JSON.stringify(r)}`,r.correlationId)),this.sendCustomEvent(r)})};return this.logger.verbose("TelemetryReporter: Returning callback as telemetry emitted."),e}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const yae=[qf.AzurePublic,qf.AzurePpe];function bae(t){return t.auth.authority?yae.some(e=>{var n;return((n=t.auth.authority)==null?void 0:n.indexOf(e.toString()))===0}):!0}class NT extends Iee{constructor(e,n){var i;let r;const o=typeof window<"u";if(!(n!=null&&n.disabled)&&bae(e)&&o?(r=((i=e.telemetry)==null?void 0:i.client)||new kee(e,new Set(Ree),new Map(xee)),super({...e,telemetry:{...e.telemetry,client:r}})):(super(e),r=new pD),this.performanceClient=r,o){const a=new vae(this.getLogger(),n);this.addPerformanceCallback(a.getTelemetryCallback())}}static async createPublicClientApplication(e,n,r){const o=new NT(e,n);return await o.initialize({correlationId:r}),o}}class _ae{supportsNaa(){return!1}async instantiateMsal(){iL({apiName:Le.INITIALIZE_START,providerType:"microsoft"});const e=await NT.createPublicClientApplication(C7,w7);return aL({apiName:Le.INITIALIZE_END,providerType:"microsoft"}),e}async handleInteractionRequiredError(e,n){var r;fo(jn,null),fo(Hi,{reason:"token-expired",provider:"microsoft",loginHint:(r=n.account)==null?void 0:r.username})}}const Cae=new Mc(Sae);async function Sae(){return new _ae}const Tr=new Mc(wae);async function wae(){const t=await Cae.get(),e=await t.instantiateMsal(),n=new Map([["login",null],["graph",null],["oneDrive",null]]);async function r(i,a){const s=k7(i),c={account:a,...s};try{return{accessToken:(await e.acquireTokenSilent(c)).accessToken}}catch(u){if(u instanceof Zr)return Y.trackEvent({name:"system",data:{eventName:"copilotWebAcquireTokenRedirect",eventInfo_requestType:i,eventInfo_traceId:u.traceId,eventInfo_errorMessage:u.errorMessage,eventInfo_errorCode:u.errorCode,eventInfo_correlationId:u.correlationId,eventInfo_timeSinceStartMs:performance.now()-window.appStart}}),t.handleInteractionRequiredError(e,c);if(u instanceof Yt&&(u.errorMessage===MB||parseInt(u.errorCode,10)===UN))throw Y.trackEvent({name:"system",data:{eventName:"copilotWebAcquireTokenUnderaged",eventInfo_requestType:i,eventInfo_errorMessage:u.errorMessage,eventInfo_errorCode:u.errorCode,eventInfo_correlationId:u.correlationId}}),new Error(bw);return}}return{msal:e,getMsalAccessToken:async i=>{const a=e.getActiveAccount();if(!a&&!t.supportsNaa())return;const s=n.get(i);if(!s){const c=r(i,a??void 0);n.set(i,c);const u=await c;return n.set(i,null),u}return s}}}function aj(t){if(t.eventType===Le.LOGIN_START){const e=t.payload;sL({apiName:Le.LOGIN_START,authWorkflowAccountType:"microsoft",interactionType:t.interactionType??void 0,correlationId:e.correlationId,prompt:e.prompt,redirectUri:e.redirectUri})}else if(t.eventType===Le.LOGIN_SUCCESS||t.eventType===Le.SSO_SILENT_SUCCESS){const e=t.payload&&"account"in t.payload?t.payload.account:null,n=e?!za(e.tenantId):void 0,r=t.payload;cL({apiName:t.eventType,authWorkflowAccountType:"microsoft",interactionType:t.interactionType??void 0,correlationId:r.correlationId,authority:r.authority,isMSA:n})}else if(t.eventType===Le.LOGOUT_SUCCESS)lL({apiName:Le.LOGOUT_SUCCESS,providerType:"microsoft"});else if(t.eventType===Le.ACQUIRE_TOKEN_START||t.eventType===Le.ACQUIRE_TOKEN_NETWORK_START){$a("msalAcquireTokenStartTime",Date.now().toString());const e=t.payload;om({authWorkflowAccountType:"microsoft",apiName:t.eventType,extraInfo:{eventInfo_interactionType:t.interactionType??void 0,eventInfo_correlationId:e.correlationId,eventInfo_redirectUri:e.redirectUri,eventInfo_cacheLookupPolicy:e.cacheLookupPolicy,eventInfo_prompt:e.prompt}})}else if(t.eventType===Le.ACQUIRE_TOKEN_SUCCESS){const e=Date.now()-parseInt(vi("msalAcquireTokenStartTime")??"0",10);$a("msalAcquireTokenStartTime","");const n=t.payload;om({authWorkflowAccountType:"microsoft",apiName:t.eventType,extraInfo:{eventInfo_interactionType:t.interactionType??void 0,eventInfo_correlationId:n.correlationId,eventInfo_expiresOn:n.expiresOn,eventInfo_extExpiresOn:n.extExpiresOn,eventInfo_refreshOn:n.refreshOn,eventInfo_duration:e,eventInfo_fromCache:n.fromCache}})}else if(t.eventType===Le.LOGIN_FAILURE||t.eventType===Le.ACQUIRE_TOKEN_FAILURE||t.eventType===Le.SSO_SILENT_FAILURE||t.eventType===Le.ACQUIRE_TOKEN_BY_CODE_FAILURE||t.eventType===Le.LOGOUT_FAILURE){let e;t.eventType===Le.ACQUIRE_TOKEN_FAILURE&&(e=Date.now()-parseInt(vi("msalAcquireTokenStartTime")??"0",10));const n=t.error;Km({authWorkflowAccountType:"microsoft",apiName:t.eventType,errorType:(n==null?void 0:n.name)??"",errorMessage:(n==null?void 0:n.message)??"",errorExtraInfo:{eventInfo_correlationId:n==null?void 0:n.correlationId,eventInfo_errorMessage:n==null?void 0:n.errorMessage,eventInfo_errorCode:n==null?void 0:n.errorCode,eventInfo_name:n==null?void 0:n.name,eventInfo_interactionType:t.interactionType??void 0,eventInfo_subError:n==null?void 0:n.subError,eventInfo_duration:e}})}else om({authWorkflowAccountType:"microsoft",apiName:t.eventType,extraInfo:{eventInfo_interactionType:t.interactionType??void 0}})}function za(t){return t!==Pm}class Eae{constructor(){Z(this,"hasTrackedRedirectError",!1)}async handleRedirect(){var e;try{const{msal:n}=await Tr.get();await n.handleRedirectPromise();const r=await this.getMsalAccount();return r?(n.setActiveAccount(r),{id:((e=r.idTokenClaims)==null?void 0:e.oid)??"",tenantId:r.tenantId,provider:"microsoft",accountType:za(r.tenantId)?"AAD":"MSA"}):null}catch(n){this.trackRedirectErrorOncePerSession(n)}return null}async maybeInitializeAccountWithToken(){var n;const e=await this.getAuthToken();if(e){const{msal:r}=await Tr.get(),o=await this.getMsalAccount();return o?(r.setActiveAccount(o),{userAccount:{id:((n=o.idTokenClaims)==null?void 0:n.oid)??"",tenantId:o.tenantId,provider:"microsoft",accountType:za(o.tenantId)?"AAD":"MSA"},authToken:e}):null}return null}async logIn(){const{msal:e}=await Tr.get(),n={...aw},r=this.buildRedirectUri();return r&&(n.redirectUri=r),e.loginRedirect(n)}buildRedirectUri(){const{surfaceQueryParam:e}=Ee.instance().config(),n=new URLSearchParams;let r;if(e!=null&&e.useForLoginRedirect)for(const[i,a]of Object.entries(e.params))n.set(i,a);const o=new URLSearchParams(window.location.search).get("back");return o&&n.set("back",o),n.toString()&&(r=`${window.location.origin}?${n}`),r}async logOut(){const{msal:e}=await Tr.get(),n=e.getAllAccounts(),r=e.getActiveAccount();try{for(const o of n)o.tenantId!==Pm&&(await e.logoutRedirect({account:o,onRedirectNavigate:()=>!1}),Y.setPicassoId(null))}catch(o){console.error(o)}return await e.logoutRedirect({account:r,onRedirectNavigate:()=>!1}),Promise.resolve()}async getAuthToken(){return(await Tr.get()).getMsalAccessToken("login")}async getUserInfo(){const e=await(await Tr.get()).getMsalAccessToken("graph");if(e)return Fk(e.accessToken)}async getUserInfoFromToken(e){return Fk(e)}supportsTokenType(e){return e===void 0}async getMsalAccount(){var r;const{msal:e}=await Tr.get(),n=e.getAllAccounts();return n.length>1&&om({authWorkflowAccountType:"microsoft",apiName:"msal:getAllAccounts",extraInfo:{eventInfo_accountCount:n.length,eventInfo_accountTypes:n.map(o=>za(o.tenantId)?"AAD":"MSA"),eventInfo_accountIds:n.map(o=>o.homeAccountId),eventInfo_currentAccountId:(r=e.getActiveAccount())==null?void 0:r.homeAccountId}}),n.length===0?null:this.getAccount(n)??null}trackRedirectErrorOncePerSession(e){this.hasTrackedRedirectError||Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"msalHandleRedirectPromise",eventInfo_details:"Error handling redirect promise",eventInfo_errorMessage:`${e}`}}),this.hasTrackedRedirectError=!0}getAccount(e){for(const n of e)if(n.tenantId===Pm)return n;return e[0]}}class Mr{constructor(){Z(this,"middlewares",[])}add(e){this.middlewares.push(e)}async run(e){let n={...e};for(const r of this.middlewares)try{n=await r(n)}catch{continue}return n}}const Tae=new Mr,eR=new Mr,qTe=new Mr,YTe=new Mr,Iae=new Mr,Aae=new Mr,kae=new Mr,xae=new Mr,Rae=new Mr,Pae=new Mr,Oae=new Mr,Nae=new Mr,Mae=new Mr,Lae=new Mr;var Zl;const Ns=class Ns{constructor(){Z(this,"providers");this.providers={microsoft:new Eae,auth0:new LQ}}async handleRedirect(){const e=await this.providers.microsoft.handleRedirect();if(e)return e;if(!Ee.instance().config().enableAuth0)return null;const n=await this.providers.auth0.handleRedirect();return n||null}static instance(){return ue(Ns,Zl)||Ot(Ns,Zl,new Ns),ue(Ns,Zl)}getCurrentProvider(){const e=gt(jn);return e?this.providers[e.provider]:null}async getAccountFromProviders(){return this.handleRedirect()}async maybeInitialize(){try{const e=await this.providers.microsoft.maybeInitializeAccountWithToken();if(e)return e;if(!Ee.instance().config().enableAuth0)return null;const n=await this.providers.auth0.maybeInitializeAccountWithToken();if(n)return n}catch(e){e instanceof Error&&cc({feature:"accountInitialization",errorType:e.name,errorMessage:e.message,exception:e.stack})}return null}setUserAccount(e){fo(jn,e),Y.setUserAccountType(e==null?void 0:e.accountType)}async getAuthToken(){var r;const e=await eR.run({type:"login"});if(e.isHandled){if(((r=e.authToken)==null?void 0:r.tokenType)!==void 0){const o=MQ(e.authToken.tokenType);Y.setUserAccountType(o)}return e.authToken}const n=this.getCurrentProvider();if(!n){const o=await this.handleRedirect();if(o)return this.setUserAccount(o),this.providers[o.provider].getAuthToken();const i=await this.maybeInitialize();if(i){const{authToken:a,userAccount:s}=i;return this.setUserAccount(s),a}return}return n.getAuthToken()}async getUserInfo(){const e=await eR.run({type:"graph"});if(e.isHandled){if(!e.authToken)return;const{tokenType:r,accessToken:o}=e.authToken;if(this.providers.microsoft.supportsTokenType(r))return this.providers.microsoft.getUserInfoFromToken(o);if(this.providers.auth0.supportsTokenType(r)){const i=await this.providers.auth0.getUserInfoFromToken(o);if(i)return i}return}const n=this.getCurrentProvider();if(n)return n.getUserInfo()}logIn(e,n){return this.providers[e].logIn(n)}async logOut(){const e=this.getCurrentProvider();return e&&(await e.logOut(),this.setUserAccount(null)),Promise.resolve()}};Zl=new WeakMap,tn(Ns,Zl,null);let Qa=Ns;function sj(){return null}function cj({featureOverrides:t,localFeatureOverrides:e,serverFeatures:n,surfaceConfig:r}){var i,a,s,c;const o=new Set([...n]);(i=r.settingsOverrides)!=null&&i.shouldHideShopping&&o.delete("shopping-card"),(a=r.settingsOverrides)!=null&&a.shouldHideMultipleCharacters&&o.delete("multiplecharacters"),r.startInVoice&&o.add("start-in-voice"),(s=r.pages)!=null&&s.enabled?o.add("pages"):((c=r.pages)==null?void 0:c.enabled)===!1&&o.delete("pages");for(const u of t)o.add(u);for(const u of e)o.add(u);return Array.from(o)}function lj(){return[]}async function MT(){const{msal:t}=await Tr.get();return t.getActiveAccount()}async function uj(){const t=await MT();return t?za(t.tenantId):!1}async function tR(){const t=await MT();if(!(!t||!za(t.tenantId)))return t}async function Dae(){const t=await MT();if(!(!t||za(t.tenantId)))return t}async function jae(){return(await Tr.get()).getMsalAccessToken("oneDrive")}const dj="urlFeatureOverrides";function Uae(){return typeof window>"u"?null:sessionStorage.getItem(dj)}function fj(){const t=Uae();return t?t.split(",").map(n=>n):[]}function Fae(){const t=vn("features");return t!=null&&t.trim()&&typeof window<"u"&&sessionStorage.setItem(dj,t.trim()),fj()}const Bae={VITE_API_URL:"copilot.microsoft.com/c/api"};async function Hae(t,e){try{return await t.json()}catch(n){throw(n instanceof SyntaxError||n instanceof TypeError||n instanceof DOMException)&&vV(n,t,e),n}}function hj(t={}){const{query:e={}}=t,n=new URLSearchParams;for(const[a,s]of Object.entries(e))n.append(a,s);const r=cj({featureOverrides:fj(),localFeatureOverrides:lj(),serverFeatures:[],surfaceConfig:Ee.instance().config()}).join(",");r&&(n.append("features",r),n.append("setflight",r));const o=sj();o&&n.append("promptBranch",o);const{surfaceQueryParam:i}=Ee.instance().config();if(i)for(const[a,s]of Object.entries(i.params))n.append(a,s);return n}async function nR(t,e){const{VITE_API_URL:n}=Bae,r=n,o={...e,"api-version":"2"},i=await Qa.instance().getAuthToken(),a=await uj();i&&!a&&(o.accessToken=i.accessToken,i.tokenType&&(o["X-UserIdentityType"]=i.tokenType)),i===void 0&&oL(t,"getWssAPIUrl");const s=hj({query:o});return`wss://${r}/${t}?${s}`}function Vae(t,e){let n="";n="https://copilot.microsoft.com/c/api",n+=t;const r=hj({query:e});return r.toString()&&(n+=`?${r}`),n}async function Ru(t,e={}){const{options:n,query:r,analytics:o}=e,i=new Headers(n==null?void 0:n.headers);_t.resolvedLanguage?i.set("X-Search-UILang",_t.resolvedLanguage.toLowerCase()):_t.language&&i.set("X-Search-UILang",_t.language.toLowerCase());const a=await Qa.instance().getAuthToken(),s=await uj();a&&!s&&(i.set("Authorization",`Bearer ${a.accessToken}`),a.tokenType&&i.set("X-UserIdentityType",a.tokenType)),a===void 0&&oL(t,"fetchApi");const c=performance.now(),u=await fetch(Vae(t,r),{...n,credentials:"include",headers:i}),d=performance.now();return jM((o==null?void 0:o.anonymousPath)??t,(n==null?void 0:n.method)??"GET",d-c,u.clone()),yv.trackLatestApiAssignment(u.clone()),u}async function Pr({path:t,args:e={}}){var r;const n={method:"POST",...e.options,headers:{"Content-Type":"application/json",...(r=e.options)==null?void 0:r.headers},body:e.body?JSON.stringify(e.body):void 0};return Ru(t,{...e,options:n})}async function Un(t,e,n={}){const{analytics:r,onFailedRequest:o}=n,i=(r==null?void 0:r.anonymousPath)??t,a=await Ru(t,n);let s=!0;if(!a.ok&&o&&(s=!!o(a)),!s)return{data:void 0,response:{ok:a.ok,status:a.status,headers:a.headers},zodError:void 0};const c=await Hae(a,i);let u,d;const{safe:h}=n.parseOptions??{};if(h){const p=e.safeParse(c);p.error&&Hf(p.error,i,!0),u=c,d=p.error}else try{u=e.parse(c)}catch(p){throw p instanceof Tm&&Hf(p,i,!1),p}return{data:u,response:{ok:a.ok,status:a.status,headers:a.headers},zodError:d}}function zae(){return hn(Ck)!==null?!1:(Ho(tE),Ho(Kf),Qn(Ck,"true"),!0)}function pj(){return parseInt(hn(tE)??"0",10)}function $ae(){return new Date(hn(Kf)??new Date().toISOString())}function Gae(t){hn(Kf)||Qn(Kf,t)}function Kae(){let t;try{t=pj()}catch{t=0}t<kC&&(t+=1,Qn(tE,`${t}`),t===kC&&Gae(new Date().toISOString()))}function mj(t){return Un(t,mq,{options:{method:"POST"}}).then(e=>e.data)}function ny(){const t=F(Tw),{trigger:e}=pw("/conversations",mj),n=F(En),r=es(En),o=Se(ww),i=Se(nQ),a=HM(),[s,c]=m.useState(!1);return{startConversationDisabled:s,createConversation:m.useCallback(async(u=!0,d=void 0)=>{if(t){const h=n.get(t);if((h==null?void 0:h.characterId)===d)return a({id:t,shouldNavigateToChat:u}),t}if(!s)try{c(!0);const{id:h}=await e(),p={id:h,updatedAt:new Date().toISOString(),history:[],isNew:!0,characterId:d,streamingState:"idle",continuedAt:null};return r(g=>{g.set(h,p)}),a({id:h,shouldNavigateToChat:u}),o(!0),Kae(),i(),h}catch(h){console.error(h)}finally{c(!1)}},[t,s,n,a,e,r,o,i])}}function Zt(){return HO({select:e=>e.pathname})}function ry(){const[t,e]=et(PV),n=Zt();return m.useEffect(()=>{n.endsWith("/chats/new/talk")&&(Y.setLandingPage("deepLinkVoiceCall"),e("audioCall"))},[n,e]),[t,()=>e(null)]}const Wae=G(!1),qae=G(0),Yae=G(null),Qae=G(null),oy=G("center"),LT=G(),gj=G(void 0),Or=G(null),Jae=G(null),iy=G(null),ay=G(null),Xae=G(t=>{var r;const e=t(Ei),n=Lw(e);return((r=n==null?void 0:n.part.task)==null?void 0:r.type)==="research"}),vj=G(null),Zae=G(!1),sy=G(new Map),DT=G(null),yj=G(!1),d0=G(!1),jT="shouldPerformUserMerge";function ese(t){$a(jT,String(t))}function tse(){qN(jT)}function nse(){return vi(jT)!=="false"}function QTe(){const t=F(Ei),e=_r(),[n,r]=et(RQ),o=de("user-conversation-merge"),i=o&&!e&&t.length>0;return m.useEffect(()=>{o&&ese(n)},[o,n]),{shouldShowMergeCheckbox:i,shouldMerge:n,setShouldMerge:r}}function f0(t){if(window.clarity)for(const[e,n]of Object.entries(t))window.clarity("set",e,n)}function rR(t){if(window.clarity)for(const e of t)window.clarity("event",e)}function cy(t){const e=tv(),n=m.useRef(t);n.current=t,m.useEffect(()=>e.subscribe("onBeforeNavigate",r=>{const{pathChanged:o}=r;o&&n.current(r)}),[e])}let bj=!0,_j=!0;function rse(t){_j=t}function ly(){return bj}function ose(){cy(()=>{_j||(bj=!1)})}async function ise(t){try{return(await Un(`/conversations/${t}/history`,vM,{analytics:{anonymousPath:"/conversations/*/history"}}).then(n=>n.data)).results.length>0}catch{return!1}}async function ase(t){const{conversationIdFromUrl:e,conversationIdFromStart:n}=t;return e&&e!=="new"&&await ise(e)?{conversationId:e,isNew:!1}:n?{conversationId:n,isNew:!0}:{conversationId:null,isNew:!0}}async function sse(t){const{pathname:e,conversationIdFromUrl:n,conversationFromUrlExists:r,urlPrompt:o,features:i,isBanned:a,enablePageRedirect:s,deepLinkTarget:c,search:u}=t;if(!s||a||navigator.userAgent.toLowerCase().includes("googlebot")&&e==="/")return null;if(o||n==="new")return{to:c==="audioCall"?"/chats/$conversationId/talk":"/chats/$conversationId",from:e,needsConversationId:!0};if(e.startsWith("/shares"))return e.startsWith("/shares/pages")?i.includes("pages")&&!i.includes("kill-shared-page")?null:Rn(e):i.includes("kill-share-conversation")?Rn(e):null;if(e.startsWith("/campaigns"))if(e.startsWith("/campaigns/gallery")){if(!i.includes("share-campaign-gallery"))return Rn(e)}else if(e.startsWith("/campaigns/image-expression-tool")){if(!i.includes("gallery-expression-tool"))return Rn(e)}else return i.includes("share-campaign")?null:Rn(e);if(["/pro/subscribe","/pro/ewallet/return"].includes(e)||e==="/fang")return null;if(e.startsWith("/referrals")&&!i.includes("user-referral")||e.startsWith("/subscription")&&!i.includes("cmc-m365-sku"))return Rn(e);if(e.startsWith("/memory/narrative"))return i.includes("memory-narrative")?null:Rn(e);if(e.endsWith("/talk"))return e.startsWith("/portrait/talk")?{from:e,to:"/portrait",needsConversationId:!1}:Rn(e);if(e.startsWith("/chats")&&!r)return Rn(e);if(e.startsWith("/pages"))return i.includes("pages")?null:Rn(e);if(e.startsWith("/portrait")&&!i.includes("labs-portrait-enabled")||e.startsWith("/labs")&&(e.startsWith("/labs/experiments")&&(!i.includes("labs-v2")||e.startsWith("/labs/experiments/3d-generations")&&!i.includes("labs-3d-generations"))||!i.includes("labs-landing"))||e.startsWith("/login"))return Rn(e);if(e.startsWith("/podcasts"))return e.startsWith("/podcasts/user")||e.startsWith("/podcasts/public")?null:Rn(e);if(e.includes("/w/landing"))return i.includes("cmc-landing")?null:Rn(e);if(e==="/"){if(i.includes("start-in-voice"))return null;const d=u==null?void 0:u.get("back");return cse(d)&&Ee.instance().config().redirectBackEnabled?{from:"/login",to:new URL(d).pathname,needsConversationId:!1}:Rn(e)}return null}function cse(t){if(!t)return!1;try{if(new URL(t).origin===window.location.origin)return!0;throw new Error("Invalid redirect URL: not from same origin")}catch{throw new Error("Invalid redirect URL, malformed URL")}}function Rn(t){return Ee.instance().config().neverStartInChat?{from:t,to:"/"}:{from:t,to:"/chats/$conversationId",needsConversationId:!0}}function lse(){try{const{timeZone:t}=Intl.DateTimeFormat().resolvedOptions();return t}catch{return}}function UT(t){if(!t)return null;let e=null;const n=new Date(t).toISOString(),r=new Date().toISOString(),o=qB(n,r,{roundingMethod:"ceil"});return o>24?e="permanent":o>1&&o<=24?e="24-hr":o>0&&o<=1&&(e="1-hr"),e}function FT(t,e,n){if(!t){Ho(FC);return}const r=ct();Y.trackEvent({name:"system",data:{eventName:"copilotUserBan",eventInfo_banDuration:t,eventInfo_banSource:e,eventInfo_banExpiryTimestamp:n}}),r.set(PM,t),r.set(Vf,"user-banned")}const use=sV();async function dse(t){let e=vi("sessionId");const n=vi("referralCode");!e&&n&&(e=crypto.randomUUID(),$a("sessionId",e));const r=nse(),o={timeZone:lse(),startNewConversation:!0,teenSupportEnabled:!0,deviceFingerprint:e??void 0,referralCode:n??void 0,correctPersonalizationSetting:!0,performUserMerge:r},i={};use&&(i.overrideFeatures="1");const{data:a,response:s,zodError:c}=await Un(t,WW,{options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},parseOptions:{safe:!0},query:i});if(yv.trackClientExperimentationAssignment(s.headers),s.status===UN)throw new Error(bw);if(c)throw c;return a}function Cj(){const{i18n:t}=Fe(),{showBoundary:e}=rN(),n=Se(Vf),r=Se(dN),o=Se(En),i=Se(ac),a=Se(mt),s=Se(NM),c=Se(Wae),u=to(),[d]=ry(),h=Zt(),p=m.useRef(h);p.current=h;const g=Y0({strict:!1}),v=m.useRef(g);v.current=g;const y=m.useRef(eV()),_=F(iy),b=m.useRef(_);b.current=_;const C=m.useRef(!0),w=m.useRef(!1),{trigger:S}=pw("/start",dse);return m.useCallback(async E=>{var N;if(!t.language||w.current)return!1;w.current=!0;const I=Fae(),{enablePageRedirect:x,overwriteData:A}=E;try{const{isNewUser:R,banExpiresAt:z,remainingTurns:P,features:X,currentConversationId:M,allowBeta:k}=await S();gn.emit("app:start-complete"),Y.setFeatures(X),Y.setIsNewUser(R),f0({isNewUser:R.toString()});const U=cj({featureOverrides:[],localFeatureOverrides:lj(),serverFeatures:X,surfaceConfig:Ee.instance().config()});U.includes("eager-msal")&&(sc(VC,l.boolean(),!0),U.includes("msal-silent-sso")&&sc(CM,l.boolean(),!0)),U.includes("kill-eager-msal")&&Ho(VC);const O=UT(z),$=await ase({conversationIdFromUrl:v.current.conversationId,conversationIdFromStart:M});let{conversationId:K}=$;if(!K){const{id:se}=await mj("/conversations");K=se}const J=await sse({pathname:p.current,conversationIdFromUrl:v.current.conversationId,conversationFromUrlExists:v.current.conversationId===K,urlPrompt:((N=b.current)==null?void 0:N.prompt)??null,features:U,enablePageRedirect:x,isBanned:!!O,deepLinkTarget:d,search:new URLSearchParams(window.location.search)});o(se=>{if(!A&&se.size>0)return se;const ne=new Map([[K,{id:K,updatedAt:new Date().toISOString(),history:[],isNew:$.isNew,characterId:null,streamingState:"idle",continuedAt:null}]]);return!$.isNew&&M&&ne.set(M,{id:M,updatedAt:new Date().toISOString(),history:[],isNew:!0,characterId:null,streamingState:"idle",continuedAt:null}),ne}),a(se=>se&&!A?se:K),r(se=>se.length>0&&!A?se:U),i(P),s(R),c(k??!1),FT(O,"start",z),C.current&&(C.current=!1,J&&await u({...J,params:J.needsConversationId?{conversationId:K}:{},search:y.current}))}catch(R){if(Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"StartEndpointError",eventInfo_errorMessage:R instanceof Error?R.message:"",eventInfo_details:R instanceof Error?R.stack??"":""}}),R instanceof Error&&R.message===bw)return n("age-verification"),!0;console.error(R),e(R)}finally{rse(!1)}return!0},[S,o,a,n,r,i,s,c,u,t.language,e,d])}const oR=Ic.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)}),L_={dedupe:!0},fse=(t,e,n)=>{const{cache:r,compare:o,suspense:i,fallbackData:a,revalidateOnMount:s,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:h,keepPreviousData:p}=n,[g,v,y,_]=ho.get(r),[b,C]=Ji(t),w=m.useRef(!1),S=m.useRef(!1),E=m.useRef(b),I=m.useRef(e),x=m.useRef(n),A=()=>x.current,N=()=>A().isVisible()&&A().isOnline(),[R,z,P,X]=ei(r,b),M=m.useRef({}).current,k=Oe(a)?n.fallback[b]:a,U=(W,re)=>{for(const be in M){const D=be;if(D==="data"){if(!o(W[D],re[D])&&(!Oe(W[D])||!o(Te,re[D])))return!1}else if(re[D]!==W[D])return!1}return!0},O=m.useMemo(()=>{const W=!b||!e?!1:Oe(s)?A().isPaused()||i?!1:Oe(c)?!0:c:s,re=fe=>{const je=Qr(fe);return delete je._k,W?{isValidating:!0,isLoading:!0,...je}:je},be=R(),D=X(),ce=re(be),ge=be===D?ce:re(D);let te=ce;return[()=>{const fe=re(R());return U(fe,te)?(te.data=fe.data,te.isLoading=fe.isLoading,te.isValidating=fe.isValidating,te.error=fe.error,te):(te=fe,fe)},()=>ge]},[r,b]),$=lv.useSyncExternalStore(m.useCallback(W=>P(b,(re,be)=>{U(be,re)||W()}),[r,b]),O[0],O[1]),K=!w.current,J=g[b]&&g[b].length>0,se=$.data,ne=Oe(se)?k:se,ve=$.error,Be=m.useRef(ne),Te=p?Oe(se)?Be.current:se:ne,Pe=J&&!Oe(ve)?!1:K&&!Oe(s)?s:A().isPaused()?!1:i?Oe(ne)?!1:c:Oe(ne)||c,He=!!(b&&e&&K&&Pe),Ze=Oe($.isValidating)?He:$.isValidating,he=Oe($.isLoading)?He:$.isLoading,j=m.useCallback(async W=>{const re=I.current;if(!b||!re||S.current||A().isPaused())return!1;let be,D,ce=!0;const ge=W||{},te=!y[b]||!ge.dedupe,fe=()=>rc?!S.current&&b===E.current&&w.current:b===E.current,je={isValidating:!1,isLoading:!1},Je=()=>{z(je)},at=()=>{const Ue=y[b];Ue&&Ue[1]===D&&delete y[b]},nt={isValidating:!0};Oe(R().data)&&(nt.isLoading=!0);try{if(te&&(z(nt),n.loadingTimeout&&Oe(R().data)&&setTimeout(()=>{ce&&fe()&&A().onLoadingSlow(b,n)},n.loadingTimeout),y[b]=[re(C),oc()]),[be,D]=y[b],be=await be,te&&setTimeout(at,n.dedupingInterval),!y[b]||y[b][1]!==D)return te&&fe()&&A().onDiscarded(b),!1;je.error=sn;const Ue=v[b];if(!Oe(Ue)&&(D<=Ue[0]||D<=Ue[1]||Ue[1]===0))return Je(),te&&fe()&&A().onDiscarded(b),!1;const Ve=R().data;je.data=o(Ve,be)?Ve:be,te&&fe()&&A().onSuccess(be,b,n)}catch(Ue){at();const Ve=A(),{shouldRetryOnError:bt}=Ve;Ve.isPaused()||(je.error=Ue,te&&fe()&&(Ve.onError(Ue,b,Ve),(bt===!0||pr(bt)&&bt(Ue))&&(!A().revalidateOnFocus||!A().revalidateOnReconnect||N())&&Ve.onErrorRetry(Ue,b,Ve,Lt=>{const Pt=g[b];Pt&&Pt[0]&&Pt[0](mr.ERROR_REVALIDATE_EVENT,Lt)},{retryCount:(ge.retryCount||0)+1,dedupe:!0})))}return ce=!1,Je(),!0},[b,r]),pe=m.useCallback((...W)=>dv(r,E.current,...W),[]);if(vo(()=>{I.current=e,x.current=n,Oe(se)||(Be.current=se)}),vo(()=>{if(!b)return;const W=j.bind(sn,L_);let re=0;const D=hw(b,g,(ce,ge={})=>{if(ce==mr.FOCUS_EVENT){const te=Date.now();A().revalidateOnFocus&&te>re&&N()&&(re=te+A().focusThrottleInterval,W())}else if(ce==mr.RECONNECT_EVENT)A().revalidateOnReconnect&&N()&&W();else{if(ce==mr.MUTATE_EVENT)return j();if(ce==mr.ERROR_REVALIDATE_EVENT)return j(ge)}});return S.current=!1,E.current=b,w.current=!0,z({_k:C}),Pe&&(Oe(ne)||Qi?W():lw(W)),()=>{S.current=!0,D()}},[b]),vo(()=>{let W;function re(){const D=pr(u)?u(R().data):u;D&&W!==-1&&(W=setTimeout(be,D))}function be(){!R().error&&(d||A().isVisible())&&(h||A().isOnline())?j(L_).then(re):re()}return re(),()=>{W&&(clearTimeout(W),W=-1)}},[u,d,h,b]),m.useDebugValue(Te),i&&Oe(ne)&&b){if(!rc&&Qi)throw new Error("Fallback data is required when using suspense in SSR.");I.current=e,x.current=n,S.current=!1;const W=_[b];if(!Oe(W)){const re=pe(W);oR(re)}if(Oe(ve)){const re=j(L_);Oe(Te)||(re.status="fulfilled",re.value=!0),oR(re)}else throw ve}return{mutate:pe,get data(){return M.data=!0,Te},get error(){return M.error=!0,ve},get isValidating(){return M.isValidating=!0,Ze},get isLoading(){return M.isLoading=!0,he}}},Fc=fw(fse);function hse(){const{cache:t,mutate:e}=dw(),n=m.useCallback(async()=>{for(const o of t.keys())await e(o,void 0,{revalidate:!1})},[t,e]),r=m.useCallback(async o=>{await e(o,void 0,{revalidate:!1})},[e]);return{clearAllSWRCache:n,clearOneSWRCache:r}}function pse(){Ho(SM)}function id(){const t=Cj(),e=Zt(),n=to(),{clearAllSWRCache:r}=hse(),o=async s=>{const{provider:c,opts:u={},onAuthComplete:d,onAuthError:h}=s;await Qa.instance().logIn(c,u).catch(p=>{console.error(p),h==null||h()})},i=async(s=!0)=>{await r(),pse(),tse(),await Qa.instance().logOut().then(async()=>{s&&(await n({to:"/",from:e}),await t({enablePageRedirect:!1,overwriteData:!0}))})};return{login:o,logout:i,switchMicrosoftAccount:async()=>{await i(),await o({provider:"microsoft"})}}}function mse({accountActionRequired:t,onReload:e}){const{t:n}=Fe(),r=Ac(),{login:o}=id(),{reason:i,provider:a,loginHint:s}=t,c=async p=>{dt({source:"sessionExpired",scenario:"continueWithMicrosoftWithLoginHint",destination:"continueWithMicrosoftRedirect"}),Cb({authWorkflowAccountType:"microsoft",apiName:"msal:reauthStart"});const{msal:g}=await Tr.get();await g.acquireTokenRedirect({...aw,loginHint:p,account:g.getAccountByUsername(p)??void 0,prompt:void 0})},u=async()=>{if(i==="token-expired"&&t.provider==="microsoft"){const{msal:p}=await Tr.get();await p.clearCache()}},d=async(p,g)=>{await u();let v="";switch(p==="microsoft"?(v="MSA",Cb({authWorkflowAccountType:"microsoft",apiName:"msal:reauthStart"})):p==="auth0"&&(v=(g==null?void 0:g.connection)==="apple"?"Apple":"Google",Cb({authWorkflowAccountType:(g==null?void 0:g.connection)??"google",apiName:Bi.REAUTH_START})),dt({source:"sessionExpired",scenario:`continueWith${v}`,destination:`continueWith${v}Redirect`}),p){case"microsoft":o({provider:p});break;case"auth0":o({provider:p,opts:g});break}},h=async()=>{bn({source:"signin",scenario:"sessionExpired"}),await u(),o({provider:"microsoft"})};return f.jsxs(f.Fragment,{children:[f.jsx("h1",{className:"pb-3 text-lg",children:n("authentication.sessionExpired")}),f.jsx("p",{className:"pb-7",children:n("authentication.sessionExpiredMessage")}),i==="token-expired"&&a==="microsoft"&&s&&f.jsx(De,{onClick:()=>c(s),title:`${n("signInPrompt.continueAs",{name:s})}`,variant:"pill",size:"48-lg",className:"w-full",children:`${n("signInPrompt.continueAs",{name:s})}`}),r?f.jsxs(f.Fragment,{children:[f.jsxs(De,{onClick:()=>d("microsoft"),title:n("signInPrompt.continueWithMicrosoft"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:[f.jsx(cv,{className:"size-6"}),n("signInPrompt.continueWithMicrosoft")]}),f.jsxs(De,{onClick:()=>d("auth0",{connection:"apple"}),title:n("signInPrompt.continueWithApple"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:[f.jsx(ow,{className:"size-6 text-black dark:text-white"}),n("signInPrompt.continueWithApple")]}),f.jsxs(De,{onClick:()=>d("auth0",{connection:"google"}),title:n("signInPrompt.continueWithGoogle"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:[f.jsx(iw,{className:"size-6"}),n("signInPrompt.continueWithGoogle")]})]}):f.jsx(De,{onClick:h,title:n("common.loginText"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:n("common.loginText")}),f.jsx(De,{onClick:e,title:n("signInPrompt.continueWithoutSignIn"),variant:"pill",color:"subtle-dimmed-inverted",size:"48-lg",className:"mt-3 w-full",children:n("signInPrompt.continueWithoutSignIn")})]})}function Sj(t){try{return new URL(t,window.location.origin).origin!==window.location.origin}catch{return!1}}function uy(t){gt(Fu)&&Sj(t)?ct().set(Pw,t.toString()):window.location.href=t}function dy(){gse()}function gse(t){const{surfaceQueryParam:e}=Ee.instance().config(),n=new URL(window.location.href);if(e)for(const[r,o]of Object.entries(e.params))n.searchParams.delete(r),n.searchParams.append(r,o);uy(n.href)}const fy={type:"spring",mass:2.8,stiffness:280,damping:40},vse={type:"spring",mass:1.8,stiffness:320,damping:40},JTe={type:"spring",mass:1.8,stiffness:440,damping:40},h0={type:"spring",mass:1.4,stiffness:320,damping:40},wj={type:"spring",mass:1,stiffness:1200,damping:40},Ej={type:"spring",mass:1.8,stiffness:640,damping:40},yse={type:"spring",mass:3.2,stiffness:640,damping:40},So={type:"spring",mass:1,stiffness:280,damping:40},XTe={duration:1.2,ease:"easeInOut",repeat:3,repeatType:"reverse",type:"tween"},Tj=.2,Ij=.25,bse=1.5,_se=[.16,1,.3,1];function Cse(t,e){const{children:n,id:r,className:o,mode:i="wait",duration:a=bo.default,exitDuration:s=bo.default,exitDelay:c=0,delay:u=0,delayChildren:d=0,onAnimationComplete:h,"data-testid":p,initial:g="initial"}=t;return f.jsx(wn,{mode:i,children:n&&f.jsx(Ae.div,{animate:"animate",exit:"exit",ref:e,initial:g,variants:{initial:tt,animate:Rt,exit:{...tt,transition:{duration:s,delay:c}}},transition:{duration:a,ease:"easeInOut",delay:u,delayChildren:d},className:o,onAnimationComplete:h,"data-testid":p,children:n},r)})}const Zn=m.forwardRef(Cse),zh=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M4.20889 10.7327C3.9232 11.0326 3.93475 11.5074 4.23467 11.7931C4.5346 12.0788 5.00933 12.0672 5.29502 11.7673L11.2495 5.516V20.25C11.2495 20.6642 11.5853 21 11.9995 21C12.4137 21 12.7495 20.6642 12.7495 20.25V5.51565L18.7043 11.7673C18.99 12.0672 19.4648 12.0788 19.7647 11.7931C20.0646 11.5074 20.0762 11.0326 19.7905 10.7327L12.7238 3.31379C12.5627 3.14474 12.3573 3.04477 12.1438 3.01386C12.0971 3.00477 12.0489 3 11.9995 3C11.9498 3 11.9012 3.00483 11.8543 3.01406C11.6412 3.04518 11.4363 3.14509 11.2756 3.31379L4.20889 10.7327Z"})),ZTe=Object.freeze(Object.defineProperty({__proto__:null,default:zh},Symbol.toStringTag,{value:"Module"})),yo=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M4.39705 4.55379L4.46967 4.46967C4.73594 4.2034 5.1526 4.1792 5.44621 4.39705L5.53033 4.46967L12 10.939L18.4697 4.46967C18.7626 4.17678 19.2374 4.17678 19.5303 4.46967C19.8232 4.76256 19.8232 5.23744 19.5303 5.53033L13.061 12L19.5303 18.4697C19.7966 18.7359 19.8208 19.1526 19.6029 19.4462L19.5303 19.5303C19.2641 19.7966 18.8474 19.8208 18.5538 19.6029L18.4697 19.5303L12 13.061L5.53033 19.5303C5.23744 19.8232 4.76256 19.8232 4.46967 19.5303C4.17678 19.2374 4.17678 18.7626 4.46967 18.4697L10.939 12L4.46967 5.53033C4.2034 5.26406 4.1792 4.8474 4.39705 4.55379L4.46967 4.46967L4.39705 4.55379Z",fill:"currentColor"})),eIe=Object.freeze(Object.defineProperty({__proto__:null,default:yo},Symbol.toStringTag,{value:"Module"}));function BT(){const[t,e]=m.useState(document.body.dir==="rtl");return m.useEffect(()=>{const n=new MutationObserver(()=>{e(document.body.dir==="rtl")});return n.observe(document.body,{attributes:!0,attributeFilter:["dir"]}),()=>n.disconnect()},[]),t}const D_=bo.default,Ja=m.forwardRef((t,e)=>{const{isOpen:n,onBack:r,headerText:o,children:i,onClose:a,className:s,disableCloseOutside:c,headerTextClassName:u,headerClassName:d,trapFocus:h=!1,variant:p="modal"}=t,{t:g}=Fe(),v=m.useId(),{modalAttributes:y}=VO({trapFocus:h,legacyTrapFocus:h,alwaysFocusable:h}),_=h?y:{},b=BT()?-1:1,C=I=>{(c??!a)||I.target===I.currentTarget&&a()},w=I=>{I.stopPropagation()},S=p==="drawer",E=S?{initial:{x:`${b*100}%`},animate:{x:0,transition:h0},exit:{x:`${b*100}%`,transition:{duration:D_}}}:void 0;return f.jsx(Zn,{id:String(n),mode:"sync",duration:D_,exitDuration:D_,className:q("fixed inset-0",qt.modal),children:n&&f.jsxs("div",{..._,role:"dialog","aria-modal":"true","aria-labelledby":o?v:void 0,children:[f.jsx("div",{className:q("fixed inset-0 bg-stone-850/30 backdrop-blur-[10px] dark:bg-midnight-850/70",qt.modalBackground)}),f.jsx("div",{className:q("fixed inset-0 flex",S?"items-start justify-end":"items-center justify-center",qt.modal),onClick:C,children:f.jsxs(Ae.div,{...E,className:xt("t-custom-scrollbar flex flex-col gap-3 border border-white/10 bg-background-150 p-6 shadow-xl dark:bg-background-250",S?"h-full w-80":"min-h-[150px] rounded-4xl",s),onClick:w,ref:I=>{typeof e=="function"?e(I):e&&(e.current=I)},children:[f.jsxs("div",{className:q("flex items-center justify-between gap-2",d),children:[r&&f.jsx(De,{variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:g("common.backText"),"aria-label":g("common.backText"),onClick:r,children:f.jsx(zh,{className:"size-5 -rotate-90"})}),o&&f.jsx("h2",{id:v,className:q("text-foreground-800 text-md-strong",u),children:o}),a&&f.jsx(De,{className:!r&&!o?"ms-auto":"",variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:g("common.closeText"),"aria-label":g("common.closeText"),onClick:a,children:f.jsx(yo,{className:"size-5"})})]}),i]})})]})})});Ja.displayName="Modal";function Aj(t){const{accountActionRequired:e}=t;return f.jsx(Ja,{isOpen:!0,children:f.jsx(Sse,{accountActionRequired:e})})}function Sse(t){const{accountActionRequired:e}=t,{reason:n}=e;m.useEffect(()=>{Y.trackEvent({name:"system",data:{eventName:"copilotWebBackgroundAccountChange",eventInfo_action:"shown",eventInfo_reason:n}})},[n]);const r=async()=>{if(Y.trackEvent({name:"system",data:{eventName:"copilotWebBackgroundAccountChange",eventInfo_action:"reload",eventInfo_reason:n}}),n==="token-expired"&&e.provider==="microsoft"){const{msal:o}=await Tr.get();await o.clearCache()}dy()};return n==="login"||n==="logout"?f.jsx("div",{className:"flex max-w-72 flex-col items-center p-1 text-center",children:f.jsx(_7,{reason:n,onReload:r})}):f.jsx("div",{className:"flex max-w-96 flex-col items-center p-1 text-center",children:f.jsx(mse,{accountActionRequired:e,onReload:r})})}function HT(t,e){if(t){if(t.indexOf("-")!==-1)return t;if(e)return`${t}-${e}`}else if(e)return e;return"en-US"}const Sc=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("g",{id:"Chevron"},m.createElement("path",{id:"Shape",d:"M8.46967 4.21967C8.17678 4.51256 8.17678 4.98744 8.46967 5.28033L15.1893 12L8.46967 18.7197C8.17678 19.0126 8.17678 19.4874 8.46967 19.7803C8.76256 20.0732 9.23744 20.0732 9.53033 19.7803L16.7803 12.5303C17.0732 12.2374 17.0732 11.7626 16.7803 11.4697L9.53033 4.21967C9.23744 3.92678 8.76256 3.92678 8.46967 4.21967Z",fill:"currentColor"}))),tIe=Object.freeze(Object.defineProperty({__proto__:null,default:Sc},Symbol.toStringTag,{value:"Module"})),wse={top:36,bottom:36,left:24,right:24};function Up(t){const{ariaLabelId:e,options:n,renderOption:r,onSelect:o,value:i,id:a,actionLabel:s,placeholder:c,className:u,menuClassName:d,expandIconClassName:h,disabled:p=!1,isValid:g=!0,supportsBrowserAutofill:v,supportsTypeahead:y=!1,autoComplete:_,boundary:b,padding:C=wse}=t,[w,S]=m.useState(!1),[E,I]=m.useState(null),x=n.findIndex(Pe=>Pe.key===i),A=m.useRef([]),N=m.useRef([]),R=m.useCallback(Pe=>{var Ze;const He=(Ze=n[Pe])==null?void 0:Ze.key;He&&o(He)},[o,n]),{refs:z,floatingStyles:P,context:X}=nv({placement:"bottom-start",strategy:"absolute",open:w,onOpenChange:S,whileElementsMounted:bh,middleware:[rv({padding:C}),zO({boundary:b,apply({rects:Pe,elements:He,availableHeight:Ze}){Object.assign(He.floating.style,{maxHeight:`${Ze}px`,minWidth:`${Pe.reference.width}px`})},padding:C})]}),M=$O(X,{event:"mousedown",enabled:!p}),k=GO(X),U=KO(X,{role:"listbox"}),O=GF(X,{listRef:A,activeIndex:E,selectedIndex:x,onNavigate:I,loop:!0,focusItemOnHover:!1,openOnArrowKeyDown:!p}),$=KF(X,{enabled:y,listRef:N,activeIndex:E,onMatch:w?I:R}),{getReferenceProps:K,getFloatingProps:J,getItemProps:se}=WO([k,U,O,M,$]),ne=m.useCallback(Pe=>{o(Pe),S(!1)},[o]),ve=x>-1?r(n[x]):f.jsx("div",{className:"truncate text-foreground-550 dark:text-slate-400",children:c}),Be=m.useCallback(Pe=>{p||o(Pe.currentTarget.value)},[o,p]),Te=m.useRef(null);return f.jsxs(f.Fragment,{children:[v&&f.jsx("select",{"aria-hidden":!0,className:"hidden",onChange:Be,autoComplete:_,disabled:p,children:n.map(Pe=>f.jsx("option",{value:Pe.key,children:Pe.text},Pe.key))}),f.jsxs("button",{role:"combobox",type:"button",id:a,ref:z.setReference,"aria-labelledby":e,"aria-autocomplete":"none","aria-invalid":!g,"aria-disabled":p,className:q("flex w-full cursor-pointer items-center justify-between gap-2 rounded-2xl bg-black/5 px-[1.125rem] py-4 dark:bg-midnight-550/25",u,p&&"pointer-events-none opacity-50"),...K(),children:[f.jsx("div",{className:"min-w-0",children:ve}),f.jsxs("div",{className:q("flex min-h-[26px] shrink-0 grow items-center justify-end gap-2",h),children:[s&&f.jsx("span",{children:s}),f.jsx(Sc,{className:"size-6 rotate-90"})]})]}),f.jsx("div",{ref:Te}),w&&f.jsx(Q0,{root:Te.current,children:f.jsx(ov,{context:X,modal:!1,children:f.jsx("div",{ref:z.setFloating,style:P,className:q("flex overflow-hidden rounded-2xl shadow-md",d),...J(),children:f.jsx("div",{className:q("flex w-full flex-col p-2",t7),children:f.jsx("div",{className:q("vertical-scrollbar overflow-y-auto py-1 pe-1"),children:n.map((Pe,He)=>f.jsx("div",{ref:Ze=>{A.current[He]=Ze,N.current[He]=Pe.text},role:"option",tabIndex:He===E?0:-1,"aria-selected":He===x&&He===E,className:"relative cursor-default rounded-xl px-3 py-2 -outline-offset-2 hover:bg-black/5 dark:hover:bg-white/8",...se({onClick(){ne(Pe.key)},onKeyDown(Ze){Ze.key==="Enter"&&(Ze.preventDefault(),ne(Pe.key))}}),children:r(Pe)},Pe.key))})})})})})]})}function iR(t){const{htmlFor:e,content:n,required:r,className:o,afterContent:i}=t;return f.jsxs("div",{className:"flex items-center",children:[f.jsxs("label",{htmlFor:e,className:q("flex items-center gap-0.5 text-foreground-900",o),children:[n,r&&f.jsx("span",{className:"text-system-red-550 dark:text-system-red-350",children:"*"})]}),i]})}function Ese(t){return["/login","/fang","/referrals","/referrals/rules","/memory/narrative"].includes(t)}function Lr(){const t=Zt();return(Ee.instance().config().sidebarNavigation??!1)&&!Ese(t)}function hy(){const t=Zt();return t==="/discover"||t==="/"}const aR="absolute size-full";function ia(t){var h;const{isBottomFade:e,forceGradient:n,isFixed:r,overrideGradientType:o}=t,i=Lr(),a=hy(),s=Zt(),c=n===!0||a||s==="/login",u=o??(s==="/login"?"authentication":"discover"),d=(h=Ee.instance().config().uiOverrides)==null?void 0:h.showSolidBackgroundColor;return f.jsxs("div",{className:q(r?"fixed":"absolute",e?"-inset-x-4 bottom-0 h-dvh":"inset-0","overflow-hidden"),children:[f.jsx("div",{className:q(aR,i||d?"bg-stone-150":"bg-gradient-chat-light","dark:bg-midnight-850 dark:bg-none")}),f.jsx(wn,{children:c&&f.jsx(Ae.div,{className:q(aR,u==="discover"&&"bg-gradient-discover-light dark:bg-gradient-discover-dark",u==="authentication"&&"bg-gradient-authentication-light dark:bg-gradient-authentication-dark"),initial:"initial",animate:"animate",exit:"exit",variants:{initial:tt,animate:Rt,exit:tt},transition:fy},s)})]})}const Tse=G([]);function kj(){var c;const[t,e]=et(Tse),n=m.useRef([]);m.useEffect(()=>{const u=n.current,d=t;if(u.length>d.length){const h=u.filter((g,v)=>v>=d.length),p=h.length;for(let g=p-1;g>=0;g-=1){const v=h[g];v!=null&&v.defer&&v.defer()}}n.current=t},[t]);const r=t.length>0?(c=t[t.length-1])==null?void 0:c.page:void 0,o=u=>i([u]),i=u=>{const d=u.map(h=>({page:h,defer:void 0}));e(h=>[...h,...d])};return{currentPage:r,pushPage:o,pushPages:i,goBackOrClose:()=>{e(u=>u.length<=0?u:u.slice(0,-1))},closeSettings:()=>{e([])}}}const ah="https://www.bing.com/new/termsofuse",Pu="https://go.microsoft.com/fwlink/?LinkId=521839",Vg="https://www.microsoft.com/microsoft-copilot/learn/?form=MG0AUO&OCID=MG0AUO#faqs",j_="hover:underline focus:underline";function sR(t){var e,n;return((n=(e=Ee.instance().config()).textOverrides)==null?void 0:n.call(e,t))??t}function nIe(t){const{component:e="link",buttonClassName:n}=t,r=F(mt),{pushPage:o}=kj(),i=(a,s)=>{bn({source:"complianceLinks",scenario:a,conversationId:r,destination:s})};return f.jsx("div",{className:q("flex w-full flex-wrap justify-center gap-x-5 gap-y-1 text-black/80 text-2xs dark:text-white/80",e==="button"?"flex-col p-0":"px-5 py-2"),children:e==="link"?f.jsx(Ise,{handleAnalytics:i}):f.jsx(Ase,{handleAnalytics:i,className:n??"",setPage:o})})}function Ise(t){const{handleAnalytics:e}=t;return f.jsxs(f.Fragment,{children:[f.jsx(Ua,{href:Pu,title:ie(sR("settings.privacyLink")),className:j_,onClick:()=>e("privacy",Pu),children:ie(sR("settings.privacyLink"))}),f.jsx(Ua,{href:ah,title:ie("settings.termsOfServiceLink"),className:j_,onClick:()=>e("terms",ah),children:ie("settings.termsOfServiceLink")}),f.jsx(Ua,{href:Vg,title:ie("settings.faqLink"),className:j_,onClick:()=>e("faq",Vg),children:ie("settings.faqLink")})]})}function Ase(t){const{handleAnalytics:e,className:n,setPage:r}=t,o=(i,a)=>{var d;e(i,a);const c=(d=Ee.instance().config().settingsOverrides)==null?void 0:d.shouldShowPolicyTermsQRCodes,u={privacy:"privacyStatement",terms:"terms",faq:"faq"};c&&i in u?r==null||r(u[i]):window.open(a,"_blank")};return f.jsxs(f.Fragment,{children:[f.jsx(De,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:n,title:ie("settings.privacyLink"),onClick:()=>o("privacy",Pu),children:f.jsx("span",{children:ie("settings.privacyLink")})}),f.jsx(De,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:n,title:ie("settings.termsOfServiceLink"),onClick:()=>o("terms",ah),children:f.jsx("span",{children:ie("settings.termsOfServiceLink")})}),f.jsx(De,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:n,title:ie("settings.faqLink"),onClick:()=>o("faq",Vg),children:f.jsx("span",{children:ie("settings.faqLink")})})]})}const cR={...Sh,"United Kingdom":"UK"},lR={termsLink:f.jsx(uR,{link:ah}),privacyLink:f.jsx(uR,{link:Pu})};function uR(t){const{children:e,link:n}=t;return f.jsx(Ua,{className:"underline",href:n,title:"",children:e})}function kse(t,e,n){const r=new Date(n,e-1,t);return zN(r)&&r.getFullYear()===n&&r.getMonth()===e-1&&r.getDate()===t}function xse(t,e,n){const r=new Date(n,e-1,t),o=qH(new Date);return r<=o}const U_="border-2 border-system-red-550/50 bg-system-red-550/10 text-system-red-550 dark:text-system-red-350";function Rse(){const[t,e]=m.useState(!1),[n,r]=m.useState(void 0),[o,i]=m.useState(void 0);m.useEffect(()=>{async function A(){const N=await NQ();i(N)}A()},[]),m.useEffect(()=>{const A=new URLSearchParams(window.location.search);A.delete("code"),A.delete("state"),A.delete("error"),window.history.replaceState({},document.title,`${window.location.pathname}?${A}`)},[]),m.useEffect(()=>{o&&Ku({page:"auth0AccountVerificationPage",scenario:"auth0Verification",customData:JSON.stringify({accountType:o})})},[o]);const[a,s]=m.useState(""),[c,u]=m.useState(""),[d,h]=m.useState(""),[p,g]=m.useState(cR["United States"]),{i18n:v}=Fe(),y=HT(v.resolvedLanguage),_=new Intl.NumberFormat(y,{minimumIntegerDigits:2,useGrouping:!1}),b=new Intl.NumberFormat(y,{minimumIntegerDigits:4,useGrouping:!1});m.useEffect(()=>{e(!!!(c&&d&&a&&p))},[c,d,a,p]);const C=[{key:"01",text:ie("common.date.month.january")},{key:"02",text:ie("common.date.month.february")},{key:"03",text:ie("common.date.month.march")},{key:"04",text:ie("common.date.month.april")},{key:"05",text:ie("common.date.month.may")},{key:"06",text:ie("common.date.month.june")},{key:"07",text:ie("common.date.month.july")},{key:"08",text:ie("common.date.month.august")},{key:"09",text:ie("common.date.month.september")},{key:"10",text:ie("common.date.month.october")},{key:"11",text:ie("common.date.month.november")},{key:"12",text:ie("common.date.month.december")}],w=Object.entries(cR).sort().map(([A,N])=>({key:N,text:A})),S=Array.from({length:31},(A,N)=>{const R=N+1,z=_.format(R);return{key:R.toString(),text:z}}),E=Array.from({length:125},(A,N)=>{const R=new Date().getFullYear()-N,z=b.format(R);return{key:`${new Date().getFullYear()-N}`,text:z}}),I=A=>f.jsx("p",{children:A.text}),x=async()=>{const A=parseInt(a,10),N=parseInt(c,10),R=parseInt(d,10);if(!kse(R,N,A)){dt({source:"auth0AccountVerificationPage",scenario:"auth0VerificationInvalidDate",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),r(!1);return}if(!xse(R,N,A)){dt({source:"auth0AccountVerificationPage",scenario:"auth0VerificationNotAdult",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),r(!1);return}const X=zl(new Date(A,N-1,R),"yyyy-MM-dd");r(!0);const M=await OQ(X,p);if(!M){dt({source:"auth0AccountVerificationPage",scenario:"auth0VerificationNotSuccessfulInvalidToken",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),r(!1);return}const{ageGroup:k}=M,U=k===ks.NOT_ADULT,O=k===ks.ADULT;if(!(U||O)){dt({source:"auth0AccountVerificationPage",scenario:"auth0VerificationNotSuccessfulNotTeenOrAdult",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),r(!1);return}dt({source:"auth0AccountVerificationPage",scenario:"auth0VerificationSuccessful",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),dy()};return f.jsxs(f.Fragment,{children:[f.jsx(ia,{forceGradient:!0,overrideGradientType:"authentication"}),f.jsxs("section",{className:"relative m-auto flex min-h-dvh max-w-[500px] flex-col items-center justify-center gap-3 overflow-y-auto px-5 py-12 text-center",children:[f.jsx("h1",{className:"mb-4 text-center font-semibold text-xl sm:text-2xl",children:ie("error.auth0VerificationTitle")}),f.jsx("p",{children:ie("error.auth0VerificationDescription")}),f.jsxs("div",{className:"mt-12 w-full",children:[f.jsx(iR,{className:"mb-2 text-base",htmlFor:"birthdate-month",content:ie("error.auth0VerificationBirthdate"),required:!0}),f.jsxs("div",{id:"birthdate-group",className:"flex gap-2",children:[f.jsx(Up,{renderOption:I,options:C,onSelect:A=>u(A),id:"birthdate-month","aria-labelledby":"birthdate-group",placeholder:ie("dates.month"),className:q("flex-1",Oa,n===!1&&U_),value:c,isValid:n,menuClassName:qt.dropdownMenuOverModal}),f.jsx(Up,{renderOption:I,options:S,onSelect:A=>h(A),id:"birthdate-day","aria-labelledby":"birthdate-group",placeholder:ie("dates.day"),className:q("flex-1",Oa,n===!1&&U_),value:d,menuClassName:qt.dropdownMenuOverModal}),f.jsx(Up,{renderOption:I,options:E,onSelect:A=>s(A),id:"birthdate-year","aria-labelledby":"birthdate-group",placeholder:ie("dates.year"),className:q("flex-1",Oa,n===!1&&U_),value:a,menuClassName:qt.dropdownMenuOverModal})]}),n===!1&&f.jsx("div",{className:q("mt-2 text-start text-system-red-550 text-sm dark:text-system-red-350"),children:ie("error.authh0VerificationAgeError")})]}),f.jsxs("div",{className:"mt-12 w-full",children:[f.jsx(iR,{className:"mb-2 text-base",htmlFor:"country",content:ie("error.auth0VerificationCountryRegion"),required:!0}),f.jsx(Up,{renderOption:I,options:w,onSelect:A=>g(A),id:"country","aria-labelledby":"country-group",placeholder:ie("error.auth0VerificationCountryRegion"),className:q("flex-1",Oa),value:p,menuClassName:qt.dropdownMenuOverModal})]}),f.jsxs("div",{className:"mt-12 w-full text-black text-2xs dark:text-white/90",children:[f.jsx(Mo,{i18nKey:ie("error.auth0VerificationDisclaimer"),components:{termsLink:lR.termsLink,privacyLink:lR.privacyLink}}),f.jsx(De,{className:"mt-4 w-full",color:"strong",size:"56-xl",variant:"rect",onClick:x,title:ie("common.continue"),disabled:t,children:ie("common.continue")})]})]})]})}function dR(t){var e,n;return((n=(e=Ee.instance().config()).textOverrides)==null?void 0:n.call(e,t))??t}const F_="w-full";function Pse(){const{switchMicrosoftAccount:t,logout:e,login:n}=id(),{t:r}=Fe(),o=Ac(),i=async()=>{await t()},a=async(u,d)=>{switch(await e(),u){case"microsoft":n({provider:u});break;case"auth0":n({provider:u,opts:d});break}},s=Ee.instance().config().hideAgeVerificationButton!==!0,c=Ee.instance().config().hideAgeVerificationSwitchAccountButton!==!0;return f.jsxs(f.Fragment,{children:[f.jsx(ia,{forceGradient:!0}),f.jsxs("section",{className:"relative z-10 m-auto flex h-dvh max-w-96 flex-col items-center justify-center gap-3 px-5 text-center",children:[f.jsx("h1",{className:"text-2xl",children:r(dR("error.ageVerificationTitle"))}),f.jsx("h2",{className:"text-foreground-600",children:r(dR("error.ageVerification"))}),s&&f.jsx(De,{className:"mt-6 w-full",color:"default",size:"56-xl",variant:"rect",title:r("error.ageVerificationVerifyAge"),onClick:()=>{uy(PB)},children:r("error.ageVerificationVerifyAge")}),s&&f.jsx("div",{className:"text-balance text-foreground-600",children:r("error.ageVerificationOr")}),o?f.jsxs(f.Fragment,{children:[f.jsxs(De,{onClick:()=>a("microsoft"),color:"default",title:r("signInPrompt.continueWithMicrosoft"),variant:"pill",size:"56-xl",className:q(F_),children:[f.jsx(cv,{className:"size-6"}),r("signInPrompt.continueWithMicrosoft")]}),f.jsxs(De,{onClick:()=>a("auth0",{connection:"apple"}),color:"default",variant:"pill",size:"56-xl",title:r("signInPrompt.continueWithApple"),className:q(F_),children:[f.jsx(ow,{className:"size-6 text-black dark:text-white"}),r("signInPrompt.continueWithApple")]}),f.jsxs(De,{onClick:()=>a("auth0",{connection:"google"}),color:"default",variant:"pill",size:"56-xl",title:r("signInPrompt.continueWithGoogle"),className:q(F_),children:[f.jsx(iw,{className:"size-6"}),r("signInPrompt.continueWithGoogle")]})]}):c&&f.jsx(De,{className:"w-full",color:"default",size:"56-xl",variant:"rect",title:r("error.ageVerificationSwitchAccount"),onClick:i,children:r("error.ageVerificationSwitchAccount")})]})]})}function Ose(){const t=F(jn);return(t==null?void 0:t.provider)==="auth0"?f.jsx(Rse,{}):f.jsx(Pse,{})}const xj=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M12 4.5C7.85786 4.5 4.5 7.85786 4.5 12C4.5 16.1421 7.85786 19.5 12 19.5C16.1421 19.5 19.5 16.1421 19.5 12C19.5 11.6236 19.4723 11.2538 19.4188 10.8923C19.3515 10.4382 19.6839 10 20.1429 10C20.5138 10 20.839 10.2562 20.8953 10.6228C20.9642 11.0718 21 11.5317 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C14.3051 3 16.4077 3.86656 18 5.29168V4.25C18 3.83579 18.3358 3.5 18.75 3.5C19.1642 3.5 19.5 3.83579 19.5 4.25V7.25C19.5 7.66421 19.1642 8 18.75 8H15.75C15.3358 8 15 7.66421 15 7.25C15 6.83579 15.3358 6.5 15.75 6.5H17.0991C15.7609 5.25883 13.9691 4.5 12 4.5Z",fill:"currentColor"})),rIe=Object.freeze(Object.defineProperty({__proto__:null,default:xj},Symbol.toStringTag,{value:"Module"}));function Nse(t){const{t:e}=Fe(),{onBtnClick:n=()=>{}}=t;return f.jsxs("section",{className:"relative z-10 m-auto flex h-full max-w-96 flex-col items-center justify-center gap-3 px-5 text-center",children:[f.jsx("h1",{className:"text-2xl",children:e("error.unhandledErrorTitle")}),f.jsx("h2",{className:"text-foreground-600",children:e("error.unhandledError")}),f.jsxs(De,{className:"mt-6 w-full",color:"default",size:"56-xl",variant:"rect",title:e("error.unhandledErrorReload"),onClick:n,children:[f.jsx(xj,{className:"size-6"}),e("error.unhandledErrorReload")]})]})}function VT(){return f.jsxs("main",{className:"relative size-full overflow-hidden",children:[f.jsx(ia,{forceGradient:!0}),f.jsx(Nse,{onBtnClick:()=>{dy()}})]})}const Rj=m.createContext(void 0);function Mse(t,e){return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}function zT(t){const e=typeof window<"u"?window.matchMedia(t):null,[n,r]=m.useState(e==null?void 0:e.matches);return m.useEffect(()=>{e&&Mse(e,o=>r(o.matches))},[t,e]),!!n}const Pj={sm:"640",md:"768",lg:"1024",xl:"1280"};function qn(t){const{breakpoint:e}=t,n=Pj[e];return!zT(`(min-width: ${n}px)`)}function Oj(t){const{breakpoint:e}=t,r=`(min-width: ${Pj[e]}px)`,o=typeof window<"u"?window.matchMedia(r):null;return!(o!=null&&o.matches)}function $T(){const t=qn({breakpoint:"sm"});return(Ee.instance().config().responsiveFullWidthSidebarEnabled??!1)&&t}const fR=Ic.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)}),B_={dedupe:!0},Lse=(t,e,n)=>{const{cache:r,compare:o,suspense:i,fallbackData:a,revalidateOnMount:s,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:h,keepPreviousData:p}=n,[g,v,y,_]=ho.get(r),[b,C]=Ji(t),w=m.useRef(!1),S=m.useRef(!1),E=m.useRef(b),I=m.useRef(e),x=m.useRef(n),A=()=>x.current,N=()=>A().isVisible()&&A().isOnline(),[R,z,P,X]=ei(r,b),M=m.useRef({}).current,k=Oe(a)?n.fallback[b]:a,U=(W,re)=>{for(const be in M){const D=be;if(D==="data"){if(!o(W[D],re[D])&&(!Oe(W[D])||!o(Te,re[D])))return!1}else if(re[D]!==W[D])return!1}return!0},O=m.useMemo(()=>{const W=!b||!e?!1:Oe(s)?A().isPaused()||i?!1:Oe(c)?!0:c:s,re=fe=>{const je=Qr(fe);return delete je._k,W?{isValidating:!0,isLoading:!0,...je}:je},be=R(),D=X(),ce=re(be),ge=be===D?ce:re(D);let te=ce;return[()=>{const fe=re(R());return U(fe,te)?(te.data=fe.data,te.isLoading=fe.isLoading,te.isValidating=fe.isValidating,te.error=fe.error,te):(te=fe,fe)},()=>ge]},[r,b]),$=lv.useSyncExternalStore(m.useCallback(W=>P(b,(re,be)=>{U(be,re)||W()}),[r,b]),O[0],O[1]),K=!w.current,J=g[b]&&g[b].length>0,se=$.data,ne=Oe(se)?k:se,ve=$.error,Be=m.useRef(ne),Te=p?Oe(se)?Be.current:se:ne,Pe=J&&!Oe(ve)?!1:K&&!Oe(s)?s:A().isPaused()?!1:i?Oe(ne)?!1:c:Oe(ne)||c,He=!!(b&&e&&K&&Pe),Ze=Oe($.isValidating)?He:$.isValidating,he=Oe($.isLoading)?He:$.isLoading,j=m.useCallback(async W=>{const re=I.current;if(!b||!re||S.current||A().isPaused())return!1;let be,D,ce=!0;const ge=W||{},te=!y[b]||!ge.dedupe,fe=()=>rc?!S.current&&b===E.current&&w.current:b===E.current,je={isValidating:!1,isLoading:!1},Je=()=>{z(je)},at=()=>{const Ue=y[b];Ue&&Ue[1]===D&&delete y[b]},nt={isValidating:!0};Oe(R().data)&&(nt.isLoading=!0);try{if(te&&(z(nt),n.loadingTimeout&&Oe(R().data)&&setTimeout(()=>{ce&&fe()&&A().onLoadingSlow(b,n)},n.loadingTimeout),y[b]=[re(C),oc()]),[be,D]=y[b],be=await be,te&&setTimeout(at,n.dedupingInterval),!y[b]||y[b][1]!==D)return te&&fe()&&A().onDiscarded(b),!1;je.error=sn;const Ue=v[b];if(!Oe(Ue)&&(D<=Ue[0]||D<=Ue[1]||Ue[1]===0))return Je(),te&&fe()&&A().onDiscarded(b),!1;const Ve=R().data;je.data=o(Ve,be)?Ve:be,te&&fe()&&A().onSuccess(be,b,n)}catch(Ue){at();const Ve=A(),{shouldRetryOnError:bt}=Ve;Ve.isPaused()||(je.error=Ue,te&&fe()&&(Ve.onError(Ue,b,Ve),(bt===!0||pr(bt)&&bt(Ue))&&(!A().revalidateOnFocus||!A().revalidateOnReconnect||N())&&Ve.onErrorRetry(Ue,b,Ve,Lt=>{const Pt=g[b];Pt&&Pt[0]&&Pt[0](mr.ERROR_REVALIDATE_EVENT,Lt)},{retryCount:(ge.retryCount||0)+1,dedupe:!0})))}return ce=!1,Je(),!0},[b,r]),pe=m.useCallback((...W)=>dv(r,E.current,...W),[]);if(vo(()=>{I.current=e,x.current=n,Oe(se)||(Be.current=se)}),vo(()=>{if(!b)return;const W=j.bind(sn,B_);let re=0;const D=hw(b,g,(ce,ge={})=>{if(ce==mr.FOCUS_EVENT){const te=Date.now();A().revalidateOnFocus&&te>re&&N()&&(re=te+A().focusThrottleInterval,W())}else if(ce==mr.RECONNECT_EVENT)A().revalidateOnReconnect&&N()&&W();else{if(ce==mr.MUTATE_EVENT)return j();if(ce==mr.ERROR_REVALIDATE_EVENT)return j(ge)}});return S.current=!1,E.current=b,w.current=!0,z({_k:C}),Pe&&(Oe(ne)||Qi?W():lw(W)),()=>{S.current=!0,D()}},[b]),vo(()=>{let W;function re(){const D=pr(u)?u(R().data):u;D&&W!==-1&&(W=setTimeout(be,D))}function be(){!R().error&&(d||A().isVisible())&&(h||A().isOnline())?j(B_).then(re):re()}return re(),()=>{W&&(clearTimeout(W),W=-1)}},[u,d,h,b]),m.useDebugValue(Te),i&&Oe(ne)&&b){if(!rc&&Qi)throw new Error("Fallback data is required when using suspense in SSR.");I.current=e,x.current=n,S.current=!1;const W=_[b];if(!Oe(W)){const re=pe(W);fR(re)}if(Oe(ve)){const re=j(B_);Oe(Te)||(re.status="fulfilled",re.value=!0),fR(re)}else throw ve}return{mutate:pe,get data(){return M.data=!0,Te},get error(){return M.error=!0,ve},get isValidating(){return M.isValidating=!0,Ze},get isLoading(){return M.isLoading=!0,he}}},Dse=fw(Lse),jse=t=>Ji(t?t(0,null):null)[0],H_=Promise.resolve(),Use=t=>(e,n,r)=>{const o=m.useRef(!1),{cache:i,initialSize:a=1,revalidateAll:s=!1,persistSize:c=!1,revalidateFirstPage:u=!0,revalidateOnMount:d=!1,parallel:h=!1}=r,[,,,p]=ho.get(uw);let g;try{g=jse(e),g&&(g=kN+g)}catch{}const[v,y,_]=ei(i,g),b=m.useCallback(()=>Oe(v()._l)?a:v()._l,[i,g,a]);lv.useSyncExternalStore(m.useCallback(A=>g?_(g,()=>{A()}):()=>{},[i,g]),b,b);const C=m.useCallback(()=>{const A=v()._l;return Oe(A)?a:A},[g,a]),w=m.useRef(C());vo(()=>{if(!o.current){o.current=!0;return}g&&y({_l:c?w.current:C()})},[g,i]);const S=d&&!o.current,E=t(g,async A=>{const N=v()._i,R=v()._r;y({_r:sn});const z=[],P=C(),[X]=ei(i,A),M=X().data,k=[];let U=null;for(let O=0;O<P;++O){const[$,K]=Ji(e(O,h?null:U));if(!$)break;const[J,se]=ei(i,$);let ne=J().data;const ve=s||N||Oe(ne)||u&&!O&&!Oe(M)||S||M&&!Oe(M[O])&&!r.compare(M[O],ne);if(n&&(typeof R=="function"?R(ne,K):ve)){const Be=async()=>{if(!($ in p))ne=await n(K);else{const Pe=p[$];delete p[$],ne=await Pe}se({data:ne,_k:K}),z[O]=ne};h?k.push(Be):await Be()}else z[O]=ne;h||(U=ne)}return h&&await Promise.all(k.map(O=>O())),y({_i:sn}),z},r),I=m.useCallback(function(A,N){const R=typeof N=="boolean"?{revalidate:N}:N||{},z=R.revalidate!==!1;return g?(z&&(Oe(A)?y({_i:!0,_r:R.revalidate}):y({_i:!1,_r:R.revalidate})),arguments.length?E.mutate(A,{...R,revalidate:z}):E.mutate()):H_},[g,i]),x=m.useCallback(A=>{if(!g)return H_;const[,N]=ei(i,g);let R;if(pr(A)?R=A(C()):typeof A=="number"&&(R=A),typeof R!="number")return H_;N({_l:R}),w.current=R;const z=[],[P]=ei(i,g);let X=null;for(let M=0;M<R;++M){const[k]=Ji(e(M,X)),[U]=ei(i,k),O=k?U().data:sn;if(Oe(O))return I(P().data);z.push(O),X=O}return I(z)},[g,i,I,C]);return{size:C(),setSize:x,mutate:I,get data(){return E.data},get error(){return E.error},get isValidating(){return E.isValidating},get isLoading(){return E.isLoading}}},Fse=PN(Dse,Use);function GT(t,e){const{data:n,error:r,isLoading:o,size:i,setSize:a,mutate:s}=Fse(e,t,{revalidateFirstPage:!1}),c=m.useCallback(async()=>{await s()},[s]),u=m.useCallback(async()=>{await a(i+1)},[a,i]),d=n==null?void 0:n[i-1],h=i>0&&!!n&&typeof d>"u",p=o||h,g=d?!!e(i+1,d):!1;return{loader:{loading:p,hasNextPage:g,error:r,onLoadMore:u,data:n},refetch:c}}function Bse(t,e){if(!(e!=null&&e.next)&&t>0)return null;const n={url:"/pages",isFirstPage:t===0};return e!=null&&e.next&&(n.args={cursor:e.next}),n}function Hse(t={}){const{disabled:e=!1}=t,n=Vo("kill-shared-page"),r=m.useCallback(async({url:o,args:i})=>{const a={...i,...n?{}:{"api-version":"2"}};return await Un(o,HW,{query:a,analytics:{anonymousPath:"/pages"}}).then(c=>c.data)},[n]);return GT(r,e?()=>null:Bse)}function Vse(){const t=de("pages"),e=de("pages-anonymous"),n=_r();return{canCreatePageForSignedOut:e&&t,canCreatePage:(n||e)&&t}}function oIe(){dt({pageName:"chatPage",sectionName:"chatResponse",source:"addToPage"})}function iIe(t){dt({pageName:"addToPage",source:t})}function zse(){dt({sectionName:"actionMenu",source:"createNewPage"})}function $se(t){dt({pageName:t,source:"openPage"})}function aIe(){dt({pageName:"pages",sectionName:"editBar",source:"askCopilot"})}function sIe(t,e){dt({pageName:"pages",sectionName:"suggestions",source:t==="accept"?"applyRevision":"reject",customData:JSON.stringify({eventInfo_pageId:e})})}const cIe=["createPage","addToExistingPage","openPageOnChat","openPageOnHistory","copyPage"];function lIe(t,e,n){Wu({feature:"page",scenario:t,duration:Math.round(e),customData:JSON.stringify({eventInfo_pageId:n})})}function uIe(){dt({pageName:"pages",source:"hyperlinkInPages"})}function dIe({sectionName:t,pageId:e}){dt({sectionName:t,source:"deletePage",customData:JSON.stringify({eventInfo_pageId:e})})}function fIe({sectionName:t,pageId:e}){dt({sectionName:t,source:"renamePage",customData:JSON.stringify({eventInfo_pageId:e})})}function hIe(t){Y.trackEvent({name:"interaction",data:{eventName:"copilotPagesEdited",eventInfo_customData:JSON.stringify({eventInfo_pageId:t})}})}function pIe(t){const{pageName:e,sectionName:n,pageId:r}=t;dt({pageName:e,sectionName:n,source:"pagesSharing",customData:JSON.stringify({eventInfo_pageId:r})})}function mIe(t){const{sectionName:e,pageId:n}=t;dt({sectionName:e,source:"removePagesSharing",customData:JSON.stringify({eventInfo_pageId:n})})}const gIe=["pagesHistory","direct"];function vIe(t){Y.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"pagesSharing",eventInfo_impressionScenario:t}})}const yIe=["responsePreviewedPage","chatCreateNewPage","chatAddToExistingPage","chatDirectToNewPage","pagesHistory","actionMenuCreateNewPage","makeACopyViewerPage","makeACopyOwnerPage","makeACopyViewOnly","makeACopyPagesHistory"];function bIe(t){Y.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"pages",eventInfo_impressionScenario:t}})}function _Ie(t){const{pageName:e,sectionName:n,pageId:r}=t;dt({pageName:e,sectionName:n,source:"makePagesCopy",customData:JSON.stringify({eventInfo_pageId:r})})}const Gse=l.union([l.literal("open"),l.literal("close")]),Nj=l.object({sidebarVisibility:Gse.optional()});function Kse(t){sc(_M,Nj,{sidebarVisibility:t})}function Mj(){var t;return((t=Ii(_M,Nj))==null?void 0:t.sidebarVisibility)??"close"}function Wse(){return!Ee.instance().config().sidebarNavigation||Oj({breakpoint:"md"})?!1:Mj()!=="close"}const os=G(Wse());function qse(){const t=to(),e=tv(),n=Se(os);return m.useCallback(async({pageId:r,closeSidebar:o,sourcePage:i,impressionScenario:a,featureLatencyInfo:s})=>{$se(i),o&&n(!1),await t({to:"/pages/$pageId",params:{pageId:r},from:e.state.location.pathname,state:{...s,impressionScenario:a}})},[t,e.state.location.pathname,n])}const Yse=G(t=>t(Bc).isOpen||t(Lj)),Bc=G({isOpen:!1,scenario:null}),Lj=G(t=>{const e=t(ac);return e===null?!1:e===0||t(s2).includes(e)}),Qse=G(t=>{const e=t(Lj),n=t(Du("location-prompt")),r=t(Ei).filter(({author:i})=>i==="human").length,o=!!hn(IY);return e||!n||o?!1:r===bB}),hR="/pages";async function Jse(t,e){const n=await Pr({path:"/pages",args:{body:{title:t,content:e},analytics:{anonymousPath:hR}}}),r=await n.json(),o=zW.safeParse(r);if(!n.ok&&o.success)throw new Error(o.data.errorCode);try{return UW.parse(r)}catch(i){throw i instanceof Tm&&Hf(i,hR,!1),i}}function Xse(){const{canCreatePage:t,canCreatePageForSignedOut:e}=Vse(),{t:n}=Fe(),r=Se(LT),[o,i]=m.useState(!1),a=Ac(),s=Se(Or),c=Se(Bc),u=qse();return{creatingPage:o,createPage:t?async({content:h,sourcePage:p,impressionScenario:g,featureLatencyInfo:v})=>{i(!0);try{const{id:y}=await Jse("",h);await u({pageId:y,closeSidebar:!0,sourcePage:p,impressionScenario:g,featureLatencyInfo:v})}catch(y){y instanceof Error&&y.message==="page-count-exceeded"&&e?(s(a?"prompt-3p-sign-in":"prompt-sign-in"),c({isOpen:!0,scenario:"sidebarActionCreatePage",reason:"pageLimitReached"})):r({title:n("common.somethingWrong"),message:n("pages.errorCreatingMessage")})}finally{i(!1)}}:null}}function Zse(t){const{callback:e,signInScenario:n,onShowSignIn:r,signInReason:o}=t,i=_r(),a=Se(Bc);return(...s)=>{if(!i){a({isOpen:!0,scenario:n,reason:o}),r&&typeof r=="function"&&r();return}e(...s)}}function KT(){const{createConversation:t}=ny(),e=Se(oy);return{startNewConversation:()=>{t(),e("center")}}}function WT({defaultValue:t,controlledValue:e,onChange:n}){const r=e!==void 0,[o,i]=m.useState(t);return m.useEffect(()=>{r&&i(e)},[e,r]),{state:r?e:o,setState:c=>{r||i(c),n==null||n(c)}}}function qT(t){const{renderTrigger:e,triggerClick:n,children:r,className:o,options:i,isOpen:a,onIsOpenChange:s}=t,{state:c,setState:u}=WT({controlledValue:a,defaultValue:!1,onChange:s}),{disableFocusManager:d=!1}=i??{},{refs:h,x:p,y:g,strategy:v,context:y}=nv({open:c,placement:(i==null?void 0:i.placement)??"bottom-end",onOpenChange:u,middleware:[_h((i==null?void 0:i.offset)??1),rv({fallbackAxisSideDirection:"end"}),Ch()],whileElementsMounted:bh}),_=$O(y),b=GO(y),C=KO(y,{role:(i==null?void 0:i.roleType)??"dialog"}),{getReferenceProps:w,getFloatingProps:S}=WO([_,b,C]),E=I=>{i!=null&&i.stopReferencePropagation&&I.stopPropagation(),n==null||n(I)};return f.jsxs(f.Fragment,{children:[e==null?void 0:e({ref:h.setReference,...w({onClick:E})},c),c&&f.jsx(Q0,{children:f.jsx(ov,{context:y,modal:!1,disabled:d,children:f.jsx("div",{ref:h.setFloating,style:{position:v,top:`${g}px`,insetInlineStart:`${p}px`},...S({onClick:I=>{i!=null&&i.stopFloatingPropagation&&I.stopPropagation(),i!=null&&i.hideOnMenuClick&&u(!1)}}),className:q("start-0 flex rounded-2xl p-1.5 shadow-xl",qt.modal,o),children:r})})})]})}function Dj(t){const{buttonSize:e}=t,{t:n}=Fe(),{startNewConversation:r}=KT(),{createPage:o}=Xse(),i=_r(),a=de("pages-anonymous"),{refetch:s}=Hse({disabled:!i&&!a}),c=async()=>{zse(),await(o==null?void 0:o({content:"",sourcePage:"createNewPage",impressionScenario:"actionMenuCreateNewPage",featureLatencyInfo:{scenario:"createPage",startTimestamp:Date.now()}})),await s()},u=Zse({callback:c,signInScenario:"sidebarActionCreatePage",signInReason:"createPage"}),d=async()=>{!i&&a?c():u()};return f.jsx(qT,{options:{placement:"bottom-end",hideOnMenuClick:!0},className:wi,renderTrigger:h=>f.jsx(De,{...h,title:n("sidebar.actions.menuTitle"),color:"subtle-dimmed-inverted",variant:"rect",size:e,className:"!min-w-7 !px-0",children:f.jsx(Sc,{className:"size-3.5 rotate-90"})}),children:f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsx(De,{color:"subtle-dimmed-inverted",size:"40-base",variant:"rect",alignment:"start",title:n("sidebar.actions.newChat"),onClick:r,children:n("sidebar.actions.newChat")}),f.jsx(De,{color:"subtle-dimmed-inverted",size:"40-base",alignment:"start",variant:"rect",title:n("sidebar.actions.newPage"),onClick:()=>{setTimeout(()=>{d()},0)},children:n("sidebar.actions.newPage")})]})})}const jj=t=>m.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M9.15898 16.8666C9.36292 17.0528 9.67918 17.0384 9.86536 16.8345C10.0515 16.6305 10.0371 16.3143 9.8332 16.1281L3.66535 10.4974H17.4961C17.7722 10.4974 17.9961 10.2735 17.9961 9.99736C17.9961 9.72122 17.7722 9.49736 17.4961 9.49736H3.66824L9.8332 3.86927C10.0371 3.68309 10.0515 3.36684 9.86536 3.16289C9.67918 2.95895 9.36292 2.94456 9.15898 3.13074L2.24263 9.44478C2.10268 9.57254 2.02285 9.74008 2.00314 9.91323C1.99851 9.94058 1.99609 9.96869 1.99609 9.99736C1.99609 10.0242 1.99821 10.0506 2.00229 10.0763C2.02047 10.2522 2.10058 10.4229 2.24263 10.5526L9.15898 16.8666Z",fill:"currentColor"})),CIe=Object.freeze(Object.defineProperty({__proto__:null,default:jj},Symbol.toStringTag,{value:"Module"})),Uj=t=>m.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M2 4.5C2 4.22386 2.22386 4 2.5 4H13.5C13.7761 4 14 4.22386 14 4.5C14 4.77614 13.7761 5 13.5 5H2.5C2.22386 5 2 4.77614 2 4.5ZM2 14.5C2 14.2239 2.22386 14 2.5 14H12.5C12.7761 14 13 14.2239 13 14.5C13 14.7761 12.7761 15 12.5 15H2.5C2.22386 15 2 14.7761 2 14.5ZM2.5 9C2.22386 9 2 9.22386 2 9.5C2 9.77614 2.22386 10 2.5 10H17.5C17.7761 10 18 9.77614 18 9.5C18 9.22386 17.7761 9 17.5 9H2.5Z",fill:"currentColor"})),SIe=Object.freeze(Object.defineProperty({__proto__:null,default:Uj},Symbol.toStringTag,{value:"Module"})),py=t=>m.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("mask",{id:"mask0_21044_3802",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:20,height:20},m.createElement("path",{d:"M19.7803 1.28033C20.0732 0.987435 20.0732 0.512561 19.7803 0.219669C19.4874 -0.0732238 19.0125 -0.0732228 18.7196 0.219671L8.71967 10.2197L8.25 11.75L9.78033 11.2803L19.7803 1.28033ZM4.25 1C2.45507 1 1 2.45508 1 4.25V15.75C1 17.5449 2.45507 19 4.25 19H15.75C17.5449 19 19 17.5449 19 15.75V7.75C19 7.33579 18.6642 7 18.25 7C17.8358 7 17.5 7.33579 17.5 7.75V15.75C17.5 16.7165 16.7165 17.5 15.75 17.5H4.25C3.2835 17.5 2.5 16.7165 2.5 15.75V4.25C2.5 3.2835 3.2835 2.5 4.25 2.5H12.25C12.6642 2.5 13 2.16421 13 1.75C13 1.33579 12.6642 1 12.25 1H4.25Z",fill:"currentColor"})),m.createElement("g",{mask:"url(#mask0_21044_3802)"},m.createElement("rect",{width:24,height:24,transform:"translate(-2 -2)",fill:"currentColor"}))),wIe=Object.freeze(Object.defineProperty({__proto__:null,default:py},Symbol.toStringTag,{value:"Module"}));function ece(){const[t,e]=m.useState(!1);return m.useEffect(()=>{async function n(){const o=await(Ee.instance().config().isConversationHistoryHidden??(()=>Promise.resolve(!1)))();e(o)}n().catch(()=>{})},[]),t}function my(){const t=Zt();return t.startsWith("/podcasts")||t.startsWith("/shares/podcasts")}function tce(t){const{open:e,toggle:n}=t,{startNewConversation:r}=KT(),[o]=et(Xr),i=F(Hu),{t:a}=Fe(),s=de("pages"),c=Zt(),u=my(),d=o==="chat-only"||e,h=!ece(),p=!e&&(c.startsWith("/daily")||c.endsWith("/talk")||u||c.startsWith("/labs/experiments/3d-generations"));return f.jsx("div",{className:q("pointer-events-none absolute start-0 top-0 w-full p-1 pe-3.5",qt.sidebar),children:f.jsx("div",{className:"relative",children:f.jsxs("div",{className:"absolute flex min-w-full items-center justify-between gap-1 p-1",children:[f.jsx(wn,{children:p&&f.jsx(Ae.div,{className:q("pointer-events-auto absolute inset-0 rounded-2xl border border-stroke-100 shadow-md dark:border-stroke-300",wi),initial:"initial",animate:"animate",exit:"exit",variants:{initial:tt,animate:Rt,exit:tt},transition:So})}),f.jsxs("div",{className:"pointer-events-auto flex shrink-0 items-center gap-1","data-theme":i&&!e?i.theme:void 0,children:[(h||d&&e)&&f.jsx(De,{title:a(e?"sidebar.close":"sidebar.open"),className:"after:absolute after:inset-0 after:rounded-lg hover:after:bg-black/3 dark:hover:after:bg-white/5",color:"subtle-dimmed-inverted",variant:"square",size:"28-xxs",onClick:()=>{dt({source:"sidebarToggle",pageName:c,customData:JSON.stringify({isOpen:e})}),n()},testId:"sidebar-toggle-button",children:e?f.jsx(jj,{className:"size-4"}):f.jsx(Uj,{className:"size-4"})}),d&&(h||!e)&&f.jsxs("div",{className:"flex rounded-lg hover:bg-black/3 dark:hover:bg-white/5",children:[f.jsx(De,{title:a("composer.startNewChat"),color:"subtle-dimmed-inverted",variant:"square",size:"28-xxs",onClick:()=>{dt({source:"sidebarNewConversation",destination:"/chat",pageName:c,customData:JSON.stringify({isOpen:e})}),r()},children:f.jsx(py,{className:"size-4"})}),s&&f.jsx(Dj,{buttonSize:"28-xxs"})]})]})]})})})}const pR=65,nce=100;function mR({count:t=1}){const e=m.useMemo(()=>Array.from({length:t},()=>`${Math.floor(Math.random()*(nce-pR+1))+pR}%`),[t]);return f.jsx("div",{className:"flex flex-col gap-5 px-3 py-1",children:e.map((n,r)=>f.jsx("div",{style:{width:n},className:q("relative h-5 overflow-hidden rounded-lg bg-background-300 opacity-30 dark:bg-background-250 dark:opacity-40","border border-background-300 dark:border-background-250","after:absolute after:-start-[300%] after:end-0 after:start-0 after:h-full","after:opacity-50 dark:after:opacity-5","after:bg-gradient-to-r after:from-transparent after:via-white after:to-transparent","after:bg-[length:80%_100%] after:bg-no-repeat","after:animate-[shimmer-translate_2s_infinite]")},r))})}const rce="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/labs-entry-BqXQ5OEs.png",Fj=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M19.2501 11.0017C20.2166 11.0017 21.0001 11.7852 21.0001 12.7517V19.2517C21.0001 20.2182 20.2166 21.0017 19.2501 21.0017H14.7501C13.7836 21.0017 13.0001 20.2182 13.0001 19.2517V12.7517C13.0001 11.7852 13.7836 11.0017 14.7501 11.0017H19.2501ZM9.26831 15.0141C10.2348 15.0141 11.0183 15.7976 11.0183 16.7641V19.2517C11.0183 20.2182 10.2348 21.0017 9.26831 21.0017H4.75391C3.78741 21.0017 3.00391 20.2182 3.00391 19.2517V16.7641C3.00391 15.7976 3.78741 15.0141 4.75391 15.0141H9.26831ZM19.2501 12.5017H14.7501C14.612 12.5017 14.5001 12.6136 14.5001 12.7517V19.2517C14.5001 19.3898 14.612 19.5017 14.7501 19.5017H19.2501C19.3882 19.5017 19.5001 19.3898 19.5001 19.2517V12.7517C19.5001 12.6136 19.3882 12.5017 19.2501 12.5017ZM9.26831 16.5141H4.75391C4.61584 16.5141 4.50391 16.626 4.50391 16.7641V19.2517C4.50391 19.3898 4.61584 19.5017 4.75391 19.5017H9.26831C9.40639 19.5017 9.51831 19.3898 9.51831 19.2517V16.7641C9.51831 16.626 9.40639 16.5141 9.26831 16.5141ZM9.25391 3C10.2204 3 11.0039 3.7835 11.0039 4.75V11.25C11.0039 12.1682 10.2968 12.9212 9.39743 12.9942L9.25391 13H4.75391C3.78741 13 3.00391 12.2165 3.00391 11.25V4.75C3.00391 3.7835 3.78741 3 4.75391 3H9.25391ZM9.25391 4.5H4.75391C4.61584 4.5 4.50391 4.61193 4.50391 4.75V11.25C4.50391 11.3881 4.61584 11.5 4.75391 11.5H9.25391L9.31123 11.4934C9.42167 11.4675 9.50391 11.3683 9.50391 11.25V4.75C9.50391 4.61193 9.39198 4.5 9.25391 4.5ZM19.2501 3C20.2166 3 21.0001 3.7835 21.0001 4.75V7.25C21.0001 8.2165 20.2166 9 19.2501 9H14.7501C13.7836 9 13.0001 8.2165 13.0001 7.25V4.75C13.0001 3.7835 13.7836 3 14.7501 3H19.2501ZM14.7501 4.5C14.612 4.5 14.5001 4.61193 14.5001 4.75V7.25C14.5001 7.38807 14.612 7.5 14.7501 7.5H19.2501C19.3882 7.5 19.5001 7.38807 19.5001 7.25V4.75C19.5001 4.61193 19.3882 4.5 19.2501 4.5H14.7501Z",fill:"currentColor"})),EIe=Object.freeze(Object.defineProperty({__proto__:null,default:Fj},Symbol.toStringTag,{value:"Module"}));function gR(t){return t?{x:t.scrollLeft,y:t.scrollTop}:{x:0,y:0}}function oce(t){const[e,n]=m.useState(gR(t.current));return m.useEffect(()=>{const r=t.current;let o=null;if(r===null)return()=>{};function i(){o===null&&(o=window.requestAnimationFrame(()=>{n(gR(r)),o=null}))}return r.addEventListener("scroll",i),()=>r.removeEventListener("scroll",i)}),e}const vR="sticky bg-sidebar-light dark:bg-sidebar-dark",yR="before:pointer-events-none before:absolute before:h-10 before:w-full before:from-sidebar-light before:to-transparent dark:before:from-sidebar-dark",ice="bg-labs-light dark:bg-labs-dark",ace=m.lazy(()=>T(()=>import("./sidebar-pages-D845wk78.js"),__vite__mapDeps([214,1,215])).then(t=>({default:t.SidebarPages}))),sce=m.lazy(()=>T(()=>import("./conversations-BfM4M0-H.js"),__vite__mapDeps([216,1,217,218,219,220,215,221])));function cce(){const{t}=Fe(),e=Zt(),n=to(),r=_r(),o=de("pages"),i=de("pages-sidebar-empty-cta"),a=de("pages-anonymous"),s=(r||i||a)&&o,c=de("labs-landing");de("share-campaign-gallery");const u=hy(),d=u||e==="/daily",h=e.startsWith("/labs");e.startsWith("/campaigns/gallery");const p=F(xv),g=m.useRef(null),{y:v}=oce(g),y=v>0,_=$T(),b=Se(os);return f.jsx("div",{className:q("h-screen px-1 py-2",_?"w-full":"w-sidebar"),children:f.jsx("div",{className:"t-custom-scrollbar h-full overflow-y-auto overflow-x-hidden",ref:g,children:f.jsxs("div",{className:"flex min-h-full w-full flex-col px-2",children:[f.jsxs("div",{className:q(vR,yR,"top-0 z-10 flex flex-col gap-px pb-3 pt-[72px]","before:bottom-0 before:top-full before:bg-gradient-to-b before:opacity-90",y&&"after:absolute after:bottom-0 after:mx-1 after:w-[calc(100%-8px)] after:border-b after:border-black/8 dark:after:border-white/10",_&&"whitespace-nowrap"),children:[f.jsx(De,{className:q("flex-col px-2.5 py-2",d&&"!bg-black/5 dark:!bg-white/8"),title:t("composer.goToHome"),color:"subtle-dimmed-inverted",onClick:async()=>{u?_&&b(!1):(dt({source:"sidebarDiscoverButton",destination:"/",pageName:e}),await n({to:"/",from:e}))},testId:"sidebar-discover-button",children:f.jsxs("span",{className:"flex w-full items-center gap-3",children:[f.jsx("span",{className:"relative flex size-10 shrink-0 items-center justify-center bg-spot-peach-350/40 text-salmon-600 squircle-16 dark:bg-slate-650/60 dark:text-foreground-750",children:f.jsx(Fj,{className:"size-6"})}),f.jsxs("span",{className:"flex flex-1 flex-col",children:[f.jsx("span",{className:"h-6 w-full text-start text-base-strong",children:t("sidebar.discover")}),f.jsx("span",{className:"w-full text-start text-foreground-650 text-xs",children:t("sidebar.discoverDescription")})]})]})}),c&&f.jsx(De,{className:q("flex-col px-2.5 py-2",h&&"!bg-black/5 dark:!bg-white/8"),title:t("sidebar.labsDescription"),color:"subtle-dimmed-inverted",onClick:async()=>{dt({source:"sidebarLabsButton",destination:"/labs",pageName:e}),await n({to:"/labs",from:e}),_&&h&&b(!1)},children:f.jsxs("span",{className:"flex w-full items-center gap-3",children:[f.jsx("span",{className:q("relative flex size-10 shrink-0 items-center justify-center text-salmon-600 squircle-16 dark:text-foreground-750",ice),children:f.jsx("img",{src:rce,alt:t("sidebar.labs"),className:"size-6"})}),f.jsxs("span",{className:"flex flex-1 flex-col",children:[f.jsx("span",{className:"h-6 w-full text-start text-base-strong",children:t("sidebar.labs")}),f.jsx("span",{className:"w-full text-start text-foreground-650 text-xs",children:t("sidebar.labsDescription")})]})]})}),DB]}),f.jsxs("div",{className:"relative flex grow flex-col py-5",children:[s&&f.jsx(m.Suspense,{fallback:null,children:f.jsx(ace,{})}),f.jsx("h2",{className:"mb-5 flex gap-2 px-3 align-middle text-base-strong",children:t("sidebar.conversations")}),p?f.jsx(m.Suspense,{fallback:f.jsx(mR,{count:16}),children:f.jsx(sce,{inSidebar:!0})}):f.jsx(mR,{count:16})]}),f.jsx("div",{className:q(vR,yR,"bottom-0 before:bottom-full before:bg-gradient-to-t")})]})})})}const lce="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-wordmark-DvWA6bVb.svg",$h=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 120 120",fill:"none",...t},m.createElement("defs",null,m.createElement("radialGradient",{id:"a",cx:0,cy:0,r:1,gradientTransform:"matrix(-27.40125 -33.47302 31.47539 -25.76598 95.512 51.286)",gradientUnits:"userSpaceOnUse"},m.createElement("stop",{offset:.096,stopColor:"#00AEFF"}),m.createElement("stop",{offset:.773,stopColor:"#2253CE"}),m.createElement("stop",{offset:1,stopColor:"#0736C4"})),m.createElement("radialGradient",{id:"b",cx:0,cy:0,r:1,gradientTransform:"rotate(51.84 -70.254 70.14)scale(39.9779 38.7796)",gradientUnits:"userSpaceOnUse"},m.createElement("stop",{stopColor:"#FFB657"}),m.createElement("stop",{offset:.634,stopColor:"#FF5F3D"}),m.createElement("stop",{offset:.923,stopColor:"#C02B3C"})),m.createElement("radialGradient",{id:"e",cx:0,cy:0,r:1,gradientTransform:"matrix(-31.67773 90.58917 -108.5232 -37.949 103.796 30.703)",gradientUnits:"userSpaceOnUse"},m.createElement("stop",{offset:.066,stopColor:"#8C48FF"}),m.createElement("stop",{offset:.5,stopColor:"#F2598A"}),m.createElement("stop",{offset:.896,stopColor:"#FFB152"})),m.createElement("linearGradient",{id:"c",x1:31.75,x2:37.471,y1:18.75,y2:84.938,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{offset:.156,stopColor:"#0D91E1"}),m.createElement("stop",{offset:.487,stopColor:"#52B471"}),m.createElement("stop",{offset:.652,stopColor:"#98BD42"}),m.createElement("stop",{offset:.937,stopColor:"#FFC800"})),m.createElement("linearGradient",{id:"d",x1:36.75,x2:39.874,y1:10,y2:82.213,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{stopColor:"#3DCBFF"}),m.createElement("stop",{offset:.247,stopColor:"#0588F7",stopOpacity:0})),m.createElement("linearGradient",{id:"f",x1:106.964,x2:106.923,y1:33.365,y2:53.037,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{offset:.058,stopColor:"#F8ADFA"}),m.createElement("stop",{offset:.708,stopColor:"#A86EDD",stopOpacity:0}))),m.createElement("path",{fill:"url(#a)",d:"M85.855 18.313A11.574 11.574 0 0 0 74.75 10h-3.379a11.574 11.574 0 0 0-11.384 9.485L54.2 51.018l1.436-4.913a11.574 11.574 0 0 1 11.11-8.327H86.38l8.235 3.207 7.937-3.207h-2.316a11.574 11.574 0 0 1-11.105-8.313z"}),m.createElement("path",{fill:"url(#b)",d:"M36.326 101.64A11.574 11.574 0 0 0 47.445 110h7.176c6.276 0 11.409-5.002 11.57-11.277l.781-30.405-1.634 5.583a11.574 11.574 0 0 1-11.108 8.321H34.432l-7.058-3.829-7.641 3.83h2.278c5.154 0 9.687 3.408 11.119 8.36z"}),m.createElement("path",{fill:"url(#c)",d:"M74.248 10H34.15c-11.457 0-18.33 15.142-22.913 30.283-5.43 17.939-12.534 41.93 8.02 41.93H36.57c5.174 0 9.716-3.421 11.138-8.396 3.01-10.531 8.286-28.903 12.43-42.889 2.105-7.107 3.86-13.211 6.551-17.012C68.2 11.785 70.715 10 74.248 10"}),m.createElement("path",{fill:"url(#d)",d:"M74.248 10H34.15c-11.457 0-18.33 15.142-22.913 30.283-5.43 17.939-12.534 41.93 8.02 41.93H36.57c5.174 0 9.716-3.421 11.138-8.396 3.01-10.531 8.286-28.903 12.43-42.889 2.105-7.107 3.86-13.211 6.551-17.012C68.2 11.785 70.715 10 74.248 10"}),m.createElement("path",{fill:"url(#e)",d:"M46.744 110h40.099c11.456 0 18.33-15.144 22.913-30.288 5.429-17.942 12.533-41.937-8.02-41.937H84.422a11.576 11.576 0 0 0-11.138 8.396c-3.01 10.533-8.286 28.909-12.43 42.897-2.106 7.109-3.86 13.214-6.552 17.016-1.51 2.131-4.025 3.916-7.558 3.916"}),m.createElement("path",{fill:"url(#f)",d:"M46.744 110h40.099c11.456 0 18.33-15.144 22.913-30.288 5.429-17.942 12.533-41.937-8.02-41.937H84.422a11.576 11.576 0 0 0-11.138 8.396c-3.01 10.533-8.286 28.909-12.43 42.897-2.106 7.109-3.86 13.214-6.552 17.016-1.51 2.131-4.025 3.916-7.558 3.916"})),TIe=Object.freeze(Object.defineProperty({__proto__:null,default:$h},Symbol.toStringTag,{value:"Module"})),Bj=t=>m.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M3.75 8.5C3.75 8.08579 4.08579 7.75 4.5 7.75H5.75C6.16421 7.75 6.5 8.08579 6.5 8.5C6.5 8.91421 6.16421 9.25 5.75 9.25H4.5C4.08579 9.25 3.75 8.91421 3.75 8.5ZM3.75 12C3.75 11.5858 4.08579 11.25 4.5 11.25H5.75C6.16421 11.25 6.5 11.5858 6.5 12C6.5 12.4142 6.16421 12.75 5.75 12.75H4.5C4.08579 12.75 3.75 12.4142 3.75 12ZM3.75 15.5C3.75 15.0858 4.08579 14.75 4.5 14.75H5.75C6.16421 14.75 6.5 15.0858 6.5 15.5C6.5 15.9142 6.16421 16.25 5.75 16.25H4.5C4.08579 16.25 3.75 15.9142 3.75 15.5ZM4.25 3C2.45507 3 1 4.45507 1 6.25V17.75C1 19.5449 2.45508 21 4.25 21H19.75C21.5449 21 23 19.5449 23 17.75V6.25C23 4.45507 21.5449 3 19.75 3H4.25ZM19.75 19.5H9V4.5H19.75C20.7165 4.5 21.5 5.2835 21.5 6.25V17.75C21.5 18.7165 20.7165 19.5 19.75 19.5ZM4.25 4.5H7.5V19.5H4.25C3.2835 19.5 2.5 18.7165 2.5 17.75V6.25C2.5 5.2835 3.2835 4.5 4.25 4.5Z",fill:"currentColor"})),IIe=Object.freeze(Object.defineProperty({__proto__:null,default:Bj},Symbol.toStringTag,{value:"Module"}));function kr({url:t,className:e}){return f.jsx("div",{className:e,style:{WebkitMaskImage:`url(${t})`,maskImage:`url(${t})`,backgroundColor:"currentColor",WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat",WebkitMaskPosition:"center",maskPosition:"center",WebkitMaskSize:"contain",maskSize:"contain"}})}function uce(t){const{open:e,toggle:n}=t,{startNewConversation:r}=KT(),[o]=et(Xr),i=F(Hu),{t:a}=Fe(),s=de("pages"),c=Zt(),u=my(),d=o==="chat-only"||e,h=!e&&(c.startsWith("/daily")||c.endsWith("/talk")||u||c.startsWith("/labs/experiments/3d-generations"));return f.jsx("div",{className:q("pointer-events-none absolute start-0 top-0 w-full p-2.5 pe-3.5",qt.sidebar),children:f.jsx("div",{className:"relative",children:f.jsxs("div",{className:"absolute flex min-w-full items-center justify-between gap-1 p-1",children:[f.jsx(wn,{children:h&&f.jsx(Ae.div,{className:q("pointer-events-auto absolute inset-0 rounded-2xl border border-stroke-100 shadow-md dark:border-stroke-300",wi),initial:"initial",animate:"animate",exit:"exit",variants:{initial:tt,animate:Rt,exit:tt},transition:So})}),f.jsx(Zn,{className:"flex items-center",delay:bo.default,duration:bo.slow,children:e&&f.jsxs(De,{role:"link",title:a("sidebar.homepageLink"),className:"pointer-events-auto absolute start-0 flex items-center gap-2.5 px-3.5",color:"subtle-dimmed-inverted",testId:"sidebar-copilot-brand-button",onClick:async()=>{dt({source:"sidebarBrandButton",destination:"/chat",pageName:c}),await r()},children:[f.jsx($h,{className:"size-6"}),f.jsx("span",{className:"text-md-strong",children:f.jsx(kr,{url:lce,className:"h-[18px] w-[58px]"})})]})}),f.jsxs("div",{className:"pointer-events-auto flex shrink-0 items-center gap-1","data-theme":i&&!e?i.theme:void 0,children:[f.jsx(De,{title:a(e?"sidebar.close":"sidebar.open"),className:"after:absolute after:inset-0 after:rounded-xl hover:after:bg-black/3 dark:hover:after:bg-white/5",color:"subtle-dimmed-inverted",variant:"square",size:"36-sm",onClick:()=>{dt({source:"sidebarToggle",pageName:c,customData:JSON.stringify({isOpen:e})}),n()},testId:"sidebar-toggle-button",children:f.jsx(Bj,{className:"size-6"})}),d&&f.jsxs("div",{className:"flex rounded-xl hover:bg-black/3 dark:hover:bg-white/5",children:[f.jsx(De,{title:a("composer.startNewChat"),color:"subtle-dimmed-inverted",variant:"square",size:"36-sm",onClick:()=>{dt({source:"sidebarNewConversation",destination:"/chat",pageName:c,customData:JSON.stringify({isOpen:e})}),r()},children:f.jsx(py,{className:"size-5"})}),s&&f.jsx(Dj,{buttonSize:"36-sm"})]})]})]})})})}function dce(){const[t,e]=et(os),n=qn({breakpoint:"md"}),r=m.useRef(n),o=Ee.instance().config().useCompactSidebarHeader??!1;cy(()=>{n&&e(!1)}),m.useEffect(()=>{r.current===!1&&n&&e(!1),r.current===!0&&!n&&e(Mj()==="open"),r.current=n},[n,e]);const i=()=>{e(a=>!a),n||Kse(t?"close":"open")};return f.jsxs(f.Fragment,{children:[f.jsx(wn,{children:n&&t&&f.jsx(Ae.div,{className:"fixed inset-0 bg-black/30",onClick:()=>e(!1),initial:"initial",animate:"animate",exit:"exit",variants:{initial:tt,animate:Rt,exit:tt},transition:So})}),f.jsxs(Ae.div,{className:q("relative w-full bg-sidebar-light dark:bg-sidebar-dark",t&&"h-full"),layout:"position",children:[o?f.jsx(tce,{open:t,toggle:i}):f.jsx(uce,{open:t,toggle:i}),f.jsx(wn,{children:t&&f.jsx(Ae.div,{className:"overflow-hidden",initial:"initial",animate:"animate",exit:"exit",variants:{initial:tt,animate:Rt,exit:tt},transition:So,children:f.jsx(cce,{})})})]})]})}const fce=324,bR="bg-sidebar-light dark:bg-sidebar-dark";function hce(t){const{children:e,sidebar:n}=t,r=document.getElementById("app"),o=BT(),i=qn({breakpoint:"md"}),a=Lr(),c=F(os)&&a,[u,d]=m.useState(!1),h=F(Xr),p=F(pf),g=$T();m.useEffect(()=>{r&&r.style.setProperty("--layout-offset-y",a&&c&&!i?`${qo}px`:"0px")},[r,a,c,i]);const v=c&&!i,y=h==="side-by-side",_=g?"100%":fce;return f.jsxs("div",{className:q("flex h-full overflow-hidden",bR),inert:p?"":void 0,children:[n??(a&&f.jsx(Ae.div,{className:q("h-full will-change-auto",i?"absolute":"relative",i&&bR,i&&qt.sidebar),initial:{width:c?_:0},animate:{width:c?_:0},transition:So,onAnimationStart:()=>d(!0),onAnimationComplete:()=>d(!1),children:f.jsx(dce,{})})),f.jsx(Ae.main,{className:q("relative w-full min-w-0 will-change-auto","before:fixed before:inset-2 before:start-[324px] before:rounded-[10px] before:shadow-lg","after:pointer-events-none after:fixed after:inset-2 after:start-[324px] after:rounded-[10px] after:border after:border-transparent after:transition-opacity dark:after:border-white/12 dark:after:border-s-white/8",v&&!u?"after:opacity-100 after:duration-1000":"after:opacity-0 after:duration-0"),initial:{paddingTop:v||y?qo:0,paddingBottom:!y&&v?qo:0,paddingLeft:v&&o?qo:0,paddingRight:v&&!o?qo:0},animate:{paddingTop:v||y?qo:0,paddingBottom:!y&&v?qo:0,paddingLeft:v&&o||!v&&y?qo:0,paddingRight:v&&!o||!v&&y?qo:0},transition:i?{duration:0}:So,children:e})]})}function Hj(t){const{deferred:e=!1}=t??{},n=HO(),[r,o]=et(c2),i=Se(iy);m.useEffect(()=>{const c=iV();c&&o(c)},[n.search,o]);const a=m.useCallback(()=>{o(null)},[o]),s=m.useCallback(c=>{c&&i({source:"promptInUrl",prompt:c})},[i]);return m.useEffect(()=>{r&&!e&&s(r)},[e,s,r]),{prompt:r,handler:e?s:void 0,clear:a}}function pce(){const t=de("prompt-pt-learn-partial"),e=de("prompt-pt-learn-full"),n=de("prompt-pt-learn-fill"),r=de("prompt-pt-advice-partial"),o=de("prompt-pt-advice-full"),i=de("prompt-pt-advice-fill"),a=de("prompt-pt-ideas-partial"),s=de("prompt-pt-ideas-full"),c=de("prompt-pt-ideas-fill"),u=de("prompt-pt-msn-answers"),d=de("prompt-pt-msn-headlines"),h=de("prompt-pt-msn-events"),p=de("prompt-pt-msn-answers-full"),g=de("prompt-pt-msn-headlines-full"),v=de("prompt-pt-msn-events-full"),y=Y.getFormCode();let _=null,b=!1,C=!1,w=!1;switch(y){case"NTPCHB":{t||e||n?_="teach":r||o||i?_="advice":(a||s||c)&&(_="ideas"),b=t||r||a,C=e||o||s,w=n||i||c;break}case"MSNCHB":{u||p?_="answers":d||g?_="headlines":(h||v)&&(_="events"),C=p||g||v,w=u||d||h;break}default:_=null}let S=null;b?S="prefix":(C||w)&&(S="complete");let E=null;return b||w?E="partial":C&&(E="full"),{formCode:y,treatment:_,lengthVariant:S,passthroughType:E}}function mce(){var e;const t=F(AM);if(t)return{character:{id:t.id,locationId:(e=t.location)==null?void 0:e.id}}}function YT(){var v,y;const t=de("labs-actions"),e=F(Oh),n=de("labs-actions-skipprocheck"),r=de("freemium-actions-upsell")&&Ee.instance().config().proSubscription.enabled,o=_r(),i=!!F(cE),a=F(no),s=!a||RB.includes(a),c=((v=Ee.instance().config().actions)==null?void 0:v.overrideFreemiumActionsUpsellFeatureEnabled)??!1,u=(r||c)&&o&&!i&&!s,d=F(nm),h=((y=Ee.instance().config().actions)==null?void 0:y.overrideLabsActionsFeatureEnabled)??!1,[p,g]=m.useState(!1);return m.useEffect(()=>{async function _(){var C;await(((C=Ee.instance().config().actions)==null?void 0:C.enableActions)??(()=>Promise.resolve(!1)))()&&g(!0)}_().catch(()=>{})},[g,d]),(h||t)&&(e||n||u)&&p}function QT(){const t=es(En),e=Se(ww);return m.useCallback((n,r)=>{t(o=>{const i=o.get(n);if(i){const{history:a}=i;r(a);const s=a.at(-1);if(s){const c=new Date(i.updatedAt),u=new Date(s.createdAt);c<u&&(i.updatedAt=s.createdAt)}a.length>2&&(i.isNew=!1,e(!0))}return o})},[t,e])}function gce(){const t=de("bing-uet");m.useEffect(()=>{if(!t)return()=>{};const e=()=>{if(!window.UET)return;window.uetq=window.uetq??[];const r={ti:"355026945",enableAutoSpaTracking:!0};window.uetq=new window.UET(r),window.uetq.push("pageLoad")},n=document.createElement("script");return n.src="https://bat.bing.com/bat.js",n.async=!0,n.onload=e,document.head.appendChild(n),()=>{document.head.removeChild(n)}},[t])}let _R=!1;function vce(){_R||(_R=!0,window.uetq=window.uetq??[],window.uetq.push("event","outbound_click",{}))}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var yce=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bce=Object.prototype.hasOwnProperty;function p0(t,e){return bce.call(t,e)}function m0(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);var r=[];for(var o in t)p0(t,o)&&r.push(o);return r}function Yr(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function g0(t){for(var e=0,n=t.length,r;e<n;){if(r=t.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function ws(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function Vj(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function v0(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(v0(t[e]))return!0}else if(typeof t=="object"){for(var r=m0(t),o=r.length,i=0;i<o;i++)if(v0(t[r[i]]))return!0}}return!1}function CR(t,e){var n=[t];for(var r in e){var o=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof o<"u"&&n.push(r+": "+o)}return n.join(`
`)}var zj=function(t){yce(e,t);function e(n,r,o,i,a){var s=this.constructor,c=t.call(this,CR(n,{name:r,index:o,operation:i,tree:a}))||this;return c.name=r,c.index=o,c.operation=i,c.tree=a,Object.setPrototypeOf(c,s.prototype),c.message=CR(n,{name:r,index:o,operation:i,tree:a}),c}return e}(Error),yn=zj,_ce=Yr,Ll={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){var r=zg(n,this.path);r&&(r=Yr(r));var o=tc(n,{op:"remove",path:this.from}).removed;return tc(n,{op:"add",path:this.path,value:o}),{newDocument:n,removed:r}},copy:function(t,e,n){var r=zg(n,this.from);return tc(n,{op:"add",path:this.path,value:Yr(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:sh(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},Cce={add:function(t,e,n){return g0(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var r=t.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:Ll.move,copy:Ll.copy,test:Ll.test,_get:Ll._get};function zg(t,e){if(e=="")return t;var n={op:"_get",path:e};return tc(t,n),n.value}function tc(t,e,n,r,o,i){if(n===void 0&&(n=!1),r===void 0&&(r=!0),o===void 0&&(o=!0),i===void 0&&(i=0),n&&(typeof n=="function"?n(e,0,t,e.path):$g(e,0)),e.path===""){var a={newDocument:t};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=t,a;if(e.op==="move"||e.op==="copy")return a.newDocument=zg(t,e.from),e.op==="move"&&(a.removed=t),a;if(e.op==="test"){if(a.test=sh(t,e.value),a.test===!1)throw new yn("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return a.newDocument=t,a}else{if(e.op==="remove")return a.removed=t,a.newDocument=null,a;if(e.op==="_get")return e.value=t,a;if(n)throw new yn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,e,t);return a}}else{r||(t=Yr(t));var s=e.path||"",c=s.split("/"),u=t,d=1,h=c.length,p=void 0,g=void 0,v=void 0;for(typeof n=="function"?v=n:v=$g;;){if(g=c[d],g&&g.indexOf("~")!=-1&&(g=Vj(g)),o&&(g=="__proto__"||g=="prototype"&&d>0&&c[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(u[g]===void 0?p=c.slice(0,d).join("/"):d==h-1&&(p=e.path),p!==void 0&&v(e,0,t,p)),d++,Array.isArray(u)){if(g==="-")g=u.length;else{if(n&&!g0(g))throw new yn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,e,t);g0(g)&&(g=~~g)}if(d>=h){if(n&&e.op==="add"&&g>u.length)throw new yn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,e,t);var a=Cce[e.op].call(e,u,g,t);if(a.test===!1)throw new yn("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return a}}else if(d>=h){var a=Ll[e.op].call(e,u,g,t);if(a.test===!1)throw new yn("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return a}if(u=u[g],n&&d<h&&(!u||typeof u!="object"))throw new yn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",i,e,t)}}}function Hs(t,e,n,r,o){if(r===void 0&&(r=!0),o===void 0&&(o=!0),n&&!Array.isArray(e))throw new yn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=Yr(t));for(var i=new Array(e.length),a=0,s=e.length;a<s;a++)i[a]=tc(t,e[a],n,!0,o,a),t=i[a].newDocument;return i.newDocument=t,i}function Sce(t,e,n){var r=tc(t,e);if(r.test===!1)throw new yn("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return r.newDocument}function $g(t,e,n,r){if(typeof t!="object"||t===null||Array.isArray(t))throw new yn("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(Ll[t.op]){if(typeof t.path!="string")throw new yn("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new yn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new yn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new yn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&v0(t.value))throw new yn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var o=t.path.split("/").length,i=r.split("/").length;if(o!==i+1&&o!==i)throw new yn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==r)throw new yn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},s=$j([a],n);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new yn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new yn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function $j(t,e,n){try{if(!Array.isArray(t))throw new yn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Hs(Yr(e),Yr(t),n||!0);else{n=n||$g;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(o){if(o instanceof yn)return o;throw o}}function sh(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),r=Array.isArray(e),o,i,a;if(n&&r){if(i=t.length,i!=e.length)return!1;for(o=i;o--!==0;)if(!sh(t[o],e[o]))return!1;return!0}if(n!=r)return!1;var s=Object.keys(t);if(i=s.length,i!==Object.keys(e).length)return!1;for(o=i;o--!==0;)if(!e.hasOwnProperty(s[o]))return!1;for(o=i;o--!==0;)if(a=s[o],!sh(t[a],e[a]))return!1;return!0}return t!==t&&e!==e}const wce=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:yn,_areEquals:sh,applyOperation:tc,applyPatch:Hs,applyReducer:Sce,deepClone:_ce,getValueByPointer:zg,validate:$j,validator:$g},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var JT=new WeakMap,Ece=function(){function t(e){this.observers=new Map,this.obj=e}return t}(),Tce=function(){function t(e,n){this.callback=e,this.observer=n}return t}();function Ice(t){return JT.get(t)}function Ace(t,e){return t.observers.get(e)}function kce(t,e){t.observers.delete(e.callback)}function xce(t,e){e.unobserve()}function Rce(t,e){var n=[],r,o=Ice(t);if(!o)o=new Ece(t),JT.set(t,o);else{var i=Ace(o,e);r=i&&i.observer}if(r)return r;if(r={},o.value=Yr(t),e){r.callback=e,r.next=null;var a=function(){y0(r)},s=function(){clearTimeout(r.next),r.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return r.patches=n,r.object=t,r.unobserve=function(){y0(r),clearTimeout(r.next),kce(o,r),typeof window<"u"&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},o.observers.set(e,new Tce(e,r)),r}function y0(t,e){e===void 0&&(e=!1);var n=JT.get(t.object);XT(n.value,t.object,t.patches,"",e),t.patches.length&&Hs(n.value,t.patches);var r=t.patches;return r.length>0&&(t.patches=[],t.callback&&t.callback(r)),r}function XT(t,e,n,r,o){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var i=m0(e),a=m0(t),s=!1,c=a.length-1;c>=0;c--){var u=a[c],d=t[u];if(p0(e,u)&&!(e[u]===void 0&&d!==void 0&&Array.isArray(e)===!1)){var h=e[u];typeof d=="object"&&d!=null&&typeof h=="object"&&h!=null&&Array.isArray(d)===Array.isArray(h)?XT(d,h,n,r+"/"+ws(u),o):d!==h&&(o&&n.push({op:"test",path:r+"/"+ws(u),value:Yr(d)}),n.push({op:"replace",path:r+"/"+ws(u),value:Yr(h)}))}else Array.isArray(t)===Array.isArray(e)?(o&&n.push({op:"test",path:r+"/"+ws(u),value:Yr(d)}),n.push({op:"remove",path:r+"/"+ws(u)}),s=!0):(o&&n.push({op:"test",path:r,value:t}),n.push({op:"replace",path:r,value:e}))}if(!(!s&&i.length==a.length))for(var c=0;c<i.length;c++){var u=i[c];!p0(t,u)&&e[u]!==void 0&&n.push({op:"add",path:r+"/"+ws(u),value:Yr(e[u])})}}}function Pce(t,e,n){n===void 0&&(n=!1);var r=[];return XT(t,e,r,"",n),r}const Oce=Object.freeze(Object.defineProperty({__proto__:null,compare:Pce,generate:y0,observe:Rce,unobserve:xce},Symbol.toStringTag,{value:"Module"}));Object.assign({},wce,Oce,{JsonPatchError:zj,deepClone:Yr,escapePathComponent:ws,unescapePathComponent:Vj});function Nce(t){var n;const e=[];for(const r of t){if(r.type!=="product"&&r.type!=="propertyPromotion"&&r.type!=="tourActivity")return null;if(!r.tags)continue;if(r.tags.length>1)return null;const o=r.tags[0];if(!(!o||!o.value))if(e.length===0)e.push(o);else{if(((n=e[0])==null?void 0:n.category)!==o.category)return null;e.find(i=>i.value===o.value)||e.push(o)}}return e}function AIe(t,e){var n;return t!=null&&t.length?JSON.stringify({tagCategory:(n=t[0])==null?void 0:n.category,tagValue:(e==null?void 0:e.value)??"recommended",tagPosition:e?t.indexOf(e)+1:null,tagCount:t.length}):""}function Mce(t){return t.every(e=>e.type==="product"||e.type==="propertyPromotion"||e.type==="tourActivity")}function kIe(t,e,n){let r=t;return e!=null&&e.length&&n?r=t.filter(o=>{var i;return o.tags&&((i=o.tags[0])==null?void 0:i.value)===n.value}):e!=null&&e.length&&!n&&(r=t.filter(o=>!o.tags)),r}class Lce{constructor(e){Z(this,"startTime",0);Z(this,"timeToFirstToken",0);Z(this,"receivedFirstToken",!1);Z(this,"receivedLastToken",!1);Z(this,"currentAdditionalData");Z(this,"currentMessageId","");Z(this,"receivedMessageTime",0);Z(this,"startMessageTime",0);Z(this,"mostRecentTokenTime",0);this.startTime=e}resetStartTime(e){this.startTime=e,this.timeToFirstToken=0}onBeforeSend(){this.receivedFirstToken=!1,this.receivedLastToken=!1}onSent(e){this.currentAdditionalData=e}onReceived(e){this.receivedMessageTime=performance.now(),Y.trackEvent({name:"system",data:{eventName:"copilotChatRequest",eventInfo_additionalData:this.currentAdditionalData,eventInfo_duration:this.receivedMessageTime-this.startTime,eventInfo_conversationId:e.conversationId,eventInfo_messageId:this.currentMessageId,eventInfo_mode:e.chatMode}})}onStartMessage(e){this.startMessageTime=performance.now(),this.currentMessageId=e.messageId,this.receivedMessageTime||(this.receivedMessageTime=this.startTime),Y.trackEvent({name:"system",data:{eventName:"copilotChatReqToResp",eventInfo_duration:this.startMessageTime-this.receivedMessageTime,eventInfo_additionalData:this.currentAdditionalData,eventInfo_conversationId:e.conversationId,eventInfo_messageId:e.messageId,eventInfo_mode:e.chatMode}})}onFirstToken(e,n,r){if(!this.receivedFirstToken&&e===this.currentMessageId){const o=performance.now()-this.startTime;this.timeToFirstToken=o,this.receivedFirstToken=!0,Y.trackEvent({name:"system",data:{eventName:"copilotChatRespToReceived",eventInfo_additionalData:this.currentAdditionalData,eventInfo_conversationId:r,eventInfo_duration:performance.now()-this.receivedMessageTime,eventInfo_messageId:e,eventInfo_mode:n}}),Y.trackEvent({name:"system",data:{eventName:"copilotFirstTokenReceived",eventInfo_conversationId:r,eventInfo_messageId:e,eventInfo_duration:o,eventInfo_mode:n,eventInfo_additionalData:this.currentAdditionalData}})}this.mostRecentTokenTime=performance.now()}onLastToken(e){const{citationCount:n,imageCount:r,messageId:o,inputMethod:i,conversationId:a,chatMode:s}=e;if(!this.receivedLastToken&&o===this.currentMessageId){const c=this.mostRecentTokenTime-this.startTime;this.receivedLastToken=!0,Y.trackEvent({name:"system",data:{eventName:"copilotResponseRender",eventInfo_conversationId:a,eventInfo_messageId:o,eventInfo_numCitations:n,eventInfo_numImagesGenerated:r,eventInfo_inputMethod:i,eventInfo_responseMethod:"text",eventInfo_mode:s,eventInfo_additionalData:this.currentAdditionalData,eventInfo_landingPage:Y.getLandingPage(),eventInfo_firstToLastTokenDuration:c-this.timeToFirstToken}}),Y.trackEvent({name:"system",data:{eventName:"copilotLastTokenReceived",eventInfo_conversationId:a,eventInfo_messageId:o,eventInfo_duration:c,eventInfo_mode:s,eventInfo_additionalData:this.currentAdditionalData}}),Y.trackEvent({name:"system",data:{eventName:"copilotChatE2E",eventInfo_conversationId:a,eventInfo_messageId:o,eventInfo_duration:performance.now()-this.startTime,eventInfo_mode:s,eventInfo_additionalData:this.currentAdditionalData}}),this.currentAdditionalData=void 0}}onAdsRender(e){const n=performance.now()-this.startTime,{ads:r}=e,i=(r==null?void 0:r.find(c=>c.type==="miniShowroom"))??(r&&r.length>0?r[0]:void 0),a=r&&Mce(r)?Nce(r):[],s=r==null?void 0:r.find(c=>c.type==="mainShowroom");Y.trackEvent({name:"system",data:{eventName:"copilotAdsSignal",eventInfo_scenario:"render",eventInfo_adType:i==null?void 0:i.type,eventInfo_adCount:r==null?void 0:r.length,eventInfo_rguid:e.requestId,eventInfo_messageId:e.messageId,eventInfo_conversationId:e.conversationId,eventInfo_duration:n,eventInfo_additionalData:JSON.stringify({eventType:e.eventType,adTags:a!=null&&a.length?a:void 0,brandId:s==null?void 0:s.brandId})}})}onSubmitMessageBlocked(e,n,r){Y.trackEvent({name:"interaction",data:{eventName:"copilotUserInputBlocked",eventInfo_inputMethod:n,eventInfo_mode:e,eventInfo_messageId:this.currentMessageId,eventInfo_conversationId:r,eventInfo_duration:performance.now()-this.startTime,eventInfo_additionalData:this.currentAdditionalData}})}onImageGenerationStart(e){const{messageId:n,conversationId:r,chatMode:o}=e,a=performance.now()-this.startTime;Y.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"ImageGenStarted",eventInfo_messageId:n,eventInfo_conversationId:r,eventInfo_mode:o,eventInfo_duration:a}})}onImageReceived(e){const{messageId:n,conversationId:r,chatMode:o}=e,i=performance.now()-this.startTime;Y.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"ImageGenReceived",eventInfo_messageId:n,eventInfo_conversationId:r,eventInfo_mode:o,eventInfo_duration:i}})}onPartialImageReceived(e){const{messageId:n,imageGenPhase:r,conversationId:o,chatMode:i}=e,a=performance.now()-this.startTime;Y.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"PartialImageGenReceived",eventInfo_messageId:n,eventInfo_conversationId:o,eventInfo_mode:i,eventInfo_duration:a,eventInfo_customData:`${r}`}})}}function Dce(t,e,n){switch(t.type){case"research":return{type:"task",task:{id:t.id,type:t.type,contents:[],partialOutput:[],inlineCitations:[],status:"pending",prompt:t.prompt},partId:e};case"computerUse":return{type:"task",task:{id:t.id,conversationId:t.conversationId,type:t.type,status:"running",updatedAt:n},partId:e};case"podcast":return{type:"task",task:{id:t.id,type:t.type,status:t.status,podcast:t.podcast,updatedAt:t.updatedAt??n},partId:e};default:return null}}const ZT=G(null);function jce({path:t,args:e,onLoad:n,alt:r,...o}){const{data:i,isLoading:a}=Fc(t,async s=>{const u=await(await Ru(s,e)).blob();return URL.createObjectURL(u)});return m.useEffect(()=>{!a&&n&&n()},[a,n]),a?f.jsx("div",{...o}):f.jsx("img",{...o,src:i,alt:r})}const SR=ct();function Uce(t){var e,n,r;if(t.status==="completed"){const o=SR.get(mt);if(Wh.latestLocation.pathname.startsWith("/chats")&&o&&t.conversationId===o)return;SR.set(ZT,{iconProvider:()=>{var i,a,s;return f.jsx(jce,{path:`/podcasts/user/${(i=t.podcast)==null?void 0:i.id}/Files/${(s=(a=t.podcast)==null?void 0:a.thumbnail)==null?void 0:s.name}`,className:"rounded-xl object-cover"})},title:ie("podcasts.generationNotification.title"),subtitle:((e=t.podcast)==null?void 0:e.title)??"",action:{type:"GO_TO_PAGE",to:`/podcasts/user/${(n=t.podcast)==null?void 0:n.id}`},trackingArgs:{scenario:"podcastGenerationNotification",customData:JSON.stringify({podcastId:(r=t.podcast)==null?void 0:r.id})},dismissAfter:3e4})}}const wR=ct();function Fce(t,e){const n=wR.get(mt);if(!n||n===e)return;const r={title:ie("research.generationNotification.title"),subtitle:ie("research.generationNotification.subTitle"),link:ie("research.generationNotification.subTitleLink"),action:{type:"GO_TO_PAGE",to:`/chats/${e}`},dismissable:!0,trackingArgs:{scenario:"researchCompletionNotification",customData:JSON.stringify({researchId:t.id,sourceConversationId:e})}};wR.set(ZT,r)}const xIe=(t,e)=>{Y.trackEvent({name:"interaction",data:{eventName:"activityArtifactDrawerOpened",eventInfo_messageId:t,eventInfo_partId:e.partId,eventInfo_messageType:e.type}})},Bce=t=>{Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"handleActivityStart",eventInfo_errorMessage:`Could not find message with ID ${t} to start activity`,eventInfo_details:"Error starting activity"}})},Hce=(t,e)=>{Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"handleActivityUpdate",eventInfo_errorMessage:`Could not find activity message with partId ${e} in message with ID ${t}`,eventInfo_details:"Error updating activity"}})},Vce=t=>{Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"handleActivityUpdate",eventInfo_errorMessage:`${t}`,eventInfo_details:"Error updating activity"}})},zce=ct();function $ce({entryAd:t,mainAd:e,messageId:n,partId:r,conversationId:o}){let i=!1;const a=zce.get(Hu);return(!a&&t&&e||(a==null?void 0:a.conversationId)===o&&!t&&e&&e.brandId===a.brandId)&&(i=!0),i||Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"AdsError",eventInfo_details:JSON.stringify({messageId:n,partId:r,conversationId:o,hasEntryAd:!!t,hasMainAd:!!e,mainAdBrandId:e==null?void 0:e.brandId,isShowroomOpened:!!a,showroomBrandId:a==null?void 0:a.brandId}),eventInfo_errorMessage:`Unexpcted showroom data received when showroom is ${a?"opened":"closed"}`}}),i}function Gce({card:t,messageId:e,partId:n,conversationState:r,conversationId:o}){const{ads:i}=t;if(r.timing.onAdsRender({requestId:t.requestId,messageId:e,conversationId:o,eventType:"card",ads:i}),i!=null&&i.some(a=>a.type==="mainShowroom"||a.type==="miniShowroom")){const a=i[0],s=(a==null?void 0:a.type)==="miniShowroom",c=s?a:void 0,u=s?i[1]:a;if(!$ce({entryAd:c,partId:n,conversationId:o,messageId:e,mainAd:(u==null?void 0:u.type)==="mainShowroom"?u:void 0}))return}on(o,a=>{const s=Gn(a,e);s&&s.content.push({type:"card",partId:n,card:t})})}const Kce=Uw.extend({actionName:l.literal("edge_get_page_content"),parameters:l.array(l.object({tabId:l.number(),windowId:l.number(),pageUrl:l.string().nullish(),pageTitle:l.string().nullish(),pageType:l.string().nullish(),lastAccessedTime:l.number().nullish()}))}),Wce=l.discriminatedUnion("actionName",[Kce,H$]),qce=ct();function Yce(t){qce.set(En,e=>Za(e,n=>{for(const{title:r,id:o,updatedAt:i,continuedAt:a}of t){const s=n.get(o);s?(s.title=r,s.id=o,s.updatedAt=i,s.continuedAt=a):n.set(o,{id:o,title:r,updatedAt:i,history:[],streamingState:"idle",continuedAt:a})}}))}const Qce=ct();function Jce(t,e,n){Zce(t.map(r=>Xce(r,e,n)).filter(r=>r!==void 0))}function Xce(t,e,n){switch(t.type){case"research":return{id:t.id,conversationId:e,type:t.type,status:t.status,updatedAt:""};case"computerUse":return{id:t.id,conversationId:t.conversationId??"",type:t.type,status:t.status,updatedAt:t.updatedAt??"",title:t.title??"",lastScreenshot:t.lastScreenshot};case"podcast":return{id:t.id,conversationId:e,status:t.status==="completed"?"completed":"running",type:t.type,podcast:t.podcast,updatedAt:t.updatedAt??n};default:return}}function Zce(t){Qce.set(Bo,n=>Za(n,r=>{for(const o of t){const i=r.get(o.id);if(i)i.title=o.title,i.conversationId=o.conversationId,i.updatedAt=o.updatedAt,i.status=o.status,i.type=o.type,i.type==="computerUse"&&o.type==="computerUse"&&(i.lastScreenshot=o.lastScreenshot);else{const a={id:o.id,title:o.title,conversationId:o.conversationId,updatedAt:o.updatedAt,status:o.status,type:o.type};a.type==="computerUse"&&o.type==="computerUse"&&(a.chainOfThought=[],a.lastScreenshot=o.lastScreenshot),o.type==="podcast"&&a.type==="podcast"&&(a.podcast=o.podcast),r.set(o.id,a)}}}));const e=t.filter(n=>n.type==="computerUse"&&n.conversationId).map(n=>{const{conversationId:r,title:o,updatedAt:i}=n;return{id:r??"",title:o,updatedAt:i,continuedAt:null,history:[],streamingState:"idle"}});Yce(e)}const Gj="cf-turnstile",ele=`#${Gj}`;function tle(){const t=F(pf),e=F(ts);return Vo("kill-cf-turnstile")?null:f.jsx(Ja,{isOpen:t,className:"w-3/4 sm:w-[350px]",children:f.jsx("div",{id:Gj,className:"flex flex-1 items-center justify-center","data-theme":e})})}const nle=new Mc(()=>new Promise((t,e)=>{const n=setTimeout(()=>{e(new Error("CF Turnstile script took too long to load"))},15e3),r=document.createElement("script");r.type="text/javascript",r.defer=!0,r.src="https://challenges.cloudflare.com/turnstile/v0/api.js",r.onload=()=>{clearTimeout(n),t()},r.onerror=()=>{clearTimeout(n),e(new Error("Failed to load turnstile script"))},document.body.appendChild(r)}));async function rle(t){if(Da("kill-cf-turnstile")||gt(pf))return;const n=ct();Y.trackEvent({name:"system",data:{eventName:"copilotTurnstileEvent",eventInfo_stage:"attempt"}}),qO.flushSync(()=>{n.set(pf,!0)});try{await nle.get()}catch{n.set(Vf,"cf-turnstile");return}try{window.turnstile.render(ele,{sitekey:"0x4AAAAAAAg146IpY3lPNWte",callback:async r=>{t(r),window.turnstile.remove(),n.set(pf,!1),Y.trackEvent({name:"system",data:{eventName:"copilotTurnstileEvent",eventInfo_stage:"success"}})},"error-callback":r=>{Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"turnstileRenderErrorCallback",eventInfo_details:"Error rendering CF Turnstile.",eventInfo_errorMessage:r}})}})}catch(r){Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"turnstileRender",eventInfo_details:"Error rendering CF Turnstile",eventInfo_errorMessage:r instanceof Error?r.message:""}}),n.set(Vf,"cf-turnstile")}}function Gg(t,e){return t?Date.now()-parseInt(t,10)<=e:!1}function eI(t,e){return!t||parseInt(t,10)<e}var OO;const lr=(OO=Ee.instance().config().crossPromotion)==null?void 0:OO.aggressive;var NO,MO,LO,DO,jO;const Hc={"thumbs-up":{cardFeature:"cross-promo-card-thumbsup",popupFeature:"cross-promo-popup-thumbsup",cardConfig:(NO=lr==null?void 0:lr.card)==null?void 0:NO.thumbsUp,popupConfig:(MO=lr==null?void 0:lr.popup)==null?void 0:MO.thumbsUp},copied:{cardFeature:void 0,popupFeature:"cross-promo-popup-copied",cardConfig:void 0,popupConfig:(LO=lr==null?void 0:lr.popup)==null?void 0:LO.copied},engaging:{cardFeature:void 0,popupFeature:"cross-promo-popup-engaging",cardConfig:void 0,popupConfig:(DO=lr==null?void 0:lr.popup)==null?void 0:DO.engaging},"think-deeper":{cardFeature:void 0,popupFeature:"cross-promo-popup-think-deeper",cardConfig:void 0,popupConfig:(jO=lr==null?void 0:lr.popup)==null?void 0:jO.thinkDeeper}};function ole(){return{type:"popup",title:ie("crossSelling.aggressivePromotion.popup.thumbsUpTitle"),subTitle:ie("crossSelling.aggressivePromotion.popup.thumbsUpSubTitle"),images:Hc["thumbs-up"].popupConfig}}function ile(){return{type:"card",title:ie("crossSelling.aggressivePromotion.card.thumbsUpTitle"),subTitle:ie("crossSelling.aggressivePromotion.card.thumbsUpSubTitle"),images:Hc["thumbs-up"].cardConfig}}function ale(){return{type:"popup",title:ie("crossSelling.aggressivePromotion.popup.copiedTitle"),subTitle:ie("crossSelling.aggressivePromotion.popup.copiedSubTitle"),images:Hc.copied.popupConfig}}function sle(){return{type:"popup",title:ie("crossSelling.aggressivePromotion.popup.engagingTitle"),subTitle:ie("crossSelling.aggressivePromotion.popup.engagingSubTitle"),images:Hc.engaging.popupConfig}}function cle(){return{type:"popup",title:ie("crossSelling.aggressivePromotion.popup.thinkDeeperTitle"),subTitle:ie("crossSelling.aggressivePromotion.popup.thinkDeeperSubTitle"),images:Hc["think-deeper"].popupConfig}}function Kj(t){const n=ct().get(Ow),r=n===!0?!1:n!==void 0,o=hn(nE),i=!Gg(o,2*Om),a=hn($m),s=eI(a,2);r&&ule(t)&&i&&s&&dle(t)}let ER=!1;function lle(){const e=ct().get(ir);!ER&&(e==="reasoning"||e==="research")&&(Kj("think-deeper"),ER=!0)}function ule(t){return sf(t)||Wj(t)}function sf(t){const e=Hc[t];return ot(e.popupFeature)&&e.popupConfig!==void 0}function Wj(t){const e=Hc[t];return e.cardFeature!==void 0&&ot(e.cardFeature)&&e.cardConfig!==void 0&&!XN()}function dle(t){const e=ct();t==="thumbs-up"&&sf(t)?e.set(Fi,ole()):t==="thumbs-up"&&Wj(t)?e.set(Fi,ile()):t==="copied"&&sf(t)?e.set(Fi,ale()):t==="engaging"&&sf(t)?e.set(Fi,sle()):t==="think-deeper"&&sf(t)&&e.set(Fi,cle())}const V_=G({counter:0,isActive:!0});function fle(){const t=ct(),e=t.get(V_);if(!e.isActive)return;const n=e.counter+1;n===NB?(Kj("engaging"),t.set(V_,{counter:n,isActive:!1})):t.set(V_,{counter:n,isActive:e.isActive})}const RIe="group/ai-message-item space-y-3 break-words",hle=new Map([["1c","1C:Enterprise"],["abnf","Augmented Backus-Naur Form"],["accesslog","Apache Access Log"],["actionscript","ActionScript"],["ada","Ada"],["ado","Stata"],["adoc","AsciiDoc"],["ahk","AutoHotkey"],["angelscript","AngelScript"],["apache","Apache config"],["apacheconf","Apache config"],["applescript","AppleScript"],["arcade","ArcGIS Arcade"],["arduino","Arduino"],["arm","ARM Assembly"],["armasm","ARM Assembly"],["as","ActionScript"],["asc","AngelScript"],["asciidoc","AsciiDoc"],["aspectj","AspectJ"],["atom","HTML, XML"],["autohotkey","AutoHotkey"],["autoit","AutoIt"],["avrasm","AVR Assembly"],["awk","Awk"],["axapta","X++"],["bash","Bash"],["basic","BASIC"],["bat","Batch file (DOS)"],["bf","Brainfuck"],["bind","DNS Zone"],["bnf","Backus–Naur Form"],["brainfuck","Brainfuck"],["c","C"],["c#","C#"],["c++","C++"],["cal","C/AL"],["capnp","Cap’n Proto"],["capnproto","Cap’n Proto"],["cc","C++"],["ceylon","Ceylon"],["cjs","JavaScript"],["clean","Clean"],["clj","Clojure"],["clojure","Clojure"],["clojure-repl","Clojure REPL"],["cls","Caché Object Script"],["cmake","CMake"],["cmake.in","CMake"],["cmd","Batch file (DOS)"],["coffee","CoffeeScript"],["coffeescript","CoffeeScript"],["console","Shell Session"],["coq","Coq"],["cos","Caché Object Script"],["cpp","C++"],["cr","Crystal"],["craftcms","Twig"],["crm","crmsh"],["crmsh","crmsh"],["crystal","Crystal"],["cs","C#"],["csharp","C#"],["cson","CoffeeScript"],["csp","CSP"],["css","CSS"],["cts","TypeScript"],["cxx","C++"],["d","D"],["dart","Dart"],["dcl","Clean"],["delphi","Delphi"],["dfm","Delphi"],["diff","Diff"],["django","Django"],["dns","DNS Zone"],["do","Stata"],["docker","Dockerfile"],["dockerfile","Dockerfile"],["dos","Batch file (DOS)"],["dpr","Delphi"],["dsconfig","dsconfig"],["dst","Dust"],["dts","Device Tree"],["dust","Dust"],["ebnf","Extended Backus-Naur Form"],["edn","Clojure"],["elixir","Elixir"],["elm","Elm"],["erb","ERB"],["erl","Erlang"],["erlang","Erlang"],["erlang-repl","Erlang REPL"],["ex","Elixir"],["excel","Excel formulae"],["exs","Elixir"],["f#","F#"],["f90","Fortran"],["f95","Fortran"],["feature","Gherkin"],["fix","FIX"],["flix","Flix"],["fortran","Fortran"],["fs","F#"],["fsharp","F#"],["gams","GAMS"],["gauss","GAUSS"],["gcode","G-code (ISO 6983)"],["gemspec","Ruby"],["gherkin","Gherkin"],["glsl","GLSL"],["gml","GML"],["gms","GAMS"],["go","Go"],["golang","Go"],["golo","Golo"],["gql","GraphQL"],["gradle","Gradle"],["graph","Roboconf"],["graphql","GraphQL"],["groovy","Groovy"],["gss","GAUSS"],["gyp","Python"],["h","C"],["h++","C++"],["haml","HAML"],["handlebars","Handlebars"],["haskell","Haskell"],["haxe","Haxe"],["hbs","Handlebars"],["hh","C++"],["hpp","C++"],["hs","Haskell"],["hsp","HSP"],["html","HTML, XML"],["html.handlebars","Handlebars"],["html.hbs","Handlebars"],["htmlbars","Handlebars"],["http","HTTP"],["https","HTTP"],["hx","Haxe"],["hxx","C++"],["hy","Hy"],["hylang","Hy"],["i7","Inform 7"],["iced","CoffeeScript"],["icl","Clean"],["inform7","Inform 7"],["ini","TOML, also INI"],["ino","Arduino"],["instances","Roboconf"],["ipython","Python"],["irb","Ruby"],["irpf90","IRPF90"],["isbl","ISBL"],["java","Java"],["javascript","JavaScript"],["jboss-cli","JBoss CLI"],["jinja","Django"],["jldoctest","Julia REPL"],["js","JavaScript"],["json","JSON"],["jsonc","JSON"],["jsp","Java"],["jsx","JavaScript"],["julia","Julia"],["julia-repl","Julia REPL"],["k","Q"],["kdb","Q"],["kotlin","Kotlin"],["kt","Kotlin"],["kts","Kotlin"],["lasso","Lasso"],["lassoscript","Lasso"],["latex","LaTeX"],["ldif","LDIF"],["leaf","Leaf"],["less","Less"],["lisp","Lisp"],["livecodeserver","LiveCode"],["livescript","LiveScript"],["llvm","LLVM IR"],["ls","Lasso"],["ls","LiveScript"],["lsl","LSL (Linden Scripting Language)"],["lua","Lua"],["m","Mercury"],["mak","Makefile"],["make","Makefile"],["makefile","Makefile"],["markdown","Markdown"],["mathematica","Mathematica"],["matlab","Matlab"],["maxima","Maxima"],["md","Markdown"],["mel","MEL"],["mercury","Mercury"],["mikrotik","MikroTik RouterOS script"],["mips","MIPS Assembly"],["mipsasm","MIPS Assembly"],["mizar","Mizar"],["mjs","JavaScript"],["mk","Makefile"],["mkd","Markdown"],["mkdown","Markdown"],["ml","OCaml"],["ml","SML (Standard ML)"],["mm","Objective-C"],["mma","Mathematica"],["mojolicious","Mojolicious"],["monkey","Monkey"],["moo","Mercury"],["moon","MoonScript"],["moonscript","MoonScript"],["mts","TypeScript"],["n1ql","N1QL"],["nc","G-code (ISO 6983)"],["nestedtext","Nested Text"],["nginx","Nginx config"],["nginxconf","Nginx config"],["nim","Nim"],["nix","Nix"],["nixos","Nix"],["node-repl","Node REPL"],["nsis","NSIS"],["nt","Nested Text"],["obj-c","Objective-C"],["obj-c++","Objective-C"],["objc","Objective-C"],["objective-c++","Objective-C"],["objectivec","Objective-C"],["ocaml","OCaml"],["openscad","OpenSCAD"],["osascript","AppleScript"],["oxygene","Oxygene"],["p21","STEP Part 21"],["parser3","Parser3"],["pas","Delphi"],["pascal","Delphi"],["patch","Diff"],["pb","PureBASIC"],["pbi","PureBASIC"],["pcmk","crmsh"],["pde","Processing"],["perl","Perl"],["pf","Packet Filter config"],["pf.conf","Packet Filter config"],["pgsql","PostgreSQL"],["php","php"],["php-template","PHP template"],["pl","Perl"],["plaintext","Plain text"],["plist","HTML, XML"],["pm","Perl"],["podspec","Ruby"],["pony","Pony"],["postgres","PostgreSQL"],["postgresql","PostgreSQL"],["powershell","PowerShell"],["pp","Puppet"],["processing","Processing"],["profile","Python profiler"],["prolog","Prolog"],["properties",".properties"],["proto","Protocol Buffers"],["protobuf","Protocol Buffers"],["ps","PowerShell"],["ps1","PowerShell"],["puppet","Puppet"],["purebasic","PureBASIC"],["pwsh","PowerShell"],["py","Python"],["pycon","python-repl"],["python","Python"],["python-repl","python-repl"],["q","Q"],["qml","QML"],["qt","QML"],["r","R"],["rb","Ruby"],["re","ReasonML"],["reasonml","ReasonML"],["rib","RenderMan RIB"],["roboconf","Roboconf"],["routeros","MikroTik RouterOS script"],["rs","Rust"],["rsl","RenderMan RSL"],["rss","HTML, XML"],["ruby","Ruby"],["ruleslanguage","Oracle Rules Language"],["rust","Rust"],["sas","SAS"],["scad","OpenSCAD"],["scala","Scala"],["scheme","Scheme"],["sci","Scilab"],["scilab","Scilab"],["scm","Scheme"],["scss","SCSS"],["sh","Bash"],["shell","Shell Session"],["shellsession","Shell Session"],["smali","Smali"],["smalltalk","Smalltalk"],["sml","SML (Standard ML)"],["sqf","SQF"],["sql","SQL"],["st","Smalltalk"],["stan","Stan"],["stanfuncs","Stan"],["stata","Stata"],["step","STEP Part 21"],["step21","STEP Part 21"],["stp","STEP Part 21"],["styl","Stylus"],["stylus","Stylus"],["subunit","SubUnit"],["sv","Verilog"],["svg","HTML, XML"],["svh","Verilog"],["swift","Swift"],["taggerscript","Tagger Script"],["tao","XL"],["tap","Test Anything Protocol"],["tcl","Tcl"],["tex","LaTeX"],["text","Plain text"],["thor","Ruby"],["thrift","Thrift"],["tk","Tcl"],["toml","TOML, also INI"],["tp","TP"],["ts","TypeScript"],["tsx","TypeScript"],["twig","Twig"],["txt","Plain text"],["typescript","TypeScript"],["v","Verilog"],["vala","Vala"],["vb","Visual Basic .NET"],["vbnet","Visual Basic .NET"],["vbs","VBScript"],["vbscript","VBScript"],["vbscript-html","VBScript in HTML"],["verilog","Verilog"],["vhdl","VHDL"],["vim","Vim Script"],["wasm","WebAssembly"],["wildfly-cli","JBoss CLI"],["wl","Mathematica"],["wren","Wren"],["wsf","HTML, XML"],["x++","X++"],["x86asm","Intel x86 Assembly"],["xhtml","HTML, XML"],["xjb","HTML, XML"],["xl","XL"],["xls","Excel formulae"],["xlsx","Excel formulae"],["xml","HTML, XML"],["xpath","XQuery"],["xq","XQuery"],["xqm","XQuery"],["xquery","XQuery"],["xsd","HTML, XML"],["xsl","HTML, XML"],["yaml","YAML"],["yml","YAML"],["zep","Zephir"],["zephir","Zephir"],["zone","DNS Zone"],["zsh","Bash"]]),gy="&#95;{{{CITATION{{{&#95;",b0="{";function qj(t,e){return`[${gy}${t}${b0}](${e})`}const ple=new RegExp(`\\[${gy}.*?\\)`,"g");function mle(t){return t.replace(ple,"")}const gle=2500,vle=255,vy=vw(new Map),PIe=G(null),yle=G(CB),ble=G(vle),_le=G(gle);function Cle(t,e,n){return`${t}_${e}_${n}`}function Sle(t,e){ct().set(vy,r=>{const o=r.get(t)??[],i=[];for(const a of e.editTargets){const s={id:Cle(e.id,a.startIndex,a.endIndex),pageSuggestionId:e.id,startIndex:a.startIndex,endIndex:a.endIndex,text:e.text};i.push(s)}r.set(t,[...o,...i])})}function OIe(t,e){ct().set(vy,r=>{const o=r.get(t);o&&r.set(t,o.filter(i=>i.id!==e))})}function NIe(t){ct().set(vy,n=>{n.delete(t)})}function wle(t,e,n){ct().set(vy,o=>{const i=o.get(t);if(i){const a=i.filter(s=>s.pageSuggestionId===e);for(const s of a)s.text===void 0&&(s.text=""),s.text+=n}})}function Ele(t){const{card:e,messageId:n,conversationId:r}=t,o={eventName:"copilotImpression",eventInfo_impressionPage:"chat",eventInfo_impressionScenario:"answerCardReceived",eventInfo_answerCardType:e.type,eventInfo_messageId:n,eventInfo_conversationId:r};switch(e.type){case"image":o.eventInfo_answerCardContentLength=e.images.length;break;case"localEntity":o.eventInfo_answerCardContentLength=e.entities.length;break;case"financeChart":o.eventInfo_answerCardScenario=e.instrument.securityType;break}Y.trackEvent({name:"system",data:o})}function Tle(t){const{card:e,messageId:n,conversationId:r}=t,o=performance.now(),i=gt(o2);if(!i)return;const a={eventName:"copilotAnswerCardReceived",eventInfo_messageId:n,eventInfo_conversationId:r,eventInfo_cardType:e.type,eventInfo_duration:o-i};Y.trackEvent({name:"system",data:a})}function Ile(t){const{message:e,conversationId:n}=t;for(const r of e.content)switch(r.type){case"card":Ele({card:r.card,messageId:e.id,conversationId:n}),Tle({card:r.card,messageId:e.id,conversationId:n});break}}async function Ale(t){Y.setSettings({userConsentModelTraining:!t.optOutOfTraining,userConsentPersonalization:!t.optOutOfPersonalization,userSettingPhoneConnection:!t.optOutOfPhoneConnection,userSettingGenUI:!t.optInToGenerativeUI}),await Pr({path:"/user/settings",args:{options:{method:"PATCH"},body:{optOutOfTraining:t.optOutOfTraining,optOutOfPersonalization:t.optOutOfPersonalization,optInToVoiceTraining:t.optInToVoiceTraining,optOutOfPhoneConnection:t.optOutOfPhoneConnection,optInToGenerativeUI:t.optInToGenerativeUI,allowBiometricDataUse:t.allowBiometricDataUse,allowOneDriveAccess:t.allowOneDriveAccess,features:t.features}}})}async function kle(){var e,n;const t=await Un("/user",cM,{parseOptions:{safe:!0},query:{"api-version":"2"}}).then(r=>r.data);ct().set(aE,((e=t.remainingCalls)==null?void 0:e.podcastGeneration)??null),ct().set(sE,((n=t.remainingCalls)==null?void 0:n.research)??null)}const Ft=ct();function TR(t){return{chatMode:"chat",timing:new Lce(t),citationCount:0,imageCount:0,inputMethod:"text"}}class xle{constructor(e){Z(this,"ws");Z(this,"conversationMetadata",new Map);Z(this,"conversationIdByMessageId",new Map);Z(this,"messageIdByTaskId",new Map);Z(this,"latestMessagePartIdentifier",null);this.ws=e,this.send=this.send.bind(this),this.regenerate=this.regenerate.bind(this),this.sendChallengeResponse=this.sendChallengeResponse.bind(this),this.resetConversationState=this.resetConversationState.bind(this),this.resetConversationTiming=this.resetConversationTiming.bind(this),this.setConversationIdByMessageId=this.setConversationIdByMessageId.bind(this),this.setMessageIdByTaskId=this.setMessageIdByTaskId.bind(this),this.onSubmitMessageBlocked=this.onSubmitMessageBlocked.bind(this),this.callBeforeSendForConversation=this.callBeforeSendForConversation.bind(this),this.callOnSentForConversation=this.callOnSentForConversation.bind(this),this.setChatModeForConversation=this.setChatModeForConversation.bind(this),this.setInputMethodForConversation=this.setInputMethodForConversation.bind(this),this.setUserMessageForConversation=this.setUserMessageForConversation.bind(this),this.processEvent=this.processEvent.bind(this)}getConversationState(e){return this.conversationMetadata.has(e)||this.conversationMetadata.set(e,TR(performance.now())),this.conversationMetadata.get(e)}get latestMessagePartId(){return this.latestMessagePartIdentifier}resetConversationState(e,n){this.conversationMetadata.set(e,TR(n))}resetConversationTiming(e,n){this.getConversationState(e).timing.resetStartTime(n)}setConversationIdByMessageId(e){const{messageId:n,conversationId:r}=e;this.conversationIdByMessageId.set(n,r)}setMessageIdByTaskId(e){const{taskId:n,messageId:r}=e;this.messageIdByTaskId.set(n,r)}onSubmitMessageBlocked(e){const{timing:n,chatMode:r,inputMethod:o}=this.getConversationState(e);n.onSubmitMessageBlocked(r,o,e)}callBeforeSendForConversation(e){this.getConversationState(e).timing.onBeforeSend()}callOnSentForConversation(e,n){this.getConversationState(e).timing.onSent(n)}setChatModeForConversation(e,n){const r=this.getConversationState(e);r.chatMode=n}setInputMethodForConversation(e,n){const r=this.getConversationState(e);r.inputMethod=n}setUserMessageForConversation(e,n){const r=this.getConversationState(e);r.lastUserMessage=n}send(e){const{content:n,conversationId:r,data:o,mode:i,context:a}=e,s={event:"send",conversationId:r,content:Array.isArray(n)?n:[n],mode:i,context:a,...o};this.ws.send(JSON.stringify(s))}sendChallengeResponse(e){this.ws.send(JSON.stringify({event:"challengeResponse",token:e.token,method:e.method}))}regenerate(e){const{messageId:n,mode:r}=e,o={event:"regenerate",messageId:n,mode:r};this.ws.send(JSON.stringify(o))}processEvent(e){switch("id"in e&&(this.latestMessagePartIdentifier=e.id??null),e.event){case"received":this.handleReceived(e);break;case"connected":this.handleConnected(e);break;case"emojiReaction":this.handleEmojiReaction(e);break;case"startMessage":this.handleStartMessage(e);break;case"appendText":this.handleAppendText(e);break;case"replaceText":this.handleReplaceText(e);break;case"invokeAction":this.handleInvokeAction(e);break;case"chainOfThought":this.handleChainOfThought(e);break;case"citation":this.handleCitation(e);break;case"generatingImage":this.handleGeneratingImage(e);break;case"imageGenerated":this.handleImageGenerated(e);break;case"partialImageGenerated":this.handlePartialImageGenerated(e);break;case"imageGenerationFailed":this.handleImageGenerationFailed(e);break;case"generatingCard":this.handleGeneratingCard(e);break;case"cardGenerationFailed":this.handleCardGenerationFailed(e);break;case"page":this.handlePage(e);break;case"titleUpdate":this.handleTitleUpdate(e);break;case"challenge":this.handleChallenge();break;case"card":this.handleCard(e);break;case"taskStart":this.handleTaskStart(e);break;case"taskUpdate":this.handleTaskUpdate(e);break;case"error":this.handleError(e);break;case"banned":this.handleBanned(e);break;case"suggestedFollowups":this.handleSuggestedFollowups(e);break;case"done":this.handleDone(e);break;case"startSuggestion":this.handleStartSuggestion(e);break;case"appendSuggestion":this.handleAppendSuggestion(e);break;case"activityStart":this.handleActivityStart(e);break;case"activityUpdate":this.handleActivityUpdate(e);break}}clearAllStreamingStates(){const e=Ft.get(En);for(const n of e.values())Ia(n.id,r=>{r.streamingState="idle"})}handleReceived(e){const{messageId:n,conversationId:r}=e;this.conversationIdByMessageId.set(n,r);const o=this.getConversationState(r);o.timing.onReceived({messageId:n,conversationId:r,chatMode:o.chatMode}),rR([`humanMessage_${n}`,`conversation_${r}`]),Ft.set(ac,i=>i&&!YC()?i-1:i),on(r,i=>{const a=i.at(-1);(a==null?void 0:a.author)==="human"&&(a.id=n)}),fle()}handleConnected(e){yv.trackLatestChatConnectedAssignment(e)}handleEmojiReaction(e){const{messageId:n,emoji:r}=e,o=this.conversationIdByMessageId.get(n);o&&on(o,i=>{const a=mz(i,n);a&&(a.emojiReaction=r)})}handleStartMessage(e){const{messageId:n,conversationId:r,createdAt:o}=e;this.conversationIdByMessageId.set(n,r);const i=this.getConversationState(r),{chatMode:a}=i;i.citationCount=0,i.timing.onStartMessage({messageId:n,conversationId:r,chatMode:a}),ot("multiplecharacters")&&Ft.set(Gs,"responding"),rR([`aiMesssage_${n}`,`conversation_${r}`]);const s={id:n,createdAt:o,author:"ai",content:[],mode:a};Ia(r,c=>{c.streamingState="streaming"}),on(r,c=>{c.length===0&&FM(Ft.get(Bo),r)||c.push(s)})}handleAppendText(e){const{text:n,messageId:r,partId:o}=e,i=this.conversationIdByMessageId.get(r);if(!i)return;const a=this.getConversationState(i);a.timing.onFirstToken(r,a.chatMode,i),on(i,s=>{const c=Gn(s,r);if(c){Zd(i,c.id);let u=tl(c.content,o);if(!u)u={type:"text",text:"",partId:o},c.content.push(u);else if(u.type!=="text"){console.error(`appendText event with partId that is not a text item. Item is of type ${u.type}`,e);return}u.text=u.text.concat(n)}})}handleReplaceText(e){const{text:n,messageId:r,partId:o}=e,i=this.conversationIdByMessageId.get(r);i&&on(i,a=>{const s=Gn(a,r);if(s){Zd(i,s.id);let c=tl(s.content,o);if(!c)c={type:"text",text:"",partId:o},s.content.push(c);else if(c.type!=="text"){console.error("replaceText event with partId that is not a text item",e);return}c.text=n,c.citations=void 0}})}handleCitation(e){const{title:n,url:r,messageId:o,publisher:i,iconUrl:a}=e,s=this.conversationIdByMessageId.get(o);if(!s)return;const c=this.getConversationState(s);gV(r,s,o),on(s,u=>{const d=Gn(u,o);if(d){Zd(s,d.id);const h=vz(d.content);if(h){h.citations||(h.citations=[]);const p=h.citations.find(v=>v.url===r);let g;p?g=p.index:(c.citationCount+=1,g=`${c.citationCount}`,h.citations.push({index:g,url:r,iconUrl:a,title:n,publisher:i})),h.text=h.text.concat(qj(g,r))}}})}handleGeneratingImage(e){const{prompt:n,messageId:r,partId:o,progressionText:i}=e,a=this.conversationIdByMessageId.get(r);if(!a)return;const s=this.getConversationState(a);s.timing.onImageGenerationStart({messageId:r,conversationId:a,chatMode:s.chatMode}),on(a,c=>{const u=Gn(c,r);u&&u.content.push({type:"image",prompt:n,partId:o,partialGenerationStep:0,status:"generating",progressionText:i})})}handleImageGenerated(e){const{url:n,partId:r,messageId:o}=e,i=this.conversationIdByMessageId.get(o);if(!i)return;const a=this.getConversationState(i);a.imageCount+=1,a.timing.onImageReceived({messageId:o,conversationId:i,chatMode:a.chatMode}),on(i,s=>{const c=Gn(s,o);if(c){const u=tl(c.content,r);(u==null?void 0:u.type)==="image"&&(u.isPartiallyLoading=!1,u.url=n,u.partialGenerationStep=void 0,u.status="generated",u.progressionText=void 0)}})}handlePartialImageGenerated(e){const{content:n,messageId:r,partId:o}=e,i=this.conversationIdByMessageId.get(r);if(!i)return;const a=this.getConversationState(i);on(i,s=>{const c=Gn(s,r);if(c){const u=tl(c.content,o);if((u==null?void 0:u.type)==="image"){u.isPartiallyLoading=!0,u.url=`data:image/png;base64,${n}`;const d=(u.partialGenerationStep??0)+1;u.partialGenerationStep=d,u.status="generating",a.timing.onPartialImageReceived({messageId:r,conversationId:i,chatMode:a.chatMode,imageGenPhase:d})}}})}getImageGenerationErrorMessage(e){switch(e){case"not-signed-in":return ie("error.imageGenerationFailedSignedOut");case"throttled":return ie("error.imageGenerationFailedThrottled");case"blocked":return ie("error.imageGenerationFailedBlocked");default:return ie("error.imageGenerationFailed")}}handleImageGenerationFailed(e){const{messageId:n,partId:r,errorCode:o}=e,i=this.conversationIdByMessageId.get(n);if(!i)return;on(i,s=>{const c=Gn(s,n);c&&(c.content=c.content.filter(u=>u.type!=="image"||u.partId!==r))});const a=this.getImageGenerationErrorMessage(o);o==="not-signed-in"&&Ft.set(Bc,{isOpen:!0,scenario:null,reason:"imageGeneration"}),sp(a,i)}handleCardGenerationFailed(e){const n=Ft.get(Xd);if(n&&this.isGeneratedCards(n)){Ft.set(Xd,void 0);const r=this.conversationIdByMessageId.get(e.messageId);if(!r)return;n==="quiz"&&sp(ie("quizCard.generatedQuizFailed"),r)}}handleGeneratingCard(e){const{type:n}=e;this.isGeneratedCards(n)&&Ft.set(Xd,n)}isGeneratedCards(e){return yM.safeParse(e).success}handleTitleUpdate(e){const{conversationId:n,title:r}=e;Ft.set(En,o=>Za(o,i=>{const a=i.get(n);a&&(a.title=r)}))}handleCard(e){const{messageId:n,partId:r,card:o}=e,i=this.conversationIdByMessageId.get(n);if(!i)return;const a=this.getConversationState(i);if(o.type==="ads"){Gce({card:o,messageId:n,partId:r,conversationState:a,conversationId:i});return}on(i,s=>{const c=Gn(s,n);c&&c.content.push({type:"card",partId:r,card:o})})}handleBanned(e){const{expiresAt:n}=e,r=UT(n);r&&FT(r,"chat",n)}handlePage(e){const{messageId:n,page:r,partId:o}=e,i=this.conversationIdByMessageId.get(n);i&&(on(i,a=>{const s=Gn(a,n);s&&s.content.push({type:"page",partId:o,page:r})}),gn.emit("pages:page-created",r))}handleStartSuggestion(e){const{pageId:n,suggestionId:r,editTargets:o}=e;Sle(n,{id:r,text:void 0,editTargets:o})}handleAppendSuggestion(e){const{pageId:n,suggestionId:r,text:o}=e;wle(n,r,o)}handleActivityStart(e){if(!ot("ceo"))return;const{messageId:n,partId:r,activity:o}=e,i=this.conversationIdByMessageId.get(n);i&&on(i,a=>{const s=Gn(a,n);s?s.content.push({activity:o,type:"activity",partId:r}):Bce(n)})}handleActivityUpdate(e){if(!ot("ceo"))return;const{messageId:n,partId:r,update:o}=e,i=this.conversationIdByMessageId.get(n);if(i)try{on(i,a=>{const s=Gn(a,n);if(!s)return;const c=tl(s.content,r);if(!c||c.type!=="activity"){Hce(n,r);return}Hs(c.activity,o)})}catch(a){Vce(a)}}processInvokeAction(e){const n=Ft.get(mt);if(n)switch(e.actionName){case"phone_send_message":{on(n,r=>{const o=C2(r);o&&o.content.push({type:"card",partId:Math.random().toString(),card:{type:"phoneSendMessage",actionId:e.actionId,contactName:e.parameters.contactName,text:e.parameters.text,phoneNumber:e.parameters.phoneNumber}})});break}case"edge_get_page_content":{const r=e.parameters.map(o=>({tabId:o.tabId,windowId:o.windowId,pageUrl:o.pageUrl??""}));Pae.run({actionId:e.actionId,tabs:r});break}}}handleInvokeAction(e){const{success:n,data:r}=Wce.safeParse(e);n?this.processInvokeAction(r):console.error("Invalid action data:",e)}handleTaskStart(e){const{messageId:n,task:r,partId:o}=e,i=this.conversationIdByMessageId.get(n);this.messageIdByTaskId.set(r.id,n);const a=new Date().toISOString();if(i){Jce([r],i,a),Ft.set(ff,!1),on(i,c=>{const u=Gn(c,n);if(u){const d=Dce(r,o,a);d&&u.content.push(d)}}),xae.run({task:r,action:"startTask"});const s=Ft.get(mt);r.type==="computerUse"&&i===s&&XY(r.conversationId,i),(r.type==="podcast"||r.type==="research")&&kle()}}handleTaskUpdate(e){const{taskId:n,update:r}=e;if(qY(n,r))return;let o=!1;const i=this.messageIdByTaskId.get(n),a=i?this.conversationIdByMessageId.get(i):void 0;try{i&&a&&on(a,s=>{const c=ot("multiple-research-tasks-in-conversation")&&FN,u=Gn(s,i,c);if(u){const d=pz(u.content),h=d==null?void 0:d.task;h&&h.type==="research"&&(Hs(h,r),_2.includes(h.status)&&(yz("chat"),Fce(h,a)))}}),Dw(n,s=>{var c;if(s.type==="computerUse"&&Hs(s,r),s.type==="podcast"){const u=((c=s.podcast)==null?void 0:c.id)??"";Hs(s,r),s.podcast&&(s.podcast.id=u)}}),o=!0}catch(s){console.error("Error applying task update patch:",s)}if(o){const s=Ft.get(Bo).get(n);switch(s==null?void 0:s.type){case"computerUse":JY(n,r);break;case"podcast":Uce(s);break}}}handleSuggestedFollowups(e){const{disableMultiturn:n}=Ee.instance().config();if(!n){const{suggestions:r,messageId:o}=e,i=this.conversationIdByMessageId.get(o);i&&Ia(i,a=>{a.suggestedFollowup={messageId:o,suggestions:r}})}}handleError(e){const{errorCode:n}=e;if(n==="over-turn-limit")Ft.set(ac,0);else if(n==="over-reasoning-quota"){!Ft.get(Oh)&&YC()&&Ee.instance().config().thinkDeeperFreemiumEnabled&&(Ft.set(MV,"chat-over-reasoning-quota"),Ft.set(Or,"reasoning-mode-pro-subscription")),Ft.set(ir,"chat");for(const[o]of this.conversationMetadata.entries())sp(ie("chat.overCapacity"),o)}else if(n==="over-task-quota")Ft.set(Or,"over-task-quota");else if(n==="unknown-error")for(const[r]of this.conversationMetadata.entries())Ia(r,o=>{o.streamingState="idle"});else if(n==="page-content-length-exceeded"||n==="page-count-exceeded"){gn.emit("page:message-error",n);for(const[r]of this.conversationMetadata.entries())Ia(r,o=>{o.streamingState="idle"})}else for(const[r]of this.conversationMetadata.entries())sp(ie("error.eventNotRecognized"),r);Ft.set(ff,!1)}handleChainOfThought(e){const{messageId:n,partId:r,text:o}=e,i=this.conversationIdByMessageId.get(n);i&&on(i,a=>{var c;const s=Gn(a,n);if(s){Zd(i,s.id);let u=gz(s.content);(!u||u.type!=="chainOfThought")&&(u={type:"chainOfThought",text:"",partId:r,items:[]},s.content.push(u)),(c=u.items)==null||c.push({text:o})}})}handleChallenge(){if(!Da("kill-cf-turnstile")){const e=Ft.get(mt);if(!e)return;const{lastUserMessage:n}=this.getConversationState(e);rle(r=>{this.sendChallengeResponse({token:r,method:"cloudflare"}),n&&this.send(n)})}}handleDone(e){var c;ot("multiplecharacters")&&Ft.get(Gs)==="responding"&&Ft.set(Gs,"idle");const{messageId:n}=e,r=this.conversationIdByMessageId.get(n);if(!r)return;const o=this.getConversationState(r);o.timing.onLastToken({messageId:n,conversationId:r,citationCount:o.citationCount,imageCount:o.imageCount,chatMode:o.chatMode,inputMethod:o.inputMethod});const a=((c=Ft.get(En).get(r))==null?void 0:c.history)??[],s=Gn(a,n);on(r,u=>{if(!s)return;const d=Gn(u,s.id),h=s.content.find(p=>p.type==="image"&&p.partialGenerationStep!==void 0);if(d&&h){const p=tl(d.content,h.partId);p&&(p.partialGenerationStep===0?p.type="deleted":p.type==="image"&&(p.isPartiallyLoading=!1,p.partialGenerationStep=void 0,p.status="non-complete"))}}),Ia(r,u=>{u.streamingState="idle"}),Ft.set(Xd,void 0),Ft.set(ff,!1),window.setTimeout(()=>{Ft.set(Iw,u=>{if(u.get(r)===n){const h=new Map(u);return h.delete(r),h}return u})},o.chatMode==="reasoning"?5e3:3e3),Ft.set(l2,!0),s&&Ile({message:s,conversationId:r}),Nae.run({conversationMessages:a})}}const Rle="eval/chat";function Ple(){const t=ot("weather-cards"),e=!Da("kill-image-cards"),n=ot("local-cards"),r=ot("sports-cards"),o=!Da("kill-video-cards"),i=ot("shopping-card"),a=ot("shopping-curated"),s=ot("media-spotlight-card"),c=ot("job-cards"),u=ot("safetycards"),d=ot("quiz-cards"),h=ot("generateads"),p=ot("generateadsint"),g=ot("adsparity"),v=!Da("kill-finance-cards"),y=ot("adstags"),_=ot("product-ads-dynamic-filter"),b=ot("property-promotion-ads-dynamic-filter"),C=ot("tour-activity-ads-dynamic-filter"),w=ot("adsshowroom"),S=ot("emoji-reactions"),E=ot("imagegenv3");ot("turn-telemetry");const I=ot("recipe-card"),{adsEnabled:x,adsShowroomEnabled:A,disableAnswerCards:N,enforceAdsOptOutOfPersonalization:R,answerCardOverrides:z}=Ee.instance().config(),P=!!ct().get(Oh),X=(h||p||g)&&x&&!P,M=s&&(z==null?void 0:z.shouldEnableMediaSpotlightCard),k=[];N||(t&&k.push("weather"),n&&k.push("local"),e&&k.push("image"),r&&k.push("sports"),o&&k.push("video"),i&&k.push("shopping"),c&&k.push("job"),X&&k.push("ads"),u&&k.push("safetyHelpline"),d&&k.push("quiz"),v&&k.push("finance"),a&&k.push("shoppingCurated"),I&&k.push("recipe"),M&&k.push("mediaSpotlight"));const U={supportedTypes:["text","product","multimedia","tourActivity","propertyPromotion"]};R&&(U.optOutOfPersonalization=!0),w&&x&&A&&U.supportedTypes.push("showroom"),(_||y)&&(U.product={tagsSupported:!0}),b&&(U.propertyPromotion={tagsSupported:!0}),C&&(U.tourActivity={tagsSupported:!0});const O=[];return S&&O.push("emoji-reactions"),E&&O.push("partial-generated-images"),{supportedFeatures:O,supportedCards:k.length>0?k:void 0,ads:X?U:null}}const IR=1e3,Ole=3e4,Nle=5e3;class Mle{constructor({autoReconnect:e=!1}={}){Z(this,"connection");Z(this,"autoReconnect");Z(this,"reconnectInterval");Z(this,"maxReconnectInterval");Z(this,"reconnectTimeout");Z(this,"sendQueue",[]);Z(this,"connecting",!1);Z(this,"state",null);Z(this,"cachedSendData",null);Z(this,"pongTimeout",null);Z(this,"boundReconnectIfNeeded");Z(this,"boundDisconnect");Z(this,"boundVisibilityChange");Z(this,"getUrl",null);Z(this,"onopen");Z(this,"onmessage");Z(this,"onclose");Z(this,"onerror");this.connection=null,this.autoReconnect=e,this.reconnectInterval=IR,this.maxReconnectInterval=e?Ole:0,this.reconnectTimeout=null,this.onopen=null,this.onmessage=null,this.onclose=null,this.onerror=null,this.connect=this.connect.bind(this),this.reconnect=this.reconnect.bind(this),this.processSendQueue=this.processSendQueue.bind(this)}async initialize(){this.state=null,await this.connect(),this.autoReconnect&&(this.boundReconnectIfNeeded=this.reconnectIfNeeded.bind(this),this.boundDisconnect=this.disconnect.bind(this),this.boundVisibilityChange=()=>{document.visibilityState==="visible"&&this.reconnectIfNeeded()},window.addEventListener("online",this.boundReconnectIfNeeded),window.addEventListener("offline",this.boundDisconnect),document.addEventListener("visibilitychange",this.boundVisibilityChange))}async connect(){var n;if(((n=this.connection)==null?void 0:n.readyState)===WebSocket.CONNECTING||this.connecting||this.pongTimeout)return;if(!this.getUrl)throw new Error("getUrl function is not set");this.connecting=!0;const e=await this.getUrl();this.connection=new WebSocket(e),this.connecting=!1,this.connection.onopen=r=>{this.state=null,this.onopen&&this.onopen(r),this.processSendQueue(),this.reconnectInterval=IR,this.reconnectTimeout&&(window.clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null)},this.connection.onmessage=r=>{if(this.state!=="destroyed")try{const o=JSON.parse(r.data);this.onmessage&&this.onmessage(o),o.event==="pong"&&(this.removePongTimeout(),this.processSendQueue())}catch{}},this.connection.onclose=r=>{this.connection&&this.connection.bufferedAmount>0&&this.cachedSendData&&(this.sendQueue.push(this.cachedSendData),this.cachedSendData=null),this.onclose&&this.onclose(r),this.autoReconnect&&this.state===null&&this.reconnect(),this.removePongTimeout()},this.connection.onerror=r=>{this.onerror&&this.onerror(r),this.connection&&this.connection.close(),this.removePongTimeout()}}reconnect(){this.reconnectTimeout&&window.clearTimeout(this.reconnectTimeout),this.reconnectTimeout=window.setTimeout(this.connect,this.reconnectInterval),this.reconnectInterval=Math.min(this.reconnectInterval*2,this.maxReconnectInterval)}processSendQueue(){if(this.sendQueue.length>0){const e=this.sendQueue;this.sendQueue=[];for(const n of e)this.send(n)}}reconnectIfNeeded(){if(this.state!=="destroyed"){if(!this.connection||this.connection.readyState!==WebSocket.OPEN){this.reconnect();return}this.pongTimeout===null&&(this.connection.send(JSON.stringify({event:"ping"})),this.pongTimeout=window.setTimeout(()=>{var e;this.pongTimeout=null,(e=this.connection)==null||e.close(),this.reconnect()},Nle))}}removePongTimeout(){this.pongTimeout!==null&&(window.clearTimeout(this.pongTimeout),this.pongTimeout=null)}send(e){if(this.state!=="destroyed")if(this.connection&&this.connection.readyState===WebSocket.OPEN&&this.pongTimeout===null)try{this.cachedSendData=e,this.connection.send(e)}catch{this.sendQueue.push(e),this.connect()}else this.sendQueue.push(e),this.connect()}cleanup(){this.boundReconnectIfNeeded&&window.removeEventListener("online",this.boundReconnectIfNeeded),this.boundDisconnect&&window.removeEventListener("offline",this.boundDisconnect),this.boundVisibilityChange&&document.removeEventListener("visibilitychange",this.boundVisibilityChange)}disconnect(){this.connection&&(this.state="disconnected",this.connection.close())}destroy(){this.connection&&(this.state="destroyed",this.cleanup(),this.connection.close(),this.connection=null)}}async function Vs({useMockConnection:t}={}){const e=async({cursor:n})=>{const r=sj()?Rle:"chat";return n?nR(r,{cursor:n}):nR(r)};return vm.get({getUrl:e})}async function Lle({getUrl:t}){return typeof WebSocket>"u"?{destroy:()=>{},send:()=>{},regenerate:()=>{},sendAudioStart:()=>{},sendAudio:()=>{},sendAudioEnd:()=>{},setCallType:()=>{},stop:()=>{},setOnEvent:()=>()=>{},sendChallengeResponse:()=>{},sendActionResult:()=>{},resetConversationState:()=>{},resetConversationTiming:()=>{},setConversationIdByMessageId:()=>{},setMessageIdByTaskId:()=>{},setChatModeForConversation:()=>{},setInputMethodForConversation:()=>{},callBeforeSendForConversation:()=>{},callOnSentForConversation:()=>{},setUserMessageForConversation:()=>{},onSubmitMessageBlocked:()=>{}}:new Promise((e,n)=>{const r=Da("kill-chat-auto-reconnect"),o=new Mle({autoReconnect:!r}),i=new xle(o);o.getUrl=()=>t({cursor:i.latestMessagePartId}),o.onopen=()=>{const s={event:"setOptions",...Ple()};o.send(JSON.stringify(s)),o.onmessage=c=>{try{bk.parse(c)}catch(u){u instanceof Tm&&Hf(u,"/chat")}i.processEvent(c)},e({destroy:()=>{o.destroy(),i.clearAllStreamingStates()},stop:(c={})=>{const{conversationId:u,taskId:d}=c;o.send(JSON.stringify({event:"stop",conversationId:u})),d&&o.send(JSON.stringify({event:"send",conversationId:u,content:[{type:"command",command:{type:"cancelTask",taskId:d}}],mode:"research"})),u&&Ia(u,h=>{h.streamingState="idle"})},send:i.send,regenerate:i.regenerate,sendAudioStart:(c,u,d)=>{const h={event:"audioStart",conversationId:c,options:u,clientType:d};o.send(JSON.stringify(h))},sendAudio:c=>{const u={event:"audio",audio:c};o.send(JSON.stringify(u))},sendAudioEnd:()=>{const c={event:"audioEnd"};o.send(JSON.stringify(c))},setCallType:c=>{const u={event:"setCallType",callType:c};o.send(JSON.stringify(u))},sendChallengeResponse:i.sendChallengeResponse,setOnEvent:c=>{o.onmessage=u=>{try{bk.parse(u),i.processEvent(u)}catch(d){d instanceof Tm&&Hf(d,"/chat")}c(u)}},sendActionResult:c=>{o.send(JSON.stringify({event:"actionResult",actionId:c.actionId,result:c.result}))},resetConversationState:i.resetConversationState,resetConversationTiming:i.resetConversationTiming,setConversationIdByMessageId:i.setConversationIdByMessageId,setMessageIdByTaskId:i.setMessageIdByTaskId,setChatModeForConversation:i.setChatModeForConversation,setInputMethodForConversation:i.setInputMethodForConversation,callBeforeSendForConversation:i.callBeforeSendForConversation,callOnSentForConversation:i.callOnSentForConversation,setUserMessageForConversation:i.setUserMessageForConversation,onSubmitMessageBlocked:i.onSubmitMessageBlocked})},o.onclose=()=>{},o.onerror=a=>{const s=a instanceof ErrorEvent?a.message:"Unknown WebSocket error";Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ChatWebsocketError",eventInfo_errorMessage:s,eventInfo_details:JSON.stringify(a)}}),n(new Error(`WebSocket connection error: ${s}`))},o.initialize().catch(a=>{const s=a instanceof Error?a.message:"Unknown WebSocket error";Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ChatWebsocketInitializationError",eventInfo_errorMessage:s,eventInfo_details:a instanceof Error?a.stack??"":""}}),n(new Error(`WebSocket initialization error: ${s}`))})})}async function Yj(){if(vm.isInstantiated){const t=gt(Eo),e=(t==null?void 0:t.streamingState)==="streaming",n=await vm.get();n.stop(),n.destroy(),n.stop({conversationId:t==null?void 0:t.id}),vm.reset();try{Y.trackEvent({name:"system",data:{eventName:"chatClientReset",eventInfo_isMessageStreaming:e}})}catch{}}}const vm=new Mc(t=>Lle(t)),Dle=10*1024*1024,jle=5*1024*1024,Ule=50*1024*1024,Fle={"image/png":["png"],"image/jpeg":["jpg","jpeg"]},tI={"application/pdf":["pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/json":["json"],"text/csv":["csv"],"text/markdown":["md"],"text/plain":["txt"]},ch={...Fle,...tI};function yy(t){return t in tI}function Qj(t){if(!t)return!1;const e=sa(t);return e===""?!1:e in ch}const Ble=Object.keys(ch).map(t=>{const e=ch[t].map(n=>`.${n}`);return[t,...e]}).flat();Object.values(ch).flat().map(t=>`.${t}`);const Hle=Object.values(tI).flat().map(t=>`.${t}`);function Vle(){return{documentMaxSize:ot("fileasyncprocessing")?Ule:jle,imageMaxSize:Dle}}function nI(t){var r;const e=(r=t.split(".").pop())==null?void 0:r.toLowerCase(),n=Object.entries(ch).find(([,o])=>o.includes(e??""));return n?n[0]:""}function sa(t){return t?t.type!==""?t.type:nI(t.name):""}function zle(t){let e,n=null;return Qj(t)?Jj(t)||(e={title:ie("composer.errors.attachmentTooLargeV2.title"),message:ie("composer.errors.attachmentTooLargeV2.message")},n="fileSize"):(e={title:ie("composer.errors.unsupportedAttachmentTypeV2.title"),message:ie("composer.errors.unsupportedAttachmentTypeV2.message")},n="fileType"),Y.trackEvent({name:"system",data:{eventName:"clientFileValidation",eventInfo_errorType:n,eventInfo_fileType:sa(t),eventInfo_fileSize:t.size}}),e}function $le(t){return t.type==="text/x-markdown"?new File([t],t.name,{type:"text/markdown"}):t}function Jj(t){const e=Vle(),n=sa(t),r=yy(n)?e.documentMaxSize:e.imageMaxSize;return t.size<=r}function Gle(t){var n;const e=(n=t.clipboardData)==null?void 0:n.items;if(e)for(let r=0;r<e.length;r+=1){const o=e[r];if((o==null?void 0:o.kind)==="file"){const i=o.getAsFile();if(!Qj(i))continue;const a=sa(i);if(i!==null)return Jj(i)?{file:i,error:void 0}:(Y.trackEvent({name:"system",data:{eventName:"clientFileValidation",eventInfo_errorType:"fileType",eventInfo_fileSize:i.size,eventInfo_fileType:a,eventInfo_errorMessage:"File size too large in paste"}}),{file:void 0,error:{title:ie("composer.errors.attachmentTooLargeV2.title"),message:ie("composer.errors.attachmentTooLargeV2.message")}})}}return{file:void 0,error:void 0}}function Xj(t){switch(t){case"unsupported-content-type":return{title:ie("composer.errors.unsupportedAttachmentTypeV2.title"),message:ie("composer.errors.unsupportedAttachmentTypeV2.message")};case"attachment-too-large":return{title:ie("composer.errors.attachmentTooLargeV2.title"),message:ie("composer.errors.attachmentTooLargeV2.message")};case"empty-attachment":return{title:ie("composer.errors.emptyAttachmentV2.title"),message:ie("composer.errors.emptyAttachmentV2.message")};case"content-blocked":return{title:ie("composer.errors.attachmentContentBlockedV2.title"),message:ie("composer.errors.attachmentContentBlockedV2.message")};case"rate-limit-exceeded":return{title:ie("composer.errors.attachmentRateLimitExceededV2.title"),message:ie("composer.errors.attachmentRateLimitExceededV2.message")};default:return{title:ie("composer.errors.attachmentDefault.title"),message:ie("composer.errors.attachmentDefault.message")}}}function MIe(t,e,n){const r=new Blob([n],{type:e}),o=window.URL.createObjectURL(r),i=document.createElement("a");i.style.display="none",i.href=o,i.download=t,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(o),i.remove()}function Kle({name:t,size:e,message:n,kind:r}){Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:n,eventInfo_details:`Error uploading ${r} attachment`,eventInfo_uploadFileSize:e,eventInfo_uploadFileType:t,eventInfo_numDocumentsUploaded:1}})}async function Wle(t,e){try{const n=await t.arrayBuffer(),r=new Uint8Array(n),o=await Un("/attachments",fq,{options:{method:"POST",headers:{"Content-Type":sa(t)},body:new Blob([r]),signal:e}}).then(i=>i.data);if("errorCode"in o)throw new Error(o.errorCode);return o.url}catch(n){throw console.error("Error uploading image",n),n}}async function qle(t,e){try{const n=new FormData;t.type!==""?n.append("file",t):n.append("file",new File([t],t.name,{type:sa(t)}),t.name);const r=await Un("/attachments",uM,{options:{method:"POST",body:n,signal:e}}).then(o=>o.data);if("errorCode"in r)throw new Error(r.errorCode);return r.id}catch(n){throw console.error("Error uploading document",n),n}}async function Yle(t,e){try{const n=await Un("/attachments/onedrive",uM,{options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id}),signal:e}}).then(r=>r.data);if("errorCode"in n)throw new Error(n.errorCode);return n.id}catch(n){throw console.error("Error uploading OneDrive file",n),n}}async function Qle(t){const e=t.map(async(n,r)=>{var o;if(!n.error){if(n.file&&!n.attachment){const a={type:"image",url:await Wle(n.file)},s={item:a,content:a,size:n.file.size,type:sa(n.file)};return{type:"image",fileInfo:{file:n.file,attachment:s}}}if(n.file&&((o=n.attachment)==null?void 0:o.item.type)==="document")return{type:"document",fileInfo:{file:n.file,attachment:{...n.attachment,item:{...n.attachment.item,partId:String(r)}}}}}return null});return Promise.all(e)}function Jle(t){return t?t.startsWith("!"):!1}function lh(t){return t==="reasoning"?OB:ie(`composer.chatModes.${t}.title`)}const AR={global:["https://ad.doubleclick.net/ddm/activity/src=8406097;type=ofco;cat=lrn_uni;u1={REGION};u2={LANG_LOCALE};u6=CMC;u50=submit_message;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=1;num={CACHE_BUSTER}"],us:["https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/ChatSend","https://secure.adnxs.com/px?id=1869141&t=2","https://servedby.flashtalking.com/spot/1/5155;147512;16638/?spotName=USA_FY25H2_Copilot_Consumer_Chat_Send_button_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://alb.reddit.com/rp.gif?id=a2_gi5vc4m557wn&event=Custom&m.customEventName=COPChatSend&integration=noscript","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=SendMessage&event_id={CACHE_BUSTER}","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=START_CHECKOUT&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com/","https://tr.snapchat.com/cm/s?pnid=140","https://www.facebook.com/tr?id=1770559986549030&ev=COPChatSend&noscript=1"],gb:["https://secure.adnxs.com/px?id=1869542&t=2&seg=39793132&consent={CONSENT}","https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/ChatSend","https://servedby.flashtalking.com/spot/1/3360;147492;16970/?spotName=GBR_FY25H2_Copilot_Consumer_Chat_Send_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=SendMessage&event_id={CACHE_BUSTER}","https://www.facebook.com/tr?id=1770559986549030&ev=COPChatSend&noscript=1","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=START_CHECKOUT&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com/","https://tr.snapchat.com/cm/s?pnid=140"],other:["https://www.facebook.com/tr?id=1770559986549030&ev=COPChatSend&noscript=1","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=SendMessage&event_id={CACHE_BUSTER}"]},ym={onPageLoad:{global:["https://ad.doubleclick.net/ddm/activity/src=8406097;type=ofco;cat=lp_uniq;u1={REGION};u2={LANG_LOCALE};u6=CMC;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=1;num={CACHE_BUSTER}"],us:["https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1","https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/custom-pageload","https://secure.adnxs.com/px?id=1869069&t=2","https://servedby.flashtalking.com/spot/1/5155;147507;16638/?spotName=USA_FY25H2_Copilot_Consumer_Page_Load_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://alb.reddit.com/rp.gif?id=a2_gi5vc4m557wn&event=PageVisit&integration=noscript","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=ViewContent&event_id={CACHE_BUSTER}","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=PAGE_VIEW&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com","https://tr.snapchat.com/cm/s?pnid=140"],gb:["https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1","https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/custom-pageload","https://secure.adnxs.com/px?id=1869539&seg=39793125&t=2&consent={CONSENT}","https://servedby.flashtalking.com/spot/1/3360;147490;16970/?spotName=GBR_FY25H2_Copilot_Consumer_Page_Load_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=ViewContent&event_id={CACHE_BUSTER}","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=PAGE_VIEW&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com","https://tr.snapchat.com/cm/s?pnid=140"],other:["https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=ViewContent&event_id={CACHE_BUSTER}"]},onMessageSend:AR,onStartVoiceChat:AR,onSuggestionChipClicked:{global:[],us:[],gb:[],other:[]},onDiscoverCardClicked:{global:[],us:[],gb:[],other:[]},onQueryParamSubmit:{global:[],us:[],gb:[],other:[]}},Xle={onPageLoad:{behavior:20,Content:{Id:"CMCChatLoaded",cN:"CMC Chat Loaded"}},onMessageSend:{behavior:63,Content:{Id:"ChatManualMessage",cN:"Chat Manual Message"}},onStartVoiceChat:{behavior:300,Content:{Id:"VoiceMessageClick",cN:"Voice Message Click"}},onSuggestionChipClicked:{behavior:60,Content:{Id:"SuggestionChipClicked",cN:"Suggestion Chip Clicked"}},onDiscoverCardClicked:{behavior:144,Content:{Id:"DiscoverCardClicked",cN:"Discover Card Clicked"}},onQueryParamSubmit:{behavior:141,Content:{Id:"QueryParamMessageSubmit",cN:"Query Param Message Submit"}}};function Zle(t,e){return e==="US"?ym[t].us:e==="GB"?ym[t].gb:e&&["AU","CA","DE","FR","JP"].includes(e)?ym[t].other:[]}function eue(t){if(!ot("ads-pixels"))return;const e=ct().get(no),n=_t.language,r=Date.now().toString(),o=ym[t].global,i=Zle(t,e),{set:a}=ct();a(p2,s=>{for(const c of o.concat(i))s[c]||(s[c]={url:c.replace("{CACHE_BUSTER}",r).replace("{REGION}",e??"").replace("{LANG_LOCALE}",n).replace("{CONSENT}",rue(e)),isMounted:!0,timestamp:Date.now()});return{...s}})}function tue(t){ot("custom-1ds")&&(window.OneDsAzureAnalytics.capturePageAction(null,Xle[t]),YN())}function Dl(t){try{eue(t),tue(t)}catch{cc({feature:"sendIdeasTelemetry",customData:JSON.stringify({eventName:t})})}}function nue(t){Dl(t==="suggestion"?"onSuggestionChipClicked":t==="discover"?"onDiscoverCardClicked":t==="queryParam"?"onQueryParamSubmit":"onMessageSend")}function rue(t){return(t&&gv.includes(t))===!0?wh().advertising?"1":"0":""}function by(){const[t,e]=et(ir),n=QT(),r=es(En),o=F(mt),i=Se(oy),a=Se(o2),s=mce(),c=F(Hu),u=Se(ff),[d,h]=et(sy),p=YT(),g=m.useCallback(async b=>{var Ze,he,j,pe;const{text:C}=b,{filesWithAttachment:w=[],inputMethod:S,command:E,context:I,reference:x,scenario:A,customData:N,entryPoint:R}=b,z=performance.now();a(z),i("bottom");const P=gt(mt),X=w.length===0||w.every(({error:W})=>!!W);if(!P||!C&&X&&!E)return;const k=E&&$q.safeParse(E.type).success,{result:U}=await Mae.run({chatMode:t});if(U){e("chat");return}p&&(t==="computerUse"?(dt({source:"copilotActionsStartTask",customData:JSON.stringify({conversationId:P})}),u(!0)):u(!1));let O=0,$=0;const K=[],J=await Qle(w);for(const W of J)W&&(K.push(W.fileInfo),W.type==="image"?O+=1:$+=1);r(W=>{const re=W.get(P);re&&(re.suggestedFollowup=void 0)});const se=[],ne={id:"",createdAt:new Date().toISOString(),author:"human",content:[],inputMethod:S};c&&c.conversationId===P&&(ne.brand=c);for(const{attachment:W}of K)W&&(ne.content.push(W.item),se.push(W.content));d.size>0&&ne.content.push({type:"browserTabs",tabs:Array.from(d.values()).map(W=>({id:W.id,title:W.title,url:W.url,windowId:W.windowId,favIconUrl:W.favIconUrl}))}),C&&(ne.content.push({type:"text",text:C}),se.push({type:"text",text:C})),E&&se.push({type:"command",command:E}),x&&se.push({type:"reference",reference:x}),k||n(P,W=>{W.push(ne)});const ve=await Vs({useMockConnection:Jle(C)}),{sendData:Be,additionalData:Te}=await Tae.run(ne);d.size>0&&h(new Map);const Pe={content:se,conversationId:P,data:Be,mode:t,context:{...s,...I,ads:c?{showroom:{brandId:c.brandId,brandName:c.brandLogo.businessName,adId:c.adId??void 0}}:void 0}};ve.send(Pe),ve.resetConversationState(P,z),ve.setChatModeForConversation(P,t),ve.setInputMethodForConversation(P,S),ve.callBeforeSendForConversation(P),ve.callOnSentForConversation(P,Te),ve.setUserMessageForConversation(P,Pe);const He={eventName:"copilotCompose",eventInfo_conversationId:P,eventInfo_inputMethod:S,eventInfo_numImagesUploaded:O,eventInfo_numDocumentsUploaded:$,eventInfo_mode:t,eventInfo_landingPage:Y.getLandingPage(),...K.length>0?{eventInfo_uploadFileSize:((he=(Ze=K[0])==null?void 0:Ze.file)==null?void 0:he.size)??0,eventInfo_uploadFileType:(pe=(j=K[0])==null?void 0:j.attachment)==null?void 0:pe.type}:{}};Te&&(He.eventInfo_additionalData=Te),A&&(He.eventInfo_scenario=A),N&&(He.eventInfo_customData=N),c&&(He.eventInfo_adsContext=JSON.stringify({showroomBrandId:c.brandId,showroomBrandName:c.brandLogo.businessName})),R&&(He.eventInfo_entryPoint=R),Y.trackEvent({name:"interaction",data:He}),vce(),nue(S),lle(),t==="computerUse"&&e("chat")},[i,u,a,r,n,t,s,p,c,e,d,h]),v=m.useCallback(async()=>{const b=gt(mt);b&&(await Vs()).onSubmitMessageBlocked(b)},[]),y=m.useCallback(async()=>{var w,S;const b=await Vs(),C=(S=(w=S2(o))==null?void 0:w.part.task)==null?void 0:S.id;b.stop({conversationId:o,taskId:C})},[o]),_=m.useCallback(async b=>{const{messageId:C}=b,w=performance.now(),S=gt(mt);if(!S)return;n(S,I=>{const x=C2(I);x&&x.id===C&&I.pop()});const E=await Vs();E.regenerate(b),E.resetConversationTiming(S,w),E.setChatModeForConversation(S,t),E.callBeforeSendForConversation(S)},[n,t]);return{submitMessage:g,stopMessage:y,onSubmitMessageBlocked:v,regenerateMessage:_}}function LIe(t,e){return t.find(n=>n.partId===e)}let bm=null;function oue(){const t=Se(ir),e=YT();m.useEffect(()=>{const n=rV();bm===null&&(bm=n);const r=i=>i==="td"?"reasoning":e&&i==="ac"?"computerUse":null,o=r(n||bm);o&&t(o)},[t,e])}function iue(){return bm}function Zj(t){const{deferred:e=!1}=t??{},n=!!F(mt),r=F(xv),[o,i]=et(Rw),a=Se(iy),s=Se(ir),{submitMessage:c}=by();m.useEffect(()=>{const h=iue()==="ac"?null:oV();h&&(i(h),a({source:"queryInUrl",prompt:h}))},[s,a,i]);const u=m.useCallback(()=>{i(null)},[i]),d=m.useCallback(h=>{h&&(a({source:"queryInUrl",prompt:h}),(async()=>{if(n&&r&&h){const g=c({text:h,inputMethod:"queryParam"});u(),await g}})().catch(console.error))},[a,n,r,c,u]);return m.useEffect(()=>{!e&&o&&d(o)},[e,d,o]),{prompt:o,handler:e?d:void 0,clear:u}}function e4(){const t=aue(),e=sue();return t.prompt?t:e}function aue(){const{t}=Fe(),{formCode:e,lengthVariant:n,treatment:r,passthroughType:o}=pce();if(e&&n&&r){const i=t(`promptsByFormCode.${e}.${r}.${n}`,"");return{passthroughType:o,prompt:i,source:i?{type:"formCode",formCode:e}:void 0}}return{passthroughType:null}}function sue(){const{prompt:t}=Hj({deferred:!0}),{prompt:e}=Zj({deferred:!0});let n=null,r;return t?(n="partial",r=t):e&&(n="full",r=e),{passthroughType:n,prompt:r,source:r?{type:"query"}:void 0}}function t4(){const t=F(Rw),{passthroughType:e}=e4();return!!t&&e==="full"}const ad=G();function cue(t){var e;bn({source:"mediaViewerOpen",scenario:(e=t.media[t.currentMediaIndex])==null?void 0:e.type})}function lue(){var e,n;const t=rI();t&&bn({source:"mediaViewerNext",scenario:(e=t.media[t.currentMediaIndex])==null?void 0:e.type,destination:(n=t.media[t.currentMediaIndex+1])==null?void 0:n.type})}function uue(){var e,n;const t=rI();t&&bn({source:"mediaViewerPrevious",scenario:(e=t.media[t.currentMediaIndex])==null?void 0:e.type,destination:(n=t.media[t.currentMediaIndex-1])==null?void 0:n.type})}function due(){var e;const t=rI();t&&bn({source:"mediaViewerClose",scenario:(e=t.media[t.currentMediaIndex])==null?void 0:e.type})}function rI(){return ct().get(ad)}const fue=G();function n4(){const[t,e]=et(fue);return{isPictureInPictureOpen:de("video-picture-in-picture")&&t!==void 0,openPictureInPicture:i=>{e(i),dt({source:"mediaViewer",scenario:"PictureInPictureOpen"})},closePictureInPicture:()=>e(void 0)}}function ca(){var d;const[t,e]=et(ad),{openPictureInPicture:n}=n4(),r=de("video-picture-in-picture"),o=m.useCallback(()=>{const{onClose:h}=t??{};due(),e(void 0),h==null||h()},[e,t]),i=m.useCallback(()=>{lue(),e(h=>{if(!h)return h;if(h.currentMediaIndex<h.media.length-1){const p=h.currentMediaIndex+1;return{...h,currentMediaIndex:p,isCurrentMediaLoading:z_(h.media[p])}}return h})},[e]),a=m.useCallback(()=>{uue(),e(h=>{if(!h)return h;if(h.currentMediaIndex>0){const p=h.currentMediaIndex-1;return{...h,currentMediaIndex:p,isCurrentMediaLoading:z_(h.media[p])}}return h})},[e]),s=m.useCallback(h=>{cue(h),e({...h,isCurrentMediaLoading:z_(h.media[h.currentMediaIndex])})},[e]),c=r&&((d=t==null?void 0:t.media[t.currentMediaIndex])==null?void 0:d.type)==="video",u=m.useCallback(()=>{var p;const h=t==null?void 0:t.media[t.currentMediaIndex];if(h&&h.type==="video"){const{player:g}=h;n({url:h.url,title:((p=h.source)==null?void 0:p.title)??"",startTime:(g==null?void 0:g.getCurrentTime())??0}),o()}},[t,n,o]);return m.useMemo(()=>({openMediaViewer:s,closeMediaViewer:o,isMediaViewerOpen:t!==void 0,next:i,previous:a,isPictureInPictureSupported:c,triggerPictureInPicture:u,contentPageType:t==null?void 0:t.contentPageType}),[s,o,t,i,a,c,u])}function z_(t){if(t&&"initLoading"in t)return t.initLoading}function hue(){var c,u;const t=Zt(),e=F(Xr),n=F(Nw),{isMediaViewerOpen:r}=ca(),{disableMultiturn:o}=Ee.instance().config(),i=((c=Ee.instance().config().composer)==null?void 0:c.largeScreen)===!0&&((u=Ee.instance().config().composer)==null?void 0:u.voiceOnly)===!0,a=["/pro/subscribe","/pro/ewallet/return","/referrals","/referrals/rules","/subscription/manage","/subscription/start"],s=t4();return!a.includes(t)&&!t.startsWith("/topic-selection")&&(!t.startsWith("/fang")||r)&&!t.startsWith("/login")&&!t.startsWith("/pro/redeem")&&!t.startsWith("/gaming")&&!t.startsWith("/labs")&&!t.startsWith("/portrait")&&!t.startsWith("/memory/narrative")&&!t.startsWith("/conversations")&&!t.startsWith("/campaigns")&&!t.startsWith("/pages")&&!t.startsWith("/shares/pages")&&e!=="detail-only"&&!n&&!i&&!o&&!s}function pue(){var r,o;const t=Zt(),e=hy();return((r=Ee.instance().config().composer)==null?void 0:r.largeScreen)===!0&&((o=Ee.instance().config().composer)==null?void 0:o.voiceOnly)===!0&&!t.startsWith("/login-dcf")&&!e}function oI(){const[t,e]=et(Fu);return m.useEffect(()=>{e(n=>n||aV())},[e]),t}function mue(t){const{showSettings:e,showSettingsRelyOnChatDetailLayout:n}=t,r=oI(),o=F(Xr);return m.useMemo(()=>n?e&&!r&&o!=="side-by-side"&&o!=="detail-only":e&&!r,[n,e,r,o])}function r4(){const t=Object.assign({"../../assets/lottie/chain-of-thought-dark.json":()=>T(()=>import("./chain-of-thought-dark-DAdrbVMG.js"),[]).then(e=>e.default),"../../assets/lottie/chain-of-thought-light.json":()=>T(()=>import("./chain-of-thought-light-Cr0oOWNN.js"),[]).then(e=>e.default),"../../assets/lottie/character-thinking-cloud-animation.json":()=>T(()=>import("./character-thinking-cloud-animation-BPHslFRh.js"),[]).then(e=>e.default),"../../assets/lottie/image-gen-dark.json":()=>T(()=>import("./image-gen-dark-Xe9QwJfO.js"),[]).then(e=>e.default),"../../assets/lottie/image-gen-light.json":()=>T(()=>import("./image-gen-light-CvTKvF-o.js"),[]).then(e=>e.default),"../../assets/lottie/loader-gradient.json":()=>T(()=>import("./loader-gradient-nOUtNO79.js"),[]).then(e=>e.default),"../../assets/lottie/loader-image-generating.json":()=>T(()=>import("./loader-image-generating-CXsAaCuT.js"),[]).then(e=>e.default),"../../assets/lottie/loader-reasoning-dark.json":()=>T(()=>import("./loader-reasoning-dark-BWb0u6bB.js"),[]).then(e=>e.default),"../../assets/lottie/loader-reasoning-light.json":()=>T(()=>import("./loader-reasoning-light-DeS5Bpum.js"),[]).then(e=>e.default),"../../assets/lottie/loader-spinner-dark.json":()=>T(()=>import("./loader-spinner-dark-OIzWyRIV.js"),[]).then(e=>e.default),"../../assets/lottie/loader-spinner-light.json":()=>T(()=>import("./loader-spinner-light-DwSZ3tXn.js"),[]).then(e=>e.default),"../../assets/lottie/loader-spinner-white.json":()=>T(()=>import("./loader-spinner-white-B1ATuHTQ.js"),[]).then(e=>e.default),"../../assets/lottie/pages-welcome-dark.json":()=>T(()=>import("./pages-welcome-dark-r64A2mUI.js"),[]).then(e=>e.default),"../../assets/lottie/pages-welcome-light.json":()=>T(()=>import("./pages-welcome-light-DDUDcHxX.js"),[]).then(e=>e.default),"../../assets/lottie/voicemail-dark.json":()=>T(()=>import("./voicemail-dark-BtARQIb1.js"),[]).then(e=>e.default),"../../assets/lottie/voicemail-light.json":()=>T(()=>import("./voicemail-light-DeMSWjpH.js"),[]).then(e=>e.default)});return{load:e=>{const n=t[e];return n?n():Promise.reject(new Error(`Lottie animation not found: ${e}`))},exists:e=>e in t,getPaths:()=>Object.keys(t)}}const gue=m.lazy(()=>T(()=>import("./index.es-zjx8uILT.js"),__vite__mapDeps([222,1]))),vue=r4();function kt(t){const{type:e,className:n,rendererSettings:r,colorTheme:o}=t,i=F(ts),a=o??i,[s,c]=m.useState(null),d=`../../assets/lottie/${m.useMemo(()=>{switch(e){case"gradient":return"loader-gradient.json";case"reasoning":return a==="dark"?"loader-reasoning-dark.json":"loader-reasoning-light.json";case"chainOfThought":return a==="dark"?"chain-of-thought-dark.json":"chain-of-thought-light.json";case"spinnerWhite":return"loader-spinner-white.json";case"imageGen":return a==="dark"?"image-gen-dark.json":"image-gen-light.json";case"spinnerThemed":default:return a==="dark"?"loader-spinner-dark.json":"loader-spinner-light.json"}},[e,a])}`;return m.useEffect(()=>{vue.load(d).then(c).catch(()=>c(null))},[d]),s?f.jsx(m.Suspense,{fallback:f.jsx("div",{}),children:f.jsx(gue,{animationData:s,loop:!0,className:n,rendererSettings:r})}):f.jsx("div",{})}const o4=Object.freeze(Object.defineProperty({__proto__:null,default:kt},Symbol.toStringTag,{value:"Module"})),yue=16/9,bue=48,i4=296,_ue=i4/yue,Cue=_ue+bue;function Sue(){return f.jsx("div",{className:"pointer-events-none absolute inset-0 mb-[calc(var(--composer-container-height)+20px)] me-4 ms-2 mt-[72px]",children:f.jsx("div",{className:"absolute bottom-0 end-4",style:{width:`${i4}px`,height:`${Cue}px`},children:f.jsx("div",{className:q("relative flex h-full flex-col overflow-hidden rounded-4xl","bg-acrylic-default-fallback-light/[98] dark:bg-acrylic-default-fallback-dark/[98]"),style:{boxShadow:"0px 16px 24px -2px rgba(0, 0, 0, 0.12)"},children:f.jsx("div",{className:"flex h-full items-center justify-center",children:f.jsx(kt,{className:"size-12"})})})})})}let jl=null;async function wue(t){return jl||(jl=(await T(async()=>{const{default:e}=await import("./katex-CfZphoad.js");return{default:e}},[])).default,t==null||t(),jl)}function a4(t,e,n){return jl?jl.renderToString(t,{output:"mathml",displayMode:e,throwOnError:!1}):(wue(n),t)}var ys={},Fd={},bs={},kR;function s4(){if(kR)return bs;kR=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.Node=bs.NodeType=void 0;var t;(function(i){i[i.element=1]="element",i[i.text=3]="text"})(t||(bs.NodeType=t={}));let e=class{constructor({nodeType:a,namespace:s,selfCloseTag:c,text:u,nodeName:d,childNodes:h,parentNode:p,attributes:g}){this.namespace=s||null,this.nodeType=a,this.isSelfCloseTag=!!c,this.text=u||null,this.nodeName=a===t.element?d:"#text",this.childNodes=h||[],this.parentNode=p,this.attributes=g||[]}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get innerHTML(){return this.childNodes.reduce((a,s)=>a+(s.nodeType===t.text?s.text:s.outerHTML),"")}get outerHTML(){if(this.nodeType===t.text)return this.textContent;const a=o(this.attributes),s=`<${this.nodeName}${a.length?" ":""}${a}${this.isSelfCloseTag?"/":""}>`;if(this.isSelfCloseTag)return s;const c=this.childNodes.map(d=>d.outerHTML).join(""),u=`</${this.nodeName}>`;return[s,c,u].join("")}get textContent(){return this.nodeType===t.text?this.text:this.childNodes.map(a=>a.textContent).join("").replace(/\x20+/g," ")}getAttribute(a){const s=this.attributes.find(c=>c.name===a);return s?s.value:null}getElementsByTagName(a){return n(this,s=>s.nodeName.toUpperCase()===a.toUpperCase())}getElementsByClassName(a){const s=new RegExp(`^(.*?\\s)?${a}(\\s.*?)?$`);return n(this,c=>!!(c.attributes.length&&s.test(c.getAttribute("class")||"")))}getElementsByName(a){return n(this,s=>!!(s.attributes.length&&s.getAttribute("name")===a))}getElementById(a){return r(this,s=>!!(s.attributes.length&&s.getAttribute("id")===a))}};bs.Node=e,e.ELEMENT_NODE=t.element,e.TEXT_NODE=t.text;function n(i,a){return i.nodeType===t.text?[]:i.childNodes.reduce((s,c)=>c.nodeType!==t.text&&a(c)?[...s,c,...n(c,a)]:[...s,...n(c,a)],[])}function r(i,a){for(let s=0,c=i.childNodes.length;s<c;s++){const u=i.childNodes[s];if(a(u))return u;const d=r(u,a);if(d)return d}return null}function o(i){return i.map(a=>a.name+(a.value?`="${a.value}"`:"")).join(" ")}return bs}var Bd={},xR;function Eue(){if(xR)return Bd;xR=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.NodeAttribute=void 0;let t=class{constructor({name:n,value:r}){this.name=n,this.value=r}};return Bd.NodeAttribute=t,Bd}var RR;function PR(){if(RR)return Fd;RR=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.Dom=void 0;const t=s4(),e=Eue(),n=/(<\/?(?:[a-z][a-z0-9]*:)?[a-z][a-z0-9-_.]*?[a-z0-9]*\s*(?:\s+[a-z0-9-_:]+(?:=(?:(?:'[\s\S]*?')|(?:"[\s\S]*?")))?)*\s*\/?>)|([^<]|<(?![a-z/]))*/gi,r=/\s[a-z0-9-_:]+\b(\s*=\s*('|")[\s\S]*?\2)?/gi,o=/(\s[a-z0-9-_:]+\b\s*)(?:=(\s*('|")[\s\S]*?\3))?/gi,i=/^<[a-z]/,a=/\/>$/,s=/^<\//,c=/^[^<]/,u=/<\/?((?:([a-z][a-z0-9]*):)?(?:[a-z](?:[a-z0-9-_.]*[a-z0-9])?))/i,d=/^('|")|('|")$/g,h=/^(?:area|base|br|col|command|embed|hr|img|input|link|meta|param|source)/i;let p=class{constructor(I){this.rawHTML=I}find(I,x){const A=g(this.rawHTML,I,x);return x?A[0]||null:A}getElementsByClassName(I){const x=new RegExp(`^(.*?\\s)?${I}(\\s.*?)?$`);return this.find(A=>!!(A.attributes.length&&x.test(A.getAttribute("class")||"")))}getElementsByTagName(I){return this.find(x=>x.nodeName.toUpperCase()===I.toUpperCase())}getElementById(I){return this.find(x=>x.getAttribute("id")===I,!0)}getElementsByName(I){return this.find(x=>x.getAttribute("name")===I)}getElementsByAttribute(I,x){return this.find(A=>A.getAttribute(I)===x)}};Fd.Dom=p;function g(E,I,x=!1){const A=v(E),N=[];for(const R of A)if(R&&I(R)&&(N.push(R),x))return N;return N}function*v(E){const I=_(E);let x=null;for(let A=0,N=I.length;A<N;A++){const R=I[A];x=b(R,x)||x,y(x,R)&&(yield x,x=x.parentNode)}for(;x;)yield x,x=x.parentNode}function y(E,I){if(!I)return!1;const x=s.test(I),[,A]=I.match(u)||[];return x&&E.nodeName===A||E.isSelfCloseTag||E.nodeType===t.NodeType.text}function _(E){return E.match(n)||[]}function b(E,I){const x=c.test(E),A=i.test(E);return x?S(E,I):A?C(E,I):null}function C(E,I){var x;const[,A,N]=E.match(u)||[],R=a.test(E)||h.test(A),z=w(E),P=new t.Node({nodeType:t.NodeType.element,nodeName:A,namespace:N,attributes:z,childNodes:[],parentNode:I,selfCloseTag:R});return(x=I==null?void 0:I.childNodes)===null||x===void 0||x.push(P),P}function w(E){return(E.match(r)||[]).map(I=>{o.lastIndex=0;const x=o.exec(I)||[],[,A="",N=""]=x;return new e.NodeAttribute({name:A.trim(),value:N.trim().replace(d,"")})})}function S(E,I){var x;const A=new t.Node({nodeType:t.NodeType.text,nodeName:"#text",text:E,parentNode:I});return(x=I==null?void 0:I.childNodes)===null||x===void 0||x.push(A),A}return Fd}var OR;function Tue(){return OR||(OR=1,function(t){var e=ys&&ys.__createBinding||(Object.create?function(i,a,s,c){c===void 0&&(c=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(i,c,u)}:function(i,a,s,c){c===void 0&&(c=s),i[c]=a[s]}),n=ys&&ys.__exportStar||function(i,a){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseFromString=void 0;const r=PR();function o(i){return new r.Dom(i)}t.parseFromString=o,n(PR(),t),n(s4(),t)}(ys)),ys}var NR=Tue();function iI(t){const e=[];let n="",r=!1;for(const o of t)o===" "||o===`
`?r=!0:r&&(e.push(n),n="",r=!1),n+=o;return n.length>0&&e.push(n),e}function Iue(t){const n=NR.parseFromString(`<html>${t}</html>`).getElementsByTagName("html")[0];let r=[];for(const o of n.childNodes)o.nodeType===NR.NodeType.text?o.textContent&&(r=r.concat(iI(o.textContent))):r.push(o.outerHTML);return r}function Aue(t){return t===" "||t===`
`||t==="	"}function FIe(t,e,n={}){if(t.length<=e)return t;function r(s){const c=s.trim();return n.ellipsis?`${c}...`:c}const o=t.indexOf(`
`,0);if(o>=0&&o<e){const s=t.slice(0,o);return r(s)}let i=e;for(;i>0;){const s=t[i];if(s&&!Aue(s))i-=1;else break}let a=t.slice(0,e);return i>0&&(a=t.slice(0,i)),r(a)}let ci=null;function c4(t){return ci||(T(()=>import("./core-B6ImGGe1.js"),__vite__mapDeps([223,1])).then(e=>e.default).then(e=>{ci=e,t==null||t()}),null)}async function kue(t){const e=hle.get(t);if(!e)return!1;let n;switch(e){case".properties":n=(await T(async()=>{const{default:r}=await import("./properties-CZgCE6EI.js");return{default:r}},[])).default;break;case"1C:Enterprise":n=(await T(async()=>{const{default:r}=await import("./1c-C7Z183xh.js");return{default:r}},[])).default;break;case"ActionScript":n=(await T(async()=>{const{default:r}=await import("./actionscript-B1ZZs3dc.js");return{default:r}},[])).default;break;case"Ada":n=(await T(async()=>{const{default:r}=await import("./ada-LdOp3z_q.js");return{default:r}},[])).default;break;case"AngelScript":n=(await T(async()=>{const{default:r}=await import("./angelscript-DEqR9Afu.js");return{default:r}},[])).default;break;case"Apache Access Log":n=(await T(async()=>{const{default:r}=await import("./accesslog-C7zzMuqj.js");return{default:r}},[])).default;break;case"Apache config":n=(await T(async()=>{const{default:r}=await import("./apache-CKvYNDQG.js");return{default:r}},[])).default;break;case"AppleScript":n=(await T(async()=>{const{default:r}=await import("./applescript-CLhnK0uA.js");return{default:r}},[])).default;break;case"ArcGIS Arcade":n=(await T(async()=>{const{default:r}=await import("./arcade-B3hNgn5c.js");return{default:r}},[])).default;break;case"Arduino":n=(await T(async()=>{const{default:r}=await import("./arduino-lMsVdpwf.js");return{default:r}},[])).default;break;case"ARM Assembly":n=(await T(async()=>{const{default:r}=await import("./armasm-B6z5u1xA.js");return{default:r}},[])).default;break;case"AsciiDoc":n=(await T(async()=>{const{default:r}=await import("./asciidoc-QgTngDH5.js");return{default:r}},[])).default;break;case"AspectJ":n=(await T(async()=>{const{default:r}=await import("./aspectj-B9QMCIbF.js");return{default:r}},[])).default;break;case"Augmented Backus-Naur Form":n=(await T(async()=>{const{default:r}=await import("./abnf-BwMj1Qis.js");return{default:r}},[])).default;break;case"AutoHotkey":n=(await T(async()=>{const{default:r}=await import("./autohotkey-DltQxv-Z.js");return{default:r}},[])).default;break;case"AutoIt":n=(await T(async()=>{const{default:r}=await import("./autoit-Dn8aqQSn.js");return{default:r}},[])).default;break;case"AVR Assembly":n=(await T(async()=>{const{default:r}=await import("./avrasm-CAGD1vQt.js");return{default:r}},[])).default;break;case"Awk":n=(await T(async()=>{const{default:r}=await import("./awk-ByX1p-MC.js");return{default:r}},[])).default;break;case"Backus–Naur Form":n=(await T(async()=>{const{default:r}=await import("./bnf-DkLtuBJ2.js");return{default:r}},[])).default;break;case"Bash":n=(await T(async()=>{const{default:r}=await import("./bash-Q0G3kSBE.js");return{default:r}},[])).default;break;case"BASIC":n=(await T(async()=>{const{default:r}=await import("./basic-BUiCOGBj.js");return{default:r}},[])).default;break;case"Batch file (DOS)":n=(await T(async()=>{const{default:r}=await import("./dos-BTl-L7Ml.js");return{default:r}},[])).default;break;case"Brainfuck":n=(await T(async()=>{const{default:r}=await import("./brainfuck-rcr_2_Au.js");return{default:r}},[])).default;break;case"C":n=(await T(async()=>{const{default:r}=await import("./c-CgEYd65H.js");return{default:r}},[])).default;break;case"C/AL":n=(await T(async()=>{const{default:r}=await import("./cal-BoTjDSvJ.js");return{default:r}},[])).default;break;case"C#":n=(await T(async()=>{const{default:r}=await import("./csharp-CLfUFbxr.js");return{default:r}},[])).default;break;case"C++":n=(await T(async()=>{const{default:r}=await import("./cpp-CBaFEvH3.js");return{default:r}},[])).default;break;case"Caché Object Script":n=(await T(async()=>{const{default:r}=await import("./cos-LyLEGTrs.js");return{default:r}},[])).default;break;case"Cap’n Proto":n=(await T(async()=>{const{default:r}=await import("./capnproto-DfEggqIp.js");return{default:r}},[])).default;break;case"Ceylon":n=(await T(async()=>{const{default:r}=await import("./ceylon-4Ux7Zsf_.js");return{default:r}},[])).default;break;case"Clean":n=(await T(async()=>{const{default:r}=await import("./clean-bp7LOAXw.js");return{default:r}},[])).default;break;case"Clojure":n=(await T(async()=>{const{default:r}=await import("./clojure-AHSh5YjK.js");return{default:r}},[])).default;break;case"Clojure REPL":n=(await T(async()=>{const{default:r}=await import("./clojure-repl-urHl5b3U.js");return{default:r}},[])).default;break;case"CMake":n=(await T(async()=>{const{default:r}=await import("./cmake-CZM6E03B.js");return{default:r}},[])).default;break;case"CoffeeScript":n=(await T(async()=>{const{default:r}=await import("./coffeescript-CmH3qNTd.js");return{default:r}},[])).default;break;case"Coq":n=(await T(async()=>{const{default:r}=await import("./coq-CKyaS9Ed.js");return{default:r}},[])).default;break;case"crmsh":n=(await T(async()=>{const{default:r}=await import("./crmsh-Di4S5DOg.js");return{default:r}},[])).default;break;case"Crystal":n=(await T(async()=>{const{default:r}=await import("./crystal-BhpJIvvw.js");return{default:r}},[])).default;break;case"CSP":n=(await T(async()=>{const{default:r}=await import("./csp-PRNaSbKx.js");return{default:r}},[])).default;break;case"CSS":n=(await T(async()=>{const{default:r}=await import("./css-CNcoTEx5.js");return{default:r}},[])).default;break;case"D":n=(await T(async()=>{const{default:r}=await import("./d-0qpC7d8J.js");return{default:r}},[])).default;break;case"Dart":n=(await T(async()=>{const{default:r}=await import("./dart-CZJo0vSi.js");return{default:r}},[])).default;break;case"Delphi":n=(await T(async()=>{const{default:r}=await import("./delphi-D_dWILRY.js");return{default:r}},[])).default;break;case"Device Tree":n=(await T(async()=>{const{default:r}=await import("./dts-B9oE02Jg.js");return{default:r}},[])).default;break;case"Diff":n=(await T(async()=>{const{default:r}=await import("./diff-DiTmLxSS.js");return{default:r}},[])).default;break;case"Django":n=(await T(async()=>{const{default:r}=await import("./django-BJKGRTHq.js");return{default:r}},[])).default;break;case"DNS Zone":n=(await T(async()=>{const{default:r}=await import("./dns-CmxgsE9I.js");return{default:r}},[])).default;break;case"Dockerfile":n=(await T(async()=>{const{default:r}=await import("./dockerfile-Co-AyC30.js");return{default:r}},[])).default;break;case"dsconfig":n=(await T(async()=>{const{default:r}=await import("./dsconfig-C6Ut8YfI.js");return{default:r}},[])).default;break;case"Dust":n=(await T(async()=>{const{default:r}=await import("./dust-BO6a2n7Q.js");return{default:r}},[])).default;break;case"Elixir":n=(await T(async()=>{const{default:r}=await import("./elixir-DLGFH_Et.js");return{default:r}},[])).default;break;case"Elm":n=(await T(async()=>{const{default:r}=await import("./elm-3GArE9D5.js");return{default:r}},[])).default;break;case"ERB":n=(await T(async()=>{const{default:r}=await import("./erb-DgkrZfmL.js");return{default:r}},[])).default;break;case"Erlang":n=(await T(async()=>{const{default:r}=await import("./erlang-CPs7Ap9z.js");return{default:r}},[])).default;break;case"Erlang REPL":n=(await T(async()=>{const{default:r}=await import("./erlang-repl-CZarM2xV.js");return{default:r}},[])).default;break;case"Excel formulae":n=(await T(async()=>{const{default:r}=await import("./excel-D6eCV2__.js");return{default:r}},[])).default;break;case"Extended Backus-Naur Form":n=(await T(async()=>{const{default:r}=await import("./ebnf-BDd6TLce.js");return{default:r}},[])).default;break;case"F#":n=(await T(async()=>{const{default:r}=await import("./fsharp-5RlFyxH8.js");return{default:r}},[])).default;break;case"FIX":n=(await T(async()=>{const{default:r}=await import("./fix-D05WyPuQ.js");return{default:r}},[])).default;break;case"Flix":n=(await T(async()=>{const{default:r}=await import("./flix-DM_og3v4.js");return{default:r}},[])).default;break;case"Fortran":n=(await T(async()=>{const{default:r}=await import("./fortran-Cx0HPwMS.js");return{default:r}},[])).default;break;case"G-code (ISO 6983)":n=(await T(async()=>{const{default:r}=await import("./gcode-aFFPrTQR.js");return{default:r}},[])).default;break;case"GAMS":n=(await T(async()=>{const{default:r}=await import("./gams-D9n-Vrpx.js");return{default:r}},[])).default;break;case"GAUSS":n=(await T(async()=>{const{default:r}=await import("./gauss-CVKtbz--.js");return{default:r}},[])).default;break;case"Gherkin":n=(await T(async()=>{const{default:r}=await import("./gherkin-B7znD_bI.js");return{default:r}},[])).default;break;case"GLSL":n=(await T(async()=>{const{default:r}=await import("./glsl-Df328vV4.js");return{default:r}},[])).default;break;case"GML":n=(await T(async()=>{const{default:r}=await import("./gml-D7jw2IbN.js");return{default:r}},[])).default;break;case"Go":n=(await T(async()=>{const{default:r}=await import("./go-BPx_y7j8.js");return{default:r}},[])).default;break;case"Golo":n=(await T(async()=>{const{default:r}=await import("./golo-CnqvexOJ.js");return{default:r}},[])).default;break;case"Gradle":n=(await T(async()=>{const{default:r}=await import("./gradle-CtZu4a3z.js");return{default:r}},[])).default;break;case"GraphQL":n=(await T(async()=>{const{default:r}=await import("./graphql-DPQANhhf.js");return{default:r}},[])).default;break;case"Groovy":n=(await T(async()=>{const{default:r}=await import("./groovy-DVpOnIQ7.js");return{default:r}},[])).default;break;case"HAML":n=(await T(async()=>{const{default:r}=await import("./haml-Th0HjqH7.js");return{default:r}},[])).default;break;case"Handlebars":n=(await T(async()=>{const{default:r}=await import("./handlebars-BzBMumBU.js");return{default:r}},[])).default;break;case"Haskell":n=(await T(async()=>{const{default:r}=await import("./haskell-DGfXQlJ3.js");return{default:r}},[])).default;break;case"Haxe":n=(await T(async()=>{const{default:r}=await import("./haxe-BXKc7xR_.js");return{default:r}},[])).default;break;case"HSP":n=(await T(async()=>{const{default:r}=await import("./hsp-CN8Hrpxq.js");return{default:r}},[])).default;break;case"HTML, XML":n=(await T(async()=>{const{default:r}=await import("./xml-BXBhIUeX.js");return{default:r}},[])).default;break;case"HTTP":n=(await T(async()=>{const{default:r}=await import("./http-B1m0cdo-.js");return{default:r}},[])).default;break;case"Hy":n=(await T(async()=>{const{default:r}=await import("./hy-CZVjXekG.js");return{default:r}},[])).default;break;case"Inform 7":n=(await T(async()=>{const{default:r}=await import("./inform7-gEAVUauH.js");return{default:r}},[])).default;break;case"Intel x86 Assembly":n=(await T(async()=>{const{default:r}=await import("./x86asm-pijs5jNr.js");return{default:r}},[])).default;break;case"IRPF90":n=(await T(async()=>{const{default:r}=await import("./irpf90-C-H3XeIY.js");return{default:r}},[])).default;break;case"ISBL":n=(await T(async()=>{const{default:r}=await import("./isbl-cM2r36SR.js");return{default:r}},[])).default;break;case"Java":n=(await T(async()=>{const{default:r}=await import("./java-SN7C1QxY.js");return{default:r}},[])).default;break;case"JavaScript":n=(await T(async()=>{const{default:r}=await import("./javascript-Cmaf_p_H.js");return{default:r}},[])).default;break;case"JBoss CLI":n=(await T(async()=>{const{default:r}=await import("./jboss-cli-CvZOtPS0.js");return{default:r}},[])).default;break;case"JSON":n=(await T(async()=>{const{default:r}=await import("./json-DIYVocXf.js");return{default:r}},[])).default;break;case"Julia":n=(await T(async()=>{const{default:r}=await import("./julia-BCFmLHRf.js");return{default:r}},[])).default;break;case"Julia REPL":n=(await T(async()=>{const{default:r}=await import("./julia-repl-BIWdxRW3.js");return{default:r}},[])).default;break;case"Kotlin":n=(await T(async()=>{const{default:r}=await import("./kotlin-Cw-eF_bm.js");return{default:r}},[])).default;break;case"Lasso":n=(await T(async()=>{const{default:r}=await import("./lasso-DxA_h8RG.js");return{default:r}},[])).default;break;case"LaTeX":n=(await T(async()=>{const{default:r}=await import("./latex-lHs7bxnR.js");return{default:r}},[])).default;break;case"LDIF":n=(await T(async()=>{const{default:r}=await import("./ldif-8JypSBRn.js");return{default:r}},[])).default;break;case"Leaf":n=(await T(async()=>{const{default:r}=await import("./leaf-CaRdZePf.js");return{default:r}},[])).default;break;case"Less":n=(await T(async()=>{const{default:r}=await import("./less-C89BS9ZO.js");return{default:r}},[])).default;break;case"Lisp":n=(await T(async()=>{const{default:r}=await import("./lisp-BiL0olPs.js");return{default:r}},[])).default;break;case"LiveCode":n=(await T(async()=>{const{default:r}=await import("./livecodeserver-Cs32ELhi.js");return{default:r}},[])).default;break;case"LiveScript":n=(await T(async()=>{const{default:r}=await import("./livescript-C_Mv1LMn.js");return{default:r}},[])).default;break;case"LLVM IR":n=(await T(async()=>{const{default:r}=await import("./llvm-CzzpxbQG.js");return{default:r}},[])).default;break;case"LSL (Linden Scripting Language)":n=(await T(async()=>{const{default:r}=await import("./lsl-8x1fjvuK.js");return{default:r}},[])).default;break;case"Lua":n=(await T(async()=>{const{default:r}=await import("./lua-kICRHiK3.js");return{default:r}},[])).default;break;case"Makefile":n=(await T(async()=>{const{default:r}=await import("./makefile-BN8hHKjp.js");return{default:r}},[])).default;break;case"Markdown":n=(await T(async()=>{const{default:r}=await import("./markdown-BrP960CR.js");return{default:r}},[])).default;break;case"Mathematica":n=(await T(async()=>{const{default:r}=await import("./mathematica-uHYlFNe5.js");return{default:r}},[])).default;break;case"Matlab":n=(await T(async()=>{const{default:r}=await import("./matlab-D4e1gXu7.js");return{default:r}},[])).default;break;case"Maxima":n=(await T(async()=>{const{default:r}=await import("./maxima-DRU3P1C3.js");return{default:r}},[])).default;break;case"MEL":n=(await T(async()=>{const{default:r}=await import("./mel-BnhBFzFh.js");return{default:r}},[])).default;break;case"Mercury":n=(await T(async()=>{const{default:r}=await import("./mercury-BFgZyA1Y.js");return{default:r}},[])).default;break;case"MikroTik RouterOS script":n=(await T(async()=>{const{default:r}=await import("./routeros-BoRh9nSr.js");return{default:r}},[])).default;break;case"MIPS Assembly":n=(await T(async()=>{const{default:r}=await import("./mipsasm-BdcX4Kzi.js");return{default:r}},[])).default;break;case"Mizar":n=(await T(async()=>{const{default:r}=await import("./mizar-BdYrIkPP.js");return{default:r}},[])).default;break;case"Mojolicious":n=(await T(async()=>{const{default:r}=await import("./mojolicious-Dk5OekI8.js");return{default:r}},[])).default;break;case"Monkey":n=(await T(async()=>{const{default:r}=await import("./monkey-DNTM-Edc.js");return{default:r}},[])).default;break;case"MoonScript":n=(await T(async()=>{const{default:r}=await import("./moonscript-SSlQnVOM.js");return{default:r}},[])).default;break;case"N1QL":n=(await T(async()=>{const{default:r}=await import("./n1ql-DceYKEd5.js");return{default:r}},[])).default;break;case"Nested Text":n=(await T(async()=>{const{default:r}=await import("./nestedtext-CBDMqks5.js");return{default:r}},[])).default;break;case"Nginx config":n=(await T(async()=>{const{default:r}=await import("./nginx-CwEijJ2O.js");return{default:r}},[])).default;break;case"Nim":n=(await T(async()=>{const{default:r}=await import("./nim-PSCCBrkG.js");return{default:r}},[])).default;break;case"Nix":n=(await T(async()=>{const{default:r}=await import("./nix-BPU_w6x4.js");return{default:r}},[])).default;break;case"Node REPL":n=(await T(async()=>{const{default:r}=await import("./node-repl-S647ZvLU.js");return{default:r}},[])).default;break;case"NSIS":n=(await T(async()=>{const{default:r}=await import("./nsis-OgC8GHd4.js");return{default:r}},[])).default;break;case"Objective-C":n=(await T(async()=>{const{default:r}=await import("./objectivec-BI0B0W2W.js");return{default:r}},[])).default;break;case"OCaml":n=(await T(async()=>{const{default:r}=await import("./ocaml-D3nKyFNx.js");return{default:r}},[])).default;break;case"OpenSCAD":n=(await T(async()=>{const{default:r}=await import("./openscad-COetekFt.js");return{default:r}},[])).default;break;case"Oracle Rules Language":n=(await T(async()=>{const{default:r}=await import("./ruleslanguage-DqpkaCmA.js");return{default:r}},[])).default;break;case"Oxygene":n=(await T(async()=>{const{default:r}=await import("./oxygene-Dn0ParC3.js");return{default:r}},[])).default;break;case"Packet Filter config":n=(await T(async()=>{const{default:r}=await import("./pf-D1SDRx1P.js");return{default:r}},[])).default;break;case"Parser3":n=(await T(async()=>{const{default:r}=await import("./parser3-Hk_kG51l.js");return{default:r}},[])).default;break;case"Perl":n=(await T(async()=>{const{default:r}=await import("./perl-BWtAWCfC.js");return{default:r}},[])).default;break;case"php":n=(await T(async()=>{const{default:r}=await import("./php-RzUjv5fn.js");return{default:r}},[])).default;break;case"PHP template":n=(await T(async()=>{const{default:r}=await import("./php-template-C2Kz6oUw.js");return{default:r}},[])).default;break;case"Plain text":n=(await T(async()=>{const{default:r}=await import("./plaintext-CPM70vnn.js");return{default:r}},[])).default;break;case"Pony":n=(await T(async()=>{const{default:r}=await import("./pony-CxBQ9L9I.js");return{default:r}},[])).default;break;case"PostgreSQL":n=(await T(async()=>{const{default:r}=await import("./pgsql-D0fsCUJu.js");return{default:r}},[])).default;break;case"PowerShell":n=(await T(async()=>{const{default:r}=await import("./powershell-BTRu8Ib4.js");return{default:r}},[])).default;break;case"Processing":n=(await T(async()=>{const{default:r}=await import("./processing-DAUMw13y.js");return{default:r}},[])).default;break;case"Prolog":n=(await T(async()=>{const{default:r}=await import("./prolog-BuZcL2r6.js");return{default:r}},[])).default;break;case"Protocol Buffers":n=(await T(async()=>{const{default:r}=await import("./protobuf-C6VLidOE.js");return{default:r}},[])).default;break;case"Puppet":n=(await T(async()=>{const{default:r}=await import("./puppet-CJHFDVnx.js");return{default:r}},[])).default;break;case"PureBASIC":n=(await T(async()=>{const{default:r}=await import("./purebasic-c1UTHEVL.js");return{default:r}},[])).default;break;case"Python":n=(await T(async()=>{const{default:r}=await import("./python-kSlZHhJb.js");return{default:r}},[])).default;break;case"Python profiler":n=(await T(async()=>{const{default:r}=await import("./profile-BuitP8eU.js");return{default:r}},[])).default;break;case"python-repl":n=(await T(async()=>{const{default:r}=await import("./python-repl-BkThuqGa.js");return{default:r}},[])).default;break;case"Q":n=(await T(async()=>{const{default:r}=await import("./q-DJbR5VpX.js");return{default:r}},[])).default;break;case"QML":n=(await T(async()=>{const{default:r}=await import("./qml-DDXdSnWH.js");return{default:r}},[])).default;break;case"R":n=(await T(async()=>{const{default:r}=await import("./r-DWz4c2Y4.js");return{default:r}},[])).default;break;case"ReasonML":n=(await T(async()=>{const{default:r}=await import("./reasonml-CvdgUMek.js");return{default:r}},[])).default;break;case"RenderMan RIB":n=(await T(async()=>{const{default:r}=await import("./rib-BP2ur4qb.js");return{default:r}},[])).default;break;case"RenderMan RSL":n=(await T(async()=>{const{default:r}=await import("./rsl-TT4xEWeJ.js");return{default:r}},[])).default;break;case"Roboconf":n=(await T(async()=>{const{default:r}=await import("./roboconf-2Tx8FFq5.js");return{default:r}},[])).default;break;case"Ruby":n=(await T(async()=>{const{default:r}=await import("./ruby-wplcGSzq.js");return{default:r}},[])).default;break;case"Rust":n=(await T(async()=>{const{default:r}=await import("./rust--wLIKMc1.js");return{default:r}},[])).default;break;case"SAS":n=(await T(async()=>{const{default:r}=await import("./sas-ppA27pAY.js");return{default:r}},[])).default;break;case"Scala":n=(await T(async()=>{const{default:r}=await import("./scala-CTk4KSn7.js");return{default:r}},[])).default;break;case"Scheme":n=(await T(async()=>{const{default:r}=await import("./scheme-Dlczz2HB.js");return{default:r}},[])).default;break;case"Scilab":n=(await T(async()=>{const{default:r}=await import("./scilab-CnsWMHJW.js");return{default:r}},[])).default;break;case"SCSS":n=(await T(async()=>{const{default:r}=await import("./scss-BxzW-F5E.js");return{default:r}},[])).default;break;case"Shell Session":n=(await T(async()=>{const{default:r}=await import("./shell-k1ee8ZNu.js");return{default:r}},[])).default;break;case"Smali":n=(await T(async()=>{const{default:r}=await import("./smali-CHxz8c5N.js");return{default:r}},[])).default;break;case"Smalltalk":n=(await T(async()=>{const{default:r}=await import("./smalltalk-Cdx5PrwE.js");return{default:r}},[])).default;break;case"SML (Standard ML)":n=(await T(async()=>{const{default:r}=await import("./sml-BKgbqFhe.js");return{default:r}},[])).default;break;case"SQF":n=(await T(async()=>{const{default:r}=await import("./sqf-DtYQJOLc.js");return{default:r}},[])).default;break;case"SQL":n=(await T(async()=>{const{default:r}=await import("./sql-BiIoudD1.js");return{default:r}},[])).default;break;case"Stan":n=(await T(async()=>{const{default:r}=await import("./stan-BlcfLgqy.js");return{default:r}},[])).default;break;case"Stata":n=(await T(async()=>{const{default:r}=await import("./stata-DioKLDM4.js");return{default:r}},[])).default;break;case"STEP Part 21":n=(await T(async()=>{const{default:r}=await import("./step21-Qjmn_h1N.js");return{default:r}},[])).default;break;case"Stylus":n=(await T(async()=>{const{default:r}=await import("./stylus-X6x8gpyJ.js");return{default:r}},[])).default;break;case"SubUnit":n=(await T(async()=>{const{default:r}=await import("./subunit-ffEEV5Cw.js");return{default:r}},[])).default;break;case"Swift":n=(await T(async()=>{const{default:r}=await import("./swift-C4DmZ2ME.js");return{default:r}},[])).default;break;case"Tagger Script":n=(await T(async()=>{const{default:r}=await import("./taggerscript-BRtzqzUM.js");return{default:r}},[])).default;break;case"Tcl":n=(await T(async()=>{const{default:r}=await import("./tcl-BdSax8nO.js");return{default:r}},[])).default;break;case"Test Anything Protocol":n=(await T(async()=>{const{default:r}=await import("./tap-Dw0nFAIu.js");return{default:r}},[])).default;break;case"Thrift":n=(await T(async()=>{const{default:r}=await import("./thrift-BEKdav-Z.js");return{default:r}},[])).default;break;case"TOML, also INI":n=(await T(async()=>{const{default:r}=await import("./ini-B3BVgEsG.js");return{default:r}},[])).default;break;case"TP":n=(await T(async()=>{const{default:r}=await import("./tp-D2SYd55b.js");return{default:r}},[])).default;break;case"Twig":n=(await T(async()=>{const{default:r}=await import("./twig-CO1mxmAv.js");return{default:r}},[])).default;break;case"TypeScript":n=(await T(async()=>{const{default:r}=await import("./typescript-BVybyj25.js");return{default:r}},[])).default;break;case"Vala":n=(await T(async()=>{const{default:r}=await import("./vala-BPN8917S.js");return{default:r}},[])).default;break;case"VBScript":n=(await T(async()=>{const{default:r}=await import("./vbscript-CenSoNQX.js");return{default:r}},[])).default;break;case"VBScript in HTML":n=(await T(async()=>{const{default:r}=await import("./vbscript-html-Br-hJVOx.js");return{default:r}},[])).default;break;case"Verilog":n=(await T(async()=>{const{default:r}=await import("./verilog-B1GjPiYW.js");return{default:r}},[])).default;break;case"VHDL":n=(await T(async()=>{const{default:r}=await import("./vhdl-ClpfIGzb.js");return{default:r}},[])).default;break;case"Vim Script":n=(await T(async()=>{const{default:r}=await import("./vim-5bjx9WS2.js");return{default:r}},[])).default;break;case"Visual Basic .NET":n=(await T(async()=>{const{default:r}=await import("./vbnet-BqSgWHyS.js");return{default:r}},[])).default;break;case"WebAssembly":n=(await T(async()=>{const{default:r}=await import("./wasm-FmSvnV9S.js");return{default:r}},[])).default;break;case"Wren":n=(await T(async()=>{const{default:r}=await import("./wren-CjZP3ZRM.js");return{default:r}},[])).default;break;case"X++":n=(await T(async()=>{const{default:r}=await import("./axapta-CrumeEqI.js");return{default:r}},[])).default;break;case"XL":n=(await T(async()=>{const{default:r}=await import("./xl-Cg7CP1Al.js");return{default:r}},[])).default;break;case"XQuery":n=(await T(async()=>{const{default:r}=await import("./xquery-zIZj301A.js");return{default:r}},[])).default;break;case"YAML":n=(await T(async()=>{const{default:r}=await import("./yaml-C0KBHMtm.js");return{default:r}},[])).default;break;case"Zephir":n=(await T(async()=>{const{default:r}=await import("./zephir-Uro1zfwH.js");return{default:r}},[])).default;break;default:return!1}return ci?(ci.registerLanguage(t,n),!0):(c4(()=>{ci==null||ci.registerLanguage(t,n)}),!1)}const xue={jsx:["xml"],tsx:["xml"]};async function Rue(t){const e=t.map(async r=>ci?ci.getLanguage(r)?!1:kue(r):!1);return(await Promise.allSettled(e)).some(r=>r.status==="fulfilled"&&r.value)}async function Pue(t){const e=xue[t]??[];return Rue([...e,t])}const El=.018;function ul({items:t,delay:e,isHtml:n,forceRender:r}){var i;const o=[];for(const a of t){if(a.type==="citation"){const p=e.getValue();e.queueUpdate(El),o.push({type:"citation",delay:p,...a.props});continue}if(a.type==="latex"){const p=a4(a.props.content,!1,r),g=e.getValue();e.queueUpdate(El),o.push({type:"word",word:p,delay:g,format:"latexAsHtml"});continue}if(a.props.link){const p=a.props.text,{url:g}=a.props.link,v=e.getValue();e.queueUpdate(El),o.push({type:"word",word:p,delay:v,url:g});continue}let s=null,c=null;if(a.props.annotations){for(const p of["italic","bold","strikethrough","code","sub","sup"])if(a.props.annotations[p]){const v={type:p,items:[]};(p==="code"||p==="sup"||p==="sub")&&(v.delay=e.getValue(),e.queueUpdate(El)),c?(c.items.push(v),c=v):(s=v,c=v)}}const u=[],d=(i=a.props.annotations)==null?void 0:i.code;let h;n?h=Iue(a.props.text):h=iI(a.props.text);for(let p=0;p<h.length;p+=1)u.push({type:"word",word:h[p],delay:e.getValue(),format:d?"code":void 0}),e.queueUpdate(El);c&&s?(c.items.push(...u),o.push(s)):o.push(...u)}return o}function uh(t,e,n){const r=[];for(const o of t)switch(o.type){case"paragraph":{r.push({type:"paragraph",items:ul({items:o.props.items,delay:e,forceRender:n})});continue}case"list":{r.push({type:"list",ordered:o.props.ordered,start:o.props.start,items:o.props.items.map(i=>({delay:e.getValue(),items:uh(i,e,n)}))});continue}case"heading":{r.push({type:"heading",level:o.props.level,items:ul({items:o.props.items,delay:e})});continue}case"hr":{r.push({type:"hr",delay:e.getValue()}),e.queueUpdate(El);continue}case"code":{const{language:i,content:a}=o.props;if(a.type!=="text")continue;let s=a.props.text,c=!1;if(i){const d=c4(n);if(Pue(i).then(h=>{h&&n()}),d!=null&&d.getLanguage(i)){const{value:h}=d.highlight(a.props.text,{language:i});h&&(s=h,c=!0)}}const u={...a,props:{...a.props,text:s}};r.push({type:"code",content:ul({items:[u],delay:e,isHtml:c}),original:a.props.text,language:i,delay:e.getValue(),dangerouslyUseHtml:c});continue}case"latex":{const{content:i}=o.props;if(i.type!=="text")continue;i.props.text=a4(i.props.text,!0,n),r.push({type:"latex",content:ul({items:[i],isHtml:!0,delay:e}),delay:e.getValue(),dangerouslyUseHtml:!0});continue}case"table":{r.push({type:"table",columns:o.props.columns.map(i=>ul({items:i,delay:e})),data:o.props.data.map(i=>i.map(a=>ul({items:a,delay:e})))});continue}case"blockquote":{r.push({type:"blockquote",delay:e.getValue(),items:uh(o.props.items,e,n)});continue}default:{console.log(`Unhandled block type: ${o.type}`);continue}}return r}var Fp;function l4(t){return Fp=Fp||document.createElement("textarea"),Fp.innerHTML="&"+t+";",Fp.value}var Oue=Object.prototype.hasOwnProperty;function Nue(t,e){return t?Oue.call(t,e):!1}function u4(t){var e=[].slice.call(arguments,1);return e.forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){t[r]=n[r]})}}),t}var Mue=/\\([\\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function dh(t){return t.indexOf("\\")<0?t:t.replace(Mue,"$1")}function d4(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function _0(t){if(t>65535){t-=65536;var e=55296+(t>>10),n=56320+(t&1023);return String.fromCharCode(e,n)}return String.fromCharCode(t)}var Lue=/&([a-z#][a-z0-9]{1,31});/gi,Due=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;function jue(t,e){var n=0,r=l4(e);return e!==r?r:e.charCodeAt(0)===35&&Due.test(e)&&(n=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10),d4(n))?_0(n):t}function wc(t){return t.indexOf("&")<0?t:t.replace(Lue,jue)}var Uue=/[&<>"]/,Fue=/[&<>"]/g,Bue={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Hue(t){return Bue[t]}function Rr(t){return Uue.test(t)?t.replace(Fue,Hue):t}var ze={};ze.blockquote_open=function(){return`<blockquote>
`};ze.blockquote_close=function(t,e){return"</blockquote>"+Vc(t,e)};ze.code=function(t,e){return t[e].block?"<pre><code>"+Rr(t[e].content)+"</code></pre>"+Vc(t,e):"<code>"+Rr(t[e].content)+"</code>"};ze.fence=function(t,e,n,r,o){var i=t[e],a="",s=n.langPrefix,c="",u,d,h;if(i.params){if(u=i.params.split(/\s+/g),d=u.join(" "),Nue(o.rules.fence_custom,u[0]))return o.rules.fence_custom[u[0]](t,e,n,r,o);c=Rr(wc(dh(d))),a=' class="'+s+c+'"'}return n.highlight?h=n.highlight.apply(n.highlight,[i.content].concat(u))||Rr(i.content):h=Rr(i.content),"<pre><code"+a+">"+h+"</code></pre>"+Vc(t,e)};ze.fence_custom={};ze.heading_open=function(t,e){return"<h"+t[e].hLevel+">"};ze.heading_close=function(t,e){return"</h"+t[e].hLevel+`>
`};ze.hr=function(t,e,n){return(n.xhtmlOut?"<hr />":"<hr>")+Vc(t,e)};ze.bullet_list_open=function(){return`<ul>
`};ze.bullet_list_close=function(t,e){return"</ul>"+Vc(t,e)};ze.list_item_open=function(){return"<li>"};ze.list_item_close=function(){return`</li>
`};ze.ordered_list_open=function(t,e){var n=t[e],r=n.order>1?' start="'+n.order+'"':"";return"<ol"+r+`>
`};ze.ordered_list_close=function(t,e){return"</ol>"+Vc(t,e)};ze.paragraph_open=function(t,e){return t[e].tight?"":"<p>"};ze.paragraph_close=function(t,e){var n=!(t[e].tight&&e&&t[e-1].type==="inline"&&!t[e-1].content);return(t[e].tight?"":"</p>")+(n?Vc(t,e):"")};ze.link_open=function(t,e,n){var r=t[e].title?' title="'+Rr(wc(t[e].title))+'"':"",o=n.linkTarget?' target="'+n.linkTarget+'"':"";return'<a href="'+Rr(t[e].href)+'"'+r+o+">"};ze.link_close=function(){return"</a>"};ze.image=function(t,e,n){var r=' src="'+Rr(t[e].src)+'"',o=t[e].title?' title="'+Rr(wc(t[e].title))+'"':"",i=' alt="'+(t[e].alt?Rr(wc(dh(t[e].alt))):"")+'"',a=n.xhtmlOut?" /":"";return"<img"+r+i+o+a+">"};ze.table_open=function(){return`<table>
`};ze.table_close=function(){return`</table>
`};ze.thead_open=function(){return`<thead>
`};ze.thead_close=function(){return`</thead>
`};ze.tbody_open=function(){return`<tbody>
`};ze.tbody_close=function(){return`</tbody>
`};ze.tr_open=function(){return"<tr>"};ze.tr_close=function(){return`</tr>
`};ze.th_open=function(t,e){var n=t[e];return"<th"+(n.align?' style="text-align:'+n.align+'"':"")+">"};ze.th_close=function(){return"</th>"};ze.td_open=function(t,e){var n=t[e];return"<td"+(n.align?' style="text-align:'+n.align+'"':"")+">"};ze.td_close=function(){return"</td>"};ze.strong_open=function(){return"<strong>"};ze.strong_close=function(){return"</strong>"};ze.em_open=function(){return"<em>"};ze.em_close=function(){return"</em>"};ze.del_open=function(){return"<del>"};ze.del_close=function(){return"</del>"};ze.ins_open=function(){return"<ins>"};ze.ins_close=function(){return"</ins>"};ze.mark_open=function(){return"<mark>"};ze.mark_close=function(){return"</mark>"};ze.sub=function(t,e){return"<sub>"+Rr(t[e].content)+"</sub>"};ze.sup=function(t,e){return"<sup>"+Rr(t[e].content)+"</sup>"};ze.hardbreak=function(t,e,n){return n.xhtmlOut?`<br />
`:`<br>
`};ze.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};ze.text=function(t,e){return Rr(t[e].content)};ze.htmlblock=function(t,e){return t[e].content};ze.htmltag=function(t,e){return t[e].content};ze.abbr_open=function(t,e){return'<abbr title="'+Rr(wc(t[e].title))+'">'};ze.abbr_close=function(){return"</abbr>"};ze.footnote_ref=function(t,e){var n=Number(t[e].id+1).toString(),r="fnref"+n;return t[e].subId>0&&(r+=":"+t[e].subId),'<sup class="footnote-ref"><a href="#fn'+n+'" id="'+r+'">['+n+"]</a></sup>"};ze.footnote_block_open=function(t,e,n){var r=n.xhtmlOut?`<hr class="footnotes-sep" />
`:`<hr class="footnotes-sep">
`;return r+`<section class="footnotes">
<ol class="footnotes-list">
`};ze.footnote_block_close=function(){return`</ol>
</section>
`};ze.footnote_open=function(t,e){var n=Number(t[e].id+1).toString();return'<li id="fn'+n+'"  class="footnote-item">'};ze.footnote_close=function(){return`</li>
`};ze.footnote_anchor=function(t,e){var n=Number(t[e].id+1).toString(),r="fnref"+n;return t[e].subId>0&&(r+=":"+t[e].subId),' <a href="#'+r+'" class="footnote-backref">↩</a>'};ze.dl_open=function(){return`<dl>
`};ze.dt_open=function(){return"<dt>"};ze.dd_open=function(){return"<dd>"};ze.dl_close=function(){return`</dl>
`};ze.dt_close=function(){return`</dt>
`};ze.dd_close=function(){return`</dd>
`};function f4(t,e){return++e>=t.length-2?e:t[e].type==="paragraph_open"&&t[e].tight&&t[e+1].type==="inline"&&t[e+1].content.length===0&&t[e+2].type==="paragraph_close"&&t[e+2].tight?f4(t,e+2):e}var Vc=ze.getBreak=function(e,n){return n=f4(e,n),n<e.length&&e[n].type==="list_item_close"?"":`
`};function aI(){this.rules=u4({},ze),this.getBreak=ze.getBreak}aI.prototype.renderInline=function(t,e,n){for(var r=this.rules,o=t.length,i=0,a="";o--;)a+=r[t[i].type](t,i++,e,n,this);return a};aI.prototype.render=function(t,e,n){for(var r=this.rules,o=t.length,i=-1,a="";++i<o;)t[i].type==="inline"?a+=this.renderInline(t[i].children,e,n):a+=r[t[i].type](t,i,e,n,this);return a};function ro(){this.__rules__=[],this.__cache__=null}ro.prototype.__find__=function(t){for(var e=this.__rules__.length,n=-1;e--;)if(this.__rules__[++n].name===t)return n;return-1};ro.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),t.__cache__={},e.forEach(function(n){t.__cache__[n]=[],t.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||t.__cache__[n].push(r.fn))})})};ro.prototype.at=function(t,e,n){var r=this.__find__(t),o=n||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=o.alt||[],this.__cache__=null};ro.prototype.before=function(t,e,n,r){var o=this.__find__(t),i=r||{};if(o===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o,0,{name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};ro.prototype.after=function(t,e,n,r){var o=this.__find__(t),i=r||{};if(o===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o+1,0,{name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};ro.prototype.push=function(t,e,n){var r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};ro.prototype.enable=function(t,e){t=Array.isArray(t)?t:[t],e&&this.__rules__.forEach(function(n){n.enabled=!1}),t.forEach(function(n){var r=this.__find__(n);if(r<0)throw new Error("Rules manager: invalid rule name "+n);this.__rules__[r].enabled=!0},this),this.__cache__=null};ro.prototype.disable=function(t){t=Array.isArray(t)?t:[t],t.forEach(function(e){var n=this.__find__(e);if(n<0)throw new Error("Rules manager: invalid rule name "+e);this.__rules__[n].enabled=!1},this),this.__cache__=null};ro.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};function Vue(t){t.inlineMode?t.tokens.push({type:"inline",content:t.src.replace(/\n/g," ").trim(),level:0,lines:[0,1],children:[]}):t.block.parse(t.src,t.options,t.env,t.tokens)}function zc(t,e,n,r,o){this.src=t,this.env=r,this.options=n,this.parser=e,this.tokens=o,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache=[],this.isInLabel=!1,this.linkLevel=0,this.linkContent="",this.labelUnmatchedScopes=0}zc.prototype.pushPending=function(){this.tokens.push({type:"text",content:this.pending,level:this.pendingLevel}),this.pending=""};zc.prototype.push=function(t){this.pending&&this.pushPending(),this.tokens.push(t),this.pendingLevel=this.level};zc.prototype.cacheSet=function(t,e){for(var n=this.cache.length;n<=t;n++)this.cache.push(0);this.cache[t]=e};zc.prototype.cacheGet=function(t){return t<this.cache.length?this.cache[t]:0};function fh(t,e){var n,r,o,i=-1,a=t.posMax,s=t.pos,c=t.isInLabel;if(t.isInLabel)return-1;if(t.labelUnmatchedScopes)return t.labelUnmatchedScopes--,-1;for(t.pos=e+1,t.isInLabel=!0,n=1;t.pos<a;){if(o=t.src.charCodeAt(t.pos),o===91)n++;else if(o===93&&(n--,n===0)){r=!0;break}t.parser.skipToken(t)}return r?(i=t.pos,t.labelUnmatchedScopes=0):t.labelUnmatchedScopes=n-1,t.pos=s,t.isInLabel=c,i}function zue(t,e,n,r){var o,i,a,s,c,u;if(t.charCodeAt(0)!==42||t.charCodeAt(1)!==91||t.indexOf("]:")===-1||(o=new zc(t,e,n,r,[]),i=fh(o,1),i<0||t.charCodeAt(i+1)!==58))return-1;for(s=o.posMax,a=i+2;a<s&&o.src.charCodeAt(a)!==10;a++);return c=t.slice(2,i),u=t.slice(i+2,a).trim(),u.length===0?-1:(r.abbreviations||(r.abbreviations={}),typeof r.abbreviations[":"+c]>"u"&&(r.abbreviations[":"+c]=u),a)}function $ue(t){var e=t.tokens,n,r,o,i;if(!t.inlineMode){for(n=1,r=e.length-1;n<r;n++)if(e[n-1].type==="paragraph_open"&&e[n].type==="inline"&&e[n+1].type==="paragraph_close"){for(o=e[n].content;o.length&&(i=zue(o,t.inline,t.options,t.env),!(i<0));)o=o.slice(i).trim();e[n].content=o,o.length||(e[n-1].tight=!0,e[n+1].tight=!0)}}}function C0(t){var e=wc(t);try{e=decodeURI(e)}catch{}return encodeURI(e)}function h4(t,e){var n,r,o,i=e,a=t.posMax;if(t.src.charCodeAt(e)===60){for(e++;e<a;){if(n=t.src.charCodeAt(e),n===10)return!1;if(n===62)return o=C0(dh(t.src.slice(i+1,e))),t.parser.validateLink(o)?(t.pos=e+1,t.linkContent=o,!0):!1;if(n===92&&e+1<a){e+=2;continue}e++}return!1}for(r=0;e<a&&(n=t.src.charCodeAt(e),!(n===32||n<32||n===127));){if(n===92&&e+1<a){e+=2;continue}if(n===40&&(r++,r>1)||n===41&&(r--,r<0))break;e++}return i===e||(o=dh(t.src.slice(i,e)),!t.parser.validateLink(o))?!1:(t.linkContent=o,t.pos=e,!0)}function p4(t,e){var n,r=e,o=t.posMax,i=t.src.charCodeAt(e);if(i!==34&&i!==39&&i!==40)return!1;for(e++,i===40&&(i=41);e<o;){if(n=t.src.charCodeAt(e),n===i)return t.pos=e+1,t.linkContent=dh(t.src.slice(r+1,e)),!0;if(n===92&&e+1<o){e+=2;continue}e++}return!1}function m4(t){return t.trim().replace(/\s+/g," ").toUpperCase()}function Gue(t,e,n,r){var o,i,a,s,c,u,d,h,p;if(t.charCodeAt(0)!==91||t.indexOf("]:")===-1||(o=new zc(t,e,n,r,[]),i=fh(o,0),i<0||t.charCodeAt(i+1)!==58))return-1;for(s=o.posMax,a=i+2;a<s&&(c=o.src.charCodeAt(a),!(c!==32&&c!==10));a++);if(!h4(o,a))return-1;for(d=o.linkContent,a=o.pos,u=a,a=a+1;a<s&&(c=o.src.charCodeAt(a),!(c!==32&&c!==10));a++);for(a<s&&u!==a&&p4(o,a)?(h=o.linkContent,a=o.pos):(h="",a=u);a<s&&o.src.charCodeAt(a)===32;)a++;return a<s&&o.src.charCodeAt(a)!==10?-1:(p=m4(t.slice(1,i)),typeof r.references[p]>"u"&&(r.references[p]={title:h,href:d}),a)}function Kue(t){var e=t.tokens,n,r,o,i;if(t.env.references=t.env.references||{},!t.inlineMode){for(n=1,r=e.length-1;n<r;n++)if(e[n].type==="inline"&&e[n-1].type==="paragraph_open"&&e[n+1].type==="paragraph_close"){for(o=e[n].content;o.length&&(i=Gue(o,t.inline,t.options,t.env),!(i<0));)o=o.slice(i).trim();e[n].content=o,o.length||(e[n-1].tight=!0,e[n+1].tight=!0)}}}function Wue(t){var e=t.tokens,n,r,o;for(r=0,o=e.length;r<o;r++)n=e[r],n.type==="inline"&&t.inline.parse(n.content,t.options,t.env,n.children)}function que(t){var e,n,r,o,i,a,s,c,u,d=0,h=!1,p={};if(t.env.footnotes&&(t.tokens=t.tokens.filter(function(g){return g.type==="footnote_reference_open"?(h=!0,c=[],u=g.label,!1):g.type==="footnote_reference_close"?(h=!1,p[":"+u]=c,!1):(h&&c.push(g),!h)}),!!t.env.footnotes.list)){for(a=t.env.footnotes.list,t.tokens.push({type:"footnote_block_open",level:d++}),e=0,n=a.length;e<n;e++){for(t.tokens.push({type:"footnote_open",id:e,level:d++}),a[e].tokens?(s=[],s.push({type:"paragraph_open",tight:!1,level:d++}),s.push({type:"inline",content:"",level:d,children:a[e].tokens}),s.push({type:"paragraph_close",tight:!1,level:--d})):a[e].label&&(s=p[":"+a[e].label]),t.tokens=t.tokens.concat(s),t.tokens[t.tokens.length-1].type==="paragraph_close"?i=t.tokens.pop():i=null,o=a[e].count>0?a[e].count:1,r=0;r<o;r++)t.tokens.push({type:"footnote_anchor",id:e,subId:r,level:d});i&&t.tokens.push(i),t.tokens.push({type:"footnote_close",level:--d})}t.tokens.push({type:"footnote_block_close",level:--d})}}var MR=` 
()[]'".,!?-`;function $_(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")}function Yue(t){var e,n,r,o,i,a,s,c,u,d,h,p,g=t.tokens;if(t.env.abbreviations){for(t.env.abbrRegExp||(p="(^|["+MR.split("").map($_).join("")+"])("+Object.keys(t.env.abbreviations).map(function(v){return v.substr(1)}).sort(function(v,y){return y.length-v.length}).map($_).join("|")+")($|["+MR.split("").map($_).join("")+"])",t.env.abbrRegExp=new RegExp(p,"g")),d=t.env.abbrRegExp,n=0,r=g.length;n<r;n++)if(g[n].type==="inline"){for(o=g[n].children,e=o.length-1;e>=0;e--)if(i=o[e],i.type==="text"){for(c=0,a=i.content,d.lastIndex=0,u=i.level,s=[];h=d.exec(a);)d.lastIndex>c&&s.push({type:"text",content:a.slice(c,h.index+h[1].length),level:u}),s.push({type:"abbr_open",title:t.env.abbreviations[":"+h[2]],level:u++}),s.push({type:"text",content:h[2],level:u}),s.push({type:"abbr_close",level:--u}),c=d.lastIndex-h[3].length;s.length&&(c<a.length&&s.push({type:"text",content:a.slice(c),level:u}),g[n].children=o=[].concat(o.slice(0,e),s,o.slice(e+1)))}}}}var Que=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Jue=/\((c|tm|r|p)\)/ig,Xue={c:"©",r:"®",p:"§",tm:"™"};function Zue(t){return t.indexOf("(")<0?t:t.replace(Jue,function(e,n){return Xue[n.toLowerCase()]})}function ede(t){var e,n,r,o,i;if(t.options.typographer){for(i=t.tokens.length-1;i>=0;i--)if(t.tokens[i].type==="inline")for(o=t.tokens[i].children,e=o.length-1;e>=0;e--)n=o[e],n.type==="text"&&(r=n.content,r=Zue(r),Que.test(r)&&(r=r.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/mg,"$1—$2").replace(/(^|\s)--(\s|$)/mg,"$1–$2").replace(/(^|[^-\s])--([^-\s]|$)/mg,"$1–$2")),n.content=r)}}var tde=/['"]/,LR=/['"]/g,nde=/[-\s()\[\]]/,DR="’";function jR(t,e){return e<0||e>=t.length?!1:!nde.test(t[e])}function dl(t,e,n){return t.substr(0,e)+n+t.substr(e+1)}function rde(t){var e,n,r,o,i,a,s,c,u,d,h,p,g,v,y,_,b;if(t.options.typographer){for(b=[],y=t.tokens.length-1;y>=0;y--)if(t.tokens[y].type==="inline"){for(_=t.tokens[y].children,b.length=0,e=0;e<_.length;e++)if(n=_[e],!(n.type!=="text"||tde.test(n.text))){for(s=_[e].level,g=b.length-1;g>=0&&!(b[g].level<=s);g--);b.length=g+1,r=n.content,i=0,a=r.length;e:for(;i<a&&(LR.lastIndex=i,o=LR.exec(r),!!o);){if(c=!jR(r,o.index-1),i=o.index+1,v=o[0]==="'",u=!jR(r,i),!u&&!c){v&&(n.content=dl(n.content,o.index,DR));continue}if(h=!u,p=!c,p){for(g=b.length-1;g>=0&&(d=b[g],!(b[g].level<s));g--)if(d.single===v&&b[g].level===s){d=b[g],v?(_[d.token].content=dl(_[d.token].content,d.pos,t.options.quotes[2]),n.content=dl(n.content,o.index,t.options.quotes[3])):(_[d.token].content=dl(_[d.token].content,d.pos,t.options.quotes[0]),n.content=dl(n.content,o.index,t.options.quotes[1])),b.length=g;continue e}}h?b.push({token:e,pos:o.index,single:v,level:s}):p&&v&&(n.content=dl(n.content,o.index,DR))}}}}}var G_=[["block",Vue],["abbr",$ue],["references",Kue],["inline",Wue],["footnote_tail",que],["abbr2",Yue],["replacements",ede],["smartquotes",rde]];function g4(){this.options={},this.ruler=new ro;for(var t=0;t<G_.length;t++)this.ruler.push(G_[t][0],G_[t][1])}g4.prototype.process=function(t){var e,n,r;for(r=this.ruler.getRules(""),e=0,n=r.length;e<n;e++)r[e](t)};function $c(t,e,n,r,o){var i,a,s,c,u,d,h;for(this.src=t,this.parser=e,this.options=n,this.env=r,this.tokens=o,this.bMarks=[],this.eMarks=[],this.tShift=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.parentType="root",this.ddIndent=-1,this.level=0,this.result="",a=this.src,d=0,h=!1,s=c=d=0,u=a.length;c<u;c++){if(i=a.charCodeAt(c),!h)if(i===32){d++;continue}else h=!0;(i===10||c===u-1)&&(i!==10&&c++,this.bMarks.push(s),this.eMarks.push(c),this.tShift.push(d),h=!1,d=0,s=c+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.lineMax=this.bMarks.length-1}$c.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};$c.prototype.skipEmptyLines=function(e){for(var n=this.lineMax;e<n&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};$c.prototype.skipSpaces=function(e){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===32;e++);return e};$c.prototype.skipChars=function(e,n){for(var r=this.src.length;e<r&&this.src.charCodeAt(e)===n;e++);return e};$c.prototype.skipCharsBack=function(e,n,r){if(e<=r)return e;for(;e>r;)if(n!==this.src.charCodeAt(--e))return e+1;return e};$c.prototype.getLines=function(e,n,r,o){var i,a,s,c,u,d=e;if(e>=n)return"";if(d+1===n)return a=this.bMarks[d]+Math.min(this.tShift[d],r),s=o?this.eMarks[d]+1:this.eMarks[d],this.src.slice(a,s);for(c=new Array(n-e),i=0;d<n;d++,i++)u=this.tShift[d],u>r&&(u=r),u<0&&(u=0),a=this.bMarks[d]+u,d+1<n||o?s=this.eMarks[d]+1:s=this.eMarks[d],c[i]=this.src.slice(a,s);return c.join("")};function ode(t,e,n){var r,o;if(t.tShift[e]-t.blkIndent<4)return!1;for(o=r=e+1;r<n;){if(t.isEmpty(r)){r++;continue}if(t.tShift[r]-t.blkIndent>=4){r++,o=r;continue}break}return t.line=r,t.tokens.push({type:"code",content:t.getLines(e,o,4+t.blkIndent,!0),block:!0,lines:[e,t.line],level:t.level}),!0}function ide(t,e,n,r){var o,i,a,s,c,u=!1,d=t.bMarks[e]+t.tShift[e],h=t.eMarks[e];if(d+3>h||(o=t.src.charCodeAt(d),o!==126&&o!==96)||(c=d,d=t.skipChars(d,o),i=d-c,i<3)||(a=t.src.slice(d,h).trim(),a.indexOf("`")>=0))return!1;if(r)return!0;for(s=e;s++,!(s>=n||(d=c=t.bMarks[s]+t.tShift[s],h=t.eMarks[s],d<h&&t.tShift[s]<t.blkIndent));)if(t.src.charCodeAt(d)===o&&!(t.tShift[s]-t.blkIndent>=4)&&(d=t.skipChars(d,o),!(d-c<i)&&(d=t.skipSpaces(d),!(d<h)))){u=!0;break}return i=t.tShift[e],t.line=s+(u?1:0),t.tokens.push({type:"fence",params:a,content:t.getLines(e+1,s,i,!0),lines:[e,t.line],level:t.level}),!0}function ade(t,e,n,r){var o,i,a,s,c,u,d,h,p,g,v,y=t.bMarks[e]+t.tShift[e],_=t.eMarks[e];if(y>_||t.src.charCodeAt(y++)!==62||t.level>=t.options.maxNesting)return!1;if(r)return!0;for(t.src.charCodeAt(y)===32&&y++,c=t.blkIndent,t.blkIndent=0,s=[t.bMarks[e]],t.bMarks[e]=y,y=y<_?t.skipSpaces(y):y,i=y>=_,a=[t.tShift[e]],t.tShift[e]=y-t.bMarks[e],h=t.parser.ruler.getRules("blockquote"),o=e+1;o<n&&(y=t.bMarks[o]+t.tShift[o],_=t.eMarks[o],!(y>=_));o++){if(t.src.charCodeAt(y++)===62){t.src.charCodeAt(y)===32&&y++,s.push(t.bMarks[o]),t.bMarks[o]=y,y=y<_?t.skipSpaces(y):y,i=y>=_,a.push(t.tShift[o]),t.tShift[o]=y-t.bMarks[o];continue}if(i)break;for(v=!1,p=0,g=h.length;p<g;p++)if(h[p](t,o,n,!0)){v=!0;break}if(v)break;s.push(t.bMarks[o]),a.push(t.tShift[o]),t.tShift[o]=-1337}for(u=t.parentType,t.parentType="blockquote",t.tokens.push({type:"blockquote_open",lines:d=[e,0],level:t.level++}),t.parser.tokenize(t,e,o),t.tokens.push({type:"blockquote_close",level:--t.level}),t.parentType=u,d[1]=t.line,p=0;p<a.length;p++)t.bMarks[p+e]=s[p],t.tShift[p+e]=a[p];return t.blkIndent=c,!0}function sde(t,e,n,r){var o,i,a,s=t.bMarks[e],c=t.eMarks[e];if(s+=t.tShift[e],s>c||(o=t.src.charCodeAt(s++),o!==42&&o!==45&&o!==95))return!1;for(i=1;s<c;){if(a=t.src.charCodeAt(s++),a!==o&&a!==32)return!1;a===o&&i++}return i<3?!1:(r||(t.line=e+1,t.tokens.push({type:"hr",lines:[e,t.line],level:t.level})),!0)}function UR(t,e){var n,r,o;return r=t.bMarks[e]+t.tShift[e],o=t.eMarks[e],r>=o||(n=t.src.charCodeAt(r++),n!==42&&n!==45&&n!==43)||r<o&&t.src.charCodeAt(r)!==32?-1:r}function FR(t,e){var n,r=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(r+1>=o||(n=t.src.charCodeAt(r++),n<48||n>57))return-1;for(;;){if(r>=o)return-1;if(n=t.src.charCodeAt(r++),!(n>=48&&n<=57)){if(n===41||n===46)break;return-1}}return r<o&&t.src.charCodeAt(r)!==32?-1:r}function cde(t,e){var n,r,o=t.level+2;for(n=e+2,r=t.tokens.length-2;n<r;n++)t.tokens[n].level===o&&t.tokens[n].type==="paragraph_open"&&(t.tokens[n+2].tight=!0,t.tokens[n].tight=!0,n+=2)}function lde(t,e,n,r){var o,i,a,s,c,u,d,h,p,g,v,y,_,b,C,w,S,E,I=!0,x,A,N,R;if((h=FR(t,e))>=0)_=!0;else if((h=UR(t,e))>=0)_=!1;else return!1;if(t.level>=t.options.maxNesting)return!1;if(y=t.src.charCodeAt(h-1),r)return!0;for(C=t.tokens.length,_?(d=t.bMarks[e]+t.tShift[e],v=Number(t.src.substr(d,h-d-1)),t.tokens.push({type:"ordered_list_open",order:v,lines:S=[e,0],level:t.level++})):t.tokens.push({type:"bullet_list_open",lines:S=[e,0],level:t.level++}),o=e,w=!1,x=t.parser.ruler.getRules("list");o<n&&(b=t.skipSpaces(h),p=t.eMarks[o],b>=p?g=1:g=b-h,g>4&&(g=1),g<1&&(g=1),i=h-t.bMarks[o]+g,t.tokens.push({type:"list_item_open",lines:E=[e,0],level:t.level++}),s=t.blkIndent,c=t.tight,a=t.tShift[e],u=t.parentType,t.tShift[e]=b-t.bMarks[e],t.blkIndent=i,t.tight=!0,t.parentType="list",t.parser.tokenize(t,e,n,!0),(!t.tight||w)&&(I=!1),w=t.line-e>1&&t.isEmpty(t.line-1),t.blkIndent=s,t.tShift[e]=a,t.tight=c,t.parentType=u,t.tokens.push({type:"list_item_close",level:--t.level}),o=e=t.line,E[1]=o,b=t.bMarks[e],!(o>=n||t.isEmpty(o)||t.tShift[o]<t.blkIndent));){for(R=!1,A=0,N=x.length;A<N;A++)if(x[A](t,o,n,!0)){R=!0;break}if(R)break;if(_){if(h=FR(t,o),h<0)break}else if(h=UR(t,o),h<0)break;if(y!==t.src.charCodeAt(h-1))break}return t.tokens.push({type:_?"ordered_list_close":"bullet_list_close",level:--t.level}),S[1]=o,t.line=o,I&&cde(t,C),!0}function ude(t,e,n,r){var o,i,a,s,c,u=t.bMarks[e]+t.tShift[e],d=t.eMarks[e];if(u+4>d||t.src.charCodeAt(u)!==91||t.src.charCodeAt(u+1)!==94||t.level>=t.options.maxNesting)return!1;for(s=u+2;s<d;s++){if(t.src.charCodeAt(s)===32)return!1;if(t.src.charCodeAt(s)===93)break}return s===u+2||s+1>=d||t.src.charCodeAt(++s)!==58?!1:(r||(s++,t.env.footnotes||(t.env.footnotes={}),t.env.footnotes.refs||(t.env.footnotes.refs={}),c=t.src.slice(u+2,s-2),t.env.footnotes.refs[":"+c]=-1,t.tokens.push({type:"footnote_reference_open",label:c,level:t.level++}),o=t.bMarks[e],i=t.tShift[e],a=t.parentType,t.tShift[e]=t.skipSpaces(s)-s,t.bMarks[e]=s,t.blkIndent+=4,t.parentType="footnote",t.tShift[e]<t.blkIndent&&(t.tShift[e]+=t.blkIndent,t.bMarks[e]-=t.blkIndent),t.parser.tokenize(t,e,n,!0),t.parentType=a,t.blkIndent-=4,t.tShift[e]=i,t.bMarks[e]=o,t.tokens.push({type:"footnote_reference_close",level:--t.level})),!0)}function dde(t,e,n,r){var o,i,a,s=t.bMarks[e]+t.tShift[e],c=t.eMarks[e];if(s>=c||(o=t.src.charCodeAt(s),o!==35||s>=c))return!1;for(i=1,o=t.src.charCodeAt(++s);o===35&&s<c&&i<=6;)i++,o=t.src.charCodeAt(++s);return i>6||s<c&&o!==32?!1:(r||(c=t.skipCharsBack(c,32,s),a=t.skipCharsBack(c,35,s),a>s&&t.src.charCodeAt(a-1)===32&&(c=a),t.line=e+1,t.tokens.push({type:"heading_open",hLevel:i,lines:[e,t.line],level:t.level}),s<c&&t.tokens.push({type:"inline",content:t.src.slice(s,c).trim(),level:t.level+1,lines:[e,t.line],children:[]}),t.tokens.push({type:"heading_close",hLevel:i,level:t.level})),!0)}function fde(t,e,n){var r,o,i,a=e+1;return a>=n||t.tShift[a]<t.blkIndent||t.tShift[a]-t.blkIndent>3||(o=t.bMarks[a]+t.tShift[a],i=t.eMarks[a],o>=i)||(r=t.src.charCodeAt(o),r!==45&&r!==61)||(o=t.skipChars(o,r),o=t.skipSpaces(o),o<i)?!1:(o=t.bMarks[e]+t.tShift[e],t.line=a+1,t.tokens.push({type:"heading_open",hLevel:r===61?1:2,lines:[e,t.line],level:t.level}),t.tokens.push({type:"inline",content:t.src.slice(o,t.eMarks[e]).trim(),level:t.level+1,lines:[e,t.line-1],children:[]}),t.tokens.push({type:"heading_close",hLevel:r===61?1:2,level:t.level}),!0)}var v4={};["article","aside","button","blockquote","body","canvas","caption","col","colgroup","dd","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","li","map","object","ol","output","p","pre","progress","script","section","style","table","tbody","td","textarea","tfoot","th","tr","thead","ul","video"].forEach(function(t){v4[t]=!0});var hde=/^<([a-zA-Z]{1,15})[\s\/>]/,pde=/^<\/([a-zA-Z]{1,15})[\s>]/;function mde(t){var e=t|32;return e>=97&&e<=122}function gde(t,e,n,r){var o,i,a,s=t.bMarks[e],c=t.eMarks[e],u=t.tShift[e];if(s+=u,!t.options.html||u>3||s+2>=c||t.src.charCodeAt(s)!==60)return!1;if(o=t.src.charCodeAt(s+1),o===33||o===63){if(r)return!0}else if(o===47||mde(o)){if(o===47){if(i=t.src.slice(s,c).match(pde),!i)return!1}else if(i=t.src.slice(s,c).match(hde),!i)return!1;if(v4[i[1].toLowerCase()]!==!0)return!1;if(r)return!0}else return!1;for(a=e+1;a<t.lineMax&&!t.isEmpty(a);)a++;return t.line=a,t.tokens.push({type:"htmlblock",level:t.level,lines:[e,t.line],content:t.getLines(e,a,0,!0)}),!0}function K_(t,e){var n=t.bMarks[e]+t.blkIndent,r=t.eMarks[e];return t.src.substr(n,r-n)}function vde(t,e,n,r){var o,i,a,s,c,u,d,h,p,g,v;if(e+2>n||(c=e+1,t.tShift[c]<t.blkIndent)||(a=t.bMarks[c]+t.tShift[c],a>=t.eMarks[c])||(o=t.src.charCodeAt(a),o!==124&&o!==45&&o!==58)||(i=K_(t,e+1),!/^[-:| ]+$/.test(i))||(u=i.split("|"),u<=2))return!1;for(h=[],s=0;s<u.length;s++){if(p=u[s].trim(),!p){if(s===0||s===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(p))return!1;p.charCodeAt(p.length-1)===58?h.push(p.charCodeAt(0)===58?"center":"right"):p.charCodeAt(0)===58?h.push("left"):h.push("")}if(i=K_(t,e).trim(),i.indexOf("|")===-1||(u=i.replace(/^\||\|$/g,"").split("|"),h.length!==u.length))return!1;if(r)return!0;for(t.tokens.push({type:"table_open",lines:g=[e,0],level:t.level++}),t.tokens.push({type:"thead_open",lines:[e,e+1],level:t.level++}),t.tokens.push({type:"tr_open",lines:[e,e+1],level:t.level++}),s=0;s<u.length;s++)t.tokens.push({type:"th_open",align:h[s],lines:[e,e+1],level:t.level++}),t.tokens.push({type:"inline",content:u[s].trim(),lines:[e,e+1],level:t.level,children:[]}),t.tokens.push({type:"th_close",level:--t.level});for(t.tokens.push({type:"tr_close",level:--t.level}),t.tokens.push({type:"thead_close",level:--t.level}),t.tokens.push({type:"tbody_open",lines:v=[e+2,0],level:t.level++}),c=e+2;c<n&&!(t.tShift[c]<t.blkIndent||(i=K_(t,c).trim(),i.indexOf("|")===-1));c++){for(u=i.replace(/^\||\|$/g,"").split("|"),t.tokens.push({type:"tr_open",level:t.level++}),s=0;s<u.length;s++)t.tokens.push({type:"td_open",align:h[s],level:t.level++}),d=u[s].substring(u[s].charCodeAt(0)===124?1:0,u[s].charCodeAt(u[s].length-1)===124?u[s].length-1:u[s].length).trim(),t.tokens.push({type:"inline",content:d,level:t.level,children:[]}),t.tokens.push({type:"td_close",level:--t.level});t.tokens.push({type:"tr_close",level:--t.level})}return t.tokens.push({type:"tbody_close",level:--t.level}),t.tokens.push({type:"table_close",level:--t.level}),g[1]=v[1]=c,t.line=c,!0}function Bp(t,e){var n,r,o=t.bMarks[e]+t.tShift[e],i=t.eMarks[e];return o>=i||(r=t.src.charCodeAt(o++),r!==126&&r!==58)||(n=t.skipSpaces(o),o===n)||n>=i?-1:n}function yde(t,e){var n,r,o=t.level+2;for(n=e+2,r=t.tokens.length-2;n<r;n++)t.tokens[n].level===o&&t.tokens[n].type==="paragraph_open"&&(t.tokens[n+2].tight=!0,t.tokens[n].tight=!0,n+=2)}function bde(t,e,n,r){var o,i,a,s,c,u,d,h,p,g,v,y,_,b;if(r)return t.ddIndent<0?!1:Bp(t,e)>=0;if(d=e+1,t.isEmpty(d)&&++d>n||t.tShift[d]<t.blkIndent||(o=Bp(t,d),o<0)||t.level>=t.options.maxNesting)return!1;u=t.tokens.length,t.tokens.push({type:"dl_open",lines:c=[e,0],level:t.level++}),a=e,i=d;e:for(;;){for(b=!0,_=!1,t.tokens.push({type:"dt_open",lines:[a,a],level:t.level++}),t.tokens.push({type:"inline",content:t.getLines(a,a+1,t.blkIndent,!1).trim(),level:t.level+1,lines:[a,a],children:[]}),t.tokens.push({type:"dt_close",level:--t.level});;){if(t.tokens.push({type:"dd_open",lines:s=[d,0],level:t.level++}),y=t.tight,p=t.ddIndent,h=t.blkIndent,v=t.tShift[i],g=t.parentType,t.blkIndent=t.ddIndent=t.tShift[i]+2,t.tShift[i]=o-t.bMarks[i],t.tight=!0,t.parentType="deflist",t.parser.tokenize(t,i,n,!0),(!t.tight||_)&&(b=!1),_=t.line-i>1&&t.isEmpty(t.line-1),t.tShift[i]=v,t.tight=y,t.parentType=g,t.blkIndent=h,t.ddIndent=p,t.tokens.push({type:"dd_close",level:--t.level}),s[1]=d=t.line,d>=n||t.tShift[d]<t.blkIndent)break e;if(o=Bp(t,d),o<0)break;i=d}if(d>=n||(a=d,t.isEmpty(a))||t.tShift[a]<t.blkIndent||(i=a+1,i>=n)||(t.isEmpty(i)&&i++,i>=n)||t.tShift[i]<t.blkIndent||(o=Bp(t,i),o<0))break}return t.tokens.push({type:"dl_close",level:--t.level}),c[1]=d,t.line=d,b&&yde(t,u),!0}function _de(t,e){var n,r,o,i,a,s=e+1,c;if(n=t.lineMax,s<n&&!t.isEmpty(s)){for(c=t.parser.ruler.getRules("paragraph");s<n&&!t.isEmpty(s);s++)if(!(t.tShift[s]-t.blkIndent>3)){for(o=!1,i=0,a=c.length;i<a;i++)if(c[i](t,s,n,!0)){o=!0;break}if(o)break}}return r=t.getLines(e,s,t.blkIndent,!1).trim(),t.line=s,r.length&&(t.tokens.push({type:"paragraph_open",tight:!1,lines:[e,t.line],level:t.level}),t.tokens.push({type:"inline",content:r,level:t.level+1,lines:[e,t.line],children:[]}),t.tokens.push({type:"paragraph_close",tight:!1,level:t.level})),!0}var Hp=[["code",ode],["fences",ide,["paragraph","blockquote","list"]],["blockquote",ade,["paragraph","blockquote","list"]],["hr",sde,["paragraph","blockquote","list"]],["list",lde,["paragraph","blockquote"]],["footnote",ude,["paragraph"]],["heading",dde,["paragraph","blockquote"]],["lheading",fde],["htmlblock",gde,["paragraph","blockquote"]],["table",vde,["paragraph"]],["deflist",bde,["paragraph"]],["paragraph",_de]];function sI(){this.ruler=new ro;for(var t=0;t<Hp.length;t++)this.ruler.push(Hp[t][0],Hp[t][1],{alt:(Hp[t][2]||[]).slice()})}sI.prototype.tokenize=function(t,e,n){for(var r=this.ruler.getRules(""),o=r.length,i=e,a=!1,s,c;i<n&&(t.line=i=t.skipEmptyLines(i),!(i>=n||t.tShift[i]<t.blkIndent));){for(c=0;c<o&&(s=r[c](t,i,n,!1),!s);c++);if(t.tight=!a,t.isEmpty(t.line-1)&&(a=!0),i=t.line,i<n&&t.isEmpty(i)){if(a=!0,i++,i<n&&t.parentType==="list"&&t.isEmpty(i))break;t.line=i}}};var Cde=/[\n\t]/g,Sde=/\r[\n\u0085]|[\u2424\u2028\u0085]/g,wde=/\u00a0/g;sI.prototype.parse=function(t,e,n,r){var o,i=0,a=0;if(!t)return[];t=t.replace(wde," "),t=t.replace(Sde,`
`),t.indexOf("	")>=0&&(t=t.replace(Cde,function(s,c){var u;return t.charCodeAt(c)===10?(i=c+1,a=0,s):(u="    ".slice((c-i-a)%4),a=c-i+1,u)})),o=new $c(t,this,e,n,r),this.tokenize(o,o.line,o.lineMax)};function Ede(t){switch(t){case 10:case 92:case 96:case 42:case 95:case 94:case 91:case 93:case 33:case 38:case 60:case 62:case 123:case 125:case 36:case 37:case 64:case 126:case 43:case 61:case 58:return!0;default:return!1}}function Tde(t,e){for(var n=t.pos;n<t.posMax&&!Ede(t.src.charCodeAt(n));)n++;return n===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)}function Ide(t,e){var n,r,o=t.pos;if(t.src.charCodeAt(o)!==10)return!1;if(n=t.pending.length-1,r=t.posMax,!e)if(n>=0&&t.pending.charCodeAt(n)===32)if(n>=1&&t.pending.charCodeAt(n-1)===32){for(var i=n-2;i>=0;i--)if(t.pending.charCodeAt(i)!==32){t.pending=t.pending.substring(0,i+1);break}t.push({type:"hardbreak",level:t.level})}else t.pending=t.pending.slice(0,-1),t.push({type:"softbreak",level:t.level});else t.push({type:"softbreak",level:t.level});for(o++;o<r&&t.src.charCodeAt(o)===32;)o++;return t.pos=o,!0}var cI=[];for(var BR=0;BR<256;BR++)cI.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){cI[t.charCodeAt(0)]=1});function Ade(t,e){var n,r=t.pos,o=t.posMax;if(t.src.charCodeAt(r)!==92)return!1;if(r++,r<o){if(n=t.src.charCodeAt(r),n<256&&cI[n]!==0)return e||(t.pending+=t.src[r]),t.pos+=2,!0;if(n===10){for(e||t.push({type:"hardbreak",level:t.level}),r++;r<o&&t.src.charCodeAt(r)===32;)r++;return t.pos=r,!0}}return e||(t.pending+="\\"),t.pos++,!0}function kde(t,e){var n,r,o,i,a,s=t.pos,c=t.src.charCodeAt(s);if(c!==96)return!1;for(n=s,s++,r=t.posMax;s<r&&t.src.charCodeAt(s)===96;)s++;for(o=t.src.slice(n,s),i=a=s;(i=t.src.indexOf("`",a))!==-1;){for(a=i+1;a<r&&t.src.charCodeAt(a)===96;)a++;if(a-i===o.length)return e||t.push({type:"code",content:t.src.slice(s,i).replace(/[ \n]+/g," ").trim(),block:!1,level:t.level}),t.pos=a,!0}return e||(t.pending+=o),t.pos+=o.length,!0}function xde(t,e){var n,r,o,i=t.posMax,a=t.pos,s,c;if(t.src.charCodeAt(a)!==126||e||a+4>=i||t.src.charCodeAt(a+1)!==126||t.level>=t.options.maxNesting||(s=a>0?t.src.charCodeAt(a-1):-1,c=t.src.charCodeAt(a+2),s===126)||c===126||c===32||c===10)return!1;for(r=a+2;r<i&&t.src.charCodeAt(r)===126;)r++;if(r>a+3)return t.pos+=r-a,e||(t.pending+=t.src.slice(a,r)),!0;for(t.pos=a+2,o=1;t.pos+1<i;){if(t.src.charCodeAt(t.pos)===126&&t.src.charCodeAt(t.pos+1)===126&&(s=t.src.charCodeAt(t.pos-1),c=t.pos+2<i?t.src.charCodeAt(t.pos+2):-1,c!==126&&s!==126&&(s!==32&&s!==10?o--:c!==32&&c!==10&&o++,o<=0))){n=!0;break}t.parser.skipToken(t)}return n?(t.posMax=t.pos,t.pos=a+2,e||(t.push({type:"del_open",level:t.level++}),t.parser.tokenize(t),t.push({type:"del_close",level:--t.level})),t.pos=t.posMax+2,t.posMax=i,!0):(t.pos=a,!1)}function Rde(t,e){var n,r,o,i=t.posMax,a=t.pos,s,c;if(t.src.charCodeAt(a)!==43||e||a+4>=i||t.src.charCodeAt(a+1)!==43||t.level>=t.options.maxNesting||(s=a>0?t.src.charCodeAt(a-1):-1,c=t.src.charCodeAt(a+2),s===43)||c===43||c===32||c===10)return!1;for(r=a+2;r<i&&t.src.charCodeAt(r)===43;)r++;if(r!==a+2)return t.pos+=r-a,e||(t.pending+=t.src.slice(a,r)),!0;for(t.pos=a+2,o=1;t.pos+1<i;){if(t.src.charCodeAt(t.pos)===43&&t.src.charCodeAt(t.pos+1)===43&&(s=t.src.charCodeAt(t.pos-1),c=t.pos+2<i?t.src.charCodeAt(t.pos+2):-1,c!==43&&s!==43&&(s!==32&&s!==10?o--:c!==32&&c!==10&&o++,o<=0))){n=!0;break}t.parser.skipToken(t)}return n?(t.posMax=t.pos,t.pos=a+2,e||(t.push({type:"ins_open",level:t.level++}),t.parser.tokenize(t),t.push({type:"ins_close",level:--t.level})),t.pos=t.posMax+2,t.posMax=i,!0):(t.pos=a,!1)}function Pde(t,e){var n,r,o,i=t.posMax,a=t.pos,s,c;if(t.src.charCodeAt(a)!==61||e||a+4>=i||t.src.charCodeAt(a+1)!==61||t.level>=t.options.maxNesting||(s=a>0?t.src.charCodeAt(a-1):-1,c=t.src.charCodeAt(a+2),s===61)||c===61||c===32||c===10)return!1;for(r=a+2;r<i&&t.src.charCodeAt(r)===61;)r++;if(r!==a+2)return t.pos+=r-a,e||(t.pending+=t.src.slice(a,r)),!0;for(t.pos=a+2,o=1;t.pos+1<i;){if(t.src.charCodeAt(t.pos)===61&&t.src.charCodeAt(t.pos+1)===61&&(s=t.src.charCodeAt(t.pos-1),c=t.pos+2<i?t.src.charCodeAt(t.pos+2):-1,c!==61&&s!==61&&(s!==32&&s!==10?o--:c!==32&&c!==10&&o++,o<=0))){n=!0;break}t.parser.skipToken(t)}return n?(t.posMax=t.pos,t.pos=a+2,e||(t.push({type:"mark_open",level:t.level++}),t.parser.tokenize(t),t.push({type:"mark_close",level:--t.level})),t.pos=t.posMax+2,t.posMax=i,!0):(t.pos=a,!1)}function HR(t){return t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122}function VR(t,e){var n=e,r,o,i,a=!0,s=!0,c=t.posMax,u=t.src.charCodeAt(e);for(r=e>0?t.src.charCodeAt(e-1):-1;n<c&&t.src.charCodeAt(n)===u;)n++;return n>=c&&(a=!1),i=n-e,i>=4?a=s=!1:(o=n<c?t.src.charCodeAt(n):-1,(o===32||o===10)&&(a=!1),(r===32||r===10)&&(s=!1),u===95&&(HR(r)&&(a=!1),HR(o)&&(s=!1))),{can_open:a,can_close:s,delims:i}}function Ode(t,e){var n,r,o,i,a,s,c,u=t.posMax,d=t.pos,h=t.src.charCodeAt(d);if(h!==95&&h!==42||e)return!1;if(c=VR(t,d),n=c.delims,!c.can_open)return t.pos+=n,e||(t.pending+=t.src.slice(d,t.pos)),!0;if(t.level>=t.options.maxNesting)return!1;for(t.pos=d+n,s=[n];t.pos<u;){if(t.src.charCodeAt(t.pos)===h){if(c=VR(t,t.pos),r=c.delims,c.can_close){for(i=s.pop(),a=r;i!==a;){if(a<i){s.push(i-a);break}if(a-=i,s.length===0)break;t.pos+=i,i=s.pop()}if(s.length===0){n=i,o=!0;break}t.pos+=r;continue}c.can_open&&s.push(r),t.pos+=r;continue}t.parser.skipToken(t)}return o?(t.posMax=t.pos,t.pos=d+n,e||((n===2||n===3)&&t.push({type:"strong_open",level:t.level++}),(n===1||n===3)&&t.push({type:"em_open",level:t.level++}),t.parser.tokenize(t),(n===1||n===3)&&t.push({type:"em_close",level:--t.level}),(n===2||n===3)&&t.push({type:"strong_close",level:--t.level})),t.pos=t.posMax+n,t.posMax=u,!0):(t.pos=d,!1)}var Nde=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function Mde(t,e){var n,r,o=t.posMax,i=t.pos;if(t.src.charCodeAt(i)!==126||e||i+2>=o||t.level>=t.options.maxNesting)return!1;for(t.pos=i+1;t.pos<o;){if(t.src.charCodeAt(t.pos)===126){n=!0;break}t.parser.skipToken(t)}return!n||i+1===t.pos||(r=t.src.slice(i+1,t.pos),r.match(/(^|[^\\])(\\\\)*\s/))?(t.pos=i,!1):(t.posMax=t.pos,t.pos=i+1,e||t.push({type:"sub",level:t.level,content:r.replace(Nde,"$1")}),t.pos=t.posMax+1,t.posMax=o,!0)}var Lde=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function Dde(t,e){var n,r,o=t.posMax,i=t.pos;if(t.src.charCodeAt(i)!==94||e||i+2>=o||t.level>=t.options.maxNesting)return!1;for(t.pos=i+1;t.pos<o;){if(t.src.charCodeAt(t.pos)===94){n=!0;break}t.parser.skipToken(t)}return!n||i+1===t.pos||(r=t.src.slice(i+1,t.pos),r.match(/(^|[^\\])(\\\\)*\s/))?(t.pos=i,!1):(t.posMax=t.pos,t.pos=i+1,e||t.push({type:"sup",level:t.level,content:r.replace(Lde,"$1")}),t.pos=t.posMax+1,t.posMax=o,!0)}function jde(t,e){var n,r,o,i,a,s,c,u,d=!1,h=t.pos,p=t.posMax,g=t.pos,v=t.src.charCodeAt(g);if(v===33&&(d=!0,v=t.src.charCodeAt(++g)),v!==91||t.level>=t.options.maxNesting||(n=g+1,r=fh(t,g),r<0))return!1;if(s=r+1,s<p&&t.src.charCodeAt(s)===40){for(s++;s<p&&(u=t.src.charCodeAt(s),!(u!==32&&u!==10));s++);if(s>=p)return!1;for(g=s,h4(t,s)?(i=t.linkContent,s=t.pos):i="",g=s;s<p&&(u=t.src.charCodeAt(s),!(u!==32&&u!==10));s++);if(s<p&&g!==s&&p4(t,s))for(a=t.linkContent,s=t.pos;s<p&&(u=t.src.charCodeAt(s),!(u!==32&&u!==10));s++);else a="";if(s>=p||t.src.charCodeAt(s)!==41)return t.pos=h,!1;s++}else{if(t.linkLevel>0)return!1;for(;s<p&&(u=t.src.charCodeAt(s),!(u!==32&&u!==10));s++);if(s<p&&t.src.charCodeAt(s)===91&&(g=s+1,s=fh(t,s),s>=0?o=t.src.slice(g,s++):s=g-1),o||(typeof o>"u"&&(s=r+1),o=t.src.slice(n,r)),c=t.env.references[m4(o)],!c)return t.pos=h,!1;i=c.href,a=c.title}return e||(t.pos=n,t.posMax=r,d?t.push({type:"image",src:i,title:a,alt:t.src.substr(n,r-n),level:t.level}):(t.push({type:"link_open",href:i,title:a,level:t.level++}),t.linkLevel++,t.parser.tokenize(t),t.linkLevel--,t.push({type:"link_close",level:--t.level}))),t.pos=s,t.posMax=p,!0}function Ude(t,e){var n,r,o,i,a=t.posMax,s=t.pos;return s+2>=a||t.src.charCodeAt(s)!==94||t.src.charCodeAt(s+1)!==91||t.level>=t.options.maxNesting||(n=s+2,r=fh(t,s+1),r<0)?!1:(e||(t.env.footnotes||(t.env.footnotes={}),t.env.footnotes.list||(t.env.footnotes.list=[]),o=t.env.footnotes.list.length,t.pos=n,t.posMax=r,t.push({type:"footnote_ref",id:o,level:t.level}),t.linkLevel++,i=t.tokens.length,t.parser.tokenize(t),t.env.footnotes.list[o]={tokens:t.tokens.splice(i)},t.linkLevel--),t.pos=r+1,t.posMax=a,!0)}function Fde(t,e){var n,r,o,i,a=t.posMax,s=t.pos;if(s+3>a||!t.env.footnotes||!t.env.footnotes.refs||t.src.charCodeAt(s)!==91||t.src.charCodeAt(s+1)!==94||t.level>=t.options.maxNesting)return!1;for(r=s+2;r<a;r++){if(t.src.charCodeAt(r)===32||t.src.charCodeAt(r)===10)return!1;if(t.src.charCodeAt(r)===93)break}return r===s+2||r>=a||(r++,n=t.src.slice(s+2,r-1),typeof t.env.footnotes.refs[":"+n]>"u")?!1:(e||(t.env.footnotes.list||(t.env.footnotes.list=[]),t.env.footnotes.refs[":"+n]<0?(o=t.env.footnotes.list.length,t.env.footnotes.list[o]={label:n,count:0},t.env.footnotes.refs[":"+n]=o):o=t.env.footnotes.refs[":"+n],i=t.env.footnotes.list[o].count,t.env.footnotes.list[o].count++,t.push({type:"footnote_ref",id:o,subId:i,level:t.level})),t.pos=r,t.posMax=a,!0)}var Bde=["coap","doi","javascript","aaa","aaas","about","acap","cap","cid","crid","data","dav","dict","dns","file","ftp","geo","go","gopher","h323","http","https","iax","icap","im","imap","info","ipp","iris","iris.beep","iris.xpc","iris.xpcs","iris.lwz","ldap","mailto","mid","msrp","msrps","mtqp","mupdate","news","nfs","ni","nih","nntp","opaquelocktoken","pop","pres","rtsp","service","session","shttp","sieve","sip","sips","sms","snmp","soap.beep","soap.beeps","tag","tel","telnet","tftp","thismessage","tn3270","tip","tv","urn","vemmi","ws","wss","xcon","xcon-userid","xmlrpc.beep","xmlrpc.beeps","xmpp","z39.50r","z39.50s","adiumxtra","afp","afs","aim","apt","attachment","aw","beshare","bitcoin","bolo","callto","chrome","chrome-extension","com-eventbrite-attendee","content","cvs","dlna-playsingle","dlna-playcontainer","dtn","dvb","ed2k","facetime","feed","finger","fish","gg","git","gizmoproject","gtalk","hcp","icon","ipn","irc","irc6","ircs","itms","jar","jms","keyparc","lastfm","ldaps","magnet","maps","market","message","mms","ms-help","msnim","mumble","mvn","notes","oid","palm","paparazzi","platform","proxy","psyc","query","res","resource","rmi","rsync","rtmp","secondlife","sftp","sgn","skype","smb","soldat","spotify","ssh","steam","svn","teamspeak","things","udp","unreal","ut2004","ventrilo","view-source","webcal","wtai","wyciwyg","xfire","xri","ymsgr"],Hde=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,Vde=/^<([a-zA-Z.\-]{1,25}):([^<>\x00-\x20]*)>/;function zde(t,e){var n,r,o,i,a,s=t.pos;return t.src.charCodeAt(s)!==60||(n=t.src.slice(s),n.indexOf(">")<0)?!1:(r=n.match(Vde),r?Bde.indexOf(r[1].toLowerCase())<0||(i=r[0].slice(1,-1),a=C0(i),!t.parser.validateLink(i))?!1:(e||(t.push({type:"link_open",href:a,level:t.level}),t.push({type:"text",content:i,level:t.level+1}),t.push({type:"link_close",level:t.level})),t.pos+=r[0].length,!0):(o=n.match(Hde),o?(i=o[0].slice(1,-1),a=C0("mailto:"+i),t.parser.validateLink(a)?(e||(t.push({type:"link_open",href:a,level:t.level}),t.push({type:"text",content:i,level:t.level+1}),t.push({type:"link_close",level:t.level})),t.pos+=o[0].length,!0):!1):!1))}function _y(t,e){return t=t.source,e=e||"",function n(r,o){return r?(o=o.source||o,t=t.replace(r,o),n):new RegExp(t,e)}}var $de=/[a-zA-Z_:][a-zA-Z0-9:._-]*/,Gde=/[^"'=<>`\x00-\x20]+/,Kde=/'[^']*'/,Wde=/"[^"]*"/,qde=_y(/(?:unquoted|single_quoted|double_quoted)/)("unquoted",Gde)("single_quoted",Kde)("double_quoted",Wde)(),Yde=_y(/(?:\s+attr_name(?:\s*=\s*attr_value)?)/)("attr_name",$de)("attr_value",qde)(),Qde=_y(/<[A-Za-z][A-Za-z0-9]*attribute*\s*\/?>/)("attribute",Yde)(),Jde=/<\/[A-Za-z][A-Za-z0-9]*\s*>/,Xde=/<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->/,Zde=/<[?].*?[?]>/,efe=/<![A-Z]+\s+[^>]*>/,tfe=/<!\[CDATA\[[\s\S]*?\]\]>/,nfe=_y(/^(?:open_tag|close_tag|comment|processing|declaration|cdata)/)("open_tag",Qde)("close_tag",Jde)("comment",Xde)("processing",Zde)("declaration",efe)("cdata",tfe)();function rfe(t){var e=t|32;return e>=97&&e<=122}function ofe(t,e){var n,r,o,i=t.pos;return!t.options.html||(o=t.posMax,t.src.charCodeAt(i)!==60||i+2>=o)||(n=t.src.charCodeAt(i+1),n!==33&&n!==63&&n!==47&&!rfe(n))||(r=t.src.slice(i).match(nfe),!r)?!1:(e||t.push({type:"htmltag",content:t.src.slice(i,i+r[0].length),level:t.level}),t.pos+=r[0].length,!0)}var ife=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,afe=/^&([a-z][a-z0-9]{1,31});/i;function sfe(t,e){var n,r,o,i=t.pos,a=t.posMax;if(t.src.charCodeAt(i)!==38)return!1;if(i+1<a){if(n=t.src.charCodeAt(i+1),n===35){if(o=t.src.slice(i).match(ife),o)return e||(r=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),t.pending+=d4(r)?_0(r):_0(65533)),t.pos+=o[0].length,!0}else if(o=t.src.slice(i).match(afe),o){var s=l4(o[1]);if(o[1]!==s)return e||(t.pending+=s),t.pos+=o[0].length,!0}}return e||(t.pending+="&"),t.pos++,!0}var W_=[["text",Tde],["newline",Ide],["escape",Ade],["backticks",kde],["del",xde],["ins",Rde],["mark",Pde],["emphasis",Ode],["sub",Mde],["sup",Dde],["links",jde],["footnote_inline",Ude],["footnote_ref",Fde],["autolink",zde],["htmltag",ofe],["entity",sfe]];function Cy(){this.ruler=new ro;for(var t=0;t<W_.length;t++)this.ruler.push(W_[t][0],W_[t][1]);this.validateLink=cfe}Cy.prototype.skipToken=function(t){var e=this.ruler.getRules(""),n=e.length,r=t.pos,o,i;if((i=t.cacheGet(r))>0){t.pos=i;return}for(o=0;o<n;o++)if(e[o](t,!0)){t.cacheSet(r,t.pos);return}t.pos++,t.cacheSet(r,t.pos)};Cy.prototype.tokenize=function(t){for(var e=this.ruler.getRules(""),n=e.length,r=t.posMax,o,i;t.pos<r;){for(i=0;i<n&&(o=e[i](t,!1),!o);i++);if(o){if(t.pos>=r)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};Cy.prototype.parse=function(t,e,n,r){var o=new zc(t,this,e,n,r);this.tokenize(o)};function cfe(t){var e=["vbscript","javascript","file","data"],n=t.trim().toLowerCase();return n=wc(n),!(n.indexOf(":")!==-1&&e.indexOf(n.split(":")[0])!==-1)}var lfe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","replacements","smartquotes","references","abbr2","footnote_tail"]},block:{rules:["blockquote","code","fences","footnote","heading","hr","htmlblock","lheading","list","paragraph","table"]},inline:{rules:["autolink","backticks","del","emphasis","entity","escape","footnote_ref","htmltag","links","newline","text"]}}},ufe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{},block:{},inline:{}}},dfe={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","abbr2"]},block:{rules:["blockquote","code","fences","heading","hr","htmlblock","lheading","list","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","htmltag","links","newline","text"]}}},ffe={default:lfe,full:ufe,commonmark:dfe};function y4(t,e,n){this.src=e,this.env=n,this.options=t.options,this.tokens=[],this.inlineMode=!1,this.inline=t.inline,this.block=t.block,this.renderer=t.renderer,this.typographer=t.typographer}function is(t,e){typeof t!="string"&&(e=t,t="default"),e&&e.linkify!=null&&console.warn(`linkify option is removed. Use linkify plugin instead:

import Remarkable from 'remarkable';
import linkify from 'remarkable/linkify';
new Remarkable().use(linkify)
`),this.inline=new Cy,this.block=new sI,this.core=new g4,this.renderer=new aI,this.ruler=new ro,this.options={},this.configure(ffe[t]),this.set(e||{})}is.prototype.set=function(t){u4(this.options,t)};is.prototype.configure=function(t){var e=this;if(!t)throw new Error("Wrong `remarkable` preset, check name/content");t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enable(t.components[n].rules,!0)})};is.prototype.use=function(t,e){return t(this,e),this};is.prototype.parse=function(t,e){var n=new y4(this,t,e);return this.core.process(n),n.tokens};is.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};is.prototype.parseInline=function(t,e){var n=new y4(this,t,e);return n.inlineMode=!0,this.core.process(n),n.tokens};is.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};function hfe(t){const e="\\(",n="\\)";function r(s,c){const u=s.pos,d=s.posMax;let h=u;if(s.src.charAt(h)!==e[0]||s.src.charAt(h+1)!==e[1])return!1;h+=e.length;const p=s.src.slice(u,h);if(p.length>2)return!1;const g=h;let v=0;for(;h<d;){const y=s.src.charAt(h),_=y===n[0]&&s.src.charAt(h+1)===n[1];if(y==="{"&&(h===0||s.src.charAt(h-1)!=="\\"))v+=1;else if(y==="}"&&(h===0||s.src.charAt(h-1)!=="\\")){if(v-=1,v<0)return!1}else if(_&&v===0){const b=h,C=h+n.length;if(C-b===p.length){if(!c){const w=s.src.slice(g,b).replace(/[ \n]+/g," ").trim();s.push({type:"latex",content:w,block:!1,level:s.level})}return s.pos=C,!0}}h+=1}return c||(s.pending+=p),s.pos+=p.length,!0}const o={start:"$$",end:"$$"},i={start:"\\[",end:"\\]"};function a(s,c,u,d){const h=s.tShift[c],p=s.bMarks[c]+h;let g=s.src.slice(p,s.eMarks[c]),v=null;if(g.startsWith(o.start)?v=o:g.startsWith(i.start)&&(v=i),!v)return!1;let y=c,_=!1;for(;y<=u;){const C=s.tShift[y],w=s.bMarks[y]+C;if(g=s.src.slice(w,s.eMarks[y]),g.endsWith(v.end)&&(y>c||g!==v.end)){_=!0;break}y+=1}if(!_)return!1;if(d)return!0;const b=s.src.slice(p+v.start.length,s.eMarks[y]-v.end.length);return s.tokens.push({type:"latex_block",content:b.trim(),lines:[c,y],level:s.level}),s.line=y+1,!0}t.inline.ruler.push("latex",r,{}),t.block.ruler.after("fences","latex_block",a,{})}function pfe(t){return t.replaceAll(/(\n\n\$\$.*?\$\$) *(\n\n)/g,"$1$2")}function mfe(t){return[gfe,Da("kill-post-process-latex-double-dollar")?null:pfe].filter(n=>n!==null).reduce((n,r)=>r(n),t)}const q_="\\[",zR="\\]";function gfe(t){return t.includes(q_)?t.replaceAll(q_,`

${q_}`).replaceAll(zR,`${zR}

`):t}const Gh=new is;Gh.use(hfe);Gh.inline.ruler.enable(["text","emphasis","links","backticks","sup","sub","latex","del"],!0);Gh.block.ruler.enable(["list","paragraph","heading","hr","fences","table","blockquote","latex_block"],!0);Gh.core.ruler.enable(["block","inline","references"],!0);function vfe(t){const[e="",...n]=t.replace(gy,"").split(b0);return{index:e,title:n.join(b0)}}function b4(t,e={}){const n=[];let r=null,o=!1,i=!1,a=!1;for(const s of t)switch(s.type){case"text":case"sup":case"sub":if("content"in s&&s.content){const c={},u=s.content.startsWith(gy)?{type:"citation",props:{index:"",title:"",url:"",iconUrl:null,publisher:null}}:{type:"text",props:{text:s.content}};if(u.type==="text"&&(r&&(u.props.link=r),o&&(c.bold=!0),i&&(c.italic=!0),a&&(c.strikethrough=!0),s.type==="text"&&(u.props.text=u.props.text.replaceAll("\\$","$")),s.type==="sup"&&(c.sup=!0),s.type==="sub"&&(c.sub=!0),Object.keys(c).length>0&&(u.props.annotations=c)),u.type==="citation"&&r){const{citations:d}=e,{index:h,title:p}=vfe(s.content),g=d==null?void 0:d.find(v=>v.index===h);u.props={index:h,title:(g==null?void 0:g.title)??p,url:r.url,iconUrl:null,publisher:null}}n.push(u)}break;case"code":"content"in s&&n.push({type:"text",props:{text:s.content,annotations:{code:!0}}});break;case"latex":"content"in s&&n.push({type:"latex",props:{content:s.content}});break;case"strong_open":o=!0;break;case"strong_close":o=!1;break;case"em_open":i=!0;break;case"em_close":i=!1;break;case"del_open":a=!0;break;case"del_close":a=!1;break;case"link_open":r="href"in s?{url:ja(s.href)}:null;break;case"link_close":r=null;break}return n}function Vp(t,e){return t!==void 0&&t.type==="inline"&&"children"in t?b4(Array.isArray(t.children)?t.children:[],e):null}function yfe(t,e){let n=0;function r(){var a;let i=t[n];if(!i)return null;if(i.type==="hr")return n+=1,i=t[n],{type:"hr"};if(i.type==="latex_block")return n+=1,"content"in i?{type:"latex",props:{content:{type:"text",props:{text:i.content}}}}:null;if(i.type==="paragraph_open"){n+=1,i=t[n],n+=1;const s=Vp(i,e);return s?{type:"paragraph",props:{items:s}}:null}if(i.type==="blockquote_open"){const s={type:"blockquote",props:{items:[]}};for(n+=1,i=t[n];(i==null?void 0:i.type)!=="blockquote_close";){const c=r();c&&"type"in c&&s.props.items.push(c),i=t[n]}return n+=1,s}if(i.type==="ordered_list_open"||i.type==="bullet_list_open"){const s={type:"list",props:{items:[],ordered:i.type==="ordered_list_open"}};"order"in i&&(s.props.start=i.order);const c=i.type==="ordered_list_open"?"ordered_list_close":"bullet_list_close";for(n+=1,i=t[n];(i==null?void 0:i.type)!==c;){const u=r(),d=[];if(u&&Array.isArray(u)){for(const h of u)(h.type==="paragraph"||h.type==="list"||h.type==="code"||h.type==="heading")&&d.push(h);s.props.items.push(d)}i=t[n]}return n+=1,s}if(i.type==="list_item_open"){const s=[];for(n+=1,i=t[n];(i==null?void 0:i.type)!=="list_item_close";){const c=r();if(c)for(const u of[c].flat())(u.type==="paragraph"||u.type==="list"||u.type==="code"||u.type==="heading")&&s.push(u);i=t[n]}return n+=1,s}if(i.type==="heading_open"){const s="hLevel"in i?i.hLevel:1;n+=1,i=t[n],n+=1;const c=Vp(i,e);return c?{type:"heading",props:{level:s,items:c}}:null}if(i.type==="fence"&&"content"in i){const s={type:"code",props:{content:{type:"text",props:{text:mle(i.content)}},language:"params"in i?i.params:void 0}};return n+=1,s}if(i.type==="table_open"){const s=[],c=[];for(;(i==null?void 0:i.type)!=="table_close";){if((i==null?void 0:i.type)==="th_open"){n+=1,i=t[n];const u=Vp(i,e);u&&s.push(u)}if((i==null?void 0:i.type)==="tr_open"&&!i.lines&&c.push([]),(i==null?void 0:i.type)==="td_open"){n+=1,i=t[n];const u=Vp(i,e);u&&((a=c[c.length-1])==null||a.push(u))}n+=1,i=t[n]}return{type:"table",props:{columns:s,data:c}}}return i.type==="inline"&&"children"in i?(n+=1,b4(i.children??[])):(n+=1,null)}const o=[];for(;n<t.length;){const i=r();i&&!Array.isArray(i)&&o.push(i)}return o}function S0(t,e={}){const n=Gh.parse(mfe(t),{});return yfe(n,e)}const _4=1.2;function as(t={},e={}){return{start:{...t,opacity:0},end:n=>({...e,opacity:1,transition:{delay:n,ease:"easeInOut",duration:_4}})}}const bfe=as();function _fe(t){const{items:e,shouldAnimate:n,BlockRenderer:r,delay:o}=t;return f.jsx(Ae.blockquote,{className:"flex flex-col gap-3 border-s-2 border-foreground-300 ps-3",variants:bfe,initial:n?"start":"end",animate:"end",custom:o,children:f.jsx(r,{blocks:e,shouldAnimate:n})})}function la(t){m.useEffect(()=>(window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}),[t])}function Cfe(t){const e=F(Ei),{openMediaViewer:n}=ca(),r=m.useCallback(()=>{if(!t)return[];const a=e.find(c=>c.id===t);if(!a||a.author!=="ai")return[];const s=[];for(const c of a.content)if(c.type==="card"){if(c.card.type==="image"){const u=c.card;s.push(...u.images)}else if(c.card.type==="video"){const u=c.card;s.push(...u.videos)}}return s},[e,t]),o=m.useCallback(a=>r().some(c=>c.source.url===a),[r]),i=m.useCallback(a=>{const s=r(),c=s.findIndex(d=>d.source.url===a);if(c===-1)return;const u=s.map(d=>"image"in d?{type:"image",url:d.image.url,thumbnailUrl:d.image.thumbnailUrl,altText:d.image.altText,initLoading:!0,source:{title:d.source.title,url:d.source.url,iconUrl:d.source.iconUrl??void 0}}:{type:"video",url:d.video.url,isShort:d.video.isShort,bestMomentIndex:d.bestMomentIndex,moments:d.moments,source:{title:d.video.title,url:d.source.url,iconUrl:d.source.iconUrl??void 0}});n({currentMediaIndex:c,media:u})},[r,n]);return{checkMediaLink:o,openMediaLink:i}}function hh({onOutsideEvent:t,elements:e,shouldAttachListeners:n=!0,includeScroll:r=!0,invokeOnce:o=!0,includeFocus:i=!0}){m.useEffect(()=>{const a=s=>{e.some(u=>{var d;return(d=u.current)==null?void 0:d.contains(s.target)})||t()};return n&&(document.addEventListener("mousedown",a,{once:o}),r&&document.addEventListener("scroll",a,!0),i&&document.addEventListener("focusin",a,!0)),()=>{document.removeEventListener("mousedown",a),r&&document.removeEventListener("scroll",a,!0),i&&document.removeEventListener("focusin",a,!0)}},[n,r,e,o,i,t])}const lI=m.createContext(void 0),Sfe=as();function wfe(t){const{url:e,title:n,index:r,shouldAnimate:o,delay:i}=t,a=m.useContext(lI),s=de("citation-media-open"),c=m.useId(),u=m.useId(),{checkMediaLink:d,openMediaLink:h}=Cfe(a??null),p=iv("html"),g=F(mt),[v,y]=m.useState(!1),[_,b]=m.useState(null),{refs:C,floatingStyles:w}=YO({placement:"top",elements:{reference:_},middleware:[_h(8),rv(),Ch()]});hh({onOutsideEvent:()=>y(!1),elements:[C.floating],includeScroll:!0,invokeOnce:!0}),la(x=>{(x.key==="Escape"||x.key==="Control")&&y(A=>(A&&_ instanceof HTMLElement&&_.focus(),!1))});const S=()=>{if(s&&d(e)){h(e);return}y(!0)},E=()=>{bn({source:"citationLink",conversationId:g,messageId:a,destination:Of(e)}),y(!1)},I=Am(e);return f.jsxs(Ae.span,{initial:o?"start":"end",animate:"end",variants:Sfe,custom:i,className:"mx-0.5 inline-block h-5 w-4 pb-1 align-middle","data-copy":"false",children:[f.jsx("button",{id:u,"aria-expanded":v,"aria-controls":c,"aria-label":ie("chat.citationPopoverButtonLabel",{citationNumber:r}),ref:b,type:"button",className:q("mx-px flex size-full items-center justify-center rounded-md bg-spot-peach-200 pt-px text-foreground-800 text-3xs hover:bg-spot-peach-250 focus:bg-spot-peach-250 dark:bg-slate-700 hover:dark:bg-midnight-600",v&&"pointer-events-none"),onClick:S,children:r}),v&&f.jsx("span",{id:c,role:"dialog","aria-labelledby":u,className:q("absolute w-screen px-4 max-sm:mb-2 sm:w-[350px] sm:px-0",qt.citations),style:w,ref:C.setFloating,children:f.jsx(Ae.span,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{scale:{duration:.2},opacity:{duration:.15}},className:"origin-top-left",style:yw,children:f.jsx("a",{onClick:E,className:"flex w-full rounded-2xl border border-stroke-100 bg-background-100 p-3 shadow-lg dark:bg-background-250",href:Of(e),target:"_blank",rel:p,children:f.jsxs("span",{className:"w-full flex-1 space-y-0.5",children:[f.jsx("span",{className:"line-clamp-1 text-xs-strong",children:n}),f.jsx("span",{className:"line-clamp-1 flex items-center gap-1.5 text-foreground-600 text-2xs",children:I})]})})})})]},"citation")}const Efe="https://#timestamp-",Tfe="https://#settings:privacy";function C4(t){return t?t.startsWith(Efe)?"VideoCitation":t.startsWith(Tfe)?"PrivacySettings":"Unknown":"Unknown"}function Ife(t){return C4(t)!=="Unknown"}function Afe(t){if(!/^\d{2}:\d{2}:\d{2}$/.test(t))return t;const[n,r,o]=t.split(":");return n==="00"?(r==null?void 0:r.charAt(0))==="0"?`${r.substring(1)}:${o}`:`${r}:${o}`:(n==null?void 0:n.charAt(0))==="0"?`${n.substring(1)}:${r}:${o}`:t}const kfe=as(),$R="font-bold text-salmon-550 dark:text-midnight-400 hover:underline text-start align-top";function xfe(t){const{url:e,text:n,shouldAnimate:r,delay:o}=t,i=m.useContext(lI),a=F(mt),s=C4(e),c=async()=>{switch(s){case"VideoCitation":await Rae.run({url:e});break;case"PrivacySettings":await Oae.run({url:e});break}Y.trackEvent({name:"interaction",data:{eventName:"localCitationClick",eventInfo_messageId:i??"",eventInfo_conversationId:a??"",eventInfo_citationType:s}})};m.useEffect(()=>{Y.trackEvent({name:"interaction",data:{eventName:"localCitationImpression",eventInfo_messageId:i??"",eventInfo_conversationId:a??"",eventInfo_citationType:s}})},[i,a,s]);const u=Afe(n);return r?f.jsx(Ae.button,{className:$R,onClick:c,"data-url":e,initial:"start",animate:"end",variants:kfe,custom:o,children:u}):f.jsx("button",{type:"button",className:$R,onClick:c,"data-url":e,children:u})}const GR=as(),KR="font-bold text-salmon-550 dark:text-midnight-400 hover:underline text-start align-top";function ki(t){const{items:e,shouldAnimate:n,dangerouslyUseHtml:r,shouldTestForUrl:o=!0}=t,i=Se(gj),a=Se(Or);return f.jsx(f.Fragment,{children:e.map((s,c)=>{var _;if(s.type==="citation"){const{title:b,url:C,index:w,delay:S}=s;return f.jsx(wfe,{title:b,url:C,index:w,shouldAnimate:n,delay:S},c)}if(s.type==="italic"||s.type==="bold"||s.type==="strikethrough"||s.type==="sup"||s.type==="sub"||s.type==="code"){const b=f.jsx(ki,{items:s.items,shouldAnimate:n,dangerouslyUseHtml:r});return s.type==="italic"?f.jsx("em",{children:b},c):s.type==="bold"?f.jsx("strong",{children:b},c):s.type==="strikethrough"?f.jsx("del",{children:b},c):s.type==="sup"?f.jsx("sup",{children:b},c):s.type==="sub"?f.jsx("sub",{children:b},c):f.jsx(Ae.code,{className:"font-ligatures-none mx-0.5 rounded-[4px] border border-stroke-300 bg-spot-peach-200 px-1 py-px font-mono text-foreground-800 text-sm dark:bg-midnight-900",initial:n?"start":"end",animate:"end",variants:GR,custom:s.delay,children:b},c)}if(s.type!=="word")return null;const{word:u,url:d,delay:h,format:p}=s,v=Rfe({word:u,url:d,testForUrl:!p&&o}),y={initial:"start",animate:"end",variants:GR,custom:h,...r===!0||p==="latexAsHtml"?{dangerouslySetInnerHTML:{__html:((_=window.copilotTrustedTypesPolicy)==null?void 0:_.createHTML(u))??""}}:{children:u}};if(v.url){if(Ife(v.url))return f.jsx(xfe,{url:v.url,text:v.word,shouldAnimate:n,delay:h},c);const b=()=>{i(v.url),a("confirm-link-navigation")};return f.jsxs(m.Fragment,{children:[n?f.jsx(Ae.button,{className:KR,onClick:b,"data-url":v.url,...y}):f.jsx("button",{type:"button",className:KR,onClick:b,"data-url":v.url,...y}),v.suffix&&v.suffix]},c)}return n?f.jsx(Ae.span,{...y},c):r===!0||p==="latexAsHtml"?f.jsx("span",{...y},c):f.jsx(m.Fragment,{children:u},c)})})}function Rfe({word:t,url:e,testForUrl:n}){return e?{url:e,word:t}:n?h9(t):{word:t}}function Si(t){var e,n;return(n=(e=Ee.instance().config().styleOverrides)==null?void 0:e.typography)==null?void 0:n[t]}function ph(t){var e,n;return(n=(e=Ee.instance().config().styleOverrides)==null?void 0:e.padding)==null?void 0:n[t]}function Pfe(t){const{shouldAnimate:e,items:n}=t;return f.jsx("h1",{className:q(Si("h1")??"text-xl-medium","[&:not(:first-child)]:pt-6"),children:f.jsx(ki,{shouldAnimate:e,items:n})})}function Ofe(t){const{shouldAnimate:e,items:n}=t;return f.jsx("h2",{className:q(Si("h2")??"text-lg-medium","[&:not(:first-child)]:pt-3.5","pb-1"),children:f.jsx(ki,{shouldAnimate:e,items:n})})}function Nfe(t){const{shouldAnimate:e,items:n}=t;return f.jsx("h3",{className:q(Si("h3")??"text-md-strong","pb-1","[&:not(:first-child)]:pt-3.5"),children:f.jsx(ki,{shouldAnimate:e,items:n})})}function Mfe(t){const{shouldAnimate:e,items:n}=t;return f.jsx("h4",{className:q(Si("h4")??"text-base-strong"),children:f.jsx(ki,{shouldAnimate:e,items:n})})}function Lfe(t){const{shouldAnimate:e,items:n}=t;return f.jsx("h5",{className:q(Si("h5")??"text-base-medium"),children:f.jsx(ki,{shouldAnimate:e,items:n})})}function Dfe(t){const{shouldAnimate:e,items:n}=t;return f.jsx("h6",{className:q(Si("h6")??"text-base"),children:f.jsx(ki,{shouldAnimate:e,items:n})})}const jfe=[Pfe,Ofe,Nfe,Mfe,Lfe,Dfe];function Ufe(t){const{shouldAnimate:e,items:n,level:r}=t,o=jfe[r-1];return o?f.jsx(o,{shouldAnimate:e,items:n}):null}const Ffe=as(),WR="relative pb-6 w-full after:border-b after:border-stroke-300 after:w-full after:absolute after:mt-3";function Bfe(t){const{delay:e,shouldAnimate:n}=t;return n?f.jsx(Ae.div,{className:WR,initial:"start",animate:"end",variants:Ffe,custom:e}):f.jsx("div",{className:WR})}const Hfe=as();function Vfe(t){const{content:e,shouldAnimate:n,delay:r,dangerouslyUseHtml:o}=t;return f.jsx(Ae.div,{initial:n?"start":"end",animate:"end",custom:r,variants:Hfe,children:f.jsx("div",{className:"horizontal-scrollbar overflow-x-auto whitespace-pre pb-3 pt-4 text-center",children:f.jsx(ki,{items:e,shouldAnimate:n,dangerouslyUseHtml:o})})})}const qR="relative list-outside marker:text-foreground-750 dark:marker:text-foreground-600 flex flex-col",zfe=as();function $fe(t){const{items:e,ordered:n,start:r,shouldAnimate:o,BlockRenderer:i}=t,a=e.map(({items:s,delay:c},u)=>f.jsx(Ae.li,{initial:o?"start":"end",animate:"end",variants:zfe,custom:c,className:"ps-2",children:f.jsx(i,{blocks:s,shouldAnimate:o})},u));return n?f.jsx("ol",{start:r,className:q(qR,"ms-5 marker:normal-nums marker:text-sm-strong"),children:a}):f.jsx("ul",{className:q(qR,"ms-4 px-1"),children:a})}function Gfe(t){const{items:e,shouldAnimate:n}=t;return f.jsx("p",{children:f.jsx("span",{className:q("font-ligatures-none",Si("aiMessageDefault")),children:f.jsx(ki,{items:e,shouldAnimate:n})})})}const Kfe=as();function Wfe(t){const{columns:e,data:n,shouldAnimate:r}=t;return f.jsxs("div",{className:"relative max-w-full",children:[f.jsx("div",{className:"my-6 max-w-full overflow-x-auto rounded-lg bg-white/25 dark:bg-black/25",children:f.jsxs("table",{className:"t-table",style:{borderSpacing:0},children:[f.jsx("thead",{children:f.jsx("tr",{children:e.map((o,i)=>f.jsx(YR,{type:"head",items:o,shouldAnimate:r},i))})}),f.jsx("tbody",{children:n.map((o,i)=>f.jsx("tr",{children:o.map((a,s)=>f.jsx(YR,{type:"data",items:a,shouldAnimate:r},s))},i))})]})}),f.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-lg border border-stroke-300 dark:border-stroke-250"})]})}function YR(t){var i;const{type:e,items:n,shouldAnimate:r}=t,o=e==="head"?Ae.th:Ae.td;return f.jsx(o,{variants:Kfe,initial:r?"start":"end",animate:"end",custom:((i=n[0])==null?void 0:i.delay)??0,children:f.jsx(ki,{shouldAnimate:r,items:n})})}const qfe=m.lazy(()=>T(()=>import("./code-gJ7Bitpl.js"),__vite__mapDeps([224,1,225])));function mh(t){const{blocks:e,shouldAnimate:n}=t;return f.jsx(f.Fragment,{children:e.map((r,o)=>{const i=`${r.type}-${o}`;switch(r.type){case"paragraph":return f.jsx(Gfe,{items:r.items,shouldAnimate:n},i);case"list":return f.jsx($fe,{ordered:r.ordered,start:r.start,items:r.items,BlockRenderer:mh,shouldAnimate:n},i);case"heading":return f.jsx(Ufe,{items:r.items,level:r.level,shouldAnimate:n},i);case"code":return f.jsx(qfe,{content:r.content,original:r.original,delay:r.delay,shouldAnimate:n,language:r.language,dangerouslyUseHtml:r.dangerouslyUseHtml},i);case"latex":return f.jsx(Vfe,{content:r.content,delay:r.delay,shouldAnimate:n,dangerouslyUseHtml:r.dangerouslyUseHtml},i);case"table":return f.jsx(Wfe,{columns:r.columns,data:r.data,shouldAnimate:n},i);case"blockquote":return f.jsx(_fe,{items:r.items,delay:r.delay,shouldAnimate:n,BlockRenderer:mh},i);case"hr":return f.jsx(Bfe,{delay:r.delay,shouldAnimate:n},i);default:return null}})})}const QR={getValue:()=>0,queueUpdate:()=>{}},JR=()=>{};function Yfe(t){const{artifact:e}=t;switch(e.type){case"text":{const n=S0(e.content),r=uh(n,QR,JR);return f.jsx(mh,{blocks:r,shouldAnimate:!1})}case"code":{const{language:n,content:r}=e,o=`\`\`\`${n}
${r}
\`\`\``,i=S0(o),a=uh(i,QR,JR);return f.jsx(mh,{blocks:a,shouldAnimate:!1})}default:return null}}function Qfe(t){const{activities:e}=t;return f.jsx("div",{className:"flex flex-col gap-4 overflow-y-auto",children:e.map((n,r)=>f.jsxs("div",{className:"flex flex-col gap-4 pt-3",children:[f.jsx("h3",{children:n.title}),n.artifacts.map((o,i)=>f.jsx(Yfe,{artifact:o},i))]},r))})}const Jfe=G(void 0);function Xfe(){const[t,e]=et(Jfe),n=!!t,r=()=>{e(void 0)};return!t||t.length===0?null:f.jsx(Ja,{className:"w-96 p-4",isOpen:n,variant:"drawer",onClose:r,children:f.jsx(Qfe,{activities:t})})}function Sy(t){const e=m.useRef(null),{isOpen:n,headerText:r,fullBleed:o,children:i,onClose:a,className:s,closeButtonTestId:c}=t,u=m.useRef(null),{t:d}=Fe(),h=m.useId();hh({onOutsideEvent:n&&a!==void 0?a:()=>{},elements:[u],includeScroll:!1,includeFocus:!1});const{modalAttributes:p}=VO({trapFocus:!0,legacyTrapFocus:!0,alwaysFocusable:!0});return m.useEffect(()=>{var g,v;n?(g=e.current)==null||g.showModal():(v=e.current)==null||v.close()},[n]),m.useEffect(()=>{const g=e.current;if(!g)return()=>{};const v=()=>{a==null||a()};return g.addEventListener("cancel",v),()=>{g.removeEventListener("cancel",v)}},[a]),f.jsx(Ae.dialog,{className:"fixed inset-0 m-auto rounded-4xl border border-white/10 bg-background-150 text-foreground-800 shadow-xl backdrop:bg-stone-850/30 dark:bg-background-250 dark:backdrop:bg-midnight-850/70",animate:n?"animate":"initial",initial:"initial",exit:"exit",variants:{initial:tt,animate:Rt},transition:{duration:bo.default,ease:"easeInOut"},ref:e,role:"dialog","aria-modal":"true","aria-labelledby":r?h:void 0,...n?p:{},children:n&&f.jsxs("div",{"data-modal-overlay":"true",className:q("flex min-h-[150px] flex-col gap-3",!o&&"p-6",s),ref:u,children:[!o&&f.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r&&f.jsx("h2",{id:h,className:"text-foreground-800 text-md-strong",children:r}),a&&f.jsx(De,{variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:d("common.closeText"),"aria-label":d("common.closeText"),onClick:a,testId:c,children:f.jsx(yo,{className:"size-5"})})]}),i]})})}const Zfe="XF86Back",BIe="XF86BTVoice",ehe=461;function the(t){return t.key===Zfe||t.keyCode===ehe}function nhe(t){const{className:e,children:n}=t;return f.jsx("span",{className:q("inline-block h-4 min-w-4 rounded-md bg-spot-peach-200 px-1 pt-px text-center leading-4 text-foreground-800 text-3xs dark:bg-slate-750",e),children:n})}const rhe={default:"border-black/10 dark:border-white/10",accent:"border-saddle-300 dark:border-slate-650"};function uI(t){const{horizontalMargin:e=!0,verticalMargin:n=!0,color:r="default",className:o}=t;return f.jsx("div",{className:q("border-t-[1px]",e&&"mx-2",n&&"my-2",rhe[r],o)})}const ohe=m.lazy(()=>T(()=>import("./index-B9eIBC9o.js").then(t=>t.i),__vite__mapDeps([226,1,227]))),ihe="focus-within:bg-neutral-50/5 before:pointer-events-none before:absolute before:inset-0 before:rounded-3xl before:border before:border-transparent focus-within:before:border-[1px] focus-within:before:border-[rgba(255,255,255,0.1)]";function ahe(){var d,h;const t=F(NV),[e,n]=et(d2),r=m.useContext(lI),o=F(mt),i=iv("html"),a=((d=Ee.instance().config().composer)==null?void 0:d.largeScreen)===!0&&((h=Ee.instance().config().composer)==null?void 0:h.voiceOnly)===!0,s=()=>{n(null),dt({source:"citationOverflowModal",scenario:"close"})},{focusable:c}=ju({isFocusBoundary:!0});la(p=>{the(p)&&(p.stopPropagation(),s())});const u=m.useMemo(()=>new Map((e??[]).map((p,g)=>[g,m.createRef()])),[e]);return f.jsx(Sy,{isOpen:t,onClose:a?void 0:s,headerText:`${e==null?void 0:e.length} ${ie("chat.references")}`,className:q(a?"max-h-[40vh]":"max-h-[80vh]",a?"w-[480px]":"w-[440px]","mx-4 px-2"),children:f.jsx(Z0.Provider,{value:c.focusKey??"",children:f.jsx("div",{className:q("flex flex-col gap-2 overflow-y-auto",a?"no-scrollbar":"t-custom-scrollbar"),children:e==null?void 0:e.map((p,g)=>f.jsx(S4,{ref:u.get(g),index:g,citation:p,currentConversationId:o,messageId:r,isLargeScreenVoiceComposer:a,citationsModalData:e,rel:i},g))})})})}const S4=m.forwardRef(({index:t,citation:e,currentConversationId:n,messageId:r,citationsModalData:o,isLargeScreenVoiceComposer:i=!1,rel:a},s)=>{const{title:c,url:u,publisher:d}=e,{refCallback:h,focusable:p}=ju({autoRestoreFocus:!0,forceFocus:!0,scrollIntoViewOnFocus:!0},s);return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:q(i&&ihe,"group relative flex flex-row items-center gap-2 rounded-3xl p-2"),children:[f.jsxs("a",{rel:a,ref:h,className:"flex flex-1 flex-col items-start gap-2 py-1","data-spatial-navigation-autofocus":!0,href:u,"data-spatial-focus-key":p.focusKey,target:"_blank",onClick:g=>{if(i){g.preventDefault();return}dt({source:"citationModalLink",customData:JSON.stringify({destination:Of(u),conversationId:n,messageId:r})})},children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(nhe,{children:e.index}),f.jsx("div",{className:"text-foreground-550 text-xs",children:d??Am(u)})]}),f.jsx("div",{children:c}),f.jsx("div",{className:"text-foreground-550 text-xs",children:Am(u)})]}),i&&f.jsx(m.Suspense,{fallback:f.jsx("span",{}),children:f.jsx("div",{className:"flex size-28 items-center justify-center rounded-2xl bg-white opacity-0 group-focus-within:opacity-100",children:f.jsx(ohe,{value:u,size:86})})})]}),t<o.length-1&&f.jsx(uI,{horizontalMargin:!1,verticalMargin:!1,className:"my-4"})]})});S4.displayName="CitationItem";const she=m.lazy(()=>T(()=>Promise.resolve().then(()=>o4),void 0));async function che(t){await Pr({path:t,args:{options:{method:"DELETE"}}})}function lhe(){const{t}=Fe(),e=Se(f2),{trigger:n,isMutating:r}=pw("/conversations/history",che),o=async()=>{await n(),e(null)},i=()=>{e(null)};return f.jsxs(Sy,{isOpen:!0,onClose:i,headerText:t("settings.clearHistory.header"),className:"min-h-[328px] w-full max-w-[400px]",children:[f.jsx("p",{className:"text-start",children:t("settings.clearHistory.description")}),f.jsx(De,{title:t("settings.clearHistory.confirm"),color:"default",size:"56-xl",variant:"rect",className:"mt-3 w-full text-system-red-550 dark:text-system-red-350",onClick:o,disabled:r,children:r?f.jsx(she,{type:"spinnerThemed",className:"size-6"}):t("settings.clearHistory.confirm")}),f.jsx(De,{title:t("common.cancel"),color:"strong",size:"56-xl",variant:"rect",className:"mt-3 w-full",onClick:i,children:t("common.cancel")})]})}const w4=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M17.7545 14.0002C18.9966 14.0002 20.0034 15.007 20.0034 16.2491V16.8245C20.0034 17.7188 19.6838 18.5836 19.1023 19.263C17.5329 21.0965 15.1457 22.0013 12.0004 22.0013C8.8545 22.0013 6.46849 21.0962 4.90219 19.2619C4.32242 18.583 4.00391 17.7195 4.00391 16.8267V16.2491C4.00391 15.007 5.01076 14.0002 6.25278 14.0002H17.7545ZM17.7545 15.5002H6.25278C5.83919 15.5002 5.50391 15.8355 5.50391 16.2491V16.8267C5.50391 17.3624 5.69502 17.8805 6.04287 18.2878C7.29618 19.7555 9.26206 20.5013 12.0004 20.5013C14.7387 20.5013 16.7063 19.7555 17.9627 18.2876C18.3117 17.8799 18.5034 17.361 18.5034 16.8245V16.2491C18.5034 15.8355 18.1681 15.5002 17.7545 15.5002ZM12.0004 2.00488C14.7618 2.00488 17.0004 4.24346 17.0004 7.00488C17.0004 9.76631 14.7618 12.0049 12.0004 12.0049C9.23894 12.0049 7.00036 9.76631 7.00036 7.00488C7.00036 4.24346 9.23894 2.00488 12.0004 2.00488ZM12.0004 3.50488C10.0674 3.50488 8.50036 5.07189 8.50036 7.00488C8.50036 8.93788 10.0674 10.5049 12.0004 10.5049C13.9334 10.5049 15.5004 8.93788 15.5004 7.00488C15.5004 5.07189 13.9334 3.50488 12.0004 3.50488Z"})),HIe=Object.freeze(Object.defineProperty({__proto__:null,default:w4},Symbol.toStringTag,{value:"Module"})),Y_="relative size-full rounded-full aspect-square",XR="flex items-center justify-center uppercase",Q_="after:absolute after:-inset-px after:rounded-full after:border-[0.5px] after:border-black/10 dark:after:border-white/20";function uhe(t){const{firstName:e,imgSrc:n,nameSizeClass:r,altText:o}=t;return n?f.jsx("img",{className:q("overflow-hidden object-cover",Y_,Q_),src:n,alt:o??ie("common.profileImage")}):e?f.jsx("div",{className:q(Y_,XR,Q_,r??"text-md"),children:f.jsx("div",{children:e[0]})}):f.jsx("div",{className:q(Y_,XR,Q_),children:f.jsx(w4,{className:"size-6 fill-foreground-800","alt-text":o??ie("common.profileImage")})})}function dhe(){const t=de("aad-student"),e=F(LY),{t:n}=Fe(),r=t&&e,o=t&&e===void 0,i=n(r?"entraRedirect.guestTitle":"entraRedirect.workTitle"),a=n(r?"entraRedirect.guestDescription":"entraRedirect.workDescription");return{isStudentEnabled:r,isLoadingEnabled:o,workTitle:i,workDescription:a,titleGapClass:r?"mb-6 sm:mb-10":"mb-8 sm:mb-14",eventInfoScenario:r?"Student":"Enterprise",getPageTitle:()=>n(r?"aadStudent.title":"entraRedirect.pageTitle"),getPageSubTitle:p=>r?n("aadStudent.subtitle",{email:p}):void 0,getWorkButtonText:p=>r?n("aadStudent.continueAsGuestButtonText"):n("entraRedirect.goToWorkButton",{redirectUrl:p})}}function fhe(){var k;const t=F(xQ),e=F(Yu),n=F(ar),r=Ac(),o=to(),{isStudentEnabled:i,isLoadingEnabled:a,workTitle:s,workDescription:c,titleGapClass:u,eventInfoScenario:d,getPageTitle:h,getPageSubTitle:p,getWorkButtonText:g}=dhe(),v=!i&&(n==null?void 0:n.email);m.useEffect(()=>{t&&Qn(Vm,JSON.stringify(t))},[t]);let y=!1;try{y=JSON.parse(hn(Vm)??"false")}catch(U){console.error("Failed to parse authentication status:",U),y=!1}const _=t?e:!y&&!!((k=window.cwcRedirect)!=null&&k.cwcRedirectUrl),[b,C]=m.useState(_),[w,S]=m.useState(),{t:E}=Fe(),{login:I,logout:x}=id(),A=(U,O,$)=>ja(`${U}?fromCode=cmcv2&redirectId=${O}${$?`&login_hint=${$}`:""}`),N=async()=>{let U=crypto.randomUUID().replace(/-/g,"").toUpperCase(),O=cb,$="AadUnknown";if(e){const J=await tR();O=A(cb,U,J==null?void 0:J.username)}else window.cwcRedirect&&(O=window.cwcRedirect.cwcRedirectUrl,U=window.cwcRedirect.redirectId,$=window.cwcRedirect.chatEligibility);Ee.instance().config().entraRedirectModalBehaviour==="new-tab"?window.open(ja(O),"_blank","noopener,noreferrer"):uy(ja(O)),Y.trackEvent({name:"interaction",data:{eventName:"copilotEnterpriseRedirect",...w,eventInfo_traceId:U,eventInfo_redirectUrl:O,eventInfo_chatEligibility:$}})},R=async()=>{Y.trackEvent({name:"interaction",data:{eventName:"copilotStudentRedirectSignOut",...w}}),await x()},z=async()=>{Y.trackEvent({name:"interaction",data:{eventName:"copilotEnterpriseRedirectSwitchAccount",eventInfo_scenario:d,...w}}),C(!1),r?(await x(!1),await o({from:"/",to:"/login"})):await I({provider:"microsoft"})},P=async()=>{Y.trackEvent({name:"interaction",data:{eventName:t?"copilotEnterpriseRedirectSignOut":"copilotEnterpriseRedirectContinueSignedOut",...w}}),t?await x():C(!1)};if(m.useEffect(()=>{C(_),_&&(async()=>{var $;let O={};if(e){const K=await tR();O={userAadId:($=K==null?void 0:K.idTokenClaims)==null?void 0:$.oid,userAadTenantId:K==null?void 0:K.tenantId}}else window.cwcRedirect&&(O={userAadId:window.cwcRedirect.userId,userAadTenantId:window.cwcRedirect.tenantId});Y.trackEvent({name:"system",data:{eventName:"copilotEnterpriseRedirectImpression",eventInfo_redirectReason:e?"AAD":"CWC",eventInfo_scenario:d,...O}}),S(O)})().catch(console.error)},[e,_,d]),!b)return null;const X=!y&&window.cwcRedirect?new URL(window.cwcRedirect.cwcRedirectUrl).hostname:cb,M=p(n==null?void 0:n.email);return f.jsxs(Zn,{id:String(b),duration:0,mode:"sync",className:q("fixed inset-0",qt.modal),children:[f.jsx(ia,{forceGradient:!0}),f.jsx("main",{className:"relative m-auto flex size-full max-w-chat flex-col items-center justify-center overflow-y-auto p-4 pb-8 pt-20 sm:py-4",children:a?f.jsx(kt,{className:"size-8"}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"mb-9",children:f.jsx($h,{className:"size-12"})}),f.jsx("h1",{className:q("mb-8 w-full whitespace-pre-wrap break-words px-4 text-center text-2xl sm:mb-14",u),children:h()}),i&&M&&f.jsx("p",{className:"mb-10 w-full whitespace-pre-wrap break-words px-4 text-center text-base sm:mb-16",children:M}),f.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 md:gap-16",children:[f.jsx(ZR,{title:s,description:c,onClick:i?R:N,children:f.jsxs("div",{className:"space-y-1",children:[f.jsx("p",{children:g(X)}),v&&f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:"relative size-5",children:f.jsx(uhe,{firstName:n.firstName??n.givenName??void 0,imgSrc:n.imgSrc,nameSizeClass:"text-xs"})}),f.jsx("p",{className:"text-xs",children:n.email})]})]})}),f.jsx(ZR,{title:E("entraRedirect.personalTitle"),description:E("entraRedirect.personalDescription"),onClick:z,children:f.jsx("p",{className:"text-xs",children:E("entraRedirect.switchToPersonalButton")})})]}),!i&&f.jsx("div",{className:"mt-8 sm:mt-12",children:f.jsx(Mo,{i18nKey:t?"entraRedirect.signOut":"entraRedirect.continueSignedOut",components:{[t?"entraSignOut":"entraContinue"]:f.jsx("button",{type:"button",className:"underline",onClick:P,children:E(t?"entraRedirect.signOut":"entraRedirect.continueSignedOut")})}})})]})})]})}function ZR({title:t,onClick:e,description:n,children:r}){return f.jsxs("div",{className:"flex flex-col justify-between rounded-4xl bg-white/70 p-4 dark:bg-midnight-700/70 md:p-6 md:pb-8",children:[f.jsxs("div",{children:[f.jsx("div",{className:"mb-2.5 text-lg",children:t}),f.jsx("p",{className:"mb-6 text-sm",children:n})]}),f.jsx(De,{color:"default",variant:"rect",title:t,onClick:e,children:r})]})}function sd(t,e=!0,n=!1){m.useEffect(()=>{var r;e&&((r=t.current)==null||r.focus({preventScroll:n}))},[t,e,n])}const hhe=m.lazy(()=>T(()=>import("./index-B9eIBC9o.js").then(t=>t.i),__vite__mapDeps([226,1,227])));function phe(t){const{onClose:e,interceptedLink:n}=t,{t:r}=Fe(),o=m.useRef(null);return sd(o),la(i=>{(i.key==="Escape"||i.key==="Control")&&e()}),f.jsxs("div",{className:"flex w-[400px] max-w-[80vw] flex-col items-center p-4 text-center",children:[f.jsx("div",{className:"bg-white p-2",children:f.jsx(m.Suspense,{fallback:f.jsx("span",{}),children:f.jsx(hhe,{value:n,size:96})})}),f.jsx("h1",{className:"py-3 text-lg",children:r("composer.interceptedLink.title")}),f.jsx("p",{className:"w-full pb-7",children:f.jsx(Mo,{i18nKey:"composer.interceptedLink.description",components:{span:f.jsx("span",{className:"break-words underline"})},values:{link:n}})}),f.jsx(De,{ref:o,onClick:e,title:"close",variant:"pill",size:"48-lg",className:"w-full",children:r("common.closeText")})]})}const eP={translateY:"100%"},mhe={translateY:0};function ghe(t){const{children:e,id:n,onClose:r,className:o}=t,i=m.useRef(null);return la(a=>{const{current:s}=i;!s||!s.contains(document.activeElement)||a.key==="Escape"&&r()}),f.jsxs(f.Fragment,{children:[f.jsx(Ae.div,{initial:tt,animate:Rt,exit:tt,transition:h0,className:"fixed inset-0 bg-black/50"}),f.jsx(Ae.div,{id:n,initial:eP,animate:mhe,exit:eP,transition:h0,className:q("absolute bottom-0 max-h-expanded-section w-full overflow-y-hidden rounded-4xl",qt.modal,o),ref:i,children:f.jsx("div",{className:"flex h-full flex-col items-start gap-4 overflow-y-auto bg-background-100 p-6",children:e})})]})}function vhe(t){var s;const{children:e,id:n,onClose:r,className:o}=t,i=Lr(),a=(s=Ee.instance().config().uiOverrides)==null?void 0:s.disableConversationsModalWrapper;return i||a?f.jsx("div",{className:"flex max-w-96 flex-col items-start gap-4 p-2",children:e}):f.jsx(ghe,{id:n,onClose:r,className:o,children:e})}function yhe(){const[t,e]=m.useState(!1),n=es(En),{createConversation:r}=ny(),o=m.useCallback(async i=>{if(!i)return;const a=BM(i);bn({source:"deleteConversation",conversationId:i,scenario:a?"actions":void 0}),e(!0),a?await Ru(`/tasks/${a}`,{options:{method:"DELETE"},analytics:{anonymousPath:"/tasks/*"}}):await Ru(`/conversations/${i}`,{options:{method:"DELETE"},analytics:{anonymousPath:"/conversations/*"}}),gt(mt)===i&&await r(!1),e(!1),n(s=>{s.delete(i)})},[n,r]);return{loading:t,deleteConversation:o}}const E4=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...t},m.createElement("path",{fill:"currentColor",d:"M 20.292969 5.2929688 L 9 16.585938 L 4.7070312 12.292969 L 3.2929688 13.707031 L 9 19.414062 L 21.707031 6.7070312 L 20.292969 5.2929688 z"})),VIe=Object.freeze(Object.defineProperty({__proto__:null,default:E4},Symbol.toStringTag,{value:"Module"}));function T4(t){const{disabled:e,checked:n,label:r,className:o,labelClassName:i,setChecked:a}=t,s=m.useId();return f.jsxs("label",{className:q("relative flex cursor-pointer items-center",o),htmlFor:s,children:[f.jsx("input",{checked:n,type:"checkbox",id:s,className:"peer sr-only",onChange:c=>a(c.target.checked),disabled:e}),f.jsx("span",{className:q("flex aspect-square size-5 items-center justify-center rounded-full border transition-colors duration-200 peer-focus:ring-1 peer-focus:ring-black peer-focus:ring-offset-2 peer-disabled:pointer-events-none peer-disabled:opacity-40 dark:peer-focus:ring-white","contrast-more:peer-focus:outline contrast-more:peer-focus:outline-2 contrast-more:peer-focus:outline-offset-2",n&&"bg-black contrast-more:bg-white dark:bg-white"),children:f.jsx(E4,{className:q("size-3 text-white transition-opacity duration-200 contrast-more:text-current dark:text-black contrast-more:dark:text-current",n?"opacity-100":"opacity-0")})}),f.jsx("span",{className:q("mt-px ps-4 peer-disabled:pointer-events-none peer-disabled:opacity-40",i),children:r})]})}function bhe(t){var v;const{conversationId:e,onClose:n}=t,r=m.useId(),{t:o}=Fe(),[i,a]=m.useState(!1),{loading:s,deleteConversation:c}=yhe(),u=()=>{i&&Qn(TY,"true"),n()},d=async()=>{await c(e),u()},h=Lr(),g=!((v=Ee.instance().config().uiOverrides)==null?void 0:v.disableDeleteConfirmationCheckbox)&&!h;return f.jsxs(vhe,{id:r,onClose:n,className:"h-96",children:[f.jsx("h2",{className:"text-lg",children:o("composer.deleteConversation.header")}),f.jsx("p",{children:o("composer.deleteConversation.description")}),g&&f.jsx(T4,{disabled:s,checked:i,label:o("composer.deleteConversation.dontRemindMeCheck"),setChecked:a,className:"flex-1"}),f.jsx(De,{title:o("common.delete"),color:"default",size:"56-xl",variant:"rect",className:"mt-auto w-full text-system-red-550 dark:text-system-red-350",disabled:s,onClick:d,children:s?f.jsx(kt,{className:"size-8"}):o("common.delete")}),f.jsx(De,{title:o("common.keep"),color:"strong",size:"56-xl",variant:"rect",className:"w-full",disabled:s,onClick:u,children:o("common.keep")})]})}const _he=G(void 0),Che=m.lazy(()=>T(()=>import("./sender-share-conversation-modal-Bgbkgc9J.js"),__vite__mapDeps([228,1,229,230,231])).then(t=>({default:t.ShareConversationModal})));function She(){const[t,e]=et(_he),{t:n}=Fe(),r=()=>{e(void 0)};switch(t==null?void 0:t.action){case"delete":return f.jsx(Ja,{isOpen:!0,className:"w-3/4 max-w-fit",children:f.jsx(bhe,{onClose:r,conversationId:t.conversationId})});case"share":return f.jsx(Ja,{trapFocus:!0,isOpen:!!t.conversationId,disableCloseOutside:!0,onClose:r,headerText:t.messageId?n("share.shareModalHeaderOneTurn"):n("share.shareModalHeader"),headerTextClassName:"text-lg",className:"relative max-h-full w-3/4 max-w-[640px] overflow-y-auto",children:f.jsx(m.Suspense,{fallback:f.jsx(De,{color:"strong",size:"56-xl",className:"w-full",title:n("common.loading"),disabled:!0,children:f.jsx(kt,{className:"size-8"})}),children:f.jsx(Che,{conversationId:t.conversationId,scenario:t.scenario,messageId:t.messageId})})});default:return null}}const whe="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/turn-limit-dark-CEuF11Ih.jpg",Ehe="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/turn-limit-light-BSlP2HSn.jpg";function I4(t){const{dismiss:e,source:n}=t,{t:r}=Fe(),{login:o}=id(),i=r("logIn.proUpsellHeader"),a=r("logIn.proUpsellDescription"),s=r("common.notNow"),c=r("signInPrompt.continueWithMicrosoft"),u=F(ts),d=Zt();m.useEffect(()=>{Ku({page:d,scenario:`UpsellProForAuth0AccountFrom${n}`})},[d,n]);const h=()=>{dt({source:`UpsellProForAuth0AccountFrom${n}`,scenario:"ProUpsellForAuth0AccountLinkWithMSA",destination:"MicrosoftLoginPage"}),sessionStorage.setItem(yC,`${new Date().getTime().toString()}-link`),o({provider:"microsoft"})},p=()=>{dt({source:`UpsellProForAuth0AccountFrom${n}`,scenario:"dismissProUpsellForAuth0Account",destination:d}),e()};return f.jsxs("div",{className:"flex flex-col items-center p-4 text-center",children:[f.jsx("img",{src:u==="dark"?whe:Ehe,alt:r("images.birds"),className:"h-44 w-full rounded-xl object-cover"}),f.jsx("h1",{className:"pb-3 pt-6 text-lg",children:i}),f.jsx("p",{className:"max-w-[95%] break-words pb-7",children:a}),f.jsxs(De,{onClick:h,title:c,variant:"pill",size:"48-lg",className:"w-full",color:"strong",testId:"prompt-sign-in-msft-composer-action",children:[f.jsx(cv,{className:"size-6"}),c]}),f.jsx(De,{onClick:p,title:s,variant:"pill",size:"48-lg",color:"overlay-bright",className:"mt-3 w-full",testId:"not-now-button-composer-action",children:s})]})}const The=Object.freeze(Object.defineProperty({__proto__:null,default:I4},Symbol.toStringTag,{value:"Module"}));function Ihe(){const t=oI(),e=de("ceo"),n=F(Hi),r=F(f2),[o,i]=et(Pw),[a,s]=et(jV),c=Ee.instance().config().entraRedirectModalBehaviour!=="skip";return f.jsxs(f.Fragment,{children:[n&&f.jsx(Aj,{accountActionRequired:n}),t&&o&&f.jsx(Ja,{isOpen:!0,children:f.jsx(phe,{interceptedLink:o,onClose:()=>{i(void 0)}})}),f.jsx(She,{}),r&&f.jsx(lhe,{}),a&&f.jsx(Ja,{isOpen:!0,className:"min-h-[328px] max-w-[528px]",children:f.jsx(I4,{dismiss:()=>s(null),source:"ProSubPage"})}),c&&f.jsx(fhe,{}),f.jsx(tle,{}),f.jsx(ahe,{}),e&&f.jsx(Xfe,{})]})}const A4=t=>m.createElement("svg",{width:96,height:93,viewBox:"0 0 96 93",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("mask",{id:"mask0_140_39981",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:96,height:93},m.createElement("mask",{id:"path-1-outside-1_140_39981",maskUnits:"userSpaceOnUse",x:0,y:0,width:96,height:93,fill:"black"},m.createElement("rect",{fill:"white",width:96,height:93}),m.createElement("path",{d:"M4 46.5C4 23.0279 23.0279 4 46.5 4H49.5C72.9721 4 92 23.0279 92 46.5V46.5C92 69.9721 72.9721 89 49.5 89H46.5C23.0279 89 4 69.9721 4 46.5V46.5Z"})),m.createElement("path",{d:"M46.5 4V8H49.5V4V0H46.5V4ZM49.5 89V85H46.5V89V93H49.5V89ZM46.5 89V85C25.237 85 8 67.763 8 46.5H4H0C0 72.1812 20.8188 93 46.5 93V89ZM92 46.5H88C88 67.763 70.763 85 49.5 85V89V93C75.1812 93 96 72.1812 96 46.5H92ZM49.5 4V8C70.763 8 88 25.237 88 46.5H92H96C96 20.8188 75.1812 0 49.5 0V4ZM46.5 4V0C20.8188 0 0 20.8188 0 46.5H4H8C8 25.237 25.237 8 46.5 8V4Z",fill:"url(#paint0_linear_140_39981)",fillOpacity:.8,mask:"url(#path-1-outside-1_140_39981)"}),m.createElement("g",{clipPath:"url(#paint1_angular_140_39981_clip_path)","data-figma-skip-parse":"true",mask:"url(#path-1-outside-1_140_39981)"},m.createElement("g",{transform:"matrix(0 -0.0425 0.0556447 0 48 46.5)"},m.createElement("foreignObject",{x:-1094.12,y:-1094.12,width:2188.24,height:2188.24},m.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{background:"conic-gradient(from 90deg,rgba(214, 147, 237, 1) 0deg,rgba(250, 176, 198, 1) 60.2401deg,rgba(244, 185, 234, 1) 85.1532deg,rgba(141, 152, 255, 1) 126.663deg,rgba(170, 110, 238, 1) 209.329deg,rgba(255, 103, 119, 1) 250.911deg,rgba(255, 186, 113, 1) 291.415deg,rgba(198, 134, 255, 1) 332.659deg,rgba(214, 147, 237, 1) 360deg)",height:"100%",width:"100%",opacity:1}})))),m.createElement("path",{d:"M46.5 4V8H49.5V4V0H46.5V4ZM49.5 89V85H46.5V89V93H49.5V89ZM46.5 89V85C25.237 85 8 67.763 8 46.5H4H0C0 72.1812 20.8188 93 46.5 93V89ZM92 46.5H88C88 67.763 70.763 85 49.5 85V89V93C75.1812 93 96 72.1812 96 46.5H92ZM49.5 4V8C70.763 8 88 25.237 88 46.5H92H96C96 20.8188 75.1812 0 49.5 0V4ZM46.5 4V0C20.8188 0 0 20.8188 0 46.5H4H8C8 25.237 25.237 8 46.5 8V4Z",mask:"url(#path-1-outside-1_140_39981)"})),m.createElement("g",{mask:"url(#mask0_140_39981)"},m.createElement("g",{clipPath:"url(#paint2_angular_140_39981_clip_path)","data-figma-skip-parse":"true"},m.createElement("g",{transform:"matrix(0 -0.071 0.0897903 0 48 47.0001)"},m.createElement("foreignObject",{x:-1014.09,y:-1014.09,width:2028.17,height:2028.17},m.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{background:"conic-gradient(from 90deg,rgba(0, 0, 0, 1) 0deg,rgba(255, 255, 255, 1) 52.2deg,rgba(197, 197, 197, 1) 122.4deg,rgba(0, 0, 0, 1) 147.6deg,rgba(255, 255, 255, 1) 171deg,rgba(174, 174, 174, 1) 235.8deg,rgba(0, 0, 0, 1) 250.911deg,rgba(217, 238, 247, 1) 266.4deg,rgba(255, 255, 255, 1) 332.659deg,rgba(0, 0, 0, 1) 360deg)",height:"100%",width:"100%",opacity:1}})))),m.createElement("rect",{x:-23,y:-24,width:142,height:142})),m.createElement("defs",null,m.createElement("clipPath",{id:"paint1_angular_140_39981_clip_path"},m.createElement("path",{d:"M46.5 4V8H49.5V4V0H46.5V4ZM49.5 89V85H46.5V89V93H49.5V89ZM46.5 89V85C25.237 85 8 67.763 8 46.5H4H0C0 72.1812 20.8188 93 46.5 93V89ZM92 46.5H88C88 67.763 70.763 85 49.5 85V89V93C75.1812 93 96 72.1812 96 46.5H92ZM49.5 4V8C70.763 8 88 25.237 88 46.5H92H96C96 20.8188 75.1812 0 49.5 0V4ZM46.5 4V0C20.8188 0 0 20.8188 0 46.5H4H8C8 25.237 25.237 8 46.5 8V4Z",mask:"url(#path-1-outside-1_140_39981)"})),m.createElement("clipPath",{id:"paint2_angular_140_39981_clip_path"},m.createElement("rect",{x:-23,y:-24,width:142,height:142})),m.createElement("linearGradient",{id:"paint0_linear_140_39981",x1:4,y1:89,x2:101.93,y2:75.3765,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{stopColor:"#FFAB4E"}),m.createElement("stop",{offset:1,stopColor:"#FF7791"})))),zIe=Object.freeze(Object.defineProperty({__proto__:null,default:A4},Symbol.toStringTag,{value:"Module"})),k4=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M20.2899 16.4358C20.6074 15.5282 20.78 14.5526 20.78 13.5366V9.5241C20.78 9.10859 20.4432 8.77175 20.0277 8.77175C19.6122 8.77175 19.2753 9.10859 19.2753 9.5241V13.5366C19.2753 14.1176 19.2072 14.6827 19.0785 15.2244L20.2899 16.4358Z",fill:"currentColor"}),m.createElement("path",{d:"M15.263 11.1575V6.51431C15.263 4.71377 13.8034 3.25414 12.0028 3.25414C10.7464 3.25414 9.65599 3.96485 9.11167 5.00618L8.01336 3.90787C8.86428 2.60809 10.3333 1.74944 12.0028 1.74944C14.6344 1.74944 16.7677 3.88274 16.7677 6.51431V12.6622L15.263 11.1575Z",fill:"currentColor"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.0026 20.8093C7.986 20.8093 4.7299 17.5532 4.7299 13.5366L4.7299 9.5241C4.7299 9.10859 4.39306 8.77175 3.97755 8.77175C3.56204 8.77175 3.2252 9.10859 3.2252 9.5241L3.2252 13.5366C3.2252 18.3843 7.15498 22.314 12.0026 22.314C14.6664 22.314 17.053 21.1274 18.6628 19.2539L21.0006 21.5917C21.2944 21.8855 21.7707 21.8855 22.0645 21.5917C22.3584 21.2979 22.3584 20.8215 22.0645 20.5277L3.00504 1.46823C2.71123 1.17442 2.23487 1.17442 1.94106 1.46823C1.64725 1.76204 1.64725 2.2384 1.94106 2.53221L7.23793 7.82908V13.5362C7.23793 16.1678 9.37124 18.3011 12.0028 18.3011C13.5589 18.3011 14.9407 17.5552 15.8103 16.4015L17.5951 18.1862C16.261 19.7891 14.251 20.8093 12.0026 20.8093ZM8.74263 13.5362C8.74263 15.3368 10.2023 16.7964 12.0028 16.7964C13.1441 16.7964 14.1484 16.21 14.7308 15.322L8.74263 9.33378L8.74263 13.5362Z",fill:"currentColor"})),$Ie=Object.freeze(Object.defineProperty({__proto__:null,default:k4},Symbol.toStringTag,{value:"Module"})),dI=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.7673 6.54284C16.7673 3.91128 14.634 1.77799 12.0024 1.77799C9.37089 1.77799 7.2376 3.91129 7.2376 6.54284L7.2376 13.5647C7.2376 16.1963 9.37089 18.3296 12.0024 18.3296C14.634 18.3296 16.7673 16.1963 16.7673 13.5647L16.7673 6.54284ZM12.0024 3.28268C13.803 3.28268 15.2626 4.7423 15.2626 6.54284L15.2626 13.5647C15.2626 15.3652 13.803 16.8249 12.0024 16.8249C10.2019 16.8249 8.74229 15.3652 8.74229 13.5647L8.74229 6.54284C8.74229 4.7423 10.2019 3.28268 12.0024 3.28268Z",fill:"currentColor"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.0274 8.79987C19.6119 8.79987 19.2751 9.1367 19.2751 9.55221V13.5647C19.2751 17.5813 16.019 20.8374 12.0024 20.8374C7.98587 20.8374 4.72979 17.5813 4.72979 13.5647L4.72979 9.55221C4.72979 9.1367 4.39295 8.79987 3.97744 8.79987C3.56193 8.79987 3.2251 9.1367 3.2251 9.55221L3.2251 13.5647C3.2251 18.4123 7.15485 22.3421 12.0024 22.3421C16.85 22.3421 20.7798 18.4123 20.7798 13.5647V9.55221C20.7798 9.1367 20.443 8.79987 20.0274 8.79987Z",fill:"currentColor"})),GIe=Object.freeze(Object.defineProperty({__proto__:null,default:dI},Symbol.toStringTag,{value:"Module"})),x4=t=>m.createElement("svg",{width:63,height:73,viewBox:"0 0 63 73",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("g",{filter:"url(#filter0_d_3118_29179)"},m.createElement("path",{d:"M39.7952 28.3892L42.2422 41.8194C43.061 46.313 43.4704 48.5598 42.1865 49.4826C40.9025 50.4053 38.9035 49.3009 34.9054 47.0922L22.9563 40.491C16.2962 36.8117 12.9661 34.972 13.4372 33.1039C13.9083 31.2359 17.7474 31.1951 25.4255 31.1136C27.1365 31.0955 27.992 31.0864 28.6339 30.625C29.2759 30.1637 29.5572 29.3557 30.12 27.7398C32.6452 20.4884 33.9078 16.8627 35.8285 17.0117C37.7493 17.1608 38.4313 20.9036 39.7952 28.3892Z",fill:"white",fillOpacity:.8,shapeRendering:"crispEdges"}),m.createElement("path",{d:"M39.7952 28.3892L42.2422 41.8194C43.061 46.313 43.4704 48.5598 42.1865 49.4826C40.9025 50.4053 38.9035 49.3009 34.9054 47.0922L22.9563 40.491C16.2962 36.8117 12.9661 34.972 13.4372 33.1039C13.9083 31.2359 17.7474 31.1951 25.4255 31.1136C27.1365 31.0955 27.992 31.0864 28.6339 30.625C29.2759 30.1637 29.5572 29.3557 30.12 27.7398C32.6452 20.4884 33.9078 16.8627 35.8285 17.0117C37.7493 17.1608 38.4313 20.9036 39.7952 28.3892Z",stroke:"white",strokeWidth:1.5,shapeRendering:"crispEdges"})),m.createElement("path",{d:"M43.06 50.7014C44.3479 49.7757 44.5485 48.2871 44.5004 46.9375L44.469 46.4069C44.397 45.4896 44.2259 44.4068 44.0083 43.1722L43.7279 41.6191L43.7271 41.6113L43.7263 41.6119L41.2578 28.06L40.7794 25.455C40.3207 22.9993 39.9105 20.9984 39.4527 19.5092L39.3346 19.1407C39.0928 18.4125 38.8119 17.7441 38.4599 17.1874L38.2786 16.9184C37.7807 16.2335 37.0781 15.6722 36.1346 15.5382L35.9428 15.5173C35.0273 15.4462 34.264 15.7987 33.6613 16.3187L33.4134 16.551C32.8862 17.0835 32.4355 17.7951 32.024 18.597L31.8493 18.9462C31.1633 20.3587 30.4435 22.2885 29.6039 24.6656L28.7214 27.1892L28.7014 27.2468C28.4821 27.8767 28.3253 28.323 28.1864 28.662L28.0522 28.9689C27.8919 29.3038 27.7981 29.3776 27.7565 29.4075C27.7254 29.4298 27.6614 29.4719 27.4758 29.5106L27.2465 29.5479C27.0436 29.5728 26.806 29.587 26.5081 29.5964L25.4073 29.6142L25.3455 29.6153C22.0505 29.6503 19.3668 29.6775 17.3562 29.8624L16.5355 29.9519C15.6246 30.0688 14.7765 30.2424 14.0635 30.5367L13.7674 30.6702C13.0061 31.0434 12.328 31.6403 12.0348 32.5515L11.9812 32.738C11.7577 33.624 11.971 34.4332 12.3786 35.1149L12.5645 35.3986C13.059 36.0947 13.7998 36.7301 14.6458 37.3375L15.3198 37.8019C16.9879 38.9103 19.3175 40.1961 22.1748 41.7746L34.238 48.4394L35.6206 49.2003C36.9417 49.9202 38.0776 50.5066 39.0333 50.8666L39.516 51.0344C40.6626 51.3952 41.933 51.5114 43.06 50.7014Z",stroke:"black",strokeWidth:1.5}),m.createElement("defs",null,m.createElement("filter",{id:"filter0_d_3118_29179",x:2.64307,y:6.25732,width:51.1152,height:66.3022,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},m.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),m.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),m.createElement("feMorphology",{radius:2,operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_3118_29179"}),m.createElement("feOffset",{dy:16}),m.createElement("feGaussianBlur",{stdDeviation:4}),m.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),m.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0"}),m.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3118_29179"}),m.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3118_29179",result:"shape"})))),KIe=Object.freeze(Object.defineProperty({__proto__:null,default:x4},Symbol.toStringTag,{value:"Module"}));function Ahe(t){const{renderFocusedElement:e,children:n,className:r,options:o={},isOpen:i}=t,{offset:a=1,placement:s="bottom-end",adjustArrowPosition:c=C=>C}=o,u=m.useRef(null),{state:d,setState:h}=WT({controlledValue:i,defaultValue:!1}),{y:p=0}=c({x:0,y:0})??{},{refs:g,context:v,floatingStyles:y,middlewareData:_}=nv({open:d,placement:s,onOpenChange:h,middleware:[_h(a),Ch(),WF({element:u,padding:{right:-38,bottom:p}})],whileElementsMounted:bh}),b=c(_.arrow);return f.jsxs(f.Fragment,{children:[e==null?void 0:e({ref:g.setReference},d),d&&f.jsx(Q0,{children:f.jsx(ov,{context:v,modal:!1,children:f.jsxs("div",{ref:g.setFloating,style:y,className:xt("flex outline-none",qt.composerCoachmark),children:[f.jsx("div",{className:xt("start-0 flex rounded-ee-md rounded-es-3xl rounded-se-3xl rounded-ss-3xl border border-background-200 border-white shadow-sm",r),children:n}),f.jsx("div",{ref:u,style:{position:"absolute",left:b==null?void 0:b.x,top:(b==null?void 0:b.y)??p},className:"pointer-events-none",children:f.jsx(x4,{className:"my-5 size-14"})})]})})})]})}const zp="absolute inset-0 rounded-full",tP="relative size-6 transition-colors",nP=2,khe=50,xhe=20,R4=.6,Rhe=3,Phe=.55,Ohe=1,Nhe={opacity:0,scale:R4},Mhe={opacity:1,scale:1,transition:{...Ej,delay:Ij}};function Lhe(t){const{t:e}=Fe(),{isMuted:n,inputVolume:r,isOutputPlaying:o,className:i,coachUserUnmute:a=!1,onClick:s}=t,c=!o&&!n,[u,d]=m.useState(!1),h=qn({breakpoint:"sm"});m.useEffect(()=>{let b;return a&&(b=setTimeout(()=>d(!0),600)),()=>clearTimeout(b)},[a]);const p=QO(r,wj),g=cu(p,[nP,khe],[R4,Rhe]),v=cu(p,[nP,xhe],[Phe,Ohe]),{focusable:y,refCallback:_}=ju({autoRestoreFocus:!0,forceFocus:!0});return f.jsx(Ahe,{className:"max-w-72 border-white bg-black/90 p-2 dark:bg-white",isOpen:u,options:{placement:"top-end",offset:h?{mainAxis:27,crossAxis:10}:{mainAxis:15,crossAxis:-55},adjustArrowPosition:b=>h?{x:b!=null&&b.x?b.x-20:void 0,y:12}:b},renderFocusedElement:b=>f.jsxs(f.Fragment,{children:[u?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"absolute start-1/2 -my-4 size-fit -translate-x-1/2",children:f.jsx(Zn,{duration:.6,exitDelay:4.5,exitDuration:.5,children:f.jsx(Ae.div,{animate:{rotate:360},transition:{duration:2.5,repeat:1,ease:"linear"},children:f.jsx(A4,{className:"size-20"})})})}),f.jsx("div",{className:"absolute start-1/2 -my-4 size-fit -translate-x-1/2",children:f.jsx(Ae.div,{className:"size-[80px] rounded-full border-4 border-solid border-black/80 shadow-sm dark:border-white",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:4.5,ease:"linear"}})})]}):null,f.jsx(Ae.button,{...b,title:e(n?"composer.unmuteMicrophone":"composer.muteMicrophone"),className:q("size-12 rounded-full",Nf,sv,i),layout:!a,initial:"initial",animate:"enter",variants:{initial:Nhe,enter:Mhe},onClick:s,ref:C=>{b.ref(C),_(C)},"data-spatial-focus-key":y.focusKey,children:f.jsxs(Ae.span,{className:q("flex items-center justify-center overflow-hidden border",n?"border-transparent bg-black/8 dark:bg-white/5":"border-white bg-white/50 hover:bg-white/80 dark:border-white/12 dark:bg-black/40",c&&"text-spot-blue-450 dark:text-midnight-300",zp),layout:!a,children:[f.jsx(wn,{children:c&&f.jsx(Ae.div,{className:q("flex items-center justify-center overflow-hidden rounded-full blur-[6px]",zp),layout:!0,initial:tt,animate:Rt,exit:tt,style:{scale:g},children:f.jsx(Ae.div,{className:q(zp),layout:!0,style:{opacity:v},children:f.jsx(Ae.div,{className:q("animate-spin-slow bg-gradient-audio-input-light dark:bg-gradient-audio-input-dark",zp)})})})}),n?f.jsx(k4,{className:tP,"aria-hidden":!0}):f.jsx(dI,{className:tP,"aria-hidden":!0})]})})]}),children:f.jsx("div",{className:"flex p-0 px-3 text-white text-sm dark:text-foreground-300",children:e("voice.v2.waitingInteractionUnmuteSubheader")})})}function fI(t,e={},n){const{initialize:r=!1}=e,o=m.useRef(null);return m.useEffect(()=>{const i=n??o.current,a=new ResizeObserver(([s])=>{s&&t(s.contentRect)});return i&&(a.observe(i),r&&t(i.getBoundingClientRect())),()=>a.disconnect()},[t,r,n]),o}class Dhe{constructor(){Z(this,"firstEventProcessed",null);Z(this,"events",[]);Z(this,"aiMessageNeedsPadding",!1);Z(this,"aiPcmParts",[]);Z(this,"totalAIBytes",0);Z(this,"userPcmParts",[]);Z(this,"totalUserBytes",0);Z(this,"conversationId",null)}reset(){this.firstEventProcessed=null,this.events=[],this.aiMessageNeedsPadding=!1,this.aiPcmParts=[],this.totalAIBytes=0,this.userPcmParts=[],this.totalUserBytes=0,this.conversationId=null}recordEvent(e){const n=Date.now();this.firstEventProcessed===null&&(this.firstEventProcessed=n),this.events.push({...e,timestamp:n-this.firstEventProcessed})}async download(){}saveFile(e,n){const r=URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r)}processEvents(){for(const e of this.events)e.event==="userAudio"?this.addUserAudioData(e.audio):e.event==="audioEnd"?this.trimAiToUser():e.event==="startMessage"?this.onNewAiMessage():e.event==="audio"?this.addAIAudioData(e.audio):e.event==="interruptAudio"&&this.trimAiToUser()}onNewAiMessage(){this.aiMessageNeedsPadding=!0}padAiAudioData(){if(!this.aiMessageNeedsPadding)return;this.aiMessageNeedsPadding=!1;const e=2;let n=this.totalUserBytes-this.totalAIBytes;if(n<=0)return;n%e!==0&&(n+=e-n%e);const r=new Uint8Array(n);this.aiPcmParts.push(r),this.totalAIBytes+=n}trimAiToUser(){const e=this.totalUserBytes;let n=this.totalAIBytes-e;if(!(n<=0))for(let r=this.aiPcmParts.length-1;r>=0&&n>0;r-=1){const o=this.aiPcmParts[r];if(o)if(o.length<=n)n-=o.length,this.totalAIBytes-=o.length,this.aiPcmParts.pop();else{const i=o.length-n;this.aiPcmParts[r]=o.subarray(0,i),this.totalAIBytes-=n,n=0}}}addAIAudioData(e){this.padAiAudioData();const n=atob(e),r=new Uint8Array(n.length);for(let o=0;o<n.length;o+=1)r[o]=n.charCodeAt(o);this.aiPcmParts.push(r),this.totalAIBytes+=r.length}addUserAudioData(e){const n=atob(e),r=new Uint8Array(n.length);for(let o=0;o<n.length;o+=1)r[o]=n.charCodeAt(o);this.userPcmParts.push(r),this.totalUserBytes+=r.length}bytesToWavBlob(e,n,r,o){const i=e.length,a=new ArrayBuffer(44),s=new DataView(a),c=(p,g)=>{let v=0;for(const y of g)s.setUint8(p+v,y.charCodeAt(0)),v+=1};c(0,"RIFF"),s.setUint32(4,36+i,!0),c(8,"WAVE"),c(12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,1,!0),s.setUint16(22,r,!0),s.setUint32(24,n,!0);const u=Math.trunc(r*o/8);s.setUint32(28,n*u,!0),s.setUint16(32,u,!0),s.setUint16(34,o,!0),c(36,"data"),s.setUint32(40,i,!0);const d=new Uint8Array(44+i);return d.set(new Uint8Array(a),0),d.set(e,44),new Blob([d],{type:"audio/wav"})}combineTracks(){const r=Math.trunc(2),o=this.concatParts(this.userPcmParts,this.totalUserBytes),i=this.concatParts(this.aiPcmParts,this.totalAIBytes),a=Math.floor(o.length/r),s=Math.floor(i.length/r),c=Math.max(a,s),u=new Int16Array(o.buffer,o.byteOffset,a),d=new Int16Array(i.buffer,i.byteOffset,s),h=new Int16Array(c*2);for(let p=0;p<c;p+=1){const g=p<a?u[p]:0;typeof g=="number"&&(h[p*2]=g);const v=p<s?d[p]:0;typeof v=="number"&&(h[p*2+1]=v)}return this.bytesToWavBlob(new Uint8Array(h.buffer),24e3,2,16)}concatParts(e,n){const r=new Uint8Array(n);let o=0;for(const i of e)r.set(i,o),o+=i.length;return r}processTextLog(){let e=!1,n=`Audio Recorder Log for conversation ${this.conversationId}:

`;for(const r of this.events){const{event:o,timestamp:i}=r;if(o==="userAudio")continue;if(o==="audio"){e||(n+=`${i}ms — server-to-client — ai audio stream
`,e=!0);continue}e=!1,n+=`${i}ms — ${o==="audioEnd"||o==="audioStart"?"client-to-server":"server-to-client"} — ${o}`,o==="audioStartFailed"&&(n+=` — ${r.reason}`),n+=`
`}return n}}const jhe=new Dhe;class Uhe{constructor(e={}){Z(this,"options");Z(this,"antiAliasFilter");this.options={windowSize:e.windowSize??1024,overlap:e.overlap??.7,tolerance:e.tolerance??200,useAntiAlias:e.useAntiAlias??!0,useAdaptiveOverlap:e.useAdaptiveOverlap??!0,correlationWindowMultiplier:e.correlationWindowMultiplier??1.5,useSampleRateAwareScaling:e.useSampleRateAwareScaling??!1,useFirstFrameCompensation:e.useFirstFrameCompensation??!0},this.options.useAntiAlias&&this.initAntiAliasFilter()}initAntiAliasFilter(){this.antiAliasFilter=new Float32Array([.25,.5,.25])}getSampleRateScaling(e){if(!this.options.useSampleRateAwareScaling||!e)return 1;const r=e/24e3;return Math.max(.5,Math.min(2,r))}process(e,n=1,r){const o=this.getSampleRateScaling(r),{tolerance:i}=this.options;let{windowSize:a,overlap:s}=this.options;const{useAntiAlias:c,useAdaptiveOverlap:u}=this.options;if(this.options.useSampleRateAwareScaling&&o!==1&&(a=Math.round(a*o),a=Math.max(256,Math.min(4096,a))),Math.abs(n-1)<.001)return e;const d=c?this.applyAntiAliasFilter(e):e;u&&(n>1.2?s=Math.max(.3,s*.7):n<.8&&(s=Math.min(.8,s*1.2)));const h=Math.round(a*(1-s)),p=Math.round(h*n),g=Math.ceil(d.length/n),v=new Float32Array(g),y=this.createImprovedWindow(a),_=Math.min(a,d.length,g);this.overlapAddFrameEnhanced(d,0,v,0,y,_);let b=0,C=0;for(;b<g-a&&!(C>=d.length-a-i);){const w=this.findBestMatchEnhanced(d,C,v,b,a,i);this.overlapAddFrameEnhanced(d,w,v,b,y,a),b+=h,C+=p}return v}applyAntiAliasFilter(e){if(!this.antiAliasFilter||this.antiAliasFilter.length===0)return e;const n=new Float32Array(e.length),r=this.antiAliasFilter.length,o=Math.floor(r/2);for(let i=0;i<e.length;i+=1){let a=0;for(let s=0;s<r;s+=1){const c=i-o+s;c>=0&&c<e.length&&(a+=(e[c]??0)*(this.antiAliasFilter[s]??0))}n[i]=a}return n}createImprovedWindow(e){const n=new Float32Array(e);for(let r=0;r<e;r+=1){const o=2*Math.PI*r/(e-1),i=.5*(1-Math.cos(o)),a=.08*Math.cos(2*o);n[r]=i-a}return n}setOptions(e){this.options={...this.options,...e}}overlapAddFrameEnhanced(e,n,r,o,i,a){const s=Math.min(o+a,r.length),c=Math.min(a,e.length-n,s-o),u=o===0,d=this.options.useFirstFrameCompensation??!0;let h=1;if(u&&d){const{windowSize:p,overlap:g}=this.options;p>=1700&&g>=.8?h=1.5:p>=1400&&g>=.75?h=1.15:p>=1200&&g>=.7?h=1.25:h=1.2}for(let p=0;p<c;p+=1){const g=e[n+p]??0,v=i[p]??0,y=o+p;let _=1;o>0&&p<a*.1&&(_=p/(a*.1));let b=1;if(u&&d){const C=Math.max(.1,1-p/a*.9);b=1+(h-1)*C}typeof r[y]=="number"&&(r[y]+=g*v*_*b)}}findOptimalStartPosition(e,n,r,o){const i=Math.min(o,r/4),a=Math.max(0,n-i),s=Math.min(e.length-r,n+i);let c=n,u=-1/0;for(let d=a;d<=s;d+=1){let h=0,p=0,g=0,v=0;const y=Math.min(r,512);for(let x=0;x<y;x+=1)if(d+x<e.length){const A=e[d+x]??0;h+=A*A,p+=Math.abs(A),x>0&&v*A<0&&(g+=1),v=A}const _=Math.sqrt(h/y),b=p/y,C=b>0?_/b:0,w=_*.6,S=C*.3,E=g>0?Math.min(1,10/g)*.1:0,I=w+S+E;I>u&&(u=I,c=d)}return c}findBestMatchEnhanced(e,n,r,o,i,a){if(o===0)return this.findOptimalStartPosition(e,n,i,a);const s=Math.max(0,n-a),c=Math.min(e.length-i,n+a),u=Math.floor(i*(this.options.correlationWindowMultiplier??1.5)),d=Math.min(u,i),h=new Float32Array(d),p=Math.max(0,o-d);let g=0,v=0,y=0;for(let C=0;C<d;C+=1){const w=p+C;if(w<r.length){h[C]=r[w]??0;const S=h[C]??0;g+=S*S,C>0&&y*S<0&&(v+=1),y=S}}let _=n,b=-1/0;for(let C=s;C<=c;C+=1){let w=0,S=0,E=0,I=0;for(let P=0;P<d;P+=1)if(C+P<e.length&&p+P<r.length){const X=e[C+P]??0;w+=(h[P]??0)*X,S+=X*X,P>0&&I*X<0&&(E+=1),I=X}const x=g>0&&S>0?w/Math.sqrt(g*S):0,A=Math.abs(E-v),N=Math.max(E,v),R=N>0?1-A/N:1,z=x*.8+R*.2;z>b&&(b=z,_=C)}return _}}const Fhe={windowSize:1536,overlap:.8,tolerance:280,useAntiAlias:!0,useAdaptiveOverlap:!0,correlationWindowMultiplier:1.6,useFirstFrameCompensation:!0},Bhe={windowSize:1280,overlap:.8,tolerance:180,useAntiAlias:!0,useAdaptiveOverlap:!0,correlationWindowMultiplier:1.4,useFirstFrameCompensation:!0},Hhe={windowSize:1536,overlap:.8,tolerance:200,useAntiAlias:!0,useAdaptiveOverlap:!1,correlationWindowMultiplier:1.6,useFirstFrameCompensation:!0},Vhe={windowSize:1792,overlap:.85,tolerance:200,useAntiAlias:!0,useAdaptiveOverlap:!1,correlationWindowMultiplier:1.8,useFirstFrameCompensation:!0};function zhe(t){switch(t){case 1.5:return Vhe;case 1.25:return Hhe;case 1.1:return Bhe;case .8:return Fhe;case 1:default:return}}const rP=new Uhe;function $he(t,e,n){const r=zhe(e);return r?(rP.setOptions(r),rP.process(t,e,n)):t}function Ghe(t){return new Promise(e=>{setTimeout(e,t)})}const Khe=G(!1),oP=G(0),iP=G(0),Whe=G(null),w0=G(!1),J_=G(!1),E0=G(0),T0=G(0),P4=24e3,Kg=24e3;function qhe({data:t,audioContext:e,gainNode:n,sourceNodes:r,nextBufferTime:o,updateNextBufferTime:i,onAudioEnd:a,outputVolumeMuted:s=!1,getPlaySignal:c,updateAudioDuration:u,onAudioStart:d,playbackRate:h}){const p=Zhe(t),g=new Int16Array(p);g.length!==0&&navigator.locks.request("audio-playback",async()=>{try{const v=g.length/Kg;u==null||u(v);const y=c==null?void 0:c(v);y&&(console.log("Awaiting play signal"),await y),d(),await Yhe(g,e,n,r,o,i,()=>a(t),s,h)}catch(v){console.error("Error playing audio:",v)}})}async function Yhe(t,e,n,r,o,i,a,s,c=1){const u=new Float32Array(t.length);let d=0;for(;d<t.length;)u[d]=t[d]/32768,d+=1;let h=u;c!==1&&(h=$he(u,c,Kg));const p=e.createBuffer(1,h.length,Kg);p.getChannelData(0).set(h);const g=e.createBufferSource();g.buffer=p,g.connect(n),s&&(n.gain.value=0);const v=ct();if(r.size===0){const _=v.get(T0),b=v.get(E0),C=_+(e.currentTime-b);v.set(T0,C)}r.add(g),g.onended=()=>{a(),v.set(E0,e.currentTime),r.delete(g),r.size===0&&v.set(w0,!1)};const y=p.length/p.sampleRate;o.current<e.currentTime&&i(e.currentTime),g.start(o.current),v.set(w0,!0),i(o.current+y)}async function Qhe(t,e,n,r,o){const i=r&&await r(),a=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0,autoGainControl:!0,sampleRate:P4,...i}}),s=a.getAudioTracks()[0];s&&(s.onended=d=>{o==null||o(d)});const c=e.createMediaStreamSource(a),u=e.createScriptProcessor(8192,1,1);return c.connect(n),n.connect(u),u.connect(e.destination),u.onaudioprocess=d=>{const h=d.inputBuffer.getChannelData(0),p=new Int16Array(h.length);for(let v=0;v<h.length;v+=1){const y=h[v];typeof y=="number"&&(p[v]=Jhe(y))}const g=Xhe(p.buffer);t(g)},a}function Jhe(t){const e=t<0?t*32768:t*32767;return Math.max(-32768,Math.min(32767,e))}function Xhe(t){let e="";const n=new Uint8Array(t),r=n.byteLength;for(let o=0;o<r;o+=1){const i=n[o];typeof i=="number"&&(e+=String.fromCharCode(i))}return btoa(e)}function Zhe(t){const e=atob(t),n=e.length,r=new Uint8Array(n);for(let o=0;o<n;o+=1)r[o]=e.charCodeAt(o);return r.buffer}function epe(t){let e=0;for(const n of t){const r=n-128;e+=r*r}return Math.sqrt(e/t.length)}const I0=qF(0);async function aP(t,e){const n=await Promise.race([Ghe(e),new Promise(r=>{try{const o=new Audio(t);o.addEventListener("ended",()=>r(o),{once:!0}),o.play()}catch{}})]);n==null||n.remove()}function hI(t){return t/vv}function WIe(t){return`${hI(t)}x`}function qIe(){const t=ct().get(TM);return hI(t)}const sP=48,cP=50;function lP(t){const{isNested:e}=t,[n,r]=m.useState(1),[o,i]=m.useState(1),a=m.useRef(void 0),s=m.useRef(void 0),c=fI(p=>{a.current=p.width,s.current=p.height,r((a.current+sP)/a.current),i((s.current+sP)/s.current)},{initialize:!0}),u=QO(I0,wj),d=cu(u,[0,cP],[1,n]),h=cu(u,[0,cP],[1,o]);return f.jsx(Ae.div,{className:"absolute inset-0",ref:c,initial:tt,animate:{...Rt,transition:{delay:Ij}},exit:tt,children:f.jsx(Ae.div,{className:q("absolute inset-0 flex items-center justify-center overflow-hidden rounded-6xl",e?"-scale-x-100 rounded-5xl blur-lg":"bg-stone-100/30 bg-blend-luminosity backdrop-blur-xl after:absolute after:inset-px after:rounded-6xl after:border after:border-transparent dark:bg-midnight-800/30"),layout:!0,style:{scaleX:d,scaleY:h},children:f.jsx(Ae.div,{className:q("absolute -inset-16 aspect-square bg-gradient-audio-output-light bg-blend-saturation saturate-150 dark:bg-gradient-audio-output-dark dark:saturate-100",e?"animate-spin-slower opacity-20 dark:opacity-30":"animate-spin-slow opacity-40 dark:opacity-50")})})})}function tpe(t){const{dynamicHeight:e}=t;return f.jsx(Ae.div,{className:q("t-bottom-fade absolute bottom-0 mx-4 box-content w-bottom-fade rounded-lg pt-bottom-fade",e?"h-bottom-fade":"h-composer"),initial:tt,animate:Rt,exit:tt,transition:fy,children:f.jsx(ia,{isBottomFade:!0})})}function npe(t,e){const{children:n,className:r,margins:o,data:i}=t,a=i.isDisabled?"":i.title;return f.jsx(Ae.div,{className:xt("relative shrink-0",o??"my-1",i.isVisible?"size-10":"h-10 overflow-hidden"),layout:!0,initial:!1,ref:e,children:f.jsx(Ae.button,{type:"button",className:xt("absolute flex size-10 items-center justify-center rounded-xl fill-foreground-750 p-2",nc["subtle-dimmed"],"disabled:active:bg-transparent disabled:active:bg-none",r),layout:"position",disabled:!i.isVisible||i.isDisabled,"aria-hidden":!i.isVisible,"aria-label":a,title:a,onClick:i.onClick,"data-testid":i.testId,"aria-expanded":typeof i.ariaExpanded=="boolean"?i.ariaExpanded:void 0,children:n})})}const La=m.forwardRef(npe);function rpe(){return F(xw).map(e=>e.id)}function O4(t){if(t.length===0)throw new Error("Array must have at least one element");return Math.floor(Math.random()*t.length)}function YIe(t,e){if(t.length===1)throw new Error("Array must have at least two elements");let n;do n=O4(t);while(n===e);return n}function ope(t){if(t.length!==0)return t[O4(t)]}function ipe(t){const e=[...t];for(let n=t.length-1;n>0;n-=1){const r=Math.floor(Math.random()*(n+1)),o=e[n];o&&e[r]&&(e[n]=e[r],e[r]=o)}return e}function QIe(t,e){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((o,i)=>o===r[i])}const ape=m.lazy(()=>T(()=>import("./character-BhmNa_iy.js"),__vite__mapDeps([232,1,233])).then(t=>({default:t.Character})));function spe(){const[t,e]=et(Ph),{createConversation:n}=ny(),[r,o]=m.useState(!1),i=Se(a2),a=Se(Gs),s=rpe(),c=m.useRef(null),u=F(Ei);m.useEffect(()=>{if(c.current===null){const y=ope(s);y&&(c.current=y)}},[s]);const{t:d}=Fe();m.useEffect(()=>{r&&c.current&&Y.trackEvent({name:"system",data:{eventName:"characterPromotionShown",eventInfo_characterId:c.current}})},[r]),m.useEffect(()=>{const y=localStorage.getItem(AY);o(!y&&u.length>=10&&u.length<14)},[t,u.length]);function h(y){switch(y){case"mica":return"mica-head";case"aqua":return"aqua-head";case"erin":return"erin-head";default:return"mica-head"}}async function p(){c.current&&(a("clicking"),Y.trackEvent({name:"interaction",data:{eventName:"characterPromotionClicked",eventInfo_characterId:c.current}}),i(!0),KY({settingName:"characterId",oldValue:"",newValue:c.current}),Y.setSettings({userSettingCharacterId:c.current}),await Promise.all([Pr({path:"/user/settings",args:{options:{method:"PATCH"},body:{preferredCharacter:c.current}}})]))}const g=m.useCallback(async()=>{o(!1)},[]),v=m.useCallback(async()=>{c.current&&(o(!1),i(!0),e(c.current),await n())},[i,e,n]);return r?f.jsx("div",{className:"pointer-events-auto absolute -top-40 end-4 size-56 pb-2",onClick:p,onKeyDown:async y=>{y.key==="Enter"&&await p()},role:"button",tabIndex:0,"aria-label":d("characterAnimation.characterOptInAriaLabelText"),children:f.jsx(ape,{className:"outline-none",characterId:h(c.current),onCharacterDismissed:g,onCharacterClicked:v})}):null}const uP="0px 0px 0px 1px rgb(255, 255, 255) inset",dP="0px 0px 0px 1px rgba(255, 255, 255, 0.08) inset",cpe="0px 10px 24px 0px rgba(0, 0, 0, 0.18)",lpe="0px 42px 30px 0px rgba(0, 0, 0, 0.06)",upe="0px 4px 8px 0px rgba(0, 0, 0, 0.18)",dpe="0px 21px 15px 0px rgba(0, 0, 0, 0.06)",$p=28,fpe=24,hpe="relative flex grow flex-col overflow-hidden before:absolute before:inset-0 before:rounded-3xl before:border-2 before:border-stroke-350",JIe="bg-white/90 shadow-composer-input dark:bg-midnight-900/80 dark:shadow-none",ppe="w-auto rounded-3xl contrast-more:border-2",mpe="bg-gradient-to-b from-white/90 to-white/0 dark:from-black/30 dark:to-midnight-800/10";function pI(t){const{title:e,onClick:n,appearDelay:r=wB,appearDuration:o=bo.audio.unavailable,className:i}=t;return f.jsx(Ae.div,{layout:"position",initial:"initial",animate:"animate",className:"relative flex h-12 shrink-0 items-center",variants:{initial:{...tt,scale:.9},animate:{...Rt,scale:1,transition:{...Ej,delay:r,duration:o}}},children:f.jsx("button",{type:"button",onClick:n,title:e,className:q("min-w-44",Nf,nc.strong,nw["40-base"],rw["40-base"],sv,"rounded-2xl before:rounded-2xl",i),children:e})})}function Gp(t){const{children:e,className:n}=t;return f.jsx(Ae.div,{className:n,initial:tt,animate:Rt,exit:tt,transition:{delay:Tj},children:e})}const gpe={initial:tt,animate:Rt};function vpe(t){const{titleKey:e,textKey:n,buttonTextKey:r,button:o,cancelButton:i,onClick:a,closeDialogCallback:s}=t,{t:c}=Fe(),u=c(e),d=c(o.textKey);return f.jsxs(f.Fragment,{children:[f.jsx(Ae.div,{layout:!0,variants:gpe,initial:"initial",animate:"animate",role:"dialog","aria-label":u,tabIndex:-1,children:f.jsxs("div",{className:"m-3 text-center text-foreground-800",children:[f.jsx("p",{className:"py-3",children:u}),f.jsx("p",{className:"text-xs",children:c(n)}),r&&f.jsx("div",{className:"mx-auto flex w-full max-w-xs justify-around px-5 py-3 text-salmon-600 dark:text-salmon-400",children:f.jsx("button",{onClick:a,type:"button",className:"text-xs",children:c(r)})})]})}),f.jsxs(Ae.div,{className:"relative mx-0.5 my-1 flex w-full items-center justify-center gap-2 px-2 align-middle",onClick:s,children:[i&&f.jsx(De,{variant:"rect",title:c(i.textKey),className:"relative my-3 flex h-10 max-w-40 items-center justify-center py-3 dark:bg-black/40 dark:hover:bg-black/40",onClick:i.onClick,children:c(i.textKey)}),f.jsx(De,{variant:"rect",title:d,className:"relative my-3 flex h-10 max-w-40 items-center justify-center py-3 dark:bg-black/40 dark:hover:bg-black/40",onClick:o.onClick,children:d})]})]})}function N4(){const t=de("composer-creation-button");return!Vo("kill-composer-creation-button")&&t}function fP({config:t}){const{t:e}=Fe(),n=N4();if(t)switch(t.mode){case"stop":return f.jsx(De,{testId:"stop-button",color:"accent",variant:"circle",className:"my-1","aria-label":e("composer.stopButton"),title:e("composer.stopButton"),onClick:()=>t.onClick(),children:f.jsx("div",{className:"size-3.5 rounded bg-salmon-550 contrast-more:border-2 dark:bg-midnight-850"})});case"submit":return f.jsx(De,{testId:"submit-button",color:"strong",variant:"square",className:xt("my-1",n?"rounded-2xl":"rounded-submitButton"),"aria-label":e("userInput.submitButtonText"),title:e("userInput.submitButtonText"),onClick:()=>t.onClick(),disabled:t.disabled,children:f.jsx(zh,{className:"size-6"})});case"microphone":return f.jsx(La,{data:{title:e("composer.startAudioCall"),testId:"audio-call-button",onClick:()=>t.onClick(),isVisible:!0},className:nc["subtle-dimmed"],children:f.jsx(dI,{className:"size-6","aria-hidden":!0})});default:return}}function _m(t){const{children:e,color:n="neutral"}=t;return f.jsx("div",{className:q("flex h-4 items-center rounded-[4px] px-1.5 text-3xs",n==="neutral"?"bg-stone-550/20 text-foreground-600 dark:bg-midnight-450/20 dark:text-foreground-800":"bg-salmon-250 text-salmon-550 dark:bg-salmon-750 dark:text-salmon-350"),children:e})}function ype(t){var i;const{item:e,onClick:n}=t,r=F(mt),o=m.useRef(void 0);return m.useEffect(()=>{r&&o.current!==r&&e.onImpression&&(o.current=r,e.onImpression(r))},[r,e]),f.jsxs(De,{title:e.title,"aria-label":e.title,variant:"rect",color:"subtle-dimmed-inverted",onClick:n,size:"40-base",alignment:"start",className:"min-w-[230px] px-3 py-2",testId:e.testId,children:[f.jsx("div",{className:"size-6 min-w-6",children:e.icon}),f.jsxs("div",{className:"grow text-left",children:[f.jsxs("div",{className:"line-clamp-1 inline-flex gap-1.5 text-xs",children:[e.title,(i=e.tags)==null?void 0:i.map(a=>f.jsx("div",{className:"flex items-center",children:f.jsx(_m,{color:a.color,children:f.jsx("span",{className:"leading-4",children:a.label})},a.label)},a.label))]}),f.jsx("p",{className:"line-clamp-1 leading-4 text-foreground-600 text-2xs dark:text-foreground-700",children:e.description})]})]},e.key)}const bpe="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/dismiss-BcarQlxK.svg";function _pe(t){const{renderTrigger:e,renderSurface:n,containerClassNames:r,color:o="default",onOutsideEvent:i,placement:a="bottom",floatingOffset:s=10}=t,[c,u]=m.useState(!1),d=m.useRef(null),h=m.useRef(null),{refs:p,floatingStyles:g,context:v}=nv({placement:a,strategy:"fixed",middleware:[_h(s),rv(),Ch()],whileElementsMounted:bh,open:c,onOpenChange:u}),y=m.useCallback(b=>{b.stopPropagation(),b.preventDefault(),u(C=>!C)},[]),_=m.useCallback(()=>{u(!1),i==null||i()},[i]);return hh({onOutsideEvent:_,elements:[p.floating,d],includeScroll:!0,invokeOnce:!0}),la(b=>{b.key==="Escape"&&c&&_()}),f.jsxs("div",{ref:p.setReference,className:q("relative",r==null?void 0:r.trigger),children:[e({openPopover:y,isOpen:c,ref:d}),qO.createPortal(f.jsx(wn,{children:c&&f.jsx(ov,{context:v,modal:!0,returnFocus:!0,initialFocus:h,children:f.jsx(Ae.div,{ref:p.setFloating,className:xt("rounded-2xl p-3 shadow-lg",o==="thin"?Oa:wi,r==null?void 0:r.surface,qt.modal),style:{...g,...yw},role:"dialog",tabIndex:-1,initial:"initial",animate:"animate",exit:"exit",variants:{initial:tt,animate:Rt,exit:{...tt,transition:{duration:bo.default}}},transition:{duration:bo.default,ease:"easeInOut"},children:f.jsx("div",{className:q("pointer-events-auto relative max-h-expanded-section overflow-visible",qt.modal),children:n({closePopover:_,isOpen:c,focusRef:h})})})})}),document.getElementById("popoverPortal")??document.body)]})}const mI=m.forwardRef((t,e)=>{const{items:n,defaultSelectedItemIndex:r,onSelect:o,onReset:i,disabled:a,showDefaultItemInDropdown:s=!1}=t,c=F(mt),u=m.useRef(void 0),d=m.useMemo(()=>!r||r<0||r>=n.length?0:r,[r,n]),[h,p]=m.useState(d);m.useImperativeHandle(e,()=>({setSelectedItemIndex:_=>p(_)}),[]);const{selectedItem:g,dropdownItems:v,selectedNonDefault:y}=m.useMemo(()=>({selectedItem:n[h]??void 0,dropdownItems:s?n:n.filter((_,b)=>b!==h),selectedNonDefault:h!==d}),[n,h,d,s]);return m.useEffect(()=>{c&&u.current!==c&&g&&g.onImpression&&(u.current=c,g.onImpression(c))},[c,g]),f.jsx(_pe,{renderTrigger:({openPopover:_})=>g&&f.jsxs(De,{title:g.key,"aria-label":g.title,variant:"rect",size:"36-sm",disabled:a,color:y?"composer-selected":"subtle-dimmed",className:"my-1 h-10 border border-black/8 px-3 py-2 dark:border-white/8",onClick:b=>{var C;(C=g.beforeClick)==null||C.call(g,c??""),y?(p(d),i==null||i()):_(b)},testId:g.testId,children:[y?f.jsx(kr,{url:bpe,className:"size-4"}):g.icon,f.jsx("span",{className:"font-medium leading-4 text-sm",children:g.buttonTitle??g.title})]}),renderSurface:({closePopover:_})=>f.jsx("div",{className:"flex flex-col",children:v.map(b=>f.jsx(ype,{item:b,onClick:C=>{var S;(S=b.beforeClick)==null||S.call(b,c??"");const w=n.findIndex(E=>E.key===b.key);p(w),o(w),_(C)}},b.key))}),containerClassNames:{surface:"p-1 bg-white dark:bg-slate-800/90 border-white/25 dark:border-slate-600/25"},placement:"bottom-start",floatingOffset:4})});mI.displayName="ComposerDropdownButton";const M4="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/quick-cde2uaJN.svg",Cpe="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/think-DxNkOoJG.svg";function Spe(t,e){Y.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:"composerCreateButton",eventInfo_impressionScenario:t??"off",eventInfo_conversationId:e}})}function wpe(t,e){Y.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:"composerThinkButton",eventInfo_impressionScenario:t?"thinkDeeperOn":"thinkDeeperOff",eventInfo_conversationId:e}})}function Epe(t){Y.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:"composerScreenshotButton",eventInfo_conversationId:t}})}function Tpe(t,e){Y.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"composerCreateButton",eventInfo_clickScenario:Ipe(t),eventInfo_conversationId:e}})}function Ipe(t){if(!t)return"showDrawer";switch(t){case"image":return"exitImage";case"podcast":return"exitPodcast";case"researchReport":return"exitResearchReport";default:return"showDrawer"}}function Ape(t,e){Y.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"composerThinkButton",eventInfo_clickScenario:t?"disableThinkDeeper":"enableThinkDeeper",eventInfo_conversationId:e}})}function kpe(t){Y.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"composerScreenshotButton",eventInfo_conversationId:t}})}function xpe(t){const{disabled:e=!1}=t,n=Rpe(),[r,o]=et(ir),[i,a]=m.useState(!1),s=m.useRef(null),c=m.useCallback(u=>{const d=n[u];((d==null?void 0:d.key)==="chat"||(d==null?void 0:d.key)==="reasoning")&&(a(!0),o(d.key))},[n,o]);return m.useEffect(()=>{var u;i?a(!1):(u=s.current)==null||u.setSelectedItemIndex(r==="reasoning"?1:0)},[r,i,a]),f.jsx(mI,{ref:s,items:n,onSelect:c,defaultSelectedItemIndex:0,showDefaultItemInDropdown:!0,onReset:()=>{o("chat")},disabled:e})}function hP(t){return e=>wpe(t,e)}function pP(t){return e=>Ape(t,e)}function Rpe(){const{t}=Fe("translation",{keyPrefix:"composer.chatModes"}),e={key:"chat",title:t("chat.title"),buttonTitle:t("chat.buttonTitle"),icon:f.jsx(kr,{url:M4,className:"size-5"}),description:t("chat.description"),testId:"composer-chat-mode-quick-button",onImpression:hP(!1),beforeClick:pP(!1),tags:[{label:t("chat.latency"),color:"neutral"}]},n={key:"reasoning",title:t("reasoning.title"),icon:f.jsx(kr,{url:Cpe,className:"size-6"}),description:t("reasoning.description"),testId:"composer-chat-mode-reasoning-button",onImpression:hP(!0),beforeClick:pP(!0),tags:[{label:t("reasoning.latency"),color:"neutral"}]};return[e,n]}const Ppe="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/research-DamIycj6.svg",Ope="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/think-deeper-C6Ziv8bd.svg",Npe="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/checklist-BDS7QRqm.svg",Mpe=(t,e,n)=>{const r=t[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((o,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})},{slice:Lpe,forEach:Dpe}=[];function jpe(t){return Dpe.call(Lpe.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}const mP=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Upe=(t,e,n)=>{const r=n||{};r.path=r.path||"/";const o=encodeURIComponent(e);let i=`${t}=${o}`;if(r.maxAge>0){const a=r.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(a)}`}if(r.domain){if(!mP.test(r.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${r.domain}`}if(r.path){if(!mP.test(r.path))throw new TypeError("option path is invalid");i+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i},gP={create(t,e,n,r){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+n*60*1e3)),r&&(o.domain=r),document.cookie=Upe(t,encodeURIComponent(e),o)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let o=n[r];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(e)===0)return o.substring(e.length,o.length)}return null},remove(t){this.create(t,"",-1)}};var Fpe={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return gP.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:o,cookieOptions:i}=e;n&&typeof document<"u"&&gP.create(n,t,r,o,i)}},Bpe={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:o}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(o=window.location.hash.substring(window.location.hash.indexOf("?")));const a=o.substring(1).split("&");for(let s=0;s<a.length;s++){const c=a[s].indexOf("=");c>0&&a[s].substring(0,c)===e&&(n=a[s].substring(c+1))}}return n}};let Hd=null;const vP=()=>{if(Hd!==null)return Hd;try{Hd=window!=="undefined"&&window.localStorage!==null;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Hd=!1}return Hd};var Hpe={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&vP())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&vP()&&window.localStorage.setItem(n,t)}};let Vd=null;const yP=()=>{if(Vd!==null)return Vd;try{Vd=window!=="undefined"&&window.sessionStorage!==null;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Vd=!1}return Vd};var Vpe={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&yP())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&yP()&&window.sessionStorage.setItem(n,t)}},zpe={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:o}=navigator;if(n)for(let i=0;i<n.length;i++)e.push(n[i]);r&&e.push(r),o&&e.push(o)}return e.length>0?e:void 0}},$pe={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},Gpe={name:"path",lookup(t){var o;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(o=n[typeof e=="number"?e:0])==null?void 0:o.replace("/",""):void 0}},Kpe={name:"subdomain",lookup(t){var o,i;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((i=(o=window.location)==null?void 0:o.hostname)==null?void 0:i.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};function Wpe(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t}}class A0{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e||{languageUtils:{}},this.options=jpe(n,this.options||{},Wpe()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=o=>o.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(Fpe),this.addDetector(Bpe),this.addDetector(Hpe),this.addDetector(Vpe),this.addDetector(zpe),this.addDetector($pe),this.addDetector(Gpe),this.addDetector(Kpe)}addDetector(e){return this.detectors[e.name]=e,this}detect(e){e||(e=this.options.order);let n=[];return e.forEach(r=>{if(this.detectors[r]){let o=this.detectors[r].lookup(this.options);o&&typeof o=="string"&&(o=[o]),o&&(n=n.concat(o))}}),n=n.map(r=>this.options.convertDetectedLanguage(r)),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e,n){n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}A0.type="languageDetector";function k0(t){"@babel/helpers - typeof";return k0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k0(t)}function L4(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":k0(XMLHttpRequest))==="object"}function qpe(t){return!!t&&typeof t.then=="function"}function Ype(t){return qpe(t)?t:Promise.resolve(t)}var Kp={exports:{}},Wp={exports:{}},bP;function Qpe(){return bP||(bP=1,function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof df<"u"&&df,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(a){var s=typeof i<"u"&&i||typeof self<"u"&&self||typeof s<"u"&&s,c={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function u(k){return k&&DataView.prototype.isPrototypeOf(k)}if(c.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(k){return k&&d.indexOf(Object.prototype.toString.call(k))>-1};function p(k){if(typeof k!="string"&&(k=String(k)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(k)||k==="")throw new TypeError('Invalid character in header field name: "'+k+'"');return k.toLowerCase()}function g(k){return typeof k!="string"&&(k=String(k)),k}function v(k){var U={next:function(){var O=k.shift();return{done:O===void 0,value:O}}};return c.iterable&&(U[Symbol.iterator]=function(){return U}),U}function y(k){this.map={},k instanceof y?k.forEach(function(U,O){this.append(O,U)},this):Array.isArray(k)?k.forEach(function(U){this.append(U[0],U[1])},this):k&&Object.getOwnPropertyNames(k).forEach(function(U){this.append(U,k[U])},this)}y.prototype.append=function(k,U){k=p(k),U=g(U);var O=this.map[k];this.map[k]=O?O+", "+U:U},y.prototype.delete=function(k){delete this.map[p(k)]},y.prototype.get=function(k){return k=p(k),this.has(k)?this.map[k]:null},y.prototype.has=function(k){return this.map.hasOwnProperty(p(k))},y.prototype.set=function(k,U){this.map[p(k)]=g(U)},y.prototype.forEach=function(k,U){for(var O in this.map)this.map.hasOwnProperty(O)&&k.call(U,this.map[O],O,this)},y.prototype.keys=function(){var k=[];return this.forEach(function(U,O){k.push(O)}),v(k)},y.prototype.values=function(){var k=[];return this.forEach(function(U){k.push(U)}),v(k)},y.prototype.entries=function(){var k=[];return this.forEach(function(U,O){k.push([O,U])}),v(k)},c.iterable&&(y.prototype[Symbol.iterator]=y.prototype.entries);function _(k){if(k.bodyUsed)return Promise.reject(new TypeError("Already read"));k.bodyUsed=!0}function b(k){return new Promise(function(U,O){k.onload=function(){U(k.result)},k.onerror=function(){O(k.error)}})}function C(k){var U=new FileReader,O=b(U);return U.readAsArrayBuffer(k),O}function w(k){var U=new FileReader,O=b(U);return U.readAsText(k),O}function S(k){for(var U=new Uint8Array(k),O=new Array(U.length),$=0;$<U.length;$++)O[$]=String.fromCharCode(U[$]);return O.join("")}function E(k){if(k.slice)return k.slice(0);var U=new Uint8Array(k.byteLength);return U.set(new Uint8Array(k)),U.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(k){this.bodyUsed=this.bodyUsed,this._bodyInit=k,k?typeof k=="string"?this._bodyText=k:c.blob&&Blob.prototype.isPrototypeOf(k)?this._bodyBlob=k:c.formData&&FormData.prototype.isPrototypeOf(k)?this._bodyFormData=k:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(k)?this._bodyText=k.toString():c.arrayBuffer&&c.blob&&u(k)?(this._bodyArrayBuffer=E(k.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(k)||h(k))?this._bodyArrayBuffer=E(k):this._bodyText=k=Object.prototype.toString.call(k):this._bodyText="",this.headers.get("content-type")||(typeof k=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(k)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var k=_(this);if(k)return k;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var k=_(this);return k||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(C)}),this.text=function(){var k=_(this);if(k)return k;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(S(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(R)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function A(k){var U=k.toUpperCase();return x.indexOf(U)>-1?U:k}function N(k,U){if(!(this instanceof N))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');U=U||{};var O=U.body;if(k instanceof N){if(k.bodyUsed)throw new TypeError("Already read");this.url=k.url,this.credentials=k.credentials,U.headers||(this.headers=new y(k.headers)),this.method=k.method,this.mode=k.mode,this.signal=k.signal,!O&&k._bodyInit!=null&&(O=k._bodyInit,k.bodyUsed=!0)}else this.url=String(k);if(this.credentials=U.credentials||this.credentials||"same-origin",(U.headers||!this.headers)&&(this.headers=new y(U.headers)),this.method=A(U.method||this.method||"GET"),this.mode=U.mode||this.mode||null,this.signal=U.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&O)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(O),(this.method==="GET"||this.method==="HEAD")&&(U.cache==="no-store"||U.cache==="no-cache")){var $=/([?&])_=[^&]*/;if($.test(this.url))this.url=this.url.replace($,"$1_="+new Date().getTime());else{var K=/\?/;this.url+=(K.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}N.prototype.clone=function(){return new N(this,{body:this._bodyInit})};function R(k){var U=new FormData;return k.trim().split("&").forEach(function(O){if(O){var $=O.split("="),K=$.shift().replace(/\+/g," "),J=$.join("=").replace(/\+/g," ");U.append(decodeURIComponent(K),decodeURIComponent(J))}}),U}function z(k){var U=new y,O=k.replace(/\r?\n[\t ]+/g," ");return O.split("\r").map(function($){return $.indexOf(`
`)===0?$.substr(1,$.length):$}).forEach(function($){var K=$.split(":"),J=K.shift().trim();if(J){var se=K.join(":").trim();U.append(J,se)}}),U}I.call(N.prototype);function P(k,U){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');U||(U={}),this.type="default",this.status=U.status===void 0?200:U.status,this.ok=this.status>=200&&this.status<300,this.statusText=U.statusText===void 0?"":""+U.statusText,this.headers=new y(U.headers),this.url=U.url||"",this._initBody(k)}I.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},P.error=function(){var k=new P(null,{status:0,statusText:""});return k.type="error",k};var X=[301,302,303,307,308];P.redirect=function(k,U){if(X.indexOf(U)===-1)throw new RangeError("Invalid status code");return new P(null,{status:U,headers:{location:k}})},a.DOMException=s.DOMException;try{new a.DOMException}catch{a.DOMException=function(U,O){this.message=U,this.name=O;var $=Error(U);this.stack=$.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function M(k,U){return new Promise(function(O,$){var K=new N(k,U);if(K.signal&&K.signal.aborted)return $(new a.DOMException("Aborted","AbortError"));var J=new XMLHttpRequest;function se(){J.abort()}J.onload=function(){var ve={status:J.status,statusText:J.statusText,headers:z(J.getAllResponseHeaders()||"")};ve.url="responseURL"in J?J.responseURL:ve.headers.get("X-Request-URL");var Be="response"in J?J.response:J.responseText;setTimeout(function(){O(new P(Be,ve))},0)},J.onerror=function(){setTimeout(function(){$(new TypeError("Network request failed"))},0)},J.ontimeout=function(){setTimeout(function(){$(new TypeError("Network request failed"))},0)},J.onabort=function(){setTimeout(function(){$(new a.DOMException("Aborted","AbortError"))},0)};function ne(ve){try{return ve===""&&s.location.href?s.location.href:ve}catch{return ve}}J.open(K.method,ne(K.url),!0),K.credentials==="include"?J.withCredentials=!0:K.credentials==="omit"&&(J.withCredentials=!1),"responseType"in J&&(c.blob?J.responseType="blob":c.arrayBuffer&&K.headers.get("Content-Type")&&K.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(J.responseType="arraybuffer")),U&&typeof U.headers=="object"&&!(U.headers instanceof y)?Object.getOwnPropertyNames(U.headers).forEach(function(ve){J.setRequestHeader(ve,g(U.headers[ve]))}):K.headers.forEach(function(ve,Be){J.setRequestHeader(Be,ve)}),K.signal&&(K.signal.addEventListener("abort",se),J.onreadystatechange=function(){J.readyState===4&&K.signal.removeEventListener("abort",se)}),J.send(typeof K._bodyInit>"u"?null:K._bodyInit)})}return M.polyfill=!0,s.fetch||(s.fetch=M,s.Headers=y,s.Request=N,s.Response=P),a.Headers=y,a.Request=N,a.Response=P,a.fetch=M,a})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var o=n.fetch?n:r;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,t.exports=e}(Wp,Wp.exports)),Wp.exports}var _P;function Jpe(){return _P||(_P=1,function(t,e){var n;if(typeof fetch=="function"&&(typeof df<"u"&&df.fetch?n=df.fetch:typeof window<"u"&&window.fetch?n=window.fetch:n=fetch),typeof gL<"u"&&typeof window>"u"){var r=n||Qpe();r.default&&(r=r.default),e.default=r,t.exports=e.default}}(Kp,Kp.exports)),Kp.exports}var D4=Jpe();const j4=q0(D4),CP=l8({__proto__:null,default:j4},[D4]);function SP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function wP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SP(Object(n),!0).forEach(function(r){Xpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xpe(t,e,n){return(e=Zpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zpe(t){var e=eme(t,"string");return Ec(e)=="symbol"?e:e+""}function eme(t,e){if(Ec(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ec(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ec(t){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ec(t)}var Yi;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?Yi=global.fetch:typeof window<"u"&&window.fetch?Yi=window.fetch:Yi=fetch);var gh;L4()&&(typeof global<"u"&&global.XMLHttpRequest?gh=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(gh=window.XMLHttpRequest));var Wg;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?Wg=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(Wg=window.ActiveXObject));!Yi&&CP&&!gh&&!Wg&&(Yi=j4||CP);typeof Yi!="function"&&(Yi=void 0);var x0=function(e,n){if(n&&Ec(n)==="object"){var r="";for(var o in n)r+="&"+encodeURIComponent(o)+"="+encodeURIComponent(n[o]);if(!r)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+r.slice(1)}return e},EP=function(e,n,r,o){var i=function(c){if(!c.ok)return r(c.statusText||"Error",{status:c.status});c.text().then(function(u){r(null,{status:c.status,data:u})}).catch(r)};if(o){var a=o(e,n);if(a instanceof Promise){a.then(i).catch(r);return}}typeof fetch=="function"?fetch(e,n).then(i).catch(r):Yi(e,n).then(i).catch(r)},TP=!1,tme=function(e,n,r,o){e.queryStringParams&&(n=x0(n,e.queryStringParams));var i=wP({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(i["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),r&&(i["Content-Type"]="application/json");var a=typeof e.requestOptions=="function"?e.requestOptions(r):e.requestOptions,s=wP({method:r?"POST":"GET",body:r?e.stringify(r):void 0,headers:i},TP?{}:a),c=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{EP(n,s,o,c)}catch(u){if(!a||Object.keys(a).length===0||!u.message||u.message.indexOf("not implemented")<0)return o(u);try{Object.keys(a).forEach(function(d){delete s[d]}),EP(n,s,o,c),TP=!0}catch(d){o(d)}}},nme=function(e,n,r,o){r&&Ec(r)==="object"&&(r=x0("",r).slice(1)),e.queryStringParams&&(n=x0(n,e.queryStringParams));try{var i;gh?i=new gh:i=new Wg("MSXML2.XMLHTTP.3.0"),i.open(r?"POST":"GET",n,1),e.crossDomain||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.withCredentials=!!e.withCredentials,r&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.overrideMimeType&&i.overrideMimeType("application/json");var a=e.customHeaders;if(a=typeof a=="function"?a():a,a)for(var s in a)i.setRequestHeader(s,a[s]);i.onreadystatechange=function(){i.readyState>3&&o(i.status>=400?i.statusText:null,{status:i.status,data:i.responseText})},i.send(r)}catch(c){console&&console.log(c)}},rme=function(e,n,r,o){if(typeof r=="function"&&(o=r,r=void 0),o=o||function(){},Yi&&n.indexOf("file:")!==0)return tme(e,n,r,o);if(L4()||typeof ActiveXObject=="function")return nme(e,n,r,o);o(new Error("No fetch and no xhr implementation found!"))};function Ou(t){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ou(t)}function IP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function X_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IP(Object(n),!0).forEach(function(r){U4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ome(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ime(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,F4(r.key),r)}}function ame(t,e,n){return e&&ime(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function U4(t,e,n){return(e=F4(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F4(t){var e=sme(t,"string");return Ou(e)=="symbol"?e:e+""}function sme(t,e){if(Ou(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ou(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var cme=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,r,o){return U4({},r,o||"")},parseLoadPayload:function(n,r){},request:rme,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},B4=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ome(this,t),this.services=e,this.options=n,this.allOptions=r,this.type="backend",this.init(e,n,r)}return ame(t,[{key:"init",value:function(n){var r=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=n,this.options=X_(X_(X_({},cme()),this.options||{}),o),this.allOptions=i,this.services&&this.options.reloadInterval){var a=setInterval(function(){return r.reload()},this.options.reloadInterval);Ou(a)==="object"&&typeof a.unref=="function"&&a.unref()}}},{key:"readMulti",value:function(n,r,o){this._readAny(n,n,r,r,o)}},{key:"read",value:function(n,r,o){this._readAny([n],n,[r],r,o)}},{key:"_readAny",value:function(n,r,o,i,a){var s=this,c=this.options.loadPath;typeof this.options.loadPath=="function"&&(c=this.options.loadPath(n,o)),c=Ype(c),c.then(function(u){if(!u)return a(null,{});var d=s.services.interpolator.interpolate(u,{lng:n.join("+"),ns:o.join("+")});s.loadUrl(d,a,r,i)})}},{key:"loadUrl",value:function(n,r,o,i){var a=this,s=typeof o=="string"?[o]:o,c=typeof i=="string"?[i]:i,u=this.options.parseLoadPayload(s,c);this.options.request(this.options,n,u,function(d,h){if(h&&(h.status>=500&&h.status<600||!h.status))return r("failed loading "+n+"; status code: "+h.status,!0);if(h&&h.status>=400&&h.status<500)return r("failed loading "+n+"; status code: "+h.status,!1);if(!h&&d&&d.message){var p=d.message.toLowerCase(),g=["failed","fetch","network","load"].find(function(_){return p.indexOf(_)>-1});if(g)return r("failed loading "+n+": "+d.message,!0)}if(d)return r(d,!1);var v,y;try{typeof h.data=="string"?v=a.options.parse(h.data,o,i):v=h.data}catch{y="failed parsing "+n+" to json"}if(y)return r(y,!1);r(null,v)})}},{key:"create",value:function(n,r,o,i,a){var s=this;if(this.options.addPath){typeof n=="string"&&(n=[n]);var c=this.options.parsePayload(r,o,i),u=0,d=[],h=[];n.forEach(function(p){var g=s.options.addPath;typeof s.options.addPath=="function"&&(g=s.options.addPath(p,r));var v=s.services.interpolator.interpolate(g,{lng:p,ns:r});s.options.request(s.options,v,c,function(y,_){u+=1,d.push(y),h.push(_),u===n.length&&typeof a=="function"&&a(d,h)})})}}},{key:"reload",value:function(){var n=this,r=this.services,o=r.backendConnector,i=r.languageUtils,a=r.logger,s=o.language;if(!(s&&s.toLowerCase()==="cimode")){var c=[],u=function(h){var p=i.toResolveHierarchy(h);p.forEach(function(g){c.indexOf(g)<0&&c.push(g)})};u(s),this.allOptions.preload&&this.allOptions.preload.forEach(function(d){return u(d)}),c.forEach(function(d){n.allOptions.ns.forEach(function(h){o.read(d,h,"read",null,null,function(p,g){p&&a.warn("loading namespace ".concat(h," for language ").concat(d," failed"),p),!p&&g&&a.log("loaded namespace ".concat(h," for language ").concat(d),g),o.loaded("".concat(d,"|").concat(h),p,g)})})})}}}])}();B4.type="backend";const R0=[{name:"Arabic",i18nCode:"ar",direction:"rtl"},{name:"Basque",i18nCode:"eu",direction:"ltr"},{name:"Bengali",i18nCode:"bn-IN",direction:"ltr"},{name:"Bulgarian",i18nCode:"bg",direction:"ltr"},{name:"Catalan",i18nCode:"ca",direction:"ltr"},{name:"Chinese (Simplified)",i18nCode:"zh-Hans",direction:"ltr"},{name:"Chinese (Traditional)",i18nCode:"zh-Hant",direction:"ltr"},{name:"Croatian",i18nCode:"hr",direction:"ltr"},{name:"Czech",i18nCode:"cs",direction:"ltr"},{name:"Danish",i18nCode:"da",direction:"ltr"},{name:"Dutch",i18nCode:"nl",direction:"ltr"},{name:"English",i18nCode:"en-US",direction:"ltr"},{name:"English (United Kingdom)",i18nCode:"en-GB",direction:"ltr"},{name:"Estonian",i18nCode:"et",direction:"ltr"},{name:"Finnish",i18nCode:"fi",direction:"ltr"},{name:"French",i18nCode:"fr",direction:"ltr"},{name:"Galician",i18nCode:"gl",direction:"ltr"},{name:"German",i18nCode:"de",direction:"ltr"},{name:"Gujarati",i18nCode:"gu",direction:"ltr"},{name:"Hebrew",i18nCode:"he",direction:"rtl"},{name:"Hindi",i18nCode:"hi",direction:"ltr"},{name:"Hungarian",i18nCode:"hu",direction:"ltr"},{name:"Icelandic",i18nCode:"is",direction:"ltr"},{name:"Indonesian",i18nCode:"id",direction:"ltr"},{name:"Italian",i18nCode:"it",direction:"ltr"},{name:"Japanese",i18nCode:"ja",direction:"ltr"},{name:"Kannada",i18nCode:"kn",direction:"ltr"},{name:"Korean",i18nCode:"ko",direction:"ltr"},{name:"Latvian",i18nCode:"lv",direction:"ltr"},{name:"Lithuanian",i18nCode:"lt",direction:"ltr"},{name:"Malay",i18nCode:"ms",direction:"ltr"},{name:"Malayalam",i18nCode:"ml",direction:"ltr"},{name:"Marathi",i18nCode:"mr",direction:"ltr"},{name:"Norwegian (Bokmål)",i18nCode:"nb-NO",direction:"ltr"},{name:"Polish",i18nCode:"pl",direction:"ltr"},{name:"Portuguese (Brazil)",i18nCode:"pt-BR",direction:"ltr"},{name:"Portuguese (Portugal)",i18nCode:"pt-PT",direction:"ltr"},{name:"Punjabi",i18nCode:"pa",direction:"ltr"},{name:"Romanian",i18nCode:"ro",direction:"ltr"},{name:"Russian",i18nCode:"ru",direction:"ltr"},{name:"Serbian (Latin)",i18nCode:"sr-Latn-RS",direction:"ltr"},{name:"Slovak",i18nCode:"sk",direction:"ltr"},{name:"Slovenian",i18nCode:"sl",direction:"ltr"},{name:"Spanish",i18nCode:"es",direction:"ltr"},{name:"Swedish",i18nCode:"sv",direction:"ltr"},{name:"Tamil",i18nCode:"ta",direction:"ltr"},{name:"Telugu",i18nCode:"te",direction:"ltr"},{name:"Thai",i18nCode:"th",direction:"ltr"},{name:"Turkish",i18nCode:"tr",direction:"ltr"},{name:"Ukrainian",i18nCode:"uk",direction:"ltr"},{name:"Vietnamese",i18nCode:"vi",direction:"ltr"}],H4=R0.map(t=>t.i18nCode);function AP(t){return qg(t)[0]??t}async function lme(t={}){let e;return Ee.instance().config().useI18nHttpApi?e=_t.use(A0).use(CA).use(B4).init({supportedLngs:R0.map(({i18nCode:n})=>n),fallbackLng:qg,detection:{convertDetectedLanguage:AP,...t},interpolation:{escapeValue:!1}}).then(async n=>(await kP(_t.language),n)):e=_t.use(A0).use(CA).init({supportedLngs:R0.map(({i18nCode:n})=>n),fallbackLng:qg,detection:{convertDetectedLanguage:AP,...t},interpolation:{escapeValue:!1}}).then(async n=>(await kP(_t.language),n)),_t.on("languageChanged",n=>{typeof document<"u"&&(document.body.dir=_t.dir(n.toLowerCase()),document.documentElement.lang=n.toLowerCase())}),e}async function kP(t){if(t)for(const e of qg(t))try{const n=await Mpe(Object.assign({"../../config/strings/af/strings.json":()=>T(()=>import("./strings-CbQyNL9A.js"),[]),"../../config/strings/am/strings.json":()=>T(()=>import("./strings-paAUVuEz.js"),[]),"../../config/strings/ar/strings.json":()=>T(()=>import("./strings-C4p7LzTK.js"),[]),"../../config/strings/as/strings.json":()=>T(()=>import("./strings-CmiASuTS.js"),[]),"../../config/strings/az/strings.json":()=>T(()=>import("./strings-DaT7XC9r.js"),[]),"../../config/strings/bg/strings.json":()=>T(()=>import("./strings-Coaglk98.js"),[]),"../../config/strings/bn-IN/strings.json":()=>T(()=>import("./strings-DI8wN7tU.js"),[]),"../../config/strings/bs/strings.json":()=>T(()=>import("./strings-Ckayi0oc.js"),[]),"../../config/strings/ca-Es-VALENCIA/strings.json":()=>T(()=>import("./strings-DSfdXUZO.js"),[]),"../../config/strings/ca/strings.json":()=>T(()=>import("./strings-I2CNh2xT.js"),[]),"../../config/strings/cs/strings.json":()=>T(()=>import("./strings-CUw1CzZa.js"),[]),"../../config/strings/cy/strings.json":()=>T(()=>import("./strings-CkmV3R3Y.js"),[]),"../../config/strings/da/strings.json":()=>T(()=>import("./strings-DdExVYQ0.js"),[]),"../../config/strings/de/strings.json":()=>T(()=>import("./strings-L9KtmZQV.js"),[]),"../../config/strings/el/strings.json":()=>T(()=>import("./strings-D39uOqTY.js"),[]),"../../config/strings/en-GB/strings.json":()=>T(()=>import("./strings-Bgt1pTvw.js"),[]),"../../config/strings/en-US/strings.json":()=>T(()=>import("./strings-B7iyUV1n.js"),[]),"../../config/strings/es-MX/strings.json":()=>T(()=>import("./strings-BwG66vmj.js"),[]),"../../config/strings/es/strings.json":()=>T(()=>import("./strings-DroZnvSy.js"),[]),"../../config/strings/et/strings.json":()=>T(()=>import("./strings-Cydu9cV_.js"),[]),"../../config/strings/eu/strings.json":()=>T(()=>import("./strings-B_ply57M.js"),[]),"../../config/strings/fa/strings.json":()=>T(()=>import("./strings-BJjREEAg.js"),[]),"../../config/strings/fi/strings.json":()=>T(()=>import("./strings-2UJ7t_Eu.js"),[]),"../../config/strings/fil/strings.json":()=>T(()=>import("./strings-DnXOQv88.js"),[]),"../../config/strings/fr-CA/strings.json":()=>T(()=>import("./strings-CzmkSGCV.js"),[]),"../../config/strings/fr/strings.json":()=>T(()=>import("./strings-DmupkT90.js"),[]),"../../config/strings/ga/strings.json":()=>T(()=>import("./strings-CBGFW6Kt.js"),[]),"../../config/strings/gd/strings.json":()=>T(()=>import("./strings-Dy3wNUPf.js"),[]),"../../config/strings/gl/strings.json":()=>T(()=>import("./strings-qo_jlMN8.js"),[]),"../../config/strings/gu/strings.json":()=>T(()=>import("./strings-DpO9wc1G.js"),[]),"../../config/strings/he/strings.json":()=>T(()=>import("./strings-CaENrvNy.js"),[]),"../../config/strings/hi/strings.json":()=>T(()=>import("./strings-ooTkV4Eq.js"),[]),"../../config/strings/hr/strings.json":()=>T(()=>import("./strings-DvPWJ-vy.js"),[]),"../../config/strings/hu/strings.json":()=>T(()=>import("./strings-BQyE0JXd.js"),[]),"../../config/strings/hy/strings.json":()=>T(()=>import("./strings-DQyUjPfA.js"),[]),"../../config/strings/id/strings.json":()=>T(()=>import("./strings-ys8PKZN_.js"),[]),"../../config/strings/is/strings.json":()=>T(()=>import("./strings-Cr7KGJhK.js"),[]),"../../config/strings/it/strings.json":()=>T(()=>import("./strings-Dpb5pv5M.js"),[]),"../../config/strings/ja/strings.json":()=>T(()=>import("./strings-Bag2jD-g.js"),[]),"../../config/strings/ka/strings.json":()=>T(()=>import("./strings-D8MeWqLx.js"),[]),"../../config/strings/kk/strings.json":()=>T(()=>import("./strings-DA15DmqE.js"),[]),"../../config/strings/km-KH/strings.json":()=>T(()=>import("./strings-xZ3Q2Vmh.js"),[]),"../../config/strings/kn/strings.json":()=>T(()=>import("./strings-BUbBf2BR.js"),[]),"../../config/strings/ko/strings.json":()=>T(()=>import("./strings-CP6GZCZe.js"),[]),"../../config/strings/kok/strings.json":()=>T(()=>import("./strings-DlA-NnEY.js"),[]),"../../config/strings/lb/strings.json":()=>T(()=>import("./strings-SGFfO5Hs.js"),[]),"../../config/strings/lo/strings.json":()=>T(()=>import("./strings-BhnAi8Lu.js"),[]),"../../config/strings/lt/strings.json":()=>T(()=>import("./strings-PE8tVLWj.js"),[]),"../../config/strings/lv/strings.json":()=>T(()=>import("./strings-HVy_0_jg.js"),[]),"../../config/strings/mi/strings.json":()=>T(()=>import("./strings-DnJbD05r.js"),[]),"../../config/strings/mk/strings.json":()=>T(()=>import("./strings-BUbKJFFk.js"),[]),"../../config/strings/ml/strings.json":()=>T(()=>import("./strings-B1R0LXfv.js"),[]),"../../config/strings/mr/strings.json":()=>T(()=>import("./strings-BIX87Zlf.js"),[]),"../../config/strings/ms/strings.json":()=>T(()=>import("./strings-pVQcG45o.js"),[]),"../../config/strings/mt/strings.json":()=>T(()=>import("./strings-DnO3kLwY.js"),[]),"../../config/strings/nb-NO/strings.json":()=>T(()=>import("./strings-CoyKoUv5.js"),[]),"../../config/strings/ne/strings.json":()=>T(()=>import("./strings-Cf7npPrA.js"),[]),"../../config/strings/nl/strings.json":()=>T(()=>import("./strings-CSaCWNOf.js"),[]),"../../config/strings/nn-NO/strings.json":()=>T(()=>import("./strings-C4QxUC5u.js"),[]),"../../config/strings/or/strings.json":()=>T(()=>import("./strings-CNgkeuTP.js"),[]),"../../config/strings/pa/strings.json":()=>T(()=>import("./strings-CEhU4ufg.js"),[]),"../../config/strings/pl/strings.json":()=>T(()=>import("./strings-DsReA73q.js"),[]),"../../config/strings/pt-BR/strings.json":()=>T(()=>import("./strings-BdQ-9_w9.js"),[]),"../../config/strings/pt-PT/strings.json":()=>T(()=>import("./strings-I2VALiJv.js"),[]),"../../config/strings/quz/strings.json":()=>T(()=>import("./strings-D-Es4BXP.js"),[]),"../../config/strings/ro/strings.json":()=>T(()=>import("./strings-CU1WpZsb.js"),[]),"../../config/strings/ru/strings.json":()=>T(()=>import("./strings-CV8UCHO8.js"),[]),"../../config/strings/sk/strings.json":()=>T(()=>import("./strings-SxLhS274.js"),[]),"../../config/strings/sl/strings.json":()=>T(()=>import("./strings-B-ztYNwn.js"),[]),"../../config/strings/sq/strings.json":()=>T(()=>import("./strings-Cec8X287.js"),[]),"../../config/strings/sr-Cyrl-BA/strings.json":()=>T(()=>import("./strings-D7Wz3Lvp.js"),[]),"../../config/strings/sr-Cyrl-RS/strings.json":()=>T(()=>import("./strings-D4KhYm8N.js"),[]),"../../config/strings/sr-Latn-RS/strings.json":()=>T(()=>import("./strings-CjKN3JBu.js"),[]),"../../config/strings/sv/strings.json":()=>T(()=>import("./strings-C9hwwya5.js"),[]),"../../config/strings/ta/strings.json":()=>T(()=>import("./strings-C7feQxfD.js"),[]),"../../config/strings/te/strings.json":()=>T(()=>import("./strings-DlNDKny1.js"),[]),"../../config/strings/th/strings.json":()=>T(()=>import("./strings-Dl9JkE0A.js"),[]),"../../config/strings/tr/strings.json":()=>T(()=>import("./strings-QTt0eddw.js"),[]),"../../config/strings/tt/strings.json":()=>T(()=>import("./strings-BuibmVDd.js"),[]),"../../config/strings/ug/strings.json":()=>T(()=>import("./strings-C2vgEQMC.js"),[]),"../../config/strings/uk/strings.json":()=>T(()=>import("./strings-Coc0hi8h.js"),[]),"../../config/strings/ur/strings.json":()=>T(()=>import("./strings-CrzhJE4A.js"),[]),"../../config/strings/uz-Latn-UZ/strings.json":()=>T(()=>import("./strings-X8b0iDmJ.js"),[]),"../../config/strings/vi/strings.json":()=>T(()=>import("./strings-tPfFQGW3.js"),[]),"../../config/strings/zh-Hans/strings.json":()=>T(()=>import("./strings-Cb1II_Na.js"),[]),"../../config/strings/zh-Hant/strings.json":()=>T(()=>import("./strings-Cyxa7QY6.js"),[])}),`../../config/strings/${e}/strings.json`,6);_t.addResourceBundle(e,"translation",n,!0,!0),await _t.changeLanguage(t);return}catch{console.warn(`Translation file for '${e}' not found. Trying next fallback language.`)}}function ume(){return _t.resolvedLanguage?_t.resolvedLanguage.split("-")[0]==="en":!1}function qg(t){const e="en-US";if(!t)return[e];const n=dme(t);if(n)return[n];const r=fme(t);if(r)return[r];const o=hme(t);return o?[o]:[e]}function dme(t){return H4.find(e=>e.toLowerCase()===t.toLowerCase())}function fme(t){if(["en-AU","en-NZ","en-IE"].includes(t))return"en-GB";if(t.startsWith("zh-")){const e=t.toLocaleLowerCase();return e==="zh-TW".toLocaleLowerCase()||e==="zh-HK".toLocaleLowerCase()?"zh-Hant":"zh-Hans"}}function hme(t){var n;const e=(n=t.split("-")[0])==null?void 0:n.toLowerCase();if(e){const r=H4.find(o=>o.toLowerCase()===e||o.toLowerCase().startsWith(`${e}-`));if(r)return r}}function V4(){const t=de("deep-research"),e=de("deep-research-nano"),n=_r(),r=F(Oh),o=!r&&n;return t&&ume()&&(r||!1||o&&e)&&!Ee.instance().config().disableDeepResearch}const pme=100,Yg=G([]);function mme(){const t=F(Yg),[e,n]=m.useState(!1),r=e?t:[];return f.jsxs("div",{className:"sr-only",ref:()=>setTimeout(()=>n(!0),pme),children:[f.jsx(xP,{messages:r.filter(o=>o.type==="polite"),type:"polite"}),f.jsx(xP,{messages:r.filter(o=>o.type==="assertive"),type:"assertive"})]})}function xP({messages:t,type:e}){return f.jsx("div",{"aria-live":e,"aria-atomic":"true",children:t.map(n=>f.jsx("div",{"aria-label":n.msg,children:n.msg},n.id))})}function P0(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.floor(Math.random()*16);return(t==="x"?e:Math.floor(Math.random()*4+8)).toString(16)})}const z4=7e3;function cd(t={}){return gme(t),null}function gme(t={}){const{msg:e,id:n,type:r="polite",timeout:o=z4}=t,i=Se(Yg),a=m.useRef(n??P0());m.useEffect(()=>{e&&i(s=>{if(s.some(u=>u.id===a.current&&u.msg===e&&u.type===r))return s;a.current=n??P0();const c={msg:e,id:a.current,type:r};return window.setTimeout(()=>{i(u=>u.filter(d=>d.id!==c.id))},o),[...s,c]})},[n,e,r,i,o])}function $4(t){const{msg:e,id:n,type:r="polite",timeout:o=z4}=t;if(!e)return;const i=ct();i.set(Yg,a=>{const s={msg:e,id:n??P0(),type:r};return window.setTimeout(()=>{i.set(Yg,c=>c.filter(u=>u.id!==s.id))},o),[...a,s]})}const vme=["chat","reasoning"];function yme(){const[t,e]=et(ir),n=YT(),{t:r}=Fe(),o=s=>{e(s),dt({source:"composerChatModeMenu",customData:JSON.stringify({currentMode:t,newMode:s})}),$4({msg:r("actions.screenReaderSwitchPrefix",{chatMode:lh(s)})})},i=V4(),a=vme.concat(i?["research"]:[],n?["computerUse"]:[]);return f.jsx("div",{className:"pointer-events-auto relative flex flex-col gap-1 rounded-2xl text-xs contrast-more:border-2","data-testid":"composer-mode-menu",role:"radiogroup",children:a.map((s,c)=>f.jsx(_me,{chatMode:s,isSelected:t===s,onSelect:o,focusOnMount:c===0},s))})}const bme={chat:f.jsx(kr,{url:M4,className:"size-5"}),reasoning:f.jsx(kr,{url:Ope,className:"size-5"}),research:f.jsx(kr,{url:Ppe,className:"size-5"}),computerUse:f.jsx(kr,{url:Npe,className:"size-5"})};function _me(t){const{chatMode:e,isSelected:n,focusOnMount:r,onSelect:o}=t,{t:i}=Fe(),a=m.useRef(null);return sd(a,r),f.jsxs("button",{type:"button",ref:a,title:lh(e),onClick:()=>o(e),className:q("flex items-center justify-between gap-4 rounded-xl px-4 py-2",nc["subtle-dimmed"]),"data-testid":`${e}-mode-option`,role:"radio","aria-checked":n,children:[f.jsxs("div",{className:"flex items-center gap-4",children:[bme[e],f.jsxs("div",{className:"pr-4 text-left",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsxs("div",{children:[" ",lh(e)," "]}),e==="research"&&f.jsx(_m,{color:"salmon",children:f.jsx("span",{children:i("common.new")})}),e==="computerUse"&&f.jsx(_m,{color:"salmon",children:f.jsx("span",{children:i("settings.labs.title")})}),f.jsx(_m,{children:f.jsx("span",{children:i(`composer.chatModes.${e}.latency`)})})]}),f.jsx("div",{className:"text-foreground-600 text-2xs dark:text-foreground-700",children:i(`composer.chatModes.${e}.description`)})]})]}),f.jsx(Cme,{isSelected:n})]})}function Cme(t){const{isSelected:e}=t;return f.jsx("div",{className:q("flex size-5 items-center justify-center rounded-full border-2",e?"border-foreground-800":"border-foreground-450"),children:e&&f.jsx("div",{className:"size-2.5 rounded-full bg-foreground-800 contrast-more:border-2"})})}function Sme(t){const{isChatModeMenuOpen:e,onRef:n,onClick:r,disableChatModeSwitcher:o}=t,{t:i}=Fe(),a=F(ir),s=c=>{dt({source:"composerChatModeSwitcher",customData:JSON.stringify({currentMode:a,isOpen:e})}),r(c)};return f.jsx(Ae.div,{layout:"position",initial:!1,children:f.jsxs(De,{testId:"chat-mode-switcher",title:i(e?"composer.chatModes.closeModeMenu":"composer.chatModes.openModeMenu"),onClick:s,color:"subtle-dimmed",ref:n,className:"my-1 border border-black/8",disabled:!o,children:[f.jsx("span",{className:"text-xs",children:lh(a)}),f.jsx(Sc,{className:q("size-4",e?"-rotate-90":"rotate-90")})]})})}function wme({disableChatModeSwitcher:t}){const[e,n]=et(ay);return f.jsx(qT,{isOpen:e==="chatMode",onIsOpenChange:r=>n(o=>r?"chatMode":o==="chatMode"?null:o),renderTrigger:(r,o)=>f.jsx(Sme,{isChatModeMenuOpen:o,onRef:r.ref,onClick:r.onClick,disableChatModeSwitcher:t}),options:{placement:"top-start",offset:{mainAxis:10,crossAxis:-12},hideOnMenuClick:!0},className:xt(wi,"p-2"),children:f.jsx(yme,{})})}function Eme({state:t}){const{t:e}=Fe(),n=Zt(),r=to(),o=Se(Or),i=Se(Bu),a=Se(Sv);return f.jsx(La,{data:{title:e("composer.goToHome"),testId:"home-button",onClick:async()=>{o(null),i(!1),a(void 0),bn({source:"homeButton"}),await r({to:"/",from:n})},isVisible:t!=="hidden",isDisabled:t==="disabled"},children:f.jsx($h,{className:"size-6","aria-hidden":!0})})}const G4=G(0),K4=G(),W4=G(),XIe=G({}),ZIe=G({lastPosition:0,wasPlaying:!1});function q4(t){const{url:e,podcastId:n,schema:r}=t;return Un(e,r,{query:n?{podcastId:n}:void 0}).then(o=>o.data)}function Tme(t,e,n,r){return r&&n?{url:`/sharing/podcasts/${n}`,schema:Hm}:t?e?{url:`/podcasts/${e}/${t}`,schema:Hm}:{url:"/daily-briefing",podcastId:t,schema:sM}:null}function Ime(){const{podcastId:t,podcastType:e,shareId:n}=Y0({strict:!1}),r=F(K4),o=t??r,i=my(),a=!!t||i,s=Se(W4),{data:c,isLoading:u,error:d}=Fc(Tme(o,e,n,a),q4);if(m.useEffect(()=>{if(c&&a){const p=Hm.parse(c);s(p.podcastId)}},[c,a,s]),c&&a){const p=Hm.parse(c),{isAvailable:g,podcastId:v,chapters:y,playback:{positionInSeconds:_,chapterId:b}}=p,C=n?`/sharing/podcasts/${n}/Files`:`/podcasts/${e}/${v}/Files`,w=y.map(({id:I,title:x,image:A,audio:N})=>({id:I,title:x,image:{landscape:{...A.landscape,url:`${C}/${A.landscape.name}`},portrait:{...A.portrait,url:`${C}/${A.portrait.name}`}},audio:N})),S={isAvailable:g,podcastId:t,chapters:w.map(I=>({...I,audio:{default:{url:`${C}/${I.audio.name}`,duration:I.audio.duration}},transitionMusic:null,sources:[]})),playback:{position:_,chapterId:b}},E={...p,chapters:w};return{data:S,podcastData:E,isPodcast:a,isLoading:u,error:d}}return{data:!a&&c?sM.parse(c):void 0,isPodcast:a,isLoading:u,error:d}}function eAe(){const{data:t}=Fc({url:"/daily-briefing/topics",schema:aM},q4);return{data:t}}async function tAe(t,e){await Pr({path:"/daily-briefing/topics/unfollow",args:{body:{ids:e}}}),await Pr({path:"/daily-briefing/topics/follow",args:{body:{ids:t}}})}function Ame(){const t=to(),e=Se(Or),n=Se(K4),[r,o]=et(G4),i=m.useCallback(async()=>{await t({from:"/daily",to:"/"}),n(void 0),e(null)},[n,e,t]),a=m.useCallback(async u=>{n(u),o(0),e("daily-briefing-player"),await t({from:"/",to:"/daily"})},[e,o,n,t]),s=m.useCallback(async()=>{o(r),await t({from:"/daily",to:"/topic-selection"}),e(null)},[e,o,r,t]),c=m.useCallback(async()=>{o(r),e("daily-briefing-player"),await t({from:"/topic-selection",to:"/daily"})},[r,o,e,t]);return{navigateToDailyBriefing:a,navigateToTopicSelection:s,exitDailyBriefing:i,returnToDailyBriefing:c,currentChapterIndex:r}}function kme({enabled:t,media:e,thresholds:n,key:r}){const o=m.useRef(0),i=m.useRef([]),a=m.useRef(new Set);return m.useEffect(()=>{i.current=(n==null?void 0:n.sort((s,c)=>s.seconds-c.seconds))??[]},[n]),m.useEffect(()=>{o.current=0,a.current=new Set;let s=null;if(!e||!t)return()=>{};function c(){s=performance.now()}function u(g){if(s!==null){const v=(performance.now()-s)/1e3;o.current+=v,s=g?performance.now():null,p()}}function d(){u(!1)}function h(){u(!0)}const p=()=>{for(let g=0;g<i.current.length;g+=1){const v=i.current[g];v&&o.current>=v.seconds&&!a.current.has(g)&&(a.current.add(g),v.callback())}};return e.addEventListener("playing",c),e.addEventListener("pause",d),e.addEventListener("ended",d),e.addEventListener("timeupdate",h),()=>{e.removeEventListener("playing",c),e.removeEventListener("pause",d),e.removeEventListener("ended",d),e.removeEventListener("timeupdate",h)}},[t,e,r]),{totalTimePlayedRef:o}}const ld="daily";function nAe(){Y.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"personalizeButton",eventInfo_clickScenario:"",eventInfo_pageName:ld}})}function rAe(t){Y.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_Select",eventInfo_clickScenario:t,eventInfo_pageName:ld}})}function oAe(t){Y.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_UnSelect",eventInfo_clickScenario:t,eventInfo_pageName:ld}})}function iAe(t){Y.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_Save",eventInfo_clickScenario:t.join(","),eventInfo_pageName:ld}})}function aAe(){Y.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_Later",eventInfo_clickScenario:"",eventInfo_pageName:ld}})}const O0={Podcast:"podcastPlayer",DailyBriefing:"dailyBriefingPlayer"},Qg={Daily:ld,Podcast:"podcast"},fl={Skip:"skip",Rewind:"rewind",Play:"play",Pause:"pause",Next:"next",Previous:"previous",Playback:"playback"};function hl(t,e,n){dt({source:t,pageName:t===O0.Podcast?Qg.Podcast:Qg.Daily,scenario:e,customData:n})}function Y4(t,e,n){return{DailyBriefing:`${e}|${n}`,Podcast:e}[t]}function RP(t,e,n){const r=Y4(t,e,n);r&&Pr({path:`/media/${t}/${r}/playback/completed`,args:{}}).catch(o=>{e2(o)})}function xme(t,e,n,r){const o=Y4(t,n,r);o&&Pr({path:`/media/${t}/${o}/playback`,args:{options:{method:"PATCH"},body:{positionInSeconds:e}}}).catch(i=>{e2(i)})}function PP(t,e){const n=Object.keys(e);if(n.length!==0)return typeof t<"u"&&n.includes(t)?e[t]:Object.values(e)[0]}const Rme=5,Pme=5e3;function Q4(){var Ze,he;const{exitDailyBriefing:t}=Ame(),{data:e,isPodcast:n}=Ime(),r=n?O0.Podcast:O0.DailyBriefing,o=F(W4),i=F(Rh),a=m.useMemo(()=>e?n?e.chapters.map(j=>{var W;return[((W=j.audio.default)==null?void 0:W.duration)??0]}):e.chapters.map(j=>{var W;const pe=[((W=PP(i,j.audio))==null?void 0:W.duration)??0];return j.transitionMusic&&pe.push(j.transitionMusic.duration),pe}):[],[e,n,i]),[s,c]=et(G4),u=m.useRef(null),[d,h]=m.useState(!1),[p,g]=m.useState(!1),v=s<a.length-1,y=s>0,_=m.useRef(performance.now()),b=m.useRef(performance.now()),C=m.useMemo(()=>{var j;return(j=e==null?void 0:e.chapters[s])!=null&&j.id?e.chapters[s].id:o&&o.split(",")[s]},[e==null?void 0:e.chapters,s,o]),w=m.useMemo(()=>e?n?e.chapters.map(j=>{var pe;return[((pe=j.audio.default)==null?void 0:pe.url)??""]}):e.chapters.map(j=>{var W;const pe=[((W=PP(i,j.audio))==null?void 0:W.url)??""];return j.transitionMusic&&pe.push(j.transitionMusic.url),pe}):[],[e,i,n]),[S,E]=m.useState(0),I=de("daily-briefing-viewed"),[x,A]=m.useState([]),[N,R]=m.useState(null),z=JSON.stringify({podcastId:o,eventInfo_chapterId:(Ze=e==null?void 0:e.chapters[s])==null?void 0:Ze.id,eventInfo_chapterPlayDuration:performance.now()-_.current});kme({enabled:I,media:N,key:C,thresholds:[{seconds:Rme,callback:()=>{if(C&&!x.includes(C)){try{Pr({path:`/daily-briefing/${C}/viewed`,args:{analytics:{anonymousPath:"/daily-briefing/*/viewed"}}})}catch{}A([...x,C])}}}]}),m.useEffect(()=>{if(!N||!d)return;const j=setInterval(()=>{const pe=N.currentTime;xme("DailyBriefing",pe,o,C)},Pme);return()=>{clearInterval(j)}},[N,d,C,o]);function P(){var j;h(!0),(j=u.current)==null||j.playAnimation(),N==null||N.play(),hl(r,fl.Play,z)}function X(){var j;h(!1),(j=u.current)==null||j.pauseAnimation(),N==null||N.pause(),hl(r,fl.Pause,z)}function M(j){if(N){const pe=Math.min(N.currentTime+j,N.duration);N.currentTime=pe,hl(r,fl.Skip,JSON.stringify({seconds:j}))}}function k(j){if(N){const pe=Math.max(N.currentTime-j,0);N.currentTime=pe,hl(r,fl.Rewind,JSON.stringify({seconds:j}))}}function U(){var j,pe,W;RP("DailyBriefing",o,C),e!=null&&e.chapters&&Y.trackEvent({name:"system",data:{eventName:"chapterPlayDuration",eventInfo_podcastId:o,eventInfo_chapterIndex:s,eventInfo_isCompleted:s===e.chapters.length-1,eventInfo_publisherName:(pe=(j=e.chapters[s])==null?void 0:j.sources)==null?void 0:pe.map(re=>re.publisherName).join(","),eventInfo_impressionElement:Qg.Daily,eventInfo_customData:JSON.stringify({eventInfo_chapterId:(W=e.chapters[s])==null?void 0:W.id,eventInfo_chapterPlayDuration:performance.now()-_.current})}})}function O(){RP("Podcast",o),Y.trackEvent({name:"system",data:{eventName:"podcastPlayDuration",eventInfo_isCompleted:!0,eventInfo_podcastId:o,eventInfo_podcastPlayDuration:performance.now()-b.current,eventInfo_impressionElement:Qg.Podcast}})}function $(){N&&(N.currentTime=0)}function K(j){U(),_.current=performance.now(),$(),E(0),c(j)}function J(){v&&(K(s+1),hl(r,fl.Next,z))}function se(){y&&(K(s-1),hl(r,fl.Previous,z))}function ne(j){N&&(N.playbackRate=j/100)}function ve(j){const W=(lb.indexOf(j)+1)%lb.length;return lb[W]??vv}function Be(){h(!0);const j=w[s]??[];S<j.length-1?E(pe=>pe+1):j.length-1===S&&v?J():(He(),t())}function Te(j){j==="open"&&g(d),j==="close"&&p&&P()}function Pe(){_.current=performance.now(),b.current=performance.now()}function He(){n?O():U()}return{isPlaying:d,currentChapterId:C,currentChapterIndex:s,chapterDurations:a,currentChapterPartIndex:S,audioElement:N,setAudioElement:R,audioChaptersProgressBarRef:u,currentChapterAudioSrc:((he=w[s])==null?void 0:he[S])??"",play:e?P:void 0,pause:e?X:void 0,skipForward:e?j=>M(j):()=>{},skipBack:e?j=>k(j):()=>{},goToNextChapter:v?J:void 0,goToPreviousChapter:y?se:void 0,getNextPlaybackSpeed:e?j=>ve(j):void 0,applyPlaybackRate:e?j=>ne(j):()=>{},onChapterEnded:Be,onToggleVoiceSettings:Te,resetAllTimers:Pe,trackPlayerEndEvents:He}}const gI=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t},m.createElement("path",{d:"M17.75 3A3.25 3.25 0 0 1 21 6.25v11.5A3.25 3.25 0 0 1 17.75 21H6.25A3.25 3.25 0 0 1 3 17.75V6.25A3.25 3.25 0 0 1 6.25 3h11.5Zm.58 16.401-5.805-5.686a.75.75 0 0 0-.966-.071l-.084.07-5.807 5.687c.182.064.378.099.582.099h11.5c.203 0 .399-.035.58-.099l-5.805-5.686L18.33 19.4ZM17.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v11.5c0 .208.036.408.103.594l5.823-5.701a2.25 2.25 0 0 1 3.02-.116l.128.116 5.822 5.702c.067-.186.104-.386.104-.595V6.25a1.75 1.75 0 0 0-1.75-1.75Zm-2.498 2a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z"})),sAe=Object.freeze(Object.defineProperty({__proto__:null,default:gI},Symbol.toStringTag,{value:"Module"}));function Ome(t){const[e,n]=m.useState(!1),{tab:r,className:o=""}=t,{t:i}=Fe();return e||!r.favIconUrl?f.jsx(gI,{className:q("size-5",o)}):f.jsx("img",{src:r.favIconUrl,alt:i("composer.multiTabs.tabFavIconAltText"),className:q("size-4 rounded bg-white",o),onError:()=>{n(!0)}})}function Nme(t){try{return new URL(t).hostname}catch{return null}}function Mme(t,e=5){const n=new Set;for(const r of t){if(n.size>=e)break;if(r.url){const o=Nme(r.url);o&&n.add(o)}}return Array.from(n).join(", ")}function Lme(t){const{tabCount:e}=t,{t:n}=Fe(),r=m.useMemo(()=>n("composer.multiTabs.browserCurrentSelectedCardTitle",{count:e}),[n,e]);return f.jsx("span",{className:"min-w-0 truncate font-semibold text-foreground-750 text-xs",children:r})}function Dme(t){const{tabs:e}=t,n=m.useMemo(()=>Mme(e,5),[e]);return f.jsx("span",{className:"truncate text-foreground-750 opacity-60 text-2xs",children:n})}function J4(t){const{tabs:e,onRemove:n,showRemoveIcon:r,onClick:o}=t,{t:i}=Fe(),a=m.useMemo(()=>e.slice(0,3),[e]),s=u=>{u.stopPropagation(),n==null||n()},c=u=>{u.stopPropagation(),o==null||o()};return f.jsxs(Ae.div,{className:"relative flex h-[58px] w-full flex-row items-center justify-center gap-2 overflow-hidden rounded-xl border border-black/8 bg-white/90 p-3 dark:border-white/8 dark:bg-midnight-800/80",layout:"position",initial:tt,animate:Rt,exit:tt,onClick:c,children:[f.jsx("div",{className:q("flex h-5 min-w-5 flex-none items-center justify-center rounded bg-white/90 dark:bg-midnight-800/80"),children:a.map((u,d)=>f.jsx(Ome,{tab:u,className:q(d>0&&"-ms-[6px]")},u.id))}),f.jsxs("div",{className:"mr-7 flex min-w-0 flex-1 flex-col",children:[f.jsx(Lme,{tabCount:e.length}),f.jsx(Dme,{tabs:e})]}),r&&f.jsx("button",{type:"button",title:i("composer.removeImage"),"aria-label":i("composer.removeImage"),onClick:s,tabIndex:0,className:"absolute end-0.5 top-0.5 m-1 rounded-full p-1 text-foreground-850 safe-hover:bg-black/5 dark:safe-hover:bg-black/30",children:f.jsx(yo,{className:"size-3"})})]})}function jme({onClick:t,showRemoveIcon:e=!0}){const[n,r]=et(sy),o=m.useMemo(()=>Array.from(n.values()),[n]);return n.size===0?null:f.jsx("div",{className:"flex min-h-[60px] flex-col gap-2",children:f.jsx(J4,{showRemoveIcon:e,tabs:o,onRemove:()=>{r(new Map)},onClick:t})})}const X4=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 24",fill:"currentColor",...t},m.createElement("path",{d:"M12.5 2C18.0228 2 22.5 6.47715 22.5 12C22.5 17.5228 18.0228 22 12.5 22C6.97715 22 2.5 17.5228 2.5 12C2.5 6.47715 6.97715 2 12.5 2ZM12.5 3.5C7.80558 3.5 4 7.30558 4 12C4 16.6944 7.80558 20.5 12.5 20.5C17.1944 20.5 21 16.6944 21 12C21 7.30558 17.1944 3.5 12.5 3.5ZM12.5 7C12.9142 7 13.25 7.33579 13.25 7.75V11.25H16.75C17.1642 11.25 17.5 11.5858 17.5 12C17.5 12.4142 17.1642 12.75 16.75 12.75H13.25V16.25C13.25 16.6642 12.9142 17 12.5 17C12.0858 17 11.75 16.6642 11.75 16.25V12.75H8.25C7.83579 12.75 7.5 12.4142 7.5 12C7.5 11.5858 7.83579 11.25 8.25 11.25H11.75V7.75C11.75 7.33579 12.0858 7 12.5 7Z"})),cAe=Object.freeze(Object.defineProperty({__proto__:null,default:X4},Symbol.toStringTag,{value:"Module"})),Z4=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 24",fill:"currentColor",...t},m.createElement("path",{d:"M12.5 2C18.0228 2 22.5 6.47715 22.5 12C22.5 17.5228 18.0228 22 12.5 22C6.97715 22 2.5 17.5228 2.5 12C2.5 6.47715 6.97715 2 12.5 2ZM15.7197 8.96967L11.25 13.4393L9.28033 11.4697C8.98744 11.1768 8.51256 11.1768 8.21967 11.4697C7.92678 11.7626 7.92678 12.2374 8.21967 12.5303L10.7197 15.0303C11.0126 15.3232 11.4874 15.3232 11.7803 15.0303L16.7803 10.0303C17.0732 9.73744 17.0732 9.26256 16.7803 8.96967C16.4874 8.67678 16.0126 8.67678 15.7197 8.96967Z"})),lAe=Object.freeze(Object.defineProperty({__proto__:null,default:Z4},Symbol.toStringTag,{value:"Module"}));function eU(t){return m.useCallback(e=>{if(e.key==="Enter"&&!e.shiftKey||e.key===" "){e.preventDefault();try{const n=t(e);n instanceof Promise&&n.catch(console.error)}catch(n){console.error("Error in useEnterOrSpaceKeyDown:",n)}}},[t])}const OP="ml-auto mr-[2px] size-6 flex-none";function Ume(t){const{tab:e,onClick:n,showHighlight:r}=t,[o,i]=m.useState(!1),{t:a}=Fe(),s=m.useCallback(()=>{n==null||n({...e,added:!e.added})},[n,e]),c=eU(s);return f.jsxs("div",{className:q("box-border flex h-10 w-full cursor-pointer flex-row items-center rounded-lg p-2 active:bg-black/3 safe-hover:bg-black/5 dark:active:bg-white/5 dark:safe-hover:bg-black/30",r&&"bg-black/5 dark:bg-white/8"),onClick:s,role:"button",tabIndex:0,onKeyDown:c,children:[f.jsx("div",{className:"relative flex size-4 flex-none flex-row items-center rounded-lg bg-black/5",children:o||!e.favIconUrl?f.jsx(gI,{className:"size-full"}):f.jsx("img",{src:e.favIconUrl,alt:a("composer.multiTabs.tabFavIconAltText"),className:"size-full rounded-[1px] object-cover",onError:()=>{i(!0)}})}),f.jsx("span",{className:"ml-2 mr-7 max-h-full truncate font-[450] text-foreground-850 text-xs",children:e.title}),e.added?f.jsx(Z4,{className:OP}):f.jsx(X4,{className:OP})]})}const tU=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t},m.createElement("path",{d:"M4.5 10a5.5 5.5 0 1 1 11 0 5.5 5.5 0 0 1-11 0ZM10 3a7 7 0 1 0 4.391 12.452l5.329 5.328a.75.75 0 1 0 1.06-1.06l-5.328-5.329A7 7 0 0 0 10 3Z"})),uAe=Object.freeze(Object.defineProperty({__proto__:null,default:tU},Symbol.toStringTag,{value:"Module"})),NP="";function Fme(t){const{onChange:e,defaultValue:n}=t,{t:r}=Fe(),[o,i]=m.useState(n??NP),a=()=>{i(NP)},s=eU(a),c=m.useCallback(u=>{i(u.target.value)},[]);return m.useEffect(()=>{e==null||e(o)},[e,o]),f.jsxs("div",{className:"mt-3 flex h-8 w-full flex-row items-center rounded-3xl bg-white/60 dark:bg-black/60",children:[f.jsx(tU,{className:"mx-2 size-4"}),f.jsx("input",{type:"text",id:"browser-tab-search",autoComplete:"off",spellCheck:!1,autoCorrect:"off",className:"w-full rounded-lg bg-transparent py-2 text-sm focus:outline-none",placeholder:r("composer.multiTabs.browserTabMenuSearchPlaceholder"),"aria-label":r("composer.multiTabs.browserTabMenuSearchPlaceholder"),onChange:c,value:o,maxLength:100}),o&&f.jsx("div",{role:"button",tabIndex:0,className:"me-1 ms-auto h-6 cursor-pointer rounded-xl border border-midnight-250 bg-midnight-200 px-3 py-1 text-foreground-800 text-2xs dark:border-white/50 dark:bg-white/5",onKeyDown:s,onClick:a,"aria-label":r("composer.multiTabs.browserTabMenuSearchClear"),children:r("composer.multiTabs.browserTabMenuSearchClear")})]})}function Bme(t,e){let n=null;return(...r)=>{n!==null&&window.clearTimeout(n),n=window.setTimeout(()=>t(...r),e)}}const Hme=300,dAe=2e3;function Vme(t,e=1e3){const n=m.useRef();return n.current=t,m.useMemo(()=>Bme((...i)=>{var a;(a=n.current)==null||a.call(n,...i)},e),[e])}const zme="edge://discover-chat-v2",fAe="Edge.Context.Pref",hAe="Edge.Context.OnPref",$me="Edge.IsFeatureEnabled",Gme="Edge.OnIsFeatureEnabled",pAe="isShowCopilotButtonSupported";class Jg{constructor(){Z(this,"resolve",null);Z(this,"isCancelled");Z(this,"token");this.token=new Promise(e=>{this.resolve=e}),this.isCancelled=!1}static cancelled(){const e=new Jg;return e.cancel(),e}static create(e){const n=new Jg;return e&&e.then(()=>n.cancel()),n}static delay(e){return this.create(new Promise(n=>{setTimeout(()=>n(null),e)}))}cancelled(){return this.isCancelled}cancel(){return!this.isCancelled&&this.resolve&&this.resolve(this),this.isCancelled=!0,this.isCancelled}dispose(){this.cancel()}}function Kme(t){window.parent.postMessage(t,zme)}class vI{constructor(e,n="",r,o){Z(this,"listenerKey",vI.name);Z(this,"result",null);Z(this,"priority","Normal");Z(this,"createdDate",new Date);Z(this,"id");Z(this,"resolveListener");Z(this,"eventName");Z(this,"canResolve");this.eventName=e,this.id=n,r==null||r.then(()=>this.cancel()),this.canResolve=o}init(e){e!==void 0?this.resolveListener=e:this.result=new Promise(n=>{this.resolveListener=n})}maybeHandleEvent(e){if(!this.resolveListener)throw new Error("PostMessageListener is not initialized");const{eventName:n,requestId:r}=e;return r!==this.id?!1:n===this.eventName?this.canResolve&&!this.canResolve(e)?!1:(this.resolveListener(e),!0):!1}cancel(){if(!this.resolveListener)throw new Error("PostMessageListener is not initialized");return this.result&&this.resolveListener(null),!0}}const Ms=class Ms{constructor(){Z(this,"activeListeners",[])}static instance(){return Ms.singleton||(Ms.singleton=new Ms),Ms.singleton}push(e,n,r){return e.init(r),this.activeListeners.push(e),n&&n(),e.result===null?Promise.resolve(null):e.result.then(o=>(this.pop(e),o)).catch(()=>(this.pop(e),null))}pop(e){const n=this.activeListeners.indexOf(e);n>-1&&this.activeListeners.splice(n,1)}findAndHandleListener(e){for(const n of[...this.activeListeners].sort((r,o)=>r.createdDate<o.createdDate?-1:1))if(n.maybeHandleEvent(e))break}};Z(Ms,"singleton",null);let N0=Ms;class Wme{constructor(){Z(this,"isFeatureAvailableApiSupported");Z(this,"enabledFeatures",new Map);this.isFeatureAvailableApiSupported=this.getFeatureAvailableApiSupported()}async isFeatureEnabled(e){return this.enabledFeatures.has(e)||await this.retrieveEnabledFeatures([e]),this.enabledFeatures.get(e)??!1}async retrieveEnabledFeatures(e){if(!this.isFeatureAvailableApiSupported)return;await this.waitForNativeBridgeConnected();const n=1e3,r={eventName:$me,requestId:crypto.randomUUID(),isOutgoing:!0,args:{featureNames:e}},o=await N0.instance().push(new vI(Gme,r.requestId,Jg.delay(n).token),()=>{Kme(r)});if(o){const i=o.args;for(const a of e){const s=i.featureNames.includes(a);this.enabledFeatures.set(a,s)}}}getFeatureAvailableApiSupported(){for(const n of navigator.userAgent.split(" "))if(n.startsWith("Edg/")){const r=n.split("/")[1];if(r!==void 0){const o=r.split(".")[0];if(o!==void 0)return parseInt(o,10)>=132}}return!1}waitForNativeBridgeConnected(){const e=ct();return e.get(nm)?Promise.resolve():new Promise(n=>{const r=e.sub(nm,()=>{e.get(nm)&&(r(),n())})})}}const mAe=new Wme;function qme(t){return t!=null&&typeof t=="object"&&"id"in t&&typeof t.id=="number"&&"windowId"in t&&typeof t.windowId=="number"&&"url"in t&&typeof t.url=="string"}function nU(t){return Array.isArray(t)&&t.every(e=>qme(e))}const Yme=5,Qme=3,Jme=8;function Xme(){return ot("edge-multi-tabs-limit-3")?Qme:ot("edge-multi-tabs-limit-8")?Jme:Yme}function Zme(t,e){const n=new Set(t.map(o=>o.id)),r=new Set(e.map(o=>o.id));if(n.size!==r.size)return!0;for(const o of n)if(!r.has(o))return!0;return!1}function ege(t){const{styles:e,onRef:n,onSave:r,setIsMultiTabMenuExpanded:o}=t,[i,a]=et(sy),s=m.useRef(new Map(i)),c=m.useRef(null),[u,d]=m.useState([]),[h,p]=m.useState(-1),g=m.useRef(null),{t:v}=Fe(),y=m.useDeferredValue([...u]),_=m.useMemo(()=>y.filter(P=>P.isAppear),[y]),b=F(yj),C=s.current;m.useEffect(()=>{async function P(){const{tabs:X}=await Lae.run({});if(nU(X)){const M=[];for(const k of X)k.id&&M.push({...k,added:C.has(k.id),isAppear:!0});d(M)}}P().catch(console.error)},[C]);const w=m.useMemo(()=>u.filter(P=>P.added),[u]),S=m.useMemo(()=>w.length===0||w.length>Xme(),[w]),E=m.useCallback(P=>{n==null||n(P),c.current=P},[n]),I=()=>{o==null||o(!1)},x=m.useCallback(()=>{if(S)return;a(X=>{const M=new Map(X);for(const k of u)k.id&&(k.added?M.set(k.id,k):M.has(k.id)&&M.delete(k.id));return M});const P=Zme(w,[...C.values()]);r==null||r(w,P),o==null||o(!1)},[S,a,w,C,r,o,u]),A=m.useCallback(P=>{d(X=>X.map(k=>k.id===P.id?P:k))},[]),N=Vme(m.useCallback(P=>{d(X=>X.map(M=>({...M,isAppear:M.title?M.title.toLowerCase().includes(P.toLowerCase().trim()):!0})))},[]),Hme),R=m.useCallback(P=>{p(X=>P==="up"?X>0?X-1:_.length-1:X<_.length-1?X+1:0)},[p,_]);m.useEffect(()=>{g.current&&h>=0&&g.current.scrollIntoView({block:"nearest"})},[h,g]);const z=m.useCallback(P=>{if(["ArrowUp","ArrowDown"].includes(P.key))P.preventDefault(),R(P.key==="ArrowUp"?"up":"down");else if(P.key==="Enter")P.preventDefault(),x();else if(P.key===" "&&h>=0){P.preventDefault();const X=_[h];X&&A({...X,added:!X.added})}},[_,A,x,h,R]);return m.useEffect(()=>(gn.on("multi-tabs:search",N),gn.on("multi-tabs:key-down",z),()=>{gn.off("multi-tabs:search",N),gn.off("multi-tabs:key-down",z)}),[z,N]),f.jsxs("div",{className:q(qt.modal,"pointer-events-auto relative z-40 box-border flex max-h-[400px] w-full flex-col rounded-b-6xl rounded-t-4xl border border-white p-4 shadow-lg backdrop-blur-2xl backdrop-saturate-150 contrast-more:border-2","bg-gradient-composer-tabs-menu-light dark:bg-gradient-composer-tabs-menu-dark","bg-blend-normal"),style:e,ref:E,"data-testid":"composer-multi-tabs-menu",role:"menu",tabIndex:0,onKeyDown:b?void 0:z,children:[f.jsxs("div",{className:"flex w-full flex-row items-center justify-between pt-2",children:[f.jsx("span",{className:"font-[500] text-foreground-900 text-xs",children:v("composer.multiTabs.browserTabMenuTitle")}),f.jsx(yo,{className:"size-5 cursor-pointer",onClick:I})]}),!b&&f.jsx(Fme,{onChange:N}),f.jsx("div",{className:"t-custom-scrollbar my-3 flex flex-col gap-y-1 overflow-y-auto overflow-x-hidden",children:_.map((P,X)=>f.jsx("div",{ref:X===h?g:null,tabIndex:0,role:"menuitem",onFocus:()=>p(X),children:f.jsx(Ume,{tab:P,onClick:A,showHighlight:X===h},P.id)},P.id))}),f.jsx(De,{title:v("composer.multiTabs.browserTabMenuShareButton"),className:"mx-auto mt-auto w-full flex-none",disabled:S,onClick:x,color:"strong",size:"48-lg",children:v("composer.multiTabs.browserTabMenuShareButton")})]})}const rU=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{id:"Shape",d:"M2 6.25C2 4.45507 3.45507 3 5.25 3H18.75C20.5449 3 22 4.45507 22 6.25V12H20.5V6.25C20.5 5.2835 19.7165 4.5 18.75 4.5H5.25C4.2835 4.5 3.5 5.2835 3.5 6.25V15.75C3.5 16.7165 4.2835 17.5 5.25 17.5H11V19H5.25C3.45507 19 2 17.5449 2 15.75V6.25ZM14 13C12.8954 13 12 13.8954 12 15V20C12 21.1046 12.8954 22 14 22H21C22.1046 22 23 21.1046 23 20V15C23 13.8954 22.1046 13 21 13H14Z",fill:"currentColor"})),gAe=Object.freeze(Object.defineProperty({__proto__:null,default:rU},Symbol.toStringTag,{value:"Module"}));function tge(t){const{onClick:e}=t,{t:n}=Fe();return f.jsx(La,{data:{title:n("videoCard.pictureInPicture.miniPlayer"),testId:"trigger-picture-in-picture",isVisible:!0,onClick:e},children:f.jsx(rU,{className:"size-6","aria-hidden":!0})})}function yI(){return F(no)==="US"&&Ee.instance().config().proSubscription.enabled}function nge(t){const{title:e,onClick:n,appearDelay:r,appearDuration:o,voiceAvailabilityStatus:i,payflowSkuType:a}=t,s=yI(),c=F(jn);return m.useEffect(()=>{c!=null&&c.accountType&&Y.trackEvent({name:"interaction",data:{eventName:"payflowEntryImpression",eventInfo_loginProvider:c.accountType,eventInfo_actionButton:"GetCopilotPro",eventInfo_payflowEntryPoint:"VoiceLimit",eventInfo_payflowType:s?"ProSubPaywall":"UniPux",eventInfo_payflowSkuType:a,eventInfo_upsellReason:i,eventInfo_upsellEntryStyle:"Button"}})},[i,a,s,c==null?void 0:c.accountType]),f.jsx(pI,{className:"mx-2",title:e,onClick:n,appearDelay:r,appearDuration:o})}const rge="https://content.lifecycle.office.net/dime/v1/dime.js";function oge(){return new Promise((t,e)=>{const n=document.createElement("script");n.src=rge,n.type="text/javascript",n.async=!0,n.onload=()=>{t()},n.onerror=()=>{e(new Error("Failed to load Dime script"))},document.head.appendChild(n)})}const MP=new Mc(oge);async function ige({language:t,market:e,sessionId:n}){var r;try{const[o]=await Promise.all([Dae(),MP.get()]);return new window.Dime({language:t,market:e,sessionId:n,partnerId:"cmc",authHint:o==null?void 0:o.username,userInfo:{puid:(r=o==null?void 0:o.idTokenClaims)==null?void 0:r.puid}})}catch(o){return MP.reset(),console.log("Failed to load Dime script",o),null}}const Z_=new Mc(t=>ige(t));var eu,yh;class age{constructor(){tn(this,eu,crypto.randomUUID());tn(this,yh);Z(this,"ensureDime",async({language:e,market:n})=>(e!==ue(this,yh)&&Z_.reset(),Ot(this,yh,e),Z_.get({language:e,market:n,sessionId:ue(this,eu)})));Z(this,"overrideSessionId",e=>{Z_.reset(),Ot(this,eu,e)})}get sessionId(){return ue(this,eu)}}eu=new WeakMap,yh=new WeakMap;const LP=new age,sge="https://go.microsoft.com/fwlink/?linkid=2281226&client=cmc&ocid=cmme6wdx8nv",cge="sapphire://payment",lge="cmme6wdx8nv";function DP(t,e,n,r){var d,h,p;const{urlParams:o}=Ee.instance().config().proSubscription;if(!o)return sge;const{client:i,ocids:a}=o,s=e?(d=a[t])==null?void 0:d.freeTrial:(h=a[t])==null?void 0:h.buy,c=r??((p=a[t])==null?void 0:p.market),u=new URL("https://go.microsoft.com/fwlink/");return u.searchParams.append("linkid",e?"2243582":"2281226"),u.searchParams.append("client",i),u.searchParams.append("ocid",s??lge),c&&u.searchParams.append("market",c),n&&u.searchParams.append("language",n),u.toString()}const uge="https://account.microsoft.com/services/copilot/details",vAe="https://account.microsoft.com/";function yAe(t){const{manageRefId:e}=Ee.instance().config().proSubscription,n=`copilot.${e}.${t}`,r=new URL(uge);return r.searchParams.append("ref",n),r.hash="billing",r.toString()}function dge(t){Ee.instance().config().subscribeInNewWindow?window.open(t):uy(t)}function Xg(t){const{payflowEntryPoint:e,skuType:n,upsellReason:r,beforeNavigate:o,entryStyle:i,preferPremium:a=!1}=t,s=Zt(),c=to(),u=de("pro-sub-dime"),d=de("cmc-m365-sku"),h=u||d,p=yI(),g=Ee.instance().config().proSubscription.enabled,v=F(Rv),y=F(no),{i18n:{resolvedLanguage:_}}=Fe(),b=F(jn),C=Se(Or),w=F(ts),S=F(MM),E=m.useMemo(()=>d?Sz(S,a):"gopremium",[d,a,S]),I=m.useCallback(()=>{switch(e){case"VoiceLimit":return QN()?cge:g?DP(e,v,"",y):"";case"Settings":case"ChatReasoningLimit":case"RedirectFromAuth0Account":case"ActionsLimit":return DP(e,v,"",y);default:return""}},[g,v,e,y]),x=m.useCallback(async()=>{const R=crypto.randomUUID();if(Y.trackEvent({name:"interaction",data:{eventName:"payflowEnter",eventInfo_payflowCorrelationId:R,eventInfo_loginProvider:(b==null?void 0:b.accountType)??"unknown",eventInfo_payflowEntryPoint:e,eventInfo_payflowType:p?"ProSubPaywall":"UniPux",eventInfo_payflowSkuType:n,eventInfo_upsellReason:r,eventInfo_upsellEntryStyle:i}}),p)o&&typeof o=="function"&&o(),await c({to:`/pro/subscribe?payflow-correlationId=${R}&entry-point=${e}`,from:s});else{const z=I();dge(z)}},[i,p,s,e,n,r,b==null?void 0:b.accountType,o,I,c]),A=m.useCallback(async()=>{Y.trackEvent({name:"interaction",data:{eventName:"payflowEnter",eventInfo_payflowCorrelationId:LP.sessionId,eventInfo_loginProvider:(b==null?void 0:b.accountType)??"unknown",eventInfo_payflowEntryPoint:e,eventInfo_payflowType:"Dime",eventInfo_payflowSkuType:n,eventInfo_upsellReason:r,eventInfo_upsellEntryStyle:i}});const R=await LP.ensureDime({language:_??"en-US",market:y});if(!E)throw new Error("No dime experience available");if(R)try{(await R.launch({experience:E,theme:w??"light"},()=>{})).status==="Success"&&dy()}catch{throw new Error("Failed to launch Dime")}else throw new Error("Failed to load Dime")},[b==null?void 0:b.accountType,e,n,r,i,_,y,w,E]);return{handleProSubscription:m.useCallback(async()=>{if((!p||h)&&(b==null?void 0:b.provider)==="auth0"){C("upsell-microsoft-account-for-pro-subscription");return}if(h)try{await A()}catch(R){console.error("Failed to launch Dime",R),x()}else x()},[h,A,b==null?void 0:b.provider,p,x,C])}}function oU(t){const{provider:e="microsoft",scenario:n,from:r}=t,o=Ac(),i=to(),{login:a}=id();return m.useCallback(async()=>{if(n&&bn({source:"signin",scenario:n}),o){await i({from:r,to:"/login"});return}await a({provider:e})},[r,i,o,a,e,n])}function fge(){const{t}=Fe(),e=F(hf),n=_r(),r=F(cE),o=Ee.instance().config().proSubscription.enabled,i=F(Rv),a=o&&i&&!r,s=Ac(),c=F(jn),u=Se(Or),d=oU({scenario:"voice",from:"/"}),{handleProSubscription:h}=Xg({payflowEntryPoint:"VoiceLimit",skuType:a?"FreeTrial":"1Mo-Paid",upsellReason:e,entryStyle:"Button"});if(m.useEffect(()=>{r&&(c!=null&&c.accountType)&&Y.trackEvent({name:"interaction",data:{eventName:"payflowHiddenEntryImpressionForTeenUser",eventInfo_loginProvider:c.accountType,eventInfo_actionButton:"GetCopilotPro",eventInfo_payflowEntryPoint:"VoiceLimit",eventInfo_payflowType:"UniPux",eventInfo_payflowSkuType:a?"FreeTrial":"1Mo-Paid",eventInfo_upsellReason:e}})},[e,r,n,a,c==null?void 0:c.accountType]),!r)return n?f.jsx(nge,{voiceAvailabilityStatus:e,payflowSkuType:a?"FreeTrial":"1Mo-Paid",title:t(a?"voice.freeTrialToPro":"voice.v2.subscribeToPro"),onClick:async()=>{if(s&&(c==null?void 0:c.provider)==="auth0"){u("upsell-microsoft-account-for-pro-subscription");return}bn({source:"subscribeCopilotPro",scenario:"voice"}),await h()}}):f.jsx(pI,{className:"mx-2",title:t("voice.signUpOrLogin"),onClick:d})}const hge="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/settings-B9ohU3kQ.svg",pge=G(void 0),mge=G(void 0),bI=G(!1);function gge(){const t=gt(no);return HT(_t.resolvedLanguage,t)}function bAe(){const{i18n:t}=Fe(),e=F(no);return HT(t.resolvedLanguage,e)}const vge=100,yge=70,bge=4,Tc=ct(),M0=G(null),iU=G("");let eC=null;function _ge(t){Tc.set(iU,t)}function jP(){return Tc.get(iU)}function Ul(t){Tc.set(DT,t)}function aU(){const t=Tc.get(M0);t&&(t.abort(),Tc.set(M0,null))}function Cge(){aU();const t=new AbortController;return Tc.set(M0,t),t}function Sge(t,e,n){const r=new URL("https://www.bing.com/AS/Suggestions/V2?pt=page.chat"),[o,i]=n.split("-");return r.searchParams.set("lang",(o==null?void 0:o.toLowerCase())??"en"),r.searchParams.set("cc",(i==null?void 0:i.toLowerCase())??"us"),r.searchParams.set("qry",t.toLowerCase()),r.searchParams.set("cvid",e),ot("encacsc")&&r.searchParams.set("ascopilot1","1"),ot("enblsuggrndmzn")&&r.searchParams.set("ascopilot2","1"),ot("encpsrchdata")&&r.searchParams.set("ascopilot3","1"),r.toString()}async function wge(t){const{query:e,conversationId:n,market:r,abortController:o}=t,i=Sge(e,n,r);return fetch(i,{signal:o.signal}).then(a=>a.json())}function Ege(t,e){const n=t.toLowerCase().split(/\s+/),r=e.st.toLowerCase().split(/\s+/);let o=0;for(let c=0;c<Math.min(n.length,r.length)&&n[c]===r[c];c+=1)o+=1;const i=e.st.split(/\s+/),a=i.slice(0,o).join(" "),s=i.slice(o).join(" ");return{original:e.st,sliced:s,prefill:a+(a?" ":"")}}async function Tge(t){var n;const e=gt(mt);if(e)try{const r=Cge(),o=gge(),i=performance.now(),a=await wge({query:t,conversationId:e,market:o,abortController:r});if(t===jP()){if(!a.s.length){Ul(null),cc({feature:"fetchChatAutoComplete",errorType:"NoSuggestions",customData:JSON.stringify({conversationId:e})});return}const s=a.s.map(c=>Ege(a.qc.q,c));if(!s.length){Ul(null),cc({feature:"fetchChatAutoComplete",errorType:"NoSuggestions",customData:JSON.stringify({conversationId:e})});return}Ul({prefill:((n=s[0])==null?void 0:n.prefill)??t,conversationId:e,type:"BCT",suggestions:s.slice(0,bge)}),Wu({feature:"fetchChatAutoComplete",duration:performance.now()-i})}}catch(r){r instanceof DOMException&&r.name==="AbortError"||Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"autosuggest",eventInfo_errorMessage:`${r}`,eventInfo_details:"Autosuggest API error"}}),t===jP()&&Ul(null)}}function Ige(t){eC&&clearTimeout(eC),eC=setTimeout(()=>{Tge(t)},vge)}function sU(t){var o;const e=(o=Ee.instance().config().landingPage)==null?void 0:o.regexForAutoSuggest,n=ot("autosuggest")||ot("edge-autosuggest"),r=gt(mt);if(!n||!e||!e.test(t)||t.length>=yge){Ul(null);return}_ge(t),!t||!r?Ul(null):Ige(t)}function zd(){aU(),Tc.set(DT,null)}const Age=ct();function cU(t){Age.set(Gs,t)}function kge(){const t=de("multiplecharacters"),e=F(IM),[n,r]=et(Ph);m.useEffect(()=>{t&&!n&&r(e)},[t,e,n,r])}function Kh(){const t=gt(Ei),e=gt(Eo);return t.length===0&&!!(e!=null&&e.isNew)}function xge(){try{return Wh.latestLocation.pathname}catch{return typeof window<"u"&&window.location.pathname?window.location.pathname:"/"}}function ud(){const t=xge(),e=t.endsWith("/talk"),n=t.startsWith("/chats")&&!e,r=t.endsWith("/landing");return n||r}function wy(){return!gt(Aw)}function Rge(){var s;const t=wy(),e=gt(bI),n=gt(oy),r=Kh(),o=ud(),i=ot("mac-central-composer"),a=!!((s=Ee.instance().config().landingPage)!=null&&s.enableCentralComposer);return t&&!e&&n==="center"&&o&&r&&(i||a)}function Pge(){var o;const t=wy(),e=Kh(),n=ud(),r=!!((o=Ee.instance().config().landingPage)!=null&&o.enableStarterPrompts);return t&&n&&e&&r}function lU(){var i;const t=wy(),e=Kh(),n=ud(),r=gt(tQ),o=!!((i=Ee.instance().config().landingPage)!=null&&i.enableWidgets);return t&&r&&n&&e&&o}function Oge(){const t=wy(),e=Kh(),n=ud(),r=lU(),o=ot("appr-home");return t&&n&&e&&o&&!r}function uU(){var a;const t=ot("autosuggest"),e=ot("edge-autosuggest"),n=Kh(),r=ud(),o=t||e,i=!!((a=Ee.instance().config().landingPage)!=null&&a.enableAutoSuggest);return o&&i&&r&&n}function Ey(){return{isCompatibleLandingRoute:ud(),isAutoSuggestEnabled:uU(),isCentralComposerEnabled:Rge(),isStarterPromptsEnabled:Pge(),isWidgetSectionEnabled:lU(),isAppearanceOnHomeEnabled:Oge()}}function Ty(){const t=F(bI),e=F(Ei),n=F(mge),o=de("edge-shopping-pdp")&&e.length===0&&!!n;return{isContextualShoppingCardExpanded:t,showShoppingCardInNewChat:o,shoppingProductMetadata:n}}function Nge(t){if(!t.length)return;const e=vi("greetingIndex"),n=t.length,r=e?(parseInt(e,10)+1)%n:0;return $a("greetingIndex",r.toString()),t[r]}const _I=G(!1),Mge=G(!1),dU=ct(),Lge=["chat.launchMessage.authenticatedV3Type1","chat.launchMessage.authenticatedV3Type2","chat.launchMessage.authenticatedV3Type3"],Dge=["chat.launchMessage.unauthenticatedV3Type1","chat.launchMessage.unauthenticatedV3Type2","chat.launchMessage.unauthenticatedV3Type3"],jge=["chat.launchMessage.authenticatedV4Type1","chat.launchMessage.authenticatedV4Type2","chat.launchMessage.authenticatedV4Type3","chat.launchMessage.authenticatedV4Type4","chat.launchMessage.authenticatedV4Type5","chat.launchMessage.authenticatedV4Type6","chat.launchMessage.authenticatedV4Type7","chat.launchMessage.authenticatedV4Type8","chat.launchMessage.authenticatedV4Type9","chat.launchMessage.authenticatedV4Type10"],Uge=["chat.launchMessage.unauthenticatedV4Type1","chat.launchMessage.unauthenticatedV4Type2","chat.launchMessage.unauthenticatedV4Type3","chat.launchMessage.unauthenticatedV4Type4","chat.launchMessage.unauthenticatedV4Type5","chat.launchMessage.unauthenticatedV4Type6","chat.launchMessage.unauthenticatedV4Type7","chat.launchMessage.unauthenticatedV4Type8","chat.launchMessage.unauthenticatedV4Type9","chat.launchMessage.unauthenticatedV4Type10"];function Fge(){dU.set(_I,!0)}function Bge(){dU.set(_I,!1)}function fU(){var N;const{t}=Fe(),e=F(_I),n=F(EM),r=F(eQ),o=F(zM),i=F(ZY),a=de("landing-rotating-greeting"),s=!!((N=Ee.instance().config().landingPage)!=null&&N.enablePromptedGreetings),c=de("conversation-starter-prompted-greeting-c1"),u=de("qa-conversation-starter-prompted-greeting-c1"),d=de("conversation-starter-prompted-greeting-t1"),h=de("qa-conversation-starter-prompted-greeting-t1"),p=de("conversation-starter-prompted-greeting-t2"),g=de("qa-conversation-starter-prompted-greeting-t2"),v=de("conversation-starter-prompted-greeting-t3"),y=de("qa-conversation-starter-prompted-greeting-t3"),_=de("conversation-starter-prompted-greeting-t4"),b=de("qa-conversation-starter-prompted-greeting-t4"),C=m.useRef(),w=s&&(c||d||p||v||_||u||h||g||y||b),{showShoppingCardInNewChat:S}=Ty(),I=m.useCallback(()=>S?n?["chat.launchMessage.authenticatedShoppingType1"]:["chat.launchMessage.unauthenticatedShoppingType1"]:r&&["feature-discovery","image-generation"].includes(r)?n?["chat.launchMessage.authenticatedWidgets"]:["chat.launchMessage.unauthenticatedWidgets"]:n?a?jge:Lge:a?Uge:Dge,[n,a,S,r])();C.current===void 0&&(C.current=Nge(I));const x=Number(vi("greetingIndex"))||0,A=m.useCallback(()=>i||(r==="feature-discovery"?t("chat.launchMessage.subheadingFeatureDiscoveryWidget"):r==="image-generation"?t("chat.launchMessage.subheadingImageGenWidget"):null),[i,r,t]);return{launchGreetingShown:e,greetingKey:C.current,widgetGreeting:o,widgetSubheading:A(),greetingIndex:x,showPromptedGreetingUI:w}}const dd=ct(),Iy=G(""),hU=G("starter-prompts"),pU=G(!0);function Es(t){dd.set(Iy,t)}function L0(){dd.set(Iy,"")}function cf(t){dd.set(hU,t)}function Ts(t){dd.set(pU,t)}function mU(t){dd.set(Bu,t)}function Ay(){return F(Iy)}function Hge(){return F(hU)}function Vge(){return F(pU)}function $d(t){const e=gt(Iy),n=ot("multiplecharacters"),r=Oj({breakpoint:"sm"}),o=gt(ir),i=gt(Or),a=o==="computerUse",c=uU()&&!i&&!a;t||cf("starter-prompts"),Ts(e.length<=0||t.length===0),mU(!1),dd.set(Sv,void 0),n&&cU("typing"),r&&Fge(),c&&sU(t)}function gU(){const t=F(Zae),e=de("edge-multi-tabs-manual");return t&&e}function zge(){const t=gU(),[e,n]=m.useState(!1),[r,o]=m.useState(!1),i=m.useRef(void 0),a=F(sy),s=Ay(),[c,u]=et(yj),{refs:d,floatingStyles:h}=YO({placement:"top-start",strategy:"absolute",whileElementsMounted:bh,middleware:[_h(({rects:_})=>{let b=0;return c?b=a.size>0?-72:0:b=_.reference.height*-1,{mainAxis:b,crossAxis:0}},[c,a]),Ch({padding:12}),zO({apply({rects:_,elements:b}){Object.assign(b.floating.style,{width:`${_.reference.width}px`})}})]}),p=m.useCallback(async _=>{const{isTrigger:b,keyword:C}=_;u(b),b&&(gn.emit("multi-tabs:search",C),C||(i.current=s)),n(b)},[s,u,n]),g=m.useCallback(()=>{if(c){const _=i.current;_!==void 0&&Es(_.replace(/@$/,"")),u(!1),i.current=void 0}n(!1),o(!0),gn.emit("edge:maybe-fetch-page-context","onSaveMultiTabs")},[c,u,n,o]),v=m.useCallback(_=>t&&e&&c?(gn.emit("multi-tabs:key-down",_),!0):!1,[c,t,e]);return{isMultiTabsMenuExpanded:e,floatingStyles:h,edgeTabMenuRefs:d,setIsMultiTabsMenuExpanded:n,isShowMultiTabsPreviewCard:r,setIsShowMultiTabsPreviewCard:o,handleMentionEvent:p,isMentionTriggered:c,handleMultiTabsMenuSaveBtnEvent:g,handleUserInputEnterEvent:()=>c&&e&&t,handleUserInputKeydownEvent:v}}function $ge(){const{currentChapterId:t}=Q4();return m.useMemo(()=>{if(t)return{type:"dailyBriefing",chapterId:t}},[t])}function Gge(t){const[e,n]=m.useState(!1);return m.useEffect(()=>{if(!t)return()=>{};const r=a=>{a.preventDefault(),n(!0)},o=a=>{a.relatedTarget===null&&(a.preventDefault(),n(!1))},i=()=>n(a=>document.hidden?!1:a);return window.addEventListener("dragenter",r,!0),window.addEventListener("dragleave",o,!0),window.addEventListener("drop",o,!0),document.addEventListener("visibilitychange",i),()=>{window.removeEventListener("dragenter",r,!0),window.removeEventListener("dragleave",o,!0),window.removeEventListener("drop",o,!0),document.removeEventListener("visibilitychange",i)}},[t]),e}async function Kge(t,e){switch(t.kind){case"local-file":return qle(t.file,e);case"onedrive":return Yle(t.item,e);default:{const n=t;throw new Error(`Unhandled upload kind: ${n}`)}}}function UP(t){switch(t.kind){case"local-file":{const{file:e}=t;return{name:e.name,contentType:sa(e),size:e.size}}case"onedrive":{const{item:e}=t;return{name:e.name,contentType:nI(e.name),size:e.size}}default:{const e=t;throw new Error(`Unhandled upload kind: ${e}`)}}}function Wge(){const[t,e]=m.useState([]),n=m.useRef(new Set),r=m.useRef(0),o=Se(Bc),i=m.useCallback(()=>{for(const h of n.current)h.abort();n.current.clear()},[]);m.useEffect(()=>()=>{i()},[i]);const a=m.useCallback((h,p)=>{o({isOpen:!0,scenario:p??null,reason:h})},[o]),s=m.useCallback(()=>{a("fileUpload")},[a]),c=m.useCallback(()=>{e([]),r.current=0,i()},[i]),u=m.useCallback(async h=>{const{uploads:p,scenario:g,onError:v,replaceExisting:y=!1,shouldUploadImageAsDocument:_}=h,b=[];y&&c();const C=[],w=[];for(const E of p){const I=UP(E),x=yy(I.contentType),A=`file-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;if(x||_){const N=String(r.current);r.current+=1,C.push({id:A,upload:E,partId:N,metadata:I}),w.push({id:A,file:E.file,scenario:g,processing:!0})}else{const N={id:A,file:E.file,scenario:g,processing:!1};w.push(N),b.push(N)}}e(E=>[...E,...w]);const S=C.map(async E=>{const I=new AbortController;n.current.add(I);try{const A={content:{type:"document",attachmentId:await Kge(E.upload,I.signal)},item:{type:"document",partId:E.partId,fileName:E.metadata.name,contentType:E.metadata.contentType},size:E.metadata.size,type:E.metadata.contentType},N={id:E.id,file:E.upload.file,scenario:g,processing:!1,attachment:A};return e(R=>R.map(z=>z.id===E.id?N:z)),b.push(N),N}catch(x){if(x instanceof Error&&x.message==="not-signed-in")throw c(),s(),x;const A={id:E.id,file:E.upload.file,scenario:g,processing:!1,error:x};return e(N=>N.map(R=>R.id===E.id?A:R)),v&&v(x,E.upload),b.push(A),A}finally{n.current.delete(I)}});try{await Promise.all(S)}catch(E){if(E instanceof Error&&E.message==="not-signed-in")return[];throw E}return b},[c,s]),d=m.useCallback(h=>{e(p=>{const g=[...p];return g.splice(h,1),g})},[]);return{uploadedAttachments:t,isUploadingAttachments:t.some(h=>h.processing===!0),clearAttachments:c,uploadAttachments:u,getUploadMetadata:UP,removeAttachmentByIndex:d}}function qge(t,e,n,r){const{t:o}=Fe(),{clearAttachments:i,uploadAttachments:a,getUploadMetadata:s,isUploadingAttachments:c,uploadedAttachments:u,removeAttachmentByIndex:d}=Wge(),h=m.useCallback(async(y,_,b=!0)=>{const C=[];for(const w of y){const S=zle(w.file);S&&C.push({file:w.file,error:S})}if(C.length>0){e(C[0].error),n();return}t();try{await a({uploads:y,scenario:_,replaceExisting:b,onError:(w,S)=>{if(w instanceof Error){e(Xj(w.message));const{name:E,size:I}=s(S);Kle({name:E,size:I,message:w.message,kind:S.kind})}else e({title:o("composer.errors.default.title"),message:o("composer.errors.default.message")})}})}catch(w){w instanceof Error&&w.message==="not-signed-in"?r():e({title:o("composer.errors.default.title"),message:o("composer.errors.default.message")})}},[t,a,n,r,e,s,o]),p=m.useCallback(async(y,_,b=!0)=>{const w=y.map(S=>$le(S)).map(S=>({kind:"local-file",file:S}));await h(w,_,b)},[h]),g=m.useCallback(()=>{i(),n()},[i,n]),v=m.useCallback(y=>{u.length===1?g():d(y)},[d,u,g]);return{processUploadedFiles:h,processUploadedLocalFiles:p,isUploadingAttachments:c,uploadedAttachments:u,resetFileUpload:g,removeAttachment:v}}function CI(){var r;const t=F(Xr)==="side-by-side",e=qn({breakpoint:"sm"}),n=!!((r=Ee.instance().config().actions)!=null&&r.alwaysLayoutChatDetailsOverChat);return t&&(e||n)}function vU(){return Zt().startsWith("/shares")}function yU(t){return t.map(e=>{if(e.author==="human"||!e.content.find(s=>s.type==="citation"))return e;const r=e.content.find(s=>s.type==="text");if(!r)return e;const o=e.content.filter(s=>s.type==="citation").sort((s,c)=>s.position-c.position),{text:i,citationMetadata:a}=Yge(r.text,o);return r.text=i,r.citations=a,e})}function Yge(t,e){if(!e)return{text:t,citationMetadata:[]};let n=t;const r=[];let o=0;const i=new Map;for(const s of e){const c=s.url;if(!i.has(c)){o+=1;const u=`${o}`;i.set(c,u),r.push({index:u,title:s.title,url:s.url,iconUrl:s.iconUrl??null,publisher:s.publisher??null})}}const a=e.map((s,c)=>({citation:s,originalIndex:c})).sort((s,c)=>{const u=c.citation.position-s.citation.position;return u!==0?u:c.originalIndex-s.originalIndex}).map(s=>s.citation);for(const s of a){const c=s.url,u=i.get(c);u!==void 0&&(n=B8(n,qj(u,s.url),s.position))}return{text:n,citationMetadata:r}}function Qge(){const t=vU(),{conversationId:e}=Y0({strict:!1}),{data:n,error:r,isLoading:o}=YF({queryKey:["sharePage",e],queryFn:()=>Jge(`/conversations/shares/${e}`),staleTime:1/0,enabled:t&&!!e});return{data:n,error:r,isLoading:o}}async function Jge(t){const{data:e,response:n}=await Un(t,tY,{parseOptions:{safe:!0},analytics:{anonymousPath:"/conversations/shares/*"}});if(n.status>=400&&n.status<500)throw new Xge(n.status.toString());return{...e,messages:yU(e.messages.reverse())}}class Xge extends Error{}function Zge(){const t=vU(),{isMediaViewerOpen:e}=ca(),n=F(Or),r=de("sharecontinue"),{error:o}=Qge();return t?o?!1:r||e||!!n:!0}function SI(){return zT("(hover: hover) and (pointer: fine)")}const eve={h760:"760"};function bU(t){const{breakpoint:e}=t,n=eve[e];return!zT(`(min-height: ${n}px)`)}function tve(){var r;const t=Zt(),e=de("cmc-landing"),n=!!((r=Ee.instance().config().landingPage)!=null&&r.enableLandingRoute);return e&&n&&t.endsWith("/landing")}function nve(){const t=to(),e=tv();return m.useCallback(async()=>{await t({to:"/agents",params:{},from:e.state.location.pathname})},[t,e.state.location.pathname])}function rve(){var d,h,p;const t=de("cross-promo-popup"),e=(p=(h=(d=Ee.instance().config().crossPromotion)==null?void 0:d.aggressive)==null?void 0:h.popup)==null?void 0:p.secondDay,n=hn(BC),r=!Gg(n,Om),o=hn(nE),i=!Gg(o,2*Om),a=hn($m),s=eI(a,2),c=F(Ow);return m.useMemo(()=>!!(r&&t&&i&&s&&e&&(c===!0?!1:c!==void 0)),[e,t,i,s,r,c])}function Fl(t){const{name:e,status:n,eventName:r,source:o,isMobile:i}=t;Y.trackEvent({name:e,data:{eventName:r,eventInfo_source:o,eventInfo_isMobilePlatform:i,eventInfo_status:n}})}function _U(){const[t,e]=et(Fi),n=de("cross-promo-popup"),r=de("top-banner-cross-promo-desktop");let o="setting";(n||(t==null?void 0:t.type)==="popup")&&(o="popup"),r&&(o="topBanner"),(t==null?void 0:t.type)==="card"&&(o="bottomRightCard");const i=Se(Or);return m.useCallback(()=>{const a=Date.now().toString();Qn(nE,a);const s=hn($m);Qn($m,(parseInt(s??"0",10)+1).toString()),Fl({name:"interaction",status:"Dismissed",eventName:"crossPromotionStripCard",source:o}),i(null),e(null)},[o,i,e])}function wI(){const t=F(Ei),e=F(Eo);return t.length===0&&!!(e!=null&&e.isNew)}function CU(t){m.useEffect(()=>{const e=()=>{t()};return _t.on("languageChanged",e),()=>{_t.off("languageChanged",e)}},[t])}function SU(t){const{onStartComplete:e}=t;m.useEffect(()=>{const n=()=>{e(),gn.off("app:start-complete",n)};return gn.on("app:start-complete",n),()=>{gn.off("app:start-complete",n)}},[e])}const EI=1e3*60*60,ove={revalidateOnFocus:!1,refreshInterval:EI};async function ive(t,e,n){return Un(t,uY,{query:{"api-version":"2",supportedWidgets:e.join(","),...n?{intent:n}:{}},options:{method:"GET",headers:{"Content-Type":"application/json"}},analytics:{anonymousPath:t}}).then(r=>r.data)}function ave(t){return t?["conversation-starter"]:["conversation-starter","feature-discovery","kickstarter","image-generation","conversation-starter-prompted-greeting"]}function sve(t){var e;if(t.length>0){if(((e=t[0])==null?void 0:e.type)==="textAndGreeting")return t;const n=t[0];if(n)return[n]}}function cve(){var h;const t=Se(VM),[e,n]=m.useState(!1),r=m.useMemo(()=>{const p=uV();if(p)return p},[]),o=Se(Pv),i=Vo("kill-landing-widgets"),a=!!((h=Ee.instance().config().landingPage)!=null&&h.shouldFetchWidgetsData);SU({onStartComplete:()=>{n(!0)}});const{data:s,isLoading:c,error:u,mutate:d}=Fc(e&&a?"/activation/widgets":null,p=>ive(p,ave(i),r),ove);o(c),CU(d),m.useEffect(()=>{if(s!=null&&s.widgets){const p=sve(s.widgets);t(p)}},[s,t]),m.useEffect(()=>{u&&(Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"widgets",eventInfo_errorMessage:`${u}`,eventInfo_details:"Widget API error"}}),o(!1),t(void 0))},[u,t,o])}function lve(){const t=F(zM),e=wI(),{isCompatibleLandingRoute:n}=Ey(),r=t&&e&&n;return m.useMemo(()=>{if(r)return{type:"greeting",greetingMessage:t}},[t,r])}function _Ae(t,e){dt({source:"shareMenu",scenario:t,sectionName:e})}function CAe(t){const{conversationId:e,messageId:n}=t;Y.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"sharePreview",eventInfo_impressionElement:"shareBlockedBanner",eventInfo_conversationId:e,eventInfo_messageId:n}})}function SAe(t){const{scenario:e,uploadedfileType:n,shareId:r,conversationId:o,messageIds:i}=t;Y.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"shareButton",eventInfo_clickScenario:e,eventInfo_uploadFileType:n,eventInfo_customData:JSON.stringify({eventInfo_shareId:r,eventInfo_oneTurn_messageId:i?i.join(","):""}),eventInfo_conversationId:o}})}function wAe(t){Y.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"receivePreview",eventInfo_impressionScenario:"shareAsLink",eventInfo_customData:JSON.stringify({eventInfo_shareId:t})}})}function EAe(){Y.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"talkToCopilot"}})}function TAe(t){const{cardType:e,messageId:n,conversationId:r,scenario:o}=t;bn({source:"shareMenu",scenario:o,messageId:n,conversationId:r,cardType:e})}function IAe(t){const{conversationId:e,messageId:n,errorName:r,errorMessage:o,errorStack:i}=t;Y.trackEvent({name:"system",data:{eventName:"shareMessagesFailed",eventInfo_conversationId:e,eventInfo_messageId:n??"",eventInfo_error:r,eventInfo_errorMessage:o,eventInfo_errorStack:i}})}function uve(){dt({source:"continueClicked"})}function dve(t,e,n){const r=ct();return new Promise((o,i)=>{let a=null;e(r.get(t))&&o(r.get(t));const s=r.sub(t,()=>{const u=r.get(t);e(u)&&(s(),o(u))}),c=()=>{s(),a&&clearTimeout(a)};a=setTimeout(()=>{c(),i(new Error("Timeout waiting for atom to be ready"))},n)})}function fve(t){return t.some(e=>e.author==="human"&&e.content.some(n=>n.type==="image"||n.type==="document"))}function AAe(t){var n,r;const e=t.filter(o=>o.author==="human");if(e.length===1){const o=(r=(n=e[0])==null?void 0:n.content.find(i=>i.type==="image"||i.type==="document"))==null?void 0:r.type;return o==="image"?"image":o==="document"?"file":void 0}return fve(t)?"image|file":void 0}function hve(t){const n=new URL(t).pathname.split("/").filter(Boolean);return n[n.length-1]??null}async function FP(){uve();const t=ct(),e=hve(window.location.href);t.set(d0,!0);try{const n=await pve(`/conversations/shares/${e}/continue`),{id:r,title:o}=n.conversation,i=new Date().toISOString(),a={id:r,updatedAt:i,isNew:!1,title:o,history:[],streamingState:"idle",continuedAt:i};t.set(En,s=>{const c=new Map(s);return c.set(r,a),c}),t.set(mt,r),await gve(r)}catch(n){throw t.set(LT,{title:_t.t("composer.errors.continue.title"),message:_t.t("composer.errors.continue.message")}),n}finally{t.set(d0,!1)}}async function pve(t){return(await Un(t,nY,{options:{method:"POST"}})).data}const mve=1e4;async function gve(t){await dve(En,e=>{const n=e.get(t);return((n==null?void 0:n.history)??[]).length>0},mve)}function vve(t,e,n){if(!t||!e)return!1;const r=t.getTime(),o=e.getTime(),i=n?n.getTime():null;return o<=r||i===null?!1:i<=r}const yve=11,bve=7,_ve=2,Cve=10,Sve=21,wve=21,Eve=10,BP=l.object({daysActive:l.array(l.coerce.date())}),D0=l.object({result:l.enum(["dismissed","positive","negative"]),date:l.coerce.date(),dismissCounter:l.number()});function Tve(t){const e=new Date;let n=t;return t.some(r=>Sw(r,e))||(n=[...t,e]),n.length>Eve?n.slice(-10):n}function Ive(){const t=Ii(wk,BP),e=(t==null?void 0:t.daysActive)??[],n=Tve(e),r=Lm(new Date,bve),o=n.filter(i=>xC(i,r)||Sw(i,r)).length;return n!==e&&sc(wk,BP,{daysActive:n}),o}function Ave(){const t=Ii(HC,D0);if(!t)return!1;const e=t.result==="positive",n=t.result==="negative"&&xC(t.date,Lm(new Date,wve)),r=t.result==="dismissed"&&xC(t.date,Lm(new Date,t.dismissCounter>5?Sve:Cve));return e||n||r}function kve(t,e){let n="popUpDismiss";e==="negative"?n="appThumbDown":e==="positive"&&(n="appThumbUp"),bn({source:n,conversationId:t});const r=Ii(HC,D0),o=(r==null?void 0:r.result)==="dismissed"?r.dismissCounter:0,i={result:e,date:new Date,dismissCounter:e==="dismissed"?o+1:0};sc(HC,D0,i)}function xve(t={},e=!1){const[n,r]=m.useState(!1),[o,i]=m.useState(!1),{onFocus:a,onBlur:s,onPointerDown:c}=t;return[n,{onFocus:d=>{(!o||e)&&r(!0),a==null||a(d)},onBlur:d=>{r(!1),i(!1),s==null||s(d)},onPointerDown:d=>{i(!0),c==null||c(d)}}]}const wU="bg-stone-300/20 dark:bg-midnight-350/5";function Rve(t,e){return t?t===!0?{animate:{...e}}:{animate:t}:{style:e}}function Pve(t,e,n,r){const o=e?r:n;return t?{animate:o}:{style:o}}function ky(t){const{children:e,size:n="md",position:r="default",nested:o=!1,background:i="default",stroke:a,className:s,containerRef:c,interactable:u=!1,label:d,animate:h,onFocus:p,onBlur:g,onPointerDown:v,onAnimationStart:y,onAnimationComplete:_,focusOnPointerDown:b,isSelected:C=!1,...w}=t,[S,E]=xve({onFocus:p,onBlur:g,onPointerDown:v},b),I=C||S,A=o&&(i==="acrylic"||i==="acrylic-thin"),N=A?tC[`${n}-${r}`]:Ove[`${n}-${r}`],R=A?tC[`${n}-${r}`]:Nve[`${n}-${r}`],z=A?tC[`${n}-${r}`]:Mve[`${n}-${r}`],P={default:"bg-white/45 dark:bg-midnight-350/10",darker:wU,acrylic:wi,"acrylic-fallback":n7,"acrylic-thin":Oa,"acrylic-thin-fallback":a7,transparent:"bg-transparent"},X=u?{"aria-label":d,role:"button",tabIndex:0,...E,onKeyDown:O=>{var $;(O.key==="Enter"||O.key===" ")&&(O.preventDefault(),($=w.onClick)==null||$.call(w,O))}}:{onFocus:p,onBlur:g,onPointerDown:v},M=Rve(h,N),k=Pve(h,I,R,z),U=s&&!s.includes("relative")&&!s.includes("absolute")&&!s.includes("fixed")&&"relative";return f.jsxs(Ae.div,{className:q(P[i],s,U,A&&"outline-1 outline-offset-2","isolate will-change-transform"),ref:c,onAnimationComplete:_,...M,...X,...w,children:[e,f.jsx(Ae.div,{className:q(I&&"border-foreground-750 dark:border-white",a&&!I&&"border-black/8 dark:border-white/8",!a&&!I&&"border-transparent",!A&&"border-[20px]",A&&a&&!I&&"border",A&&a&&I&&"border-2","pointer-events-none absolute inset-0"),...k})]})}const Ove={"xs-default":{clipPath:"var(--clip-path-squircle-16)"},"sm-default":{clipPath:"var(--clip-path-squircle-24)"},"md-default":{clipPath:"var(--clip-path-squircle-36)"},"lg-default":{clipPath:"var(--clip-path-squircle-48)"},"xl-default":{clipPath:"var(--clip-path-squircle-60)"},"xs-top":{clipPath:"var(--clip-path-squircle-16-12)"},"sm-top":{clipPath:"var(--clip-path-squircle-24-16)"},"md-top":{clipPath:"var(--clip-path-squircle-36-24)"},"lg-top":{clipPath:"var(--clip-path-squircle-48-36)"},"xl-top":{clipPath:"var(--clip-path-squircle-60-48)"},"xs-bottom":{clipPath:"var(--clip-path-squircle-12-16)"},"sm-bottom":{clipPath:"var(--clip-path-squircle-16-24)"},"md-bottom":{clipPath:"var(--clip-path-squircle-24-36)"},"lg-bottom":{clipPath:"var(--clip-path-squircle-36-48)"},"xl-bottom":{clipPath:"var(--clip-path-squircle-48-60)"}},Nve={"xs-default":{clipPath:"var(--clip-path-squircle-stroke-16)"},"sm-default":{clipPath:"var(--clip-path-squircle-stroke-24)"},"md-default":{clipPath:"var(--clip-path-squircle-stroke-36)"},"lg-default":{clipPath:"var(--clip-path-squircle-stroke-48)"},"xl-default":{clipPath:"var(--clip-path-squircle-stroke-60)"},"xs-top":{clipPath:"var(--clip-path-squircle-stroke-16-12)"},"sm-top":{clipPath:"var(--clip-path-squircle-stroke-24-16)"},"md-top":{clipPath:"var(--clip-path-squircle-stroke-36-24)"},"lg-top":{clipPath:"var(--clip-path-squircle-stroke-48-36)"},"xl-top":{clipPath:"var(--clip-path-squircle-stroke-60-48)"},"xs-bottom":{clipPath:"var(--clip-path-squircle-stroke-12-16)"},"sm-bottom":{clipPath:"var(--clip-path-squircle-stroke-16-24)"},"md-bottom":{clipPath:"var(--clip-path-squircle-stroke-24-36)"},"lg-bottom":{clipPath:"var(--clip-path-squircle-stroke-36-48)"},"xl-bottom":{clipPath:"var(--clip-path-squircle-stroke-48-60)"}},Mve={"xs-default":{clipPath:"var(--clip-path-squircle-stroke-focused-16)"},"sm-default":{clipPath:"var(--clip-path-squircle-stroke-focused-24)"},"md-default":{clipPath:"var(--clip-path-squircle-stroke-focused-36)"},"lg-default":{clipPath:"var(--clip-path-squircle-stroke-focused-48)"},"xl-default":{clipPath:"var(--clip-path-squircle-stroke-focused-60)"},"xs-top":{clipPath:"var(--clip-path-squircle-stroke-focused-16-12)"},"sm-top":{clipPath:"var(--clip-path-squircle-stroke-focused-24-16)"},"md-top":{clipPath:"var(--clip-path-squircle-stroke-focused-36-24)"},"lg-top":{clipPath:"var(--clip-path-squircle-stroke-focused-48-36)"},"xl-top":{clipPath:"var(--clip-path-squircle-stroke-focused-60-48)"},"xs-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-12-16)"},"sm-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-16-24)"},"md-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-24-36)"},"lg-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-36-48)"},"xl-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-48-60)"}},tC={"xs-default":{borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:16,borderBottomRightRadius:16},"sm-default":{borderTopLeftRadius:24,borderTopRightRadius:24,borderBottomLeftRadius:24,borderBottomRightRadius:24},"md-default":{borderTopLeftRadius:36,borderTopRightRadius:36,borderBottomLeftRadius:36,borderBottomRightRadius:36},"lg-default":{borderTopLeftRadius:48,borderTopRightRadius:48,borderBottomLeftRadius:48,borderBottomRightRadius:48},"xl-default":{borderTopLeftRadius:60,borderTopRightRadius:60,borderBottomLeftRadius:60,borderBottomRightRadius:60},"xs-top":{borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:12,borderBottomRightRadius:12},"sm-top":{borderTopLeftRadius:24,borderTopRightRadius:24,borderBottomLeftRadius:16,borderBottomRightRadius:16},"md-top":{borderTopLeftRadius:36,borderTopRightRadius:36,borderBottomLeftRadius:24,borderBottomRightRadius:24},"lg-top":{borderTopLeftRadius:48,borderTopRightRadius:48,borderBottomLeftRadius:36,borderBottomRightRadius:36},"xl-top":{borderTopLeftRadius:60,borderTopRightRadius:60,borderBottomLeftRadius:48,borderBottomRightRadius:48},"xs-bottom":{borderTopLeftRadius:12,borderTopRightRadius:12,borderBottomLeftRadius:16,borderBottomRightRadius:16},"sm-bottom":{borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:24,borderBottomRightRadius:24},"md-bottom":{borderTopLeftRadius:24,borderTopRightRadius:24,borderBottomLeftRadius:36,borderBottomRightRadius:36},"lg-bottom":{borderTopLeftRadius:36,borderTopRightRadius:36,borderBottomLeftRadius:48,borderBottomRightRadius:48},"xl-bottom":{borderTopLeftRadius:48,borderTopRightRadius:48,borderBottomLeftRadius:60,borderBottomRightRadius:60}};function Nu({className:t,style:e}){return f.jsx("div",{className:q("animate-[shimmer_2s_infinite] bg-black/5 bg-gradient-to-r dark:bg-white/5","from-transparent via-background-150 to-transparent","bg-[length:50%_100%] bg-no-repeat",t),style:e})}function Lve(t){const{isImageOrVideo:e}=t;return f.jsx("div",{className:"flex flex-col gap-3 px-4",children:f.jsx(Nu,{className:q("w-full",e?"h-[144px] sm:h-[176px]":"h-[300px]"),style:{clipPath:"var(--clip-path-squircle-36)"}})})}function HP(t){const{type:e,length:n}=t;if(e==="ads")return f.jsx("div",{});const r=e==="image"||e==="video",o=r&&n===1;return f.jsx(ky,{size:"md",stroke:!0,className:q("relative flex",o?"w-[300px]":"w-full","flex-col py-3 transition-opacity duration-300 ease-in-out"),children:f.jsx(Lve,{isImageOrVideo:r})})}function kAe(t){if(t.type==="image")return t.images.length;if(t.type==="video")return t.videos.length}function j0(){return j0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j0.apply(null,arguments)}function Dve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var jve=m.useLayoutEffect,Uve=function(e){var n=m.useRef(e);return jve(function(){n.current=e}),n},VP=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},Fve=function(e,n){var r=m.useRef();return m.useCallback(function(o){e.current=o,r.current&&VP(r.current,null),r.current=n,n&&VP(n,o)},[n])},zP={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},Bve=function(e){Object.keys(zP).forEach(function(n){e.style.setProperty(n,zP[n],"important")})},$P=Bve,ur=null,GP=function(e,n){var r=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Hve(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),ur||(ur=document.createElement("textarea"),ur.setAttribute("tabindex","-1"),ur.setAttribute("aria-hidden","true"),$P(ur)),ur.parentNode===null&&document.body.appendChild(ur);var o=t.paddingSize,i=t.borderSize,a=t.sizingStyle,s=a.boxSizing;Object.keys(a).forEach(function(p){var g=p;ur.style[g]=a[g]}),$P(ur),ur.value=e;var c=GP(ur,t);ur.value=e,c=GP(ur,t),ur.value="x";var u=ur.scrollHeight-o,d=u*n;s==="border-box"&&(d=d+o+i),c=Math.max(d,c);var h=u*r;return s==="border-box"&&(h=h+o+i),c=Math.min(h,c),[c,u]}var KP=function(){},Vve=function(e,n){return e.reduce(function(r,o){return r[o]=n[o],r},{})},zve=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],$ve=!!document.documentElement.currentStyle,Gve=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var r=Vve(zve,n),o=r.boxSizing;if(o==="")return null;$ve&&o==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var i=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),a=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:i,borderSize:a}},Kve=Gve;function EU(t,e,n){var r=Uve(n);m.useLayoutEffect(function(){var o=function(a){return r.current(a)};if(t)return t.addEventListener(e,o),function(){return t.removeEventListener(e,o)}},[])}var Wve=function(e){EU(window,"resize",e)},qve=function(e){EU(document.fonts,"loadingdone",e)},Yve=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Qve=function(e,n){var r=e.cacheMeasurements,o=e.maxRows,i=e.minRows,a=e.onChange,s=a===void 0?KP:a,c=e.onHeightChange,u=c===void 0?KP:c,d=Dve(e,Yve),h=d.value!==void 0,p=m.useRef(null),g=Fve(p,n),v=m.useRef(0),y=m.useRef(),_=function(){var w=p.current,S=r&&y.current?y.current:Kve(w);if(S){y.current=S;var E=Hve(S,w.value||w.placeholder||"x",i,o),I=E[0],x=E[1];v.current!==I&&(v.current=I,w.style.setProperty("height",I+"px","important"),u(I,{rowHeight:x}))}},b=function(w){h||_(),s(w)};return m.useLayoutEffect(_),Wve(_),qve(_),m.createElement("textarea",j0({},d,{onChange:b,ref:g}))},Jve=m.forwardRef(Qve);const Xve=/@([^@]*)$/;function Zve(t){const e=Xve.exec(t);return e?e[1]??"":void 0}function eye(t){const{className:e,textAreaRef:n,onMentionChange:r,textAreaValue:o}=t,[i,a]=m.useState(void 0),{t:s}=Fe(),c=m.useRef(!1),u=m.useRef(r);m.useEffect(()=>{u.current=r},[r]);const d=m.useCallback(()=>{const p=n==null?void 0:n.current;if(!p)return;const g=p.selectionStart,v=p.selectionEnd;if(g===v){const y=o.slice(0,g),_=Zve(y);a(_!==void 0?b=>b!==_?_:b:void 0)}},[n,o]);m.useEffect(()=>{o===""?a(void 0):d()},[d,o,a]),m.useEffect(()=>{var p,g;if(!c.current){c.current=!0;return}i!==void 0?(p=u.current)==null||p.call(u,{isTrigger:!0,keyword:i}):(g=u.current)==null||g.call(u,{isTrigger:!1})},[i,u]);const h=i==="";return f.jsxs("div",{className:q("pointer-events-none absolute z-0",e),children:[f.jsx("span",{className:"select-none whitespace-pre-wrap break-words",children:o}),h&&f.jsx("span",{className:"text-foreground-550 dark:text-foreground-600",children:s("userInput.mentionPlaceholderText")})]})}function tye(t,e){const n=m.useCallback(async r=>{r.key==="Enter"&&!r.shiftKey&&!e&&await t(r)},[t,e]);la(n)}function nye(t,e,n){const r=m.useRef(!1),o=m.useCallback(()=>{r.current=!0},[]),i=m.useCallback(()=>{setTimeout(()=>{r.current=!1},100)},[]);return tye(async a=>{var s;(s=t.current)!=null&&s.contains(document.activeElement)&&!r.current&&(a.preventDefault(),await e())},n),{handleCompositionStart:o,handleCompositionEnd:i}}const rye="pointer-events-none cursor-not-allowed select-none opacity-40 shadow-none",oye=.25,TU="userInput",TI=m.forwardRef((t,e)=>{const{t:n}=Fe(),{inputValue:r,errorMessage:o,className:i,characterLimit:a,characterLimitErrorMessage:s,disabled:c,placeholder:u=n("userInput.placeholderText"),autoFocus:d=!0,testId:h,setInput:p,setError:g,onBlur:v,onChange:y,onFocus:_,onClick:b,onEnter:C,onKeyDown:w,onMentionIfEnabled:S,rightButtons:E,isMultiLines:I,"aria-autocomplete":x,"aria-controls":A}=t,N=Zt(),{isCentralComposerEnabled:R}=Ey(),z=m.useRef(null),P=m.useRef(null),X=SI()||Ee.instance().config().enterKeyButtonEnabled,M=n("userInput.characterLimitText",{maxCharacters:a.toString()});m.useEffect(()=>{var K;X&&((K=P.current)==null||K.focus())},[N,X]);const k=m.useCallback(K=>{const{value:J}=K.target;p(J),y&&y(J),J.length>a?g(s??M):g(null)},[p,y,a,g,s,M]);m.useImperativeHandle(e,()=>({updateInputValue:K=>{const J=K(r);p(J)},focus:()=>{var K;(K=P.current)==null||K.focus()},blur:()=>{var K;(K=P.current)==null||K.blur()},contains:K=>{var J;return((J=P.current)==null?void 0:J.contains(K))??!1},updateSelectionRange:(K,J)=>{var se;(se=P.current)==null||se.setSelectionRange(K,J)}}),[r,p]),la(K=>{var J,se;K.key==="Escape"&&((J=z.current)!=null&&J.contains(document.activeElement))&&((se=P.current)==null||se.blur()),w==null||w(K)});const U=m.useCallback(K=>{(K.clipboardData.getData("text/plain")||"").length>0&&K.stopPropagation()},[]),{handleCompositionStart:O,handleCompositionEnd:$}=nye(z,C,!X);return f.jsxs(Ae.div,{className:q("flex grow items-end",c&&rye,i),onClick:()=>{var K;b==null||b(),(K=P.current)==null||K.focus()},ref:z,onBlur:K=>v==null?void 0:v(K),layout:"preserve-aspect",children:[f.jsx(Ae.div,{className:"relative grow overflow-hidden",layout:!0,children:f.jsx(Ae.div,{className:"relative flex size-full cursor-text overflow-hidden text-black dark:text-white",layout:!0,children:f.jsxs(Ae.div,{className:"flex grow flex-col gap-4 py-user-input",layout:!0,transition:{duration:0},children:[f.jsx("div",{className:q("overflow-y-auto px-4",R?"max-h-[25dvh]":"max-h-dvh-0.5",Ee.instance().config().showScrollbarOnHover?"scrollbar-container":""),children:f.jsxs("div",{className:"relative",children:[f.jsx("label",{className:q(["invisible block h-0",{"whitespace-nowrap":!I}]),htmlFor:"userInput",children:u}),f.jsx(Jve,{className:q("font-ligatures-none inline-block min-h-user-input w-full resize-none overflow-y-hidden whitespace-pre-wrap bg-transparent align-top text-black outline-none placeholder:text-foreground-450 dark:text-white dark:placeholder:text-foreground-600",Si("composer")??"text-base",ph("composerVertical")),disabled:c,placeholder:u,ref:P,id:TU,role:"textbox","aria-autocomplete":x,"aria-controls":A,spellCheck:!1,value:r,enterKeyHint:"enter",onChange:k,onFocus:()=>_==null?void 0:_(r),onCompositionStart:O,onCompositionEnd:$,onPaste:U,autoFocus:d,"data-testid":h}),S&&f.jsx(eye,{className:q("font-ligatures-none inline-block min-h-user-input w-full resize-none overflow-y-hidden whitespace-pre-wrap bg-transparent align-top text-black outline-none placeholder:text-foreground-450 dark:text-white dark:placeholder:text-foreground-600",Si("composer")??"text-base",ph("composerVertical"),"inset-0"),textAreaRef:P,textAreaValue:r,onMentionChange:S})]})}),o&&f.jsx("div",{className:"flex min-h-6 select-none items-center px-4 text-foreground-600 text-xs",children:o})]})})}),f.jsx(Ae.div,{className:q("relative bottom-0 my-1.5 flex h-9 items-center",E!=null&&E.length?"mx-1.5 w-auto gap-1":"w-0"),children:E==null?void 0:E.map((K,J)=>f.jsx(wn,{children:f.jsx(Ae.div,{initial:tt,animate:{...Rt,transition:{delay:oye}},transition:{duration:bo.default},children:K})},J))})]})});TI.displayName="UserInput";const iye=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",...t},m.createElement("path",{d:"M10 6.5V2H5.5C4.67157 2 4 2.67157 4 3.5V16.5C4 17.3284 4.67157 18 5.5 18H14.5C15.3284 18 16 17.3284 16 16.5V8H11.5C10.6716 8 10 7.32843 10 6.5ZM6.5 10H13.5C13.7761 10 14 10.2239 14 10.5C14 10.7761 13.7761 11 13.5 11H6.5C6.22386 11 6 10.7761 6 10.5C6 10.2239 6.22386 10 6.5 10ZM6.5 12H13.5C13.7761 12 14 12.2239 14 12.5C14 12.7761 13.7761 13 13.5 13H6.5C6.22386 13 6 12.7761 6 12.5C6 12.2239 6.22386 12 6.5 12ZM6.5 14H13.5C13.7761 14 14 14.2239 14 14.5C14 14.7761 13.7761 15 13.5 15H6.5C6.22386 15 6 14.7761 6 14.5C6 14.2239 6.22386 14 6.5 14ZM11 6.5V2.25L15.75 7H11.5C11.2239 7 11 6.77614 11 6.5Z",fill:"currentColor"})),aye=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...t},m.createElement("path",{d:"M12 2V8C12 9.10457 12.8954 10 14 10H20V20C20 21.1046 19.1046 22 18 22H6C4.89543 22 4 21.1046 4 20V4C4 2.89543 4.89543 2 6 2H12ZM13.5 2.5V8C13.5 8.27614 13.7239 8.5 14 8.5H19.5L13.5 2.5Z",fill:"currentColor"})),sye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/pdf-DuUY2RJ0.svg",cye=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",...t},m.createElement("path",{d:"M3 2.5C3 2.22386 3.22386 2 3.5 2H11.5C11.7761 2 12 2.22386 12 2.5V4.5C12 4.77614 11.7761 5 11.5 5C11.2238 5 11 4.77614 11 4.5V3H7.99997L7.99998 13H9C9.27614 13 9.5 13.2239 9.5 13.5C9.5 13.7761 9.27614 14 9 14H6C5.72386 14 5.5 13.7761 5.5 13.5C5.5 13.2239 5.72386 13 6 13H6.99998L6.99997 3H4V4.5C4 4.77614 3.77614 5 3.5 5C3.22386 5 3 4.77614 3 4.5V2.5Z",fill:"currentColor"})),lye=m.lazy(()=>T(()=>Promise.resolve().then(()=>o4),void 0));function IU(t){const{onRemove:e,filename:n,fileType:r,isUploading:o}=t,{t:i}=Fe();let a=f.jsx(aye,{className:"size-5"}),s=null,c="bg-neutral-300";switch(r){case"application/pdf":c="bg-system-red-350",a=f.jsx(kr,{url:sye,className:"size-5"}),s=i("fileUpload.fileTypeDisplayPdf");break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":c="bg-midnight-300",a=f.jsx(iye,{className:"size-5"}),s=i("fileUpload.fileTypeDisplayDoc");break;case"text/plain":c="bg-spot-blue-300",a=f.jsx(cye,{className:"size-5"}),s=i("fileUpload.fileTypeDisplayTxt");break;case"application/json":s=i("fileUpload.fileTypeDisplayJson");break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":s=i("fileUpload.fileTypeDisplayXlsx");break;case"application/vnd.openxmlformats-officedocument.presentationml.presentation":s=i("fileUpload.fileTypeDisplayPptx");break;case"text/csv":s=i("fileUpload.fileTypeDisplayCsv");break;case"text/markdown":s=i("fileUpload.fileTypeDisplayMarkdown");break;default:s=i("fileUpload.fileTypeDisplayDefault");break}return f.jsxs(Ae.div,{className:"relative flex h-32 w-44 flex-col justify-center gap-2 overflow-hidden rounded-xl border border-black/8 bg-white/90 p-3 dark:border-white/8 dark:bg-midnight-800/80 sm:w-56",layout:"position",initial:tt,animate:Rt,exit:tt,children:[f.jsx("div",{className:q("grid aspect-square size-8 place-items-center self-start rounded-full text-black",c),children:a}),f.jsxs("div",{children:[f.jsx("p",{className:"font-ligatures-none truncate text-xs",children:n}),f.jsx("p",{className:"text-foreground-600 text-2xs",children:s})]}),e&&!o&&f.jsx("button",{type:"button",title:i("fileUpload.removeFile"),"aria-label":i("fileUpload.removeFile"),onClick:e,className:"absolute end-0.5 top-0.5 m-1 rounded-full p-1 text-foreground-850",children:f.jsx(yo,{className:"size-3"})}),f.jsx(Zn,{className:"absolute inset-0 grid place-items-center bg-white/80 dark:bg-white/45",children:o?f.jsxs(f.Fragment,{children:[f.jsx(m.Suspense,{fallback:f.jsx("div",{"aria-hidden":!0}),children:f.jsx(lye,{type:"spinnerThemed",className:"size-11"})}),f.jsx(cd,{msg:i("fileUpload.uploadingFile"),type:"polite"})]}):null})]})}function uye(t){const{uploadedFile:e,onRemove:n,scenario:r}=t,{t:o}=Fe(),[i,a]=m.useState(null),[s,c]=m.useState(!1),u=o(r==="screenshot"?"composer.screenshotAdded":"composer.uploadedImageAltText");m.useEffect(()=>{const h=URL.createObjectURL(e);return c(!1),a(h),()=>{URL.revokeObjectURL(h)}},[e]);const d=h=>{c(!0),h.target instanceof HTMLImageElement&&URL.revokeObjectURL(h.target.src)};return i?f.jsxs(Ae.div,{className:"relative h-32 max-w-fit shrink-0",layout:"position",initial:tt,animate:s?Rt:tt,exit:tt,transition:{delay:Tj},children:[f.jsx(Ae.img,{className:"h-32 w-auto rounded-xl border border-black/8 object-contain shadow-inner dark:border-white/8",src:i,role:"img","aria-label":u,alt:u,onLoad:d,onError:d}),f.jsx(cd,{msg:u}),f.jsx(Ae.button,{type:"button",title:o("composer.removeImage"),"aria-label":o("composer.removeImage"),onClick:n,className:"absolute end-0.5 top-0.5 m-1 rounded-full border border-black/20 bg-white fill-black p-1 text-black",children:f.jsx(yo,{className:"size-3"})})]}):null}function dye(t){const{attachments:e,onRemove:n}=t;return f.jsx("div",{className:"relative flex max-h-64 min-w-0 max-w-full flex-wrap gap-2 overflow-y-auto overflow-x-hidden px-1",children:e.map(({file:r,error:o,processing:i,scenario:a},s)=>{if(o||!r)return null;const c=sa(r);return yy(c)?f.jsx(IU,{onRemove:()=>n(s),filename:r.name,fileType:c,isUploading:i},`attachment-${s}`):f.jsx(uye,{uploadedFile:r,onRemove:()=>n(s),scenario:a},`attachment-${s}`)})})}function fye(t){const{text:e,onClick:n,className:r,testId:o}=t;return f.jsx(De,{title:"",onClick:n,className:xt("min-w-fit",r),color:"chip",testId:o,children:f.jsx("span",{className:"px-1",children:e})})}function hye(t){var d;const{className:e,onWidgetClick:n,pageName:r="chatPage"}=t,o=m.useRef(null),i=J0(o,{once:!0,amount:"all"}),a=F(qu),s=(a==null?void 0:a.source)??"chatStarterPills",c=(d=Ee.instance().config().landingPage)==null?void 0:d.stackStarterChipsForSmallScreens;m.useEffect(()=>{i&&Ku({page:r,scenario:s,element:"chatStarterPills"})},[i,s,r]);const u=h=>{const{prompt:p,id:g,actionType:v,uri:y,source:_}=h;dt({pageName:r,source:s,scenario:g}),n({actionType:v,id:g,prompt:p,uri:y,source:_})};return!a||!["text","textAndGreeting"].includes(a.type)?null:f.jsx("div",{role:"list","aria-label":"",className:xt("mx-auto flex w-full gap-2 p-2 sm:flex-wrap sm:justify-start sm:p-4",c?"mb-1 flex-col items-end space-y-1 sm:flex-row":"scrollbar-container max-h-[110px] overflow-x-auto overflow-y-hidden",e),ref:o,children:a.items.map(h=>{const{id:p,text:g}=h,{type:v}=h.action,y="prompt"in h.action?h.action.prompt:void 0,_="uri"in h.action?h.action.uri:void 0;switch(a.type){case"text":case"textAndGreeting":return f.jsx(fye,{text:g,onClick:()=>u({prompt:y,uri:_,id:p,actionType:v,source:"pills"}),className:q(c&&"w-auto min-w-min max-w-[80%] text-start"),testId:`starter-prompt-${p}`},p);default:return null}})})}function pye(t){const{imgAlt:e,imgSrc:n,text:r,className:o,onClick:i,fetchPriority:a}=t,[s,c]=m.useState(!1);return f.jsx("div",{className:"aspect-[155/190] w-full min-w-[100px] max-w-full sm:w-[155px] sm:min-w-[120px] sm:max-w-[155px]",children:f.jsxs("button",{className:xt("relative flex h-full w-full flex-col items-center gap-2 rounded-lg bg-white p-2 shadow-md transition-all duration-[400ms] ease-[cubic-bezier(0,0,0,1)] hover:scale-[1.025] hover:shadow-lg dark:bg-slate-700",o),onClick:i,type:"button",children:[!s&&f.jsx(Nu,{className:"aspect-square w-full rounded-md"}),f.jsx("img",{className:xt("aspect-square w-full rounded-md object-cover",s?"opacity-100":"opacity-0"),src:n,alt:e,onLoad:()=>c(!0),onError:()=>c(!1),fetchPriority:a}),f.jsx("div",{className:"flex w-full flex-1 items-center justify-center px-2",children:f.jsx("p",{className:"truncate text-center text-xs-strong",children:r})})]})})}function WP(t){const{className:e,text:n,imgSrc:r,imgAlt:o,variant:i,onClick:a,fetchPriority:s}=t,[c,u]=m.useState(!1);return f.jsx("div",{className:xt("max-w-full drop-shadow-md transition-shadow hover:drop-shadow-lg sm:min-w-[120px]",i==="kickstarter"&&"aspect-[166/200] w-[166px] sm:max-w-[166px]",i==="feature-discovery"&&"aspect-[155/200] w-[155px] sm:max-w-[155px]"),children:f.jsxs(ky,{interactable:!0,stroke:!0,onClick:a,className:xt("relative h-full w-full transition-transform duration-[400ms] ease-[cubic-bezier(0,0,0,1)] hover:scale-[1.025]",e),children:[!c&&f.jsx(Nu,{className:"absolute size-full"}),f.jsx("img",{src:r,alt:o,className:xt("absolute size-full object-cover",c?"opacity-100":"opacity-0"),onLoad:()=>u(!0),onError:()=>u(!1),fetchPriority:s}),c&&f.jsx("div",{className:"absolute z-10 flex size-full flex-col px-4 py-5",children:f.jsx("p",{className:q("mt-auto line-clamp-2 overflow-hidden text-center text-xs-strong",i==="feature-discovery"&&"text-white/80",i==="kickstarter"&&"text-white"),children:n})})]})})}const mye={deepLink:"deepLink",prefillComposer:"chatBox",sendMessage:"chat"};function gye(t){const{className:e,onWidgetClick:n}=t,r=qn({breakpoint:"md"}),o=Lr(),i=F(os),a=o&&i&&!r,s=m.useRef(null),c=F(qu),u=J0(s,{once:!0,amount:"all"});m.useEffect(()=>{u&&c&&Ku({page:"chatPage",scenario:"widgets",element:c.id,customData:JSON.stringify({visibleItems:c.items.map(p=>p.id)})})},[u,c]);const d=p=>{const{prompt:g,id:v,actionType:y,uri:_,widgetName:b,source:C}=p,w=y==="deepLink"?JSON.stringify({uri:_}):void 0;dt({pageName:"chatPage",sectionName:"widgets",scenario:b,source:v,destination:mye[y],customData:w}),n({actionType:y,id:v,prompt:g,uri:_,source:C})},h=p=>{const g=new URL(p);return g.searchParams.set("o","7"),g.searchParams.set("rm","3"),g.toString()};return!c||c.type!=="textAndImage"?null:f.jsx("div",{className:xt("grid w-full grid-cols-2 gap-6 px-2 sm:flex sm:items-center",a&&"scrollbar-container justify-start overflow-x-auto bp-960:justify-center bp-960:overflow-x-hidden",!a&&"sm:justify-center",e),ref:s,children:c.items.map((p,g)=>{const{id:v,text:y}=p,{type:_}=p.action,b="prompt"in p.action?p.action.prompt:void 0,C="uri"in p.action?p.action.uri:void 0,{altText:w,url:S}=p.thumbnail,E={actionType:_,id:v,prompt:b,uri:C,widgetName:c.id,source:"widgets"},I=g%2===0?"-rotate-2 hover:rotate-0":"rotate-2 hover:rotate-0";switch(c.id){case"kickstarter":return f.jsx(WP,{text:y,imgSrc:h(S),imgAlt:w,variant:"kickstarter",onClick:()=>d(E),className:I,fetchPriority:"high"},v);case"feature-discovery":return f.jsx(WP,{text:y,imgSrc:h(S),imgAlt:w,variant:"feature-discovery",onClick:()=>d(E),className:I,fetchPriority:"high"},v);case"image-generation":return f.jsx(pye,{text:y,imgSrc:h(S),imgAlt:w,className:I,onClick:()=>d(E),fetchPriority:"high"},v);default:return null}})})}const AU=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M11.7498 3C12.1295 3 12.4434 3.28201 12.4931 3.64808L12.5 3.74985L12.5012 11H19.7543C20.1685 11 20.5043 11.3358 20.5043 11.75C20.5043 12.1297 20.2221 12.4435 19.8561 12.4932L19.7543 12.5H12.5012L12.5032 19.7491C12.5033 20.1633 12.1676 20.4993 11.7534 20.4993C11.3737 20.4993 11.0598 20.2173 11.0101 19.8512L11.0032 19.7494L11.0012 12.5H3.7522C3.33798 12.5 3.0022 12.1642 3.0022 11.75C3.0022 11.3703 3.28435 11.0565 3.65043 11.0068L3.7522 11H11.0012L11 3.75015C10.9999 3.33594 11.3356 3 11.7498 3Z"})),xAe=Object.freeze(Object.defineProperty({__proto__:null,default:AU},Symbol.toStringTag,{value:"Module"}));function vye({onRef:t,onClick:e}){const{t:n}=Fe(),r=F(ay);return f.jsx(La,{data:{title:n("common.open"),testId:"plus-button",isVisible:!0,ariaExpanded:r==="plus",onClick:e},ref:t,children:f.jsx(AU,{className:"size-6","aria-hidden":!0})})}const kU=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.92188 11.8237H19.4529C19.4529 11.8237 19.4529 9.89366 19.4529 9.6831C18.6246 6.41578 15.6854 4 12.1862 4C9.56739 4 7.26337 5.35396 5.92188 7.4044C5.92188 8.82754 5.92188 11.8237 5.92188 11.8237Z",fill:"#0364B8"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.15227 8.30349L9.15203 8.30431C8.23597 7.73294 7.1565 7.40234 6.00013 7.40234C5.97439 7.40234 5.94909 7.404 5.92344 7.40431C2.64519 7.44587 0 10.1364 0 13.4511C0 14.7371 0.399257 15.9285 1.07801 16.9086H14.1906V11.3459L9.15227 8.30349Z",fill:"#0078D4"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.4514 9.68327C19.3425 9.67596 19.233 9.6709 19.1223 9.6709C18.4357 9.6709 17.7825 9.81469 17.1899 10.073L14.1875 11.3461V16.9176H23.4143C23.7861 16.2237 23.9974 15.4296 23.9974 14.5855C23.9974 11.9828 21.9902 9.85405 19.4514 9.68327Z",fill:"#1490DF"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.1602 14.3467L17.9151 13.5949L15.0613 11.8716L14.1907 11.3459L11.8941 12.3202L7.49635 14.1859L5.52123 15.0238L1.07812 16.9087C2.16256 18.4747 3.96212 19.5 6.00025 19.5H19.1255C20.9807 19.5 22.5937 18.4551 23.4175 16.9175L19.1602 14.3467Z",fill:"#28A8EA"})),RAe=Object.freeze(Object.defineProperty({__proto__:null,default:kU},Symbol.toStringTag,{value:"Module"})),II=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("g",null,m.createElement("path",{id:"Shape",d:"M11.7717 3.74212C14.1132 1.39853 17.9121 1.39853 20.2553 3.74168C22.5384 6.02474 22.5969 9.68995 20.4309 12.0439L20.2428 12.2413L11.4427 21.0395L11.4062 21.0697C9.94492 22.3865 7.69092 22.3417 6.28355 20.9344C4.96453 19.6153 4.84241 17.5527 5.9172 16.096C5.94054 16.0506 5.96879 16.0068 6.002 15.9657L6.05556 15.9061L6.14247 15.8183L6.28355 15.6704L6.28647 15.6733L13.7222 8.21901C13.9881 7.95239 14.4047 7.92763 14.6986 8.14509L14.7829 8.2176C15.0495 8.48351 15.0742 8.90014 14.8568 9.19404L14.7843 9.27826L7.18966 16.8913C6.47202 17.7669 6.5219 19.0612 7.3393 19.8786C8.16836 20.7077 9.48801 20.7472 10.3638 19.997L19.1965 11.1666C20.952 9.40894 20.952 6.5597 19.1946 4.80234C17.4922 3.0999 14.765 3.0467 12.9986 4.64274L12.8307 4.80234L12.8181 4.81665L3.28179 14.353C2.9889 14.6459 2.51403 14.6459 2.22113 14.353C1.95487 14.0867 1.93066 13.67 2.14852 13.3764L2.22113 13.2923L11.77 3.74168L11.7717 3.74212Z",fill:"currentColor"}))),PAe=Object.freeze(Object.defineProperty({__proto__:null,default:II},Symbol.toStringTag,{value:"Module"})),xU=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",...t},m.createElement("path",{fill:"currentColor",d:"M6.3 3A3.2 3.2 0 0 0 3 6.3v11.4C3 19.6 4.5 21 6.3 21h11.4c1.8 0 3.3-1.5 3.3-3.3V6.3C21 4.5 19.5 3 17.7 3H6.3ZM4.5 6.3c0-1 .8-1.8 1.8-1.8h11.4c1 0 1.8.8 1.8 1.8v11.4c0 1-.8 1.8-1.8 1.8H6.3c-1 0-1.8-.8-1.8-1.8V6.3ZM8 7.5c-.3 0-.5.2-.5.5v2.3a.8.8 0 0 1-1.5 0V8c0-1.1.9-2 2-2h2.3a.8.8 0 0 1 0 1.5H8Zm0 9a.5.5 0 0 1-.5-.5v-2.3a.8.8 0 0 0-1.5 0V16c0 1.1.9 2 2 2h2.3a.8.8 0 0 0 0-1.5H8ZM16.5 8c0-.3-.2-.5-.5-.5h-2.3a.8.8 0 0 1 0-1.5H16a2 2 0 0 1 2 2v2.3a.8.8 0 0 1-1.5 0V8Zm-.5 8.5c.3 0 .5-.2.5-.5v-2.3a.8.8 0 0 1 1.5 0V16a2 2 0 0 1-2 2h-2.3a.8.8 0 0 1 0-1.5H16Z"})),OAe=Object.freeze(Object.defineProperty({__proto__:null,default:xU},Symbol.toStringTag,{value:"Module"})),RU=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t},m.createElement("path",{d:"M3 5.75A2.75 2.75 0 0 1 5.75 3h12.5A2.75 2.75 0 0 1 21 5.75v6.272a6.471 6.471 0 0 0-1.5-.709V5.75c0-.69-.56-1.25-1.25-1.25H5.75c-.69 0-1.25.56-1.25 1.25v12.5c0 .69.56 1.25 1.25 1.25h5.563c.173.534.412 1.037.709 1.5H5.75A2.75 2.75 0 0 1 3 18.25V5.75ZM23 17.5a5.5 5.5 0 1 0-11 0 5.5 5.5 0 0 0 11 0Zm-5 .5.001 2.503a.5.5 0 1 1-1 0V18h-2.505a.5.5 0 0 1 0-1H17v-2.5a.5.5 0 1 1 1 0V17h2.497a.5.5 0 0 1 0 1H18Z"})),NAe=Object.freeze(Object.defineProperty({__proto__:null,default:RU},Symbol.toStringTag,{value:"Module"})),Gd=q("flex w-full flex-row items-center gap-2");function yye(t){const{startNewChatDisabled:e,startNewConversation:n,selectFile:r,selectOneDriveFile:o,takeScreenshot:i,selectUserOpenedTabs:a}=t,s=m.useRef(null),{t:c}=Fe(),u=F(Fu),d=F(mt),h=m.useRef(void 0);return sd(s),m.useEffect(()=>{i&&h.current!==d&&Epe(d)},[d,i]),f.jsxs("div",{className:"pointer-events-auto relative flex flex-col rounded-2xl contrast-more:border-2","data-testid":"composer-plus-menu",role:"menu",children:[f.jsx(De,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:"ps-3.5",title:c("composer.startNewChat"),onClick:n,testId:"new-chat-button",ref:s,disabled:e,children:f.jsxs("div",{className:Gd,children:[f.jsx(py,{className:"size-5"}),c("composer.startNewChatShort")]})}),r&&!u&&f.jsx(De,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:c("composer.upload"),testId:"file-upload-button",onClick:p=>{p.preventDefault(),r()},children:f.jsxs("div",{className:Gd,children:[f.jsx(II,{className:"size-6"})," ",c("composer.upload")]})}),i&&f.jsx(De,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:c("composer.takeScreenshot"),onClick:p=>{p.preventDefault(),p.stopPropagation(),i(),kpe(d)},children:f.jsxs("div",{className:Gd,children:[f.jsx(xU,{className:"size-6"}),c("composer.takeScreenshotShort")]})}),o&&f.jsx(De,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:c("composer.addFromOneDrive"),onClick:p=>{p.preventDefault(),p.stopPropagation(),o()},children:f.jsxs("div",{className:Gd,children:[f.jsx(kU,{className:"size-6"}),c("composer.addFromOneDrive")]})}),a&&f.jsx(De,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:c("composer.multiTabs.addTab"),onClick:p=>{p.preventDefault(),p.stopPropagation(),a()},children:f.jsxs("div",{className:Gd,children:[f.jsx(RU,{className:"size-6"}),c("composer.multiTabs.addTab")]})})]})}function bye(){const[t,e]=m.useState(!1);return m.useEffect(()=>{async function n(){const{uiOverrides:{showScreenshotButton:r=()=>Promise.resolve(!1)}={}}=Ee.instance().config(),o=await r();e(o)}n().catch(()=>{})},[]),t}function _ye({startNewChatDisabled:t,onStartNewConversation:e,onSelectFileIfEnabled:n,onSelectOneDriveFileIfEnabled:r,onTakeScreenshot:o,onSelectUserOpenedTabsIfEnabled:i}){const[a,s]=et(ay),c=bye();return f.jsx(qT,{isOpen:a==="plus",onIsOpenChange:u=>s(d=>u?"plus":d==="plus"?null:d),renderTrigger:u=>f.jsx(vye,{onRef:u.ref,onClick:u.onClick}),options:{placement:"top-start",offset:{mainAxis:10,crossAxis:-12},hideOnMenuClick:!0},className:xt(wi,"p-2"),children:f.jsx(yye,{startNewChatDisabled:t,startNewConversation:e,selectFile:n,selectOneDriveFile:r,takeScreenshot:c?o:void 0,selectUserOpenedTabs:i})})}function PU(){const t=QT(),e=F(mt),n=F(Rw),r=m.useCallback(async({url:i,args:a,conversationId:s})=>{const c=await Un(i,vM,{query:a,analytics:{anonymousPath:"/conversations/*/history"},parseOptions:{safe:!0}}).then(u=>u.data);return c.results.length>0&&(c.results=yU(c.results),t(s,u=>{var d;u.length===0&&Cye((d=c.results.at(0))==null?void 0:d.createdAt),c.results.reverse(),u.unshift(...c.results)})),c},[t]);return GT(r,(i,a)=>{if(!e||n||!(a!=null&&a.next)&&i>0)return null;const s={url:`/conversations/${e}/history`,conversationId:e};return a!=null&&a.next&&(s.args={cursor:a.next}),s})}function Cye(t){try{const e=gt(Eo),n=e==null?void 0:e.updatedAt;if(!t||!n)return;const r=new Date(n),o=new Date(t);(r.getTime()-o.getTime())/1e3/60>1&&Y.trackEvent({name:"system",data:{eventName:"historyUpdatedAtDiscrepancy",eventInfo_conversationId:e.id,eventInfo_conversationUpdatedAt:n,eventInfo_lastMessageCreatedAt:t}})}catch{}}function Sye(){const t=m.useRef(0),e=m.useRef(0),n=m.useRef(0),r=m.useRef(0),o=m.useRef(0),i=m.useRef(0),a=m.useRef(""),s=m.useRef(""),c=m.useRef(!1),u=m.useRef(!1),d=m.useRef(!1),h=m.useRef(!1),p=m.useRef(!1),g=m.useRef(void 0),v=m.useCallback(P=>{t.current=performance.now(),g.current=P?"appearance":void 0},[]),y=m.useCallback(P=>{o.current=0,i.current=0,c.current=!1,e.current=performance.now(),a.current=P,Y.trackEvent({name:"interaction",data:{eventName:"copilotCompose",eventInfo_conversationId:a.current,eventInfo_inputMethod:"voice",eventInfo_landingPage:Y.getLandingPage(),eventInfo_scenario:g.current}}),Y.trackEvent({name:"interaction",data:{eventName:"audioStartSent",eventInfo_conversationId:a.current,eventInfo_duration:e.current-t.current,eventInfo_scenario:g.current}})},[]),_=m.useCallback(P=>{u.current=!1,d.current=!1,h.current=!1,p.current=!1,s.current=P,n.current=performance.now(),Gm.onStartMessage(P,n.current),i.current&&Y.trackEvent({name:"system",data:{eventName:"copilotAudioReqtoResp",eventInfo_conversationId:a.current,eventInfo_messageId:s.current,eventInfo_duration:n.current-i.current,eventInfo_scenario:g.current}}),Y.trackEvent({name:"system",data:{eventName:"copilotAudioStartMessage",eventInfo_conversationId:a.current,eventInfo_messageId:s.current,eventInfo_scenario:g.current,eventInfo_firstTurn:!c.current}})},[]),b=m.useCallback(()=>{o.current=performance.now()},[]),C=m.useCallback(()=>{!c.current||!s.current||(r.current=performance.now(),u.current||(u.current=!0,n.current&&Y.trackEvent({name:"system",data:{eventName:"copilotAudioResptoReceived",eventInfo_conversationId:a.current,eventInfo_messageId:s.current,eventInfo_duration:r.current-n.current,eventInfo_scenario:g.current}}),i.current&&Y.trackEvent({name:"system",data:{eventName:"copilotAudioFirstTokenReceived",eventInfo_conversationId:a.current,eventInfo_messageId:s.current,eventInfo_duration:r.current-i.current,eventInfo_scenario:g.current}})))},[]),w=m.useCallback(()=>{i.current=performance.now(),Gm.onSpeechEndDetected(i.current),o.current&&Y.trackEvent({name:"system",data:{eventName:"copilotAudioInput",eventInfo_conversationId:a.current,eventInfo_duration:i.current-o.current,eventInfo_scenario:g.current}})},[]),S=m.useCallback(()=>{h.current||(h.current=!0,Y.trackEvent({name:"system",data:{eventName:"copilotAudioCharacterAnimationReceived",eventInfo_conversationId:a.current,eventInfo_duration:performance.now()-i.current,eventInfo_messageId:s.current,eventInfo_scenario:g.current}}))},[]),E=m.useCallback(P=>{const{messageId:X,voiceType:M}=P;if(!c.current){c.current=!0,Y.trackEvent({name:"system",data:{eventName:"copilotAudioCallSetUp",eventInfo_duration:performance.now()-t.current,eventInfo_conversationId:a.current,eventInfo_responseVoiceType:M,eventInfo_scenario:g.current}});return}!d.current&&X===s.current&&(d.current=!0,i.current&&Y.trackEvent({name:"system",data:{eventName:"copilotAudioLastTokenReceived",eventInfo_conversationId:a.current,eventInfo_messageId:X,eventInfo_duration:r.current-i.current,eventInfo_scenario:g.current}}),Y.trackEvent({name:"system",data:{eventName:"copilotResponseRender",eventInfo_inputMethod:"voice",eventInfo_responseMethod:"voice",eventInfo_conversationId:a.current,eventInfo_messageId:s.current,eventInfo_responseVoiceType:M,eventInfo_landingPage:Y.getLandingPage(),eventInfo_scenario:g.current}}))},[]),I=m.useCallback(P=>{const X=performance.now()-e.current;Y.trackEvent({name:"system",data:{eventName:"copilotAudioCallEnd",eventInfo_conversationId:a.current,eventInfo_duration:X,eventInfo_numMessages:P,eventInfo_scenario:g.current}})},[]),x=m.useCallback(P=>{Y.trackEvent({name:"system",data:{eventName:"copilotAudioStartFailed",eventInfo_conversationId:a.current,eventInfo_duration:performance.now()-e.current,eventInfo_reason:P,reason:P,eventInfo_scenario:g.current}})},[]),A=m.useCallback(P=>{Y.trackEvent({name:"system",data:{eventName:"copilotAudioStartTimeout",eventInfo_conversationId:a.current,eventInfo_duration:P,eventInfo_scenario:g.current}})},[]),N=m.useCallback(P=>{Y.trackEvent({name:"system",data:{eventName:"copilotAudioTerminated",eventInfo_conversationId:a.current,eventInfo_duration:performance.now()-e.current,eventInfo_reason:P,reason:P,eventInfo_scenario:g.current}})},[]),R=m.useCallback(P=>{Y.trackEvent({name:"system",data:{eventName:"copilotAudioError",eventInfo_conversationId:a.current,eventInfo_duration:performance.now()-e.current,eventInfo_errorCode:P,eventInfo_scenario:g.current}})},[]),z=m.useCallback(()=>{if(!p.current){p.current=!0;const P=Math.round(performance.now()-(i.current||n.current));Y.trackEvent({name:"system",data:{eventName:"copilotAudioStart",eventInfo_conversationId:a.current,eventInfo_messageId:s.current,eventInfo_duration:P,eventInfo_scenario:g.current}})}},[]);return m.useMemo(()=>({onBeforeStartCall:v,onAudioStartFailed:x,onAudioStartTimeout:A,onStartCall:y,onStartMessage:_,onAudioInterrupt:b,onAudioReceived:C,onSpeechEndDetected:w,onCharacterAnimationReceived:S,onMessageDone:E,onTerminated:N,onEndCall:I,onError:R,onAudioStart:z}),[v,x,A,y,_,b,C,S,w,E,N,I,R,z])}const wye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/call_ending-BxIIadI4.mp3",Eye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/call_opening-CKuCznU5.mp3",MAe={lmks_rest:"lmksRest",frames:"frames",expr:"expr",neck_pose:"neckPose",jaw_pose:"jawPose",eyes_pose:"eyesPose",eyes_open_ratio:"eyesOpenRatio",rotation:"rotation",translation:"translation",lmks:"lmks"};class Tye{constructor(e,n){Z(this,"lmksRest");Z(this,"frames");this.lmksRest=e,this.frames=n}}class Iye{constructor(e,n){Z(this,"exp");Z(this,"pose");this.exp=e,this.pose=n}isValid(){return this.exp.dtype!==""&&this.exp.data.length>0||this.pose.dtype!==""&&this.pose.data.length>0}}const Aye=3.141592653589793,qP="System.Single, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089";function kye(t){const e=[],n=[],r=(s,c)=>{if(c>=s.length)throw new Error("index out of range");return s[c]===void 0?0:s[c]};for(const{frame:s,offset:c}of t){if(s.length<97)return console.log("Invalid frame length"),null;const u=new Array(28).fill(0);u[12]=r(s,78),u[16]=r(s,43),u[17]=r(s,43),u[21]=r(s,72),u[23]=.5*r(s,52)+.5*r(s,53),u[24]=.75*r(s,76),u[26]=.75*r(s,76),e.push({exp:u,offset:c});const d=[[-1*r(s,88)+Aye,-1*r(s,89),r(s,90)],[0,r(s,92),-1*r(s,91)],[0,r(s,95),-1*r(s,94)]];n.push(d)}const o={dtype:qP,shape:[e.length,16],data:e,isColumnMajor:!1},i={dtype:qP,shape:[n.length,3,3],data:n,isColumnMajor:!1};return new Iye(o,i)}class xye{constructor(){Z(this,"LOCK_NAME","animation-data-frames-lock");Z(this,"TIMEOUT_MSEC",yV);Z(this,"a2eState",{frames:[],timeoutId:null});Z(this,"vasaState",{frames:[],timeoutId:null});Z(this,"a2eConfig",{getAnimationData:e=>kye(e),calculateDuration:e=>e/t2});Z(this,"vasaConfig",{getAnimationData:e=>new Tye([],e),calculateDuration:e=>e/n2});Z(this,"waitingForLock",new Set);Z(this,"lockedBy",null);Z(this,"unblock",()=>{})}async requestLock(e,n){if(typeof navigator<"u"&&navigator.locks){if(this.waitingForLock.has(e))return;this.waitingForLock.add(e),await navigator.locks.request(this.LOCK_NAME,async()=>{this.lockedBy&&this.lockedBy!==this.LOCK_NAME&&await new Promise(r=>{this.unblock=()=>{r()}}),await n(),this.waitingForLock.delete(e)})}else await n()}lockAnimation(e){this.lockedBy=e}unlockAnimation(){this.lockedBy=null,this.unblock()}setA2EFrame(e,n,r){e&&(this.a2eState.frames.push({frame:e,offset:n}),this.addFrames(this.a2eState,this.a2eConfig,r))}setVasaFrame(e,n){e&&(this.vasaState.frames.push(e),this.addFrames(this.vasaState,this.vasaConfig,n))}async addFrames(e,n,r){const o=e;this.requestLock("addFrames",async()=>{if(o.frames.length>=wV){o.timeoutId&&clearTimeout(o.timeoutId),this.flushFrames(o,n,r);return}if(!o.timeoutId){const i=window.setTimeout(()=>{this.flushFrames(o,n,r)},this.TIMEOUT_MSEC);o.timeoutId=i}})}flushFrames(e,n,r){this.requestLock("flushFrames",async()=>{if(e.frames.length===0)return;ct().set(h2,{animationData:n.getAnimationData(e.frames)});const o=n.calculateDuration(e.frames.length);r==null||r(o),`${e.frames.length}`;const i=e;i.frames=[],i.timeoutId=null})}resetFrames(){for(const e of[this.a2eState,this.vasaState])e.timeoutId&&clearTimeout(e.timeoutId),e.frames=[],e.timeoutId=null}}class Zg{constructor(){Z(this,"totalAudioDuration",0);Z(this,"totalAnimationDataDuration",0);Z(this,"nonInitialPromiseChecked",0);Z(this,"animationDataFrameHandler");Z(this,"isFrameAppendable",!1);this.animationDataFrameHandler=new xye}lockAnimation(e){this.animationDataFrameHandler&&this.animationDataFrameHandler.lockAnimation(e)}unlockAnimation(){this.animationDataFrameHandler&&this.animationDataFrameHandler.unlockAnimation()}addAnimationDataDuration(e){this.totalAnimationDataDuration+=e*1e3}addAudioDuration(e){const n=e*1e3;this.totalAudioDuration+=n}getAnimationSyncPromise(e,n){return`${this.totalAudioDuration}${this.totalAnimationDataDuration}`,e===0?Zg.constructCharacterTalkPromise(bV):n===0?null:this.totalAudioDuration>this.totalAnimationDataDuration+SV&&(this.nonInitialPromiseChecked+=1,this.nonInitialPromiseChecked%CV===1)?Zg.constructCharacterTalkPromise(_V):null}resetAudioAnimationSync(e=null){this.animationDataFrameHandler&&(this.animationDataFrameHandler.resetFrames(),this.totalAudioDuration=0,this.totalAnimationDataDuration=0);const n=ct();n.set(Whe,e??null),n.set(w0,!1),n.set(T0,0),n.set(E0,0)}enableFramesAppending(){this.isFrameAppendable=!0}disableFramesAppending(){this.isFrameAppendable=!1}setA2EFrame(e,n){if(this.isFrameAppendable&&this.animationDataFrameHandler){if(((e==null?void 0:e.length)??0)===0)return;n!==this.totalAnimationDataDuration&&(`${n}${this.totalAnimationDataDuration}`,void 0),this.totalAnimationDataDuration+=1/t2*1e3,this.animationDataFrameHandler.setA2EFrame(e,n),`${this.totalAudioDuration}${this.totalAnimationDataDuration}`}}setVasaFrameData(e){this.isFrameAppendable&&this.animationDataFrameHandler&&(this.totalAnimationDataDuration+=1/n2*1e3,this.animationDataFrameHandler.setVasaFrame(e))}static constructCharacterTalkPromise(e){const n="start-audio-playback-custom",r=new AbortController,{signal:o}=r,i=new Promise(c=>{const u=()=>{c(),r.abort()};window.addEventListener(n,u,{once:!0,signal:o})}),a=new Promise(c=>{const u=()=>{c(),r.abort()};gn.on("voice:audio-interrupted",u)}),s=new Promise(c=>{setTimeout(()=>{c(),r.abort()},e)});return Promise.race([i,a,s])}}const Rye=null;function Pye(t){return t instanceof Error&&(t.name==="NotFoundError"||t.name==="OverconstrainedError")}function Oye({initAudio:t,getAudioConstraints:e,onCallTerminated:n,onSpeechEndDetected:r,keepAudioInputAlive:o=!1}){const i=Se(Gs),a=Se(h2),s=de("client-type-open"),c=de("experimental-vasa"),u=de("character-animation-spda2e"),d=de("character-animation-vasa"),h=Se(Ks),p=de("voice-call-jingles"),g=Se(kV),v=F(mt),y=F(Cv),_=F(Rh),b=Se(hf),C=Se(xV),w=Se(ac),S=Se(Bu),E=de("voice-speed"),I=F(TM),x=QT(),{refetch:A}=PU(),{showBoundary:N}=rN(),R=m.useRef(),z=m.useRef(),P=m.useRef(),X=QF(0),M=m.useRef(null),k=m.useRef(null),U=m.useRef(null),O=m.useRef(null),$=m.useRef(new Set),K=m.useRef(null),[J,se]=m.useState(!1),ne=m.useRef(0),ve=Q=>{ne.current=Q},Be=Q=>{var ee;return(ee=K.current)==null?void 0:ee.addAudioDuration(Q)},Te=m.useRef("inactive"),Pe=m.useCallback(()=>!u&&!d?!1:!!gt(Ks),[u,d]),He=m.useRef(!1),Ze=m.useRef(""),he=m.useRef(0),j=m.useCallback(Q=>{He.current&&Q===Ze.current&&(g("listening"),i("listening"),se(!1))},[g,i]),pe=m.useCallback(Q=>{const{analyser:ee,frameIdRef:ye,volume:Ne}=Q;if(!ee)return;const Ke=new Uint8Array(ee.frequencyBinCount),xe=()=>{var oe;ee.getByteTimeDomainData(Ke);const V=epe(Ke);(oe=Q.update)==null||oe.call(Q,V),Ne.set(V),ye.current=requestAnimationFrame(xe)};xe()},[]),W=Q=>{Q.current!==null&&(cancelAnimationFrame(Q.current),Q.current=null)};m.useEffect(()=>()=>{W(U),W(k)},[]);const[re,be]=m.useState(!t),D=Sye();m.useEffect(()=>{t||(be(!0),b("waiting-for-user-interaction"))},[t,be,b]);const ce=m.useCallback(async()=>{v&&(x(v,Q=>Q.splice(0)),await A())},[A,v,x]),ge=m.useCallback(async()=>{if(P.current){for(const Q of P.current.getTracks())Q.stop();P.current=null}if(R.current)try{await R.current.close(),R.current=null}catch(Q){console.error("Unable to close audioContextIn",Q)}W(k),X.set(0),fo(oP,0)},[X]),te=m.useCallback(async Q=>{if(Te.current="inactive",await ge(),z.current)try{await z.current.close(),z.current=null}catch(ee){console.error("Unable to close audioContextOut",ee)}W(U),I0.set(0),fo(iP,0),se(!1),be(!1),Q.sendAudioEnd(),g("idle"),gt(hf)==="available"&&(p&&aP(wye,3e3),await ce(),D.onEndCall(he.current),he.current=0,S(!0))},[ge,g,p,ce,D,S]),fe=m.useCallback(async Q=>{R.current=new AudioContext({sampleRate:P4}),M.current=R.current.createAnalyser(),ne.current=0;const ee=async()=>{o&&Te.current==="active"&&(await ge(),await fe(Q))};let ye=null;try{ye=await Qhe(Q.sendAudio,R.current,M.current,e,ee)}catch(Ne){Ne instanceof Error&&(Ne.name==="NotAllowedError"||Ne.name==="NotSupportedError")?(b("microphone-denied"),await te(Q),Y.trackEvent({name:"system",data:{eventName:"copilotNoMicrophoneAccess"}})):Pye(Ne)?(b("microphone-not-found"),await te(Q),Y.trackEvent({name:"system",data:{eventName:"copilotMicrophoneNotFound"}})):N(new Error(`Error starting audio capture: ${Ne}`))}if(ye){if(re)for(const Ne of ye.getTracks())Ne.enabled=!1;P.current=ye,pe({volume:X,analyser:M.current,frameIdRef:k,update:Ne=>{fo(oP,Ne)}})}},[re,pe,X,o,ge,e,b,te,N]),je=m.useRef(!1),Je=m.useCallback(()=>{if(W(U),!z.current)return;const Q=z.current.createGain(),ee=z.current.createAnalyser();Q.connect(ee),ee.connect(z.current.destination),O.current=Q,se(!0),pe({volume:I0,analyser:ee,frameIdRef:U,update:ye=>{fo(iP,ye)}})},[pe]),at=m.useCallback(Q=>{const ee=Q==="mute";if(be(ee),fo(Khe,ee),P.current)for(const ye of P.current.getTracks())ye.enabled=Q==="unmute"},[]),nt=m.useCallback(Q=>{var ee;if(Pe())return(ee=K.current)==null?void 0:ee.getAnimationSyncPromise(ne.current,Q)},[Pe]),Ue=m.useCallback(async Q=>{z.current=new AudioContext({sampleRate:Kg}),ne.current=0,Je(),je.current||(je.current=!0,await fe(Q)),gt(Nw)&&at("mute")},[fe,Je,at]),Ve=m.useCallback(()=>{if(gt(Ks))return"character";if(s)return Ee.instance().config().audioConfigClientType},[s]),bt=m.useCallback(async Q=>{var Ke;if(!v||!t)return;b("checking-availability"),C(null),je.current=!1;const{sendAudioStart:ee}=Q,ye=Ve();ee(v,{voice:_??((Ke=y[0])==null?void 0:Ke.id)},ye);const Ne=1e4;setTimeout(()=>{gt(hf)==="checking-availability"&&Te.current==="active"&&D.onAudioStartTimeout(Ne)},Ne),D.onStartCall(v),p&&await navigator.locks.request("audio-playback",async()=>{var xe,V;(xe=K.current)==null||xe.lockAnimation("audio-playback"),await aP(Eye,3e3),(V=K.current)==null||V.unlockAnimation()}),Dl("onStartVoiceChat")},[v,t,b,_,y,D,C,p,Ve]),Lt=m.useCallback(()=>{var Q,ee;for(const ye of $.current)ye.stop();$.current.clear(),(Q=z.current)==null||Q.close(),z.current=null,se(!1),(ee=K.current)==null||ee.resetAudioAnimationSync()},[]),Pt=m.useCallback(async Q=>{Lt(),await te(Q),n()},[te,n,Lt]),zt=hI(E?I:vv),$t=m.useCallback(Q=>ee=>{var ye,Ne,Ke,xe,V,oe,le;switch(ee.event){case"startMessage":{const{messageId:me}=ee;if(D.onStartMessage(me),Lt(),Te.current==="inactive")break;Ue(Q),b("available"),g("listening"),se(!0),fo(J_,!1),(ye=K.current)==null||ye.resetAudioAnimationSync(z.current),(Ne=K.current)==null||Ne.enableFramesAppending();break}case"audioStartFailed":{const{reason:me}=ee,{success:ke}=bM.safeParse(me);b(ke?me:"error"),D.onAudioStartFailed(me);break}case"audioTimeRemaining":{const{seconds:me}=ee;C(me);break}case"audio":{if(Te.current==="inactive")break;D.onAudioReceived(),g("responding"),se(!0),Ze.current=ee.audio,z.current&&O.current&&qhe({data:ee.audio,audioContext:z.current,gainNode:O.current,sourceNodes:$.current,nextBufferTime:ne,updateNextBufferTime:ve,onAudioEnd:j,outputVolumeMuted:c,getPlaySignal:nt,updateAudioDuration:Pe()?Be:void 0,onAudioStart:D.onAudioStart,playbackRate:zt});break}case"characterAnimation":{if(D.onCharacterAnimationReceived(),Pe()){const{frame:me}=ee;(me==null?void 0:me.model)==="spda2e"&&((Ke=K.current)==null||Ke.setA2EFrame(me.poseDiffusion,ee.offsetInMilliseconds)),(me==null?void 0:me.model)==="vasa"&&((xe=K.current)==null||xe.setVasaFrameData(me))}break}case"interruptAudio":{Pe()&&(gn.emit("voice:audio-interrupted"),(V=K.current)==null||V.resetAudioAnimationSync(),(oe=K.current)==null||oe.disableFramesAppending(),a(null)),g("listening"),i("listening"),D.onAudioInterrupt(),Lt(),fo(J_,!0);break}case"speechEndDetected":{D.onSpeechEndDetected(),i("thinking"),r==null||r();break}case"callTerminated":{Pt(Q),D.onTerminated(ee.reason);break}case"error":{const{errorCode:me}=ee;switch(me){case"over-turn-limit":{w(0);break}case"character-out-of-capacity":{Q.setCallType("standard");break}}Te.current==="active"&&D.onError(me);break}case"done":{const{messageId:me}=ee;He.current=!0,he.current+=1,D.onMessageDone({messageId:me,voiceType:_??((le=y[0])==null?void 0:le.id)}),fo(J_,!0);break}case"banned":{const{expiresAt:me}=ee,ke=UT(me);ke&&(FT(ke,"voice",me),Lt(),te(Q));break}case"callTypeChanged":{const{callType:me}=ee;me==="standard"&&h(void 0);break}}},[D,Lt,Ue,b,Pe,C,g,j,c,nt,i,a,r,Pt,w,_,y,te,h,zt]);return{toggleVoiceChat:m.useCallback(async Q=>{if(Q==="start"&&Te.current==="active")return;if(Q==="start"){const ye=LM();D.onBeforeStartCall(ye)}if(Q==="end"&&Te.current==="inactive")return;Te.current=Q==="start"&&t?"active":"inactive",Q==="start"&&Pe()&&(K.current=new Zg),Gm.onVoiceChatToggled(Q,v);const ee=await Vs({useMockConnection:!!Rye});Q==="start"?(ee.setOnEvent($t(ee)),await bt(ee)):(ee.setOnEvent(()=>{}),await te(ee))},[$t,Pe,bt,te,D,t,v]),toggleMute:at,isInputMuted:re,inputVolume:X,hasOutputVolume:J}}const LAe="https://picassostaticassetsstg.azureedge.net/character/try-now/lumi_intro_394_222";function YP(t,e){if(!t)return!1;const n=hn(xY)??hn(RY);return!e&&!n}function Nye({isAudioCall:t,onCallTerminated:e,onMute:n,onUnmute:r}){const o=Zt(),i=wv(),[a,s]=ry(),c=a==="audioCall",[u,d]=m.useState(!1),h=F(Ks),p=de("appearance-try-now-modal"),g=F(Nw),{state:v,setState:y}=WT({defaultValue:!c}),{toggleVoiceChat:_,toggleMute:b,hasOutputVolume:C,inputVolume:w,isInputMuted:S}=Oye({initAudio:v,onCallTerminated:e}),E=m.useRef(_);E.current=_,m.useEffect(()=>{t?!c&&!YP(p,h)&&!g&&E.current("start"):E.current("end")},[o,t,c,E,h,g,p]);const I=m.useCallback(()=>{_("start"),v&&!u&&(d(!0),b("unmute"))},[_,v,u,b]),x=m.useCallback(()=>{s(),y(!0),_("end")},[s,y,_]),A=m.useCallback(()=>{y(!0),b(S?"unmute":"mute"),S?r==null||r():n==null||n()},[y,b,S,n,r]);m.useEffect(()=>{t&&c&&v&&I()},[v,t,c,I]);const N=m.useCallback(async(P=!1)=>{(!t||P)&&await R()!=="NotSupported"||(await i({talk:!0}),YP(p,h)||I())},[t,p,i,h,I]);m.useEffect(()=>{c&&N(!0)},[c,N]);async function R(){return(await kae.run({onAudioCall:async()=>"NotSupported"})).onAudioCall()}const z=m.useCallback(P=>{const{toLocation:X}=P,M=X.pathname;t&&!M.endsWith("/talk")&&E.current("end")},[t]);return cy(z),{launchAudioCall:N,startAudioCallIfNotStartedAlready:I,endAudioCall:x,toggleAudioInput:A,inputVolume:w,isInputMuted:S,hasOutputVolume:C,isAudioDeepLink:c,canInitAudio:v}}const OU={sdk:"8.0",messaging:{origin:window.location.origin,channelId:crypto.randomUUID()},accessibility:{showFocusOnLoad:!1,enableFocusTrap:!0},authentication:{},entry:{oneDrive:{recent:{}}},typesAndSources:{mode:"files",filters:Hle,pivots:{oneDrive:!0,recent:!0,photos:!1}}},Mye=new URLSearchParams({app:"CMC",scenario:"AnalyzeDoc",filePicker:JSON.stringify(OU),locale:_t.resolvedLanguage??"en-US"}),NU="https://onedrive.live.com",Lye=`${NU}/picker?${Mye}`;async function MU(){const t=await jae();return(t==null?void 0:t.accessToken)??""}function Dye({port:t,onClose:e,onPick:n,setIsLoading:r,onError:o}){return async i=>{let a;switch(i.data.type){case"notification":i.data.data.notification==="page-loaded"&&r(!1);break;case"command":switch(t.postMessage({type:"acknowledge",id:i.data.id}),i.data.data.command){case"authenticate":a=await MU(),typeof a<"u"?t.postMessage({type:"result",id:i.data.id,data:{result:"token",token:a}}):(r(!1),o(),e());break;case"close":e();break;case"pick":n(i.data.data.items[0]),t.postMessage({type:"result",id:i.data.id,data:{result:"success"}}),e();break;default:r(!1),t.postMessage({result:"error",error:{code:"unsupportedCommand",message:i.data.data.command},isExpected:!0}),o(),e();break}break}}}function jye({onClose:t,onPick:e,onError:n}){const r=m.useRef(null),{t:o}=Fe(),[i,a]=m.useState(!0);return m.useEffect(()=>{var h;const s=()=>{const p={title:o("composer.errors.attachmentOneDrive.title"),message:o("composer.errors.attachmentOneDrive.message")};n(p),Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:p.message,eventInfo_details:"Error submitting message"}})},c=(h=r.current)==null?void 0:h.contentWindow;let u,d;return c&&(async()=>{const g=c.document.createElement("form");g.method="POST",g.action=Lye,c.document.body.appendChild(g);const v=c.document.createElement("input");v.type="hidden",v.name="access_token",v.value=await MU(),g.appendChild(v),window.addEventListener("message",y=>{if(y.origin&&y.origin===NU){const _=y.data;if(_.type==="initialize"&&_.channelId===OU.messaging.channelId){if([d]=y.ports,!d){a(!1),s(),t();return}u=Dye({port:d,onClose:t,onPick:e,onError:s,setIsLoading:a}),d.addEventListener("message",u),d.start(),d.postMessage({type:"activate"})}}}),g.submit()})(),()=>{u&&window.removeEventListener("message",u),d&&d.close()}},[t,e,n,o]),f.jsxs(Sy,{isOpen:!0,onClose:t,fullBleed:!0,className:"h-[80vh] w-[80vw]",children:[i&&f.jsx("div",{className:"flex size-full items-center justify-center",children:f.jsx(kt,{className:"size-20"})}),f.jsx("iframe",{title:o("onedrive.filePicker"),ref:r,width:i?"0%":"100%",height:i?"0%":"100%"})]})}const Uye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/add-BTcFT5ig.svg",Fye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/image-zMo0jLdY.svg",Bye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/podcast-BQmBU8ew.svg",Hye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/research-i8a7tpJF.svg";function Vye(t){const{onPrefillComposerInput:e,disabled:n=!1}=t,r=F(aE),o=F(sE),[i,a]=et(ir),s=F(ar),c=F(Rv),u=_r(),d=Se(Bc),h=yI(),{handleProSubscription:p}=Xg({payflowEntryPoint:"PodcastLimit",skuType:c?"FreeTrial":"1Mo-Paid",upsellReason:"",entryStyle:"Button"}),{handleProSubscription:g}=Xg({payflowEntryPoint:"ResearchReportLimit",skuType:c?"FreeTrial":"1Mo-Paid",upsellReason:"",entryStyle:"Button"}),v=zye({remainingPodcastGeneration:r,remainingResearchReportGeneration:o,isPro:(s==null?void 0:s.isPro)??!1}),y=Se(vj),_=Ay(),b=m.useCallback(S=>{const E=v[S];if(E){switch(E.key){case"image":y("image");break;case"podcast":if(!u&&r===0){d({isOpen:!0,scenario:"podcast",reason:"createPodcast"});return}if(!(s!=null&&s.isPro)&&r===0){if(!h)return;p();return}y("podcast");break;case"researchReport":if(!u&&o===0){d({isOpen:!0,scenario:"researchReport",reason:"createResearchReport"});return}if(!(s!=null&&s.isPro)&&o===0){if(!h)return;g();return}y("researchReport"),a("research");break;default:y(null);break}e(E.composerInputPrompt??"")}},[v,y,e,s,r,o,h,p,g,u,d,a]),C=m.useCallback(()=>{y(null),L0(),a("chat")},[y,a]),w=m.useRef(null);return m.useEffect(()=>{var S;_.length===0&&i!=="research"&&((S=w.current)==null||S.setSelectedItemIndex(0),C())},[_,C,i]),f.jsx(mI,{ref:w,items:v,onSelect:b,defaultSelectedItemIndex:0,onReset:C,disabled:n})}function qp(t){return e=>{Spe(t,e)}}function Yp(t){return e=>{Tpe(t,e)}}function zye({remainingPodcastGeneration:t,remainingResearchReportGeneration:e,isPro:n}){const r=de("podcast-in-create-drawer"),o=V4(),i=r,a=o,{t:s}=Fe("translation",{keyPrefix:"composer.create"});return m.useMemo(()=>{const u={key:"create",title:s("buttonTitle"),icon:f.jsx(kr,{url:Uye,className:"size-5"}),description:s("buttonDescription"),composerInputPrompt:"",testId:"composer-create-button",onImpression:qp(null),beforeClick:Yp(null)},d={key:"image",title:s("image.title"),icon:f.jsx(kr,{url:Fye,className:"size-6"}),description:s("image.description"),composerInputPrompt:s("image.prompt"),testId:"composer-create-image-button",onImpression:qp("image"),beforeClick:Yp("image")};function h(){return{key:"podcast",title:s("podcast.title"),icon:f.jsx(kr,{url:Bye,className:"size-6"}),description:s("podcast.description"),composerInputPrompt:s("podcast.prompt"),testId:"composer-create-podcast-button",onImpression:qp("podcast"),beforeClick:Yp("podcast"),tags:t!==null&&n===!1?[{label:s("podcast.remainingCalls",{remainingCalls:t.toString()}),color:t>0?"neutral":"salmon"}]:void 0}}function p(){return{key:"researchReport",title:s("researchReport.title"),icon:f.jsx(kr,{url:Hye,className:"size-6"}),description:s("researchReport.description"),composerInputPrompt:s("researchReport.prompt"),testId:"composer-create-research-report-button",onImpression:qp("researchReport"),beforeClick:Yp("researchReport"),tags:e!==null&&n===!1?[{label:s("researchReport.remainingCalls",{remainingCalls:e.toString()}),color:e>0?"neutral":"salmon"}]:void 0}}return[u,d,a?p():void 0,i?h():void 0].filter(g=>g!==void 0)},[t,n,s,i,a,e])}function $ye({selectFile:t}){const{t:e}=Fe();return f.jsx("div",{className:"flex items-center",children:f.jsx(De,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:e("composer.upload"),testId:"file-upload-button","aria-label":e("composer.upload"),className:"!h-6 !px-2",onClick:n=>{n.preventDefault(),t()},children:f.jsx(II,{className:"size-6"})})})}const LU=ct(),AI=G(null),kI=G(null);function DU(t){LU.set(AI,t)}function jU(t){LU.set(kI,t)}function Gye(t,e){var a;const n={eventInfo_inputLength:t.length};let r=n;const o=gt(AI);if(o){const{source:s,type:c,prompt:u}=o;s==="widgets"?r={...n,widget:c,widgetPromptLength:u.length}:r={...n,pill:c,pillPromptLength:u.length}}const i=gt(kI);return i&&(r={...r,autoCompleteLength:i.prompt.length}),(e==null?void 0:e.length)!==0&&((a=e==null?void 0:e[0])!=null&&a.scenario)&&(r={...r,uploadFileScenario:e[0].scenario}),JSON.stringify(r)}function Kye(t){const e=gt(AI),n=gt(kI),r=e==null?void 0:e.prompt.trim(),o=t.trim(),i=n==null?void 0:n.prompt.trim(),a=n==null?void 0:n.prefix.trim(),s=o.toLowerCase()===(i==null?void 0:i.toLowerCase());return!s&&!e?null:s?!r||!o.toLowerCase().includes(r.toLowerCase())?"autoComplete":a&&a.length>r.length?(e==null?void 0:e.source)==="widgets"?"widgetWithTextAndAutoComplete":"pillWithTextAndAutoComplete":(a==null?void 0:a.length)===r.length?(e==null?void 0:e.source)==="widgets"?"widgetWithAutoComplete":"pillWithAutoComplete":"autoComplete":!r||!o.toLowerCase().includes(r.toLowerCase())?null:o.length>r.length?(e==null?void 0:e.source)==="widgets"?"widgetWithText":"pillWithText":(e==null?void 0:e.source)==="widgets"?"widget":"pill"}function Wye(){DU(null),jU(null)}const qye=m.lazy(()=>T(()=>import("./product-purchase-ptxigdDr.js"),__vite__mapDeps([234,1,235,236,237])).then(t=>({default:t.ProductPurchase}))),Yye=1.25,Qye=64,Jye={opacity:0,scale:Yye,translateY:Qye},Xye={opacity:1,scale:1,translateY:0},Qp="size-6",Zye=m.lazy(()=>T(()=>import("./upsell-block-BEGf7zpG.js"),__vite__mapDeps([238,1,239]))),ebe=m.lazy(()=>T(()=>import("./price-tracking-block-COTwUzhB.js").then(t=>t.p),__vite__mapDeps([240,1,241,242,243,244,245])).then(t=>({default:t.PriceTrackingBlock}))),tbe=m.lazy(()=>T(()=>import("./composer-auto-complete-It_Jx7rQ.js"),__vite__mapDeps([246,1]))),nbe=m.lazy(()=>T(()=>import("./composer-actions-prompt-suggestions-CvO_VhiW.js"),__vite__mapDeps([247,1,248,249,250,251,252,253,254,255,256,257])).then(t=>({default:t.ComposerActionsPromptSuggestions}))),rbe=m.lazy(()=>T(()=>import("./composer-system-alert-CNDO8QYr.js"),__vite__mapDeps([258,1])).then(t=>({default:t.ComposerSystemAlert}))),obe=m.lazy(()=>T(()=>import("./voice-options-3bfB0-KG.js").then(t=>t.v),__vite__mapDeps([259,1]))),ibe=m.lazy(()=>T(()=>import("./think-deeper-pro-subscription-CnUOA-En.js"),__vite__mapDeps([260,1]))),abe=m.lazy(()=>T(()=>import("./over-task-quota-D8xpVtXv.js"),__vite__mapDeps([261,1,262])).then(t=>({default:t.OverTaskQuota}))),sbe=m.lazy(()=>T(()=>import("./computer-use-task-closed-OiekHEGs.js"),__vite__mapDeps([263,1,262])).then(t=>({default:t.ComputerUseTaskClosed}))),cbe=m.lazy(()=>T(()=>import("./safety-risk-card-C--P6hu0.js"),__vite__mapDeps([264,1,265,262])).then(t=>({default:t.SafetyRiskCard}))),lbe=m.lazy(()=>T(()=>import("./add-to-page-BFx7llu6.js"),__vite__mapDeps([266,1])).then(t=>({default:t.AddToPage}))),ube=m.lazy(()=>T(()=>import("./cross-selling-strip-consumer-DRgR3X2G.js"),__vite__mapDeps([267,1,239]))),dbe=m.lazy(()=>T(()=>import("./composer-prompt-review-C9s_hRn2.js"),__vite__mapDeps([268,1,269]))),nC=m.lazy(()=>T(()=>import("./composer-action-4AF4kEUj.js"),__vite__mapDeps([262,1]))),fbe=m.lazy(()=>T(()=>import("./biometric-consent-BxReyIZS.js"),__vite__mapDeps([270,1])).then(t=>({default:t.BiometricConsent}))),hbe=m.lazy(()=>T(()=>Promise.resolve().then(()=>The),void 0)),pbe=m.lazy(()=>T(()=>import("./daily-briefing-chat-pMwotFuc.js"),__vite__mapDeps([271,1,272,273])).then(t=>({default:t.DailyBriefingChat}))),mbe=m.lazy(()=>T(()=>import("./composer-sign-in-CeiOS55U.js"),__vite__mapDeps([274,1,275]))),gbe=m.lazy(()=>T(()=>import("./daily-briefing-composer-player-DdcQU12b.js"),__vite__mapDeps([276,1,277,278,279,280,273])));function vbe(){var uA,dA,fA;const{t}=Fe(),{submitMessage:e,onSubmitMessageBlocked:n,stopMessage:r}=by(),o=de("image-copy-paste"),i=F(Fu),a=de("pay-native-checkout"),s=de("shopping-card"),c=de("multiplecharacters"),u=de("anonymousattachmentupload"),d=de("onedrive-file-upload"),h=de("ds-editprompt"),p=!ly(),g=F(AM),v=to(),y=wv(),_=nve(),b=Zt(),C=F(jn),w=Lr(),S=F(os),E=qn({breakpoint:"sm"}),I=bU({breakpoint:"h760"}),x=$T(),A=Vge(),N=Ay(),R=Hge(),[z,P]=m.useState(null),X=Se(i2),[M,k]=et(Bc),U=F(Yse),O=F(Qse),$=F(RV),K=F(u2),J=F(AV),se=F(d0),[ne,ve]=m.useState(!1),Be=J||ne,{startConversationDisabled:Te,createConversation:Pe}=ny(),He=F(ts),[Ze,he]=m.useState(!1),[j,pe]=et(Or),W=Se(qae),[re,be]=et(pge),[D,ce]=et(iy),ge=Se(c2),te=F(Fi),fe=(te==null?void 0:te.type)==="popup",je=rve(),Je=fe||je,at=_U(),nt=(uA=Ee.instance().config().composer)==null?void 0:uA.enableAppShadow,{isPlaying:Ue,pause:Ve,onToggleVoiceSettings:bt,resetAllTimers:Lt}=Q4(),Pt=$ge(),zt=lve(),$t=_r(),B=m.useRef(null),Q=m.useRef(null),ee=m.useRef(null),[ye,Ne]=m.useState(!1),[Ke,xe]=m.useState(null),V=de("imagegenv3"),oe=de("logged-out-sharing"),le=de("remove-prefill-space-after-prompt-cmc"),{isMediaViewerOpen:me,closeMediaViewer:ke,isPictureInPictureSupported:Ye,triggerPictureInPicture:st,contentPageType:it}=ca(),ht=Se(oy),en=b.endsWith("/talk"),At=b.endsWith("/daily"),oo=de("1s-dbchat"),ln=my(),xi=At||ln,Gc=tve(),Sr=hy(),zo=b.startsWith("/chats")&&!en,ua=b.startsWith("/shares"),qh=it==="weather",Kc=F(hf),{login:Yh}=id(),cr=j==="dialog",Wc=a&&j==="checkout",Qh=Zge(),[ko]=et(ir),[Jh,Py]=m.useState(!1),Qe=F(vj),H=gU(),{isCentralComposerEnabled:Ie,isAutoSuggestEnabled:$e,isStarterPromptsEnabled:Xt,isWidgetSectionEnabled:Fn,isAppearanceOnHomeEnabled:kn}=Ey(),{floatingStyles:er,edgeTabMenuRefs:Dr,isMultiTabsMenuExpanded:ss,setIsMultiTabsMenuExpanded:xn,isShowMultiTabsPreviewCard:Xh,setIsShowMultiTabsPreviewCard:Zh,handleMentionEvent:K6,handleMultiTabsMenuSaveBtnEvent:W6,handleUserInputEnterEvent:q6,handleUserInputKeydownEvent:DI}=zge(),fd=ko==="computerUse",qc=Ie&&!j,Oy=$e&&!j&&!fd,jI=m.useId(),Y6=F(bI),Q6=Xt&&!j&&!fd&&!Y6&&(!I||E),J6=qc&&Fn&&!fd&&!E&&!I,hd=m.useRef(null),X6=iv("programmatic"),Z6=!en&&!At&&!ln&&!qc&&!Wc&&!qh;let UI=!0;const FI=(Sr||zo||Gc||ua)&&!j&&!me;FI&&((dA=Ee.instance().config().composer)!=null&&dA.disableTextInput)&&(UI=!1);const BI=Wc,Ny=F(DT),HI=F(OV),[My,VI]=et(Jae),Yc=F(Xae);de("multiple-research-tasks-in-conversation");const pd=dz(),md=F(Xr),gd=md==="side-by-side"&&(pd==null?void 0:pd.type)==="computerUse",zI=CI(),ep=gd&&!UM(pd.status),vd=gd&&QY(pd),$I=vd||gd||At||Yc,GI=!me&&!en&&(!j||j==="daily-briefing-chat"),tp=$||!GI||ep||vd||Yc,Ly=Gge(GI),yd=F(Qae),da=F(Yae),[Dy,KI]=et(gj),jy=Ac(),bd=j==="prompt-sign-in"||j==="prompt-3p-sign-in"||j==="prompt-location"||j==="prompt-review"||j==="confirm-link-navigation"||j==="cross-promo-card"||j==="shopping-upsell-card"||j==="shopping-price-tracking"||j==="add-to-page"||j==="safety-risk-card"||j==="computer-use-task-closed"||j==="over-task-quota"||j==="daily-briefing-chat"||j==="upsell-microsoft-account-for-pro-subscription"||j==="biometric-consent"||j==="finance-watchlist-unfollow-toast",WI=!en&&j!=="daily-briefing-player"&&j!=="audioSettings"&&j!=="reasoning-mode-pro-subscription"&&j!=="checkout"&&!bd&&!me,[Uy,$o]=et(LT),eF=m.useCallback(()=>{var _e;(_e=B.current)==null||_e.focus(),Ts(!0)},[]),tF=m.useCallback(()=>{Q.current&&(Q.current.value="")},[]),Qc=m.useCallback((_e,We)=>{k({isOpen:!0,scenario:We??null,reason:_e})},[k]),nF=m.useCallback(()=>{Qc("fileUpload")},[Qc]),{processUploadedFiles:qI,processUploadedLocalFiles:fa,isUploadingAttachments:rF,uploadedAttachments:io,resetFileUpload:oF,removeAttachment:iF}=qge(eF,$o,tF,nF),YI=io.filter(({error:_e})=>!_e),QI=(YI.length>0||Ly)&&!en,JI=YI.length>0,aF=rF,XI=!!(N.trim().length>0||JI)&&!tp,ZI=!!((z&&z.length>0)===!0||aF||Be||se||N.trim().length===0&&ko==="computerUse"),[sF,cF]=m.useMemo(()=>{const{reason:_e}=M;return _e?[t(`signInPrompt.${_e}Header`,t("signInPrompt.header")),t(`signInPrompt.${_e}Text`,t("signInPrompt.text"))]:[t("signInPrompt.header"),t(oe?"signInPrompt.textV2":"signInPrompt.textV3")]},[oe,M,t]),[eA,lF]=m.useState({onSubmitCallback:null,onCancelCallback:null}),uF=m.useCallback(async()=>new Promise(_e=>{if(gt(xM)||io.length===0){_e(!0);return}pe("biometric-consent"),lF({onSubmitCallback:()=>{pe(null),_e(!0)},onCancelCallback:()=>{pe(null),_e(!1)}})}),[io,pe]),dF=m.useCallback(_e=>{var pn;if(!DI(_e)&&_e.key==="ArrowDown"&&(pn=B.current)!=null&&pn.contains(document.activeElement)&&hd.current){_e.preventDefault();const Ut=hd.current.querySelector("button");Ut&&Ut.focus()}},[DI]),Fy=async _e=>{var We,pn;if(ua&&await FP(),!XI||!N&&!JI||ZI){n();return}V&&!await uF()||(Zh(!1),L0(),CF?(pn=B.current)==null||pn.focus():(We=B.current)==null||We.blur(),await RF(_e??N))},fF=m.useCallback(async()=>{await y()},[y]),{launchAudioCall:By,startAudioCallIfNotStartedAlready:Hy,endAudioCall:_d,toggleAudioInput:hF,hasOutputVolume:Vy,inputVolume:pF,isInputMuted:mF,isAudioDeepLink:gF,canInitAudio:vF}=Nye({isAudioCall:en,onCallTerminated:fF,onMute:()=>bn({source:"audioCall",scenario:"mute"})});m.useEffect(()=>{U&&(pe(jy?"prompt-3p-sign-in":"prompt-sign-in"),M.isOpen&&k({...M,isOpen:!1,reason:M.reason??($?"overTurnLimit":null)}),Ts(!0))},[pe,k,U,M,jy,$]),m.useEffect(()=>{O&&("geolocation"in navigator?setTimeout(()=>{pe("prompt-location"),Ts(!0),Qn("hasBeenPromptedForLocation","true"),Y.trackEvent({name:"interaction",data:{eventName:"locationPrompt",eventInfo_action:"seen"}})},SB):Y.trackEvent({name:"system",data:{eventName:"geolocationUnavailable"}}))},[pe,O]),m.useEffect(()=>{xi?pe("daily-briefing-player"):Je?(Ts(!0),pe("cross-promo-card")):pe(vd?"safety-risk-card":ep?"computer-use-task-closed":null)},[pe,Je,ep,vd,xi]);const zy=m.useRef(null),yF=fI(_e=>{const We=document.getElementById("app");We&&(W(_e.height),We.style.setProperty("--composer-container-height",`${_e.height}px`))}),bF=()=>{xo(),be(void 0)},tA=()=>{Ze&&(Hy(),he(!1))},xo=()=>{if(At&&j==="daily-briefing-chat"&&(pe("daily-briefing-player"),L0()),j==="prompt-3p-sign-in"&&(ln||At)&&pe("daily-briefing-player"),!($||At||ln||ep||vd)){if(cr&&(da!=null&&da.closeDialogCallback)){da.closeDialogCallback();return}j==="prompt-review"&&kve(gt(mt),"dismissed"),j==="cross-promo-card"&&at(),j==="audioSettings"&&tA(),pe(null),j==="prompt-sign-in"&&M.scenario&&k({isOpen:!1,scenario:null})}},$y=m.useCallback(async()=>{_d(),ht("bottom"),await y()},[y,_d,ht]);m.useEffect(()=>{Ee.instance().config().endAudioOnVisibilityHidden&&!HI&&(Ue?Ve==null||Ve():en&&$y())},[$y,en,Ue,Ve,HI]);const nA={title:t("composer.endAudioCall"),icon:f.jsx(yo,{className:Qp,"aria-hidden":!0}),isVisible:!0,onClick:$y},_F=fge(),rA=()=>{At||ln?Ve==null||Ve():en&&_d(),he(!0)},np=Se(ay),Gy=(ko==="chat"||ko==="reasoning")&&!gd,CF=SI(),Jc=N4(),SF=Jc&&(ko==="chat"||ko==="research"),wF=Jc&&Qe===null,Cd=m.useCallback(()=>{np(null)},[np]);m.useEffect(()=>{Cd()},[WI,Cd]),m.useEffect(()=>{cf(N&&Ny?"autosuggest":fd&&!N?"actions-autosuggest":"starter-prompts")},[Ny,N,fd]),hh({onOutsideEvent:()=>{xo()},elements:[zy],includeScroll:!1,invokeOnce:!1}),hh({onOutsideEvent:zd,elements:[zy,hd],includeScroll:!1,invokeOnce:!1});const oA={title:t("composer.closeVoiceSettings"),icon:f.jsx(yo,{className:Qp,"aria-hidden":!0}),isVisible:!0,onClick:Wy},iA={title:t("imageCard.composer.closeImageViewer"),icon:f.jsx(yo,{className:Qp,"aria-hidden":!0}),isVisible:!0,onClick:ke},EF=_e=>{var Ut;Ts(!0),c&&cU("idle");const{relatedTarget:We}=_e;((Ut=hd.current)==null?void 0:Ut.contains(We))||setTimeout(()=>zd(),100)},TF=_e=>{Oy&&_e&&sU(_e)},aA=m.useCallback(async _e=>{const{actionType:We,id:pn,prompt:Ut,uri:Ro,source:cs}=_e;switch(We){case"prefillComposer":{if(Ut){zd(),DU({prompt:Ut,type:pn,source:cs});const ls=le?Ut:`${Ut} `;Es(ls),$d(ls),setTimeout(()=>{var wd,Ed;(wd=B.current)==null||wd.focus(),(Ed=B.current)==null||Ed.updateSelectionRange(ls.length,ls.length)},0)}break}case"sendMessage":{if(Ut)try{ve(!0),await e({text:Ut,inputMethod:"text"})}finally{ve(!1)}break}case"deepLink":{Ro&&Ro==="copilotn://voiceCall"&&await By();break}}},[le,By,e]),IF=(_e,We)=>{jU({prompt:_e,prefix:We}),Fy(_e)},AF=_e=>{var We;Es(_e),(We=B.current)==null||We.focus(),$d(_e),cf("starter-prompts")},sA=m.useCallback(_e=>{var We;Es(_e),(We=B.current)==null||We.focus(),$d(_e),ce(null),ge(null)},[ce,ge]);m.useEffect(()=>{((D==null?void 0:D.source)==="promptInUrl"||(D==null?void 0:D.source)==="edgeOnAskCopilot")&&sA(D.prompt)},[D,sA]);const kF=m.useCallback(()=>$o(void 0),[$o]),Ky=m.useCallback((_e,We)=>{const{scenario:pn,reasonIfSignInError:Ut}=We;_e.message==="not-signed-in"?Qc(Ut,pn):$o(Xj(_e.message))},[Qc,$o]),xF=de("local-agents"),RF=async _e=>{var cs,ls,wd,Ed;const We=Kye(_e),pn=Gye(_e,io),Ut=_e.trim(),Ro=ko==="research"&&h?{research:{awaitUserConfirmation:!0}}:void 0;if(j!=="daily-briefing-chat"&&(oF(),Ts(!0),mU(!1),X(!0),pe(null)),zd(),xF){if(Ut.startsWith("/agent")){await _();return}if(b.endsWith("/agents"))return}j!=="daily-briefing-chat"&&await y();try{ve(!0);let us;Pt&&(us=Pt),zt&&(us=zt),await e({text:Ut,filesWithAttachment:io,inputMethod:"text",scenario:We??void 0,customData:pn??void 0,reference:us,context:Ro})}catch(us){if(us instanceof Error){let hA={};io.length>0&&(hA={eventInfo_uploadFileSize:((ls=(cs=io[0])==null?void 0:cs.file)==null?void 0:ls.size)??0,eventInfo_uploadFileType:(Ed=(wd=io[0])==null?void 0:wd.file)==null?void 0:Ed.type,eventInfo_numDocumentsUploaded:io.length}),Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:us.message,eventInfo_details:"Error submitting message",...hA}}),Ky(us,{reasonIfSignInError:"fileUpload"})}else Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:"Unknown error",eventInfo_details:"Error submitting message"}}),$o({title:t("composer.errors.default.title"),message:t("composer.errors.default.message")})}finally{ve(!1),Wye()}},Sd=m.useCallback(_e=>{const We=!$t&&!u;return We&&Qc("fileUpload",_e),We},[$t,u,Qc]),cA=m.useCallback(()=>{var _e;Sd()||(_e=Q.current)==null||_e.click()},[Sd]);m.useEffect(()=>{if(tp||!o)return()=>{};const _e=async We=>{const{file:pn,error:Ut}=Gle(We);(pn??Ut)&&(We.preventDefault(),Ut?Ky(Ut,{reasonIfSignInError:"fileUpload"}):pn&&fa([pn],"pasteUpload"))};return document.addEventListener("paste",_e),()=>document.removeEventListener("paste",_e)},[fa,tp,o,Ky]),m.useEffect(()=>{My!==null&&(fa([My]),VI(null))},[My,fa,VI]),m.useEffect(()=>{Ke&&!ye&&(qI([{kind:"onedrive",item:Ke,file:new File([],Ke.name)}],"fileUpload"),xe(null))},[Ke,xe,ye,qI]),m.useEffect(()=>{At&&Lt()},[At]);function PF(_e){const We=Array.from(_e.target.files??[]),pn=We[0];We.length===0||!pn||fa([pn],"fileUpload")}const OF=_e=>{if(!Gy||(_e.preventDefault(),Sd()))return;Cd();const We=_e.dataTransfer.files[0];We&&fa([We],"dragUpload")};function Wy(){Py(!0),pe(_e=>_e==="audioSettings"?At||ln?(bt("close"),"daily-briefing-player"):(tA(),null):"audioSettings")}async function NF(){ua&&await FP(),bn({source:"audioCallButton"}),await By()}m.useEffect(()=>{const _e=We=>We==="start"?Hy():_d();return gn.on("composer:request-voice",_e),()=>{gn.off("composer:request-voice",_e)}},[_d,Hy]),m.useEffect(()=>{const _e=()=>{var We;(We=B.current)==null||We.focus()};return gn.on("composer:focus-input",_e),()=>{gn.off("composer:focus-input",_e)}},[]);const MF=m.useCallback(async()=>{var _e;try{pe(null),ce(null),Bge(),(_e=B.current)==null||_e.focus(),await Pe()}finally{ht("center")}},[Pe,ht,pe,ce]),LF=m.useCallback(async()=>{if(Sd())return;Cd();const{file:_e,error:We}=await Iae.run({});_e?fa([_e],"screenshot"):We&&$o(We)},[Cd,Sd,fa,$o]),DF=async()=>{xo(),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(async _e=>{const{latitude:We,longitude:pn,accuracy:Ut}=_e.coords;Y.trackEvent({name:"interaction",data:{eventName:"locationPrompt",eventInfo_action:"shared",eventInfo_locationAccuracy:Ut}}),await Pr({path:"/user/location",args:{body:{latitude:We,longitude:pn,accuracyInMeters:Ut,provider:Ut<100?"gps":"wifi"}}})},_e=>{Y.trackEvent({name:"interaction",data:{eventName:"locationPrompt",eventInfo_action:"denied",eventInfo_error:{code:_e.code,message:_e.message}}}),$o({title:t("composer.errors.location.title"),message:t("composer.errors.location.message")})},{enableHighAccuracy:!0})},jF=oU({from:"/",scenario:"voice"}),UF=()=>{const _e=f.jsx(La,{className:"end-0",data:nA,children:nA.icon});if(j==="dismiss-audio-call-only")return _e;switch(Kc){case"requires-account":case"signed-out":return f.jsxs(f.Fragment,{children:[_e,f.jsx(pI,{className:"mx-2",title:t("voice.signUpOrLogin"),onClick:jF})]});case"time-expired-non-pro":case"time-expired-month-non-pro":return f.jsxs(f.Fragment,{children:[_e,_F]});case"time-expired":case"checking-availability":case"error":case"not-in-flight":case"throttled":case"throttled-non-pro":case"region-not-available":case"time-expired-month":case"microphone-denied":case"microphone-not-found":return _e;case"waiting-for-user-interaction":case"available":return f.jsx(Ae.div,{className:q(j!=="audioSettings"&&"flex"),children:j==="audioSettings"?f.jsx(La,{className:"end-0",data:oA,children:oA.icon}):f.jsxs(f.Fragment,{children:[_e,f.jsx(Lhe,{className:"mx-2",inputVolume:pF,isMuted:mF,isOutputPlaying:Vy,coachUserUnmute:gF&&!vF&&!Jh,onClick:hF}),f.jsx(Gp,{children:f.jsx(La,{className:"start-0",data:{title:t("composer.voiceSettings"),isVisible:!0,onClick:Wy},children:f.jsx(kr,{url:hge,className:Qp,"aria-hidden":!0})})})]})});default:return Kc}},qy=({enableActionButtons:_e})=>{let We;return io.length>0?We=t("userInput.messageRequiredPlaceholderText"):Ly?Gy?We=t("userInput.imageDropPreviewPlaceHolderText"):We=t("userInput.fileDropNotSupportedPlaceHolderText",{chatMode:lh(ko)}):ua?We=t("userInput.continueConversationInputPlaceholderText"):g!=null&&g.name&&c?We=t("userInput.characterPlaceholderText",{character:g.name}):Yc?We=t("research.placeholder"):oo&&At&&(We=t(j==="daily-briefing-chat"?"userInput.dailyChatInputPlaceholderText":"userInput.dailyComposerInputPlaceholderText")),f.jsxs(f.Fragment,{children:[f.jsxs(Ae.div,{className:q("w-full",{"mt-2 h-32 px-2":QI&&!H,"h-auto":H,"h-0":!QI&&!H}),layout:!0,children:[io.length>0&&f.jsx(dye,{onRemove:iF,attachments:io}),H&&Xh&&f.jsx(Ae.div,{className:"z-10 mt-2 w-full px-2","data-testid":"browser-tabs-preview",children:f.jsx(jme,{onClick:()=>{xn(!0)}})})]}),f.jsx(TI,{ref:B,className:"w-auto grow",disabled:tp,inputValue:N,errorMessage:z,onClick:async()=>{!b.endsWith("/agents")&&!At&&!Gc&&!ua&&!kn&&(Sr&&dt({source:"composerInput",scenario:"clickNavigateToChat",pageName:"discover"}),await y())},onBlur:EF,onChange:$d,onFocus:TF,onEnter:async()=>{q6()||await Fy()},onKeyDown:dF,onMentionIfEnabled:H?K6:void 0,setInput:Es,setError:P,placeholder:We,characterLimit:K,rightButtons:_e?[f.jsx(fP,{config:lA()},"composer-action-button")]:void 0,testId:"composer-input","aria-autocomplete":"both","aria-controls":Oy?jI:void 0})]})},lA=()=>{if(Be||Yc)return{mode:"stop",onClick:r};if(XI)return{mode:"submit",disabled:ZI,onClick:Fy};if(!i&&!$I)return{mode:"microphone",onClick:NF}},FF=({showChatModeSwitcherButton:_e,showPlusButton:We,showUploadFileButton:pn,homeButtonState:Ut})=>f.jsx(Ae.div,{className:"relative max-h-full w-expanded-composer max-w-chat bg-gradient-to-b from-stone-400/10 to-white/35 p-1.5 dark:from-slate-700/35 dark:to-midnight-800/65",layout:!0,style:{borderRadius:$p,boxShadow:He==="dark"?dP:uP},ref:Dr.setReference,children:f.jsxs(Ae.div,{className:q(mpe),layout:!0,style:{borderRadius:fpe},children:[f.jsx(Ae.div,{className:q(hpe,ppe,Ly?"before:opacity-100 before:delay-100 before:duration-200":"before:opacity-0"),layout:!0,onDragOver:Ro=>Ro.preventDefault(),onDrop:Ro=>OF(Ro),children:qy({enableActionButtons:!1})}),f.jsxs("div",{className:"flex justify-between px-2 pb-0.5",children:[f.jsxs("div",{className:"flex gap-1",children:[f.jsx(Eme,{state:Ut}),f.jsxs("div",{className:"flex gap-2",children:[_e&&f.jsx(wme,{disableChatModeSwitcher:!$I}),SF&&f.jsx(Vye,{onPrefillComposerInput:Ro=>{var cs;Es(Ro),(cs=B.current)==null||cs.focus(),$d(Ro)},disabled:Be||Yc}),wF&&f.jsx(xpe,{disabled:Be||Yc})]})]}),f.jsxs("div",{className:"flex gap-2",children:[We&&f.jsx(_ye,{startNewChatDisabled:Te,onStartNewConversation:MF,onSelectFileIfEnabled:Gy?cA:void 0,onSelectOneDriveFileIfEnabled:(C==null?void 0:C.provider)==="microsoft"&&d?()=>{Ne(!0),np(null)}:void 0,onTakeScreenshot:LF,onSelectUserOpenedTabsIfEnabled:H?()=>{np(null),xn(!0)}:void 0}),pn&&f.jsx($ye,{selectFile:cA}),f.jsx(fP,{config:lA()})]})]})]})}),BF=async()=>{M.scenario&&(bn({source:"signin",scenario:M.scenario}),k({isOpen:!1,scenario:null})),jy?await v({from:"/conversations",to:"/login"}):await Yh({provider:"microsoft"})};return!Qh||!UI?null:f.jsxs(f.Fragment,{children:[BI&&f.jsx("div",{className:q("fixed inset-0 size-full bg-stone-850/30 backdrop-blur-[10px] dark:bg-midnight-850/70")}),f.jsxs("div",{"data-testid":"composer",ref:yF,className:q("pointer-events-none absolute bottom-0 flex",qc&&"sm:bottom-1/2 sm:translate-y-1/2 sm:pt-36",qt.composer,md==="side-by-side"&&zo&&w&&!zI&&"mb-2",md==="side-by-side"&&zo&&!zI&&"w-1/4 min-w-chat-side-by-side",md==="side-by-side"&&zo&&"end-0 pe-1",(md==="chat-only"||E||!zo)&&"w-full"),children:[f.jsx("input",{type:"file",accept:Ble.join(","),className:"hidden",ref:Q,onChange:PF,"aria-hidden":"true"}),f.jsx(wn,{children:Z6&&f.jsx(tpe,{dynamicHeight:j===null&&!Sr})}),f.jsxs(Ae.div,{className:q("relative flex w-full flex-col-reverse items-center px-3 sm:flex-col",qc?"sm:mb-0":"sm:mb-8",nt?"mb-3":"mb-4",(At||ln)&&"min-w-72"),initial:p?"enter":!1,animate:"animate",variants:{enter:Jye,animate:Xye},transition:fy,style:yw,children:[J6&&f.jsx(Zn,{className:"pointer-events-auto flex h-[250px] w-full max-w-chat justify-center px-2 pb-4",initial:p?"initial":!1,children:f.jsx(gye,{onWidgetClick:aA})}),f.jsx(JO,{transition:A?vse:{duration:0},children:f.jsxs(Ae.div,{className:q("relative max-h-full min-h-composer min-w-16 max-w-chat rounded-5xl",H&&"z-40",w&&S&&!qc&&!x&&"md:top-2"),children:[c&&WI&&f.jsx(spe,{}),f.jsx(Ae.div,{className:"absolute inset-0",layout:!0,style:{borderRadius:$p,boxShadow:nt?upe:cpe}}),f.jsx(wn,{children:Vy&&f.jsx(lP,{})}),f.jsx(Ae.div,{className:q("relative",i7),layout:!0,style:{borderRadius:$p,boxShadow:nt?dpe:lpe},children:f.jsxs(Ae.div,{className:q("pointer-events-auto relative flex flex-col contrast-more:border-2",cr&&"max-w-72",BI&&Oa),"data-testid":"composer-content",ref:zy,layout:!0,style:{borderRadius:$p,boxShadow:He==="dark"?dP:uP},children:[f.jsx(wn,{children:Vy&&f.jsx(lP,{isNested:!0})}),j&&j!=="daily-briefing-player"&&j!=="dismiss-audio-call-only"&&f.jsxs(Ae.div,{className:q(!cr&&!bd&&j!=="reasoning-mode-pro-subscription"&&"border-b border-black/10 dark:border-white/10",j==="reasoning-mode-pro-subscription"&&"sm:w-think-deeper-pro-subscription",j==="audioSettings"&&"w-settings",bd&&j!=="daily-briefing-chat"&&"w-prompt-sign-in",bd&&(j==="computer-use-task-closed"||j==="safety-risk-card")&&"max-w-single-image",j==="daily-briefing-chat"&&(S?"min-w-chat-side-by-side bp-960:max-w-full lg:w-expanded-composer":"w-expanded-composer")),layout:!0,children:[j!=="dialog"&&f.jsxs(Ae.div,{"data-testid":"audio-settings-dialog",className:q("max-h-expanded-section overflow-auto",Ee.instance().config().wkWebViewScrollbarFix&&"wk-webview-scrollbar-fix",j==="audioSettings"&&"px-2 py-4"),layout:!0,initial:tt,animate:{...Rt,transition:{delay:bo.default}},ref:ee,children:[f.jsx(wn,{children:bd&&f.jsxs(Gp,{children:[j==="biometric-consent"&&f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(fbe,{onSubmit:eA.onSubmitCallback,onCancel:eA.onCancelCallback})}),j==="prompt-sign-in"&&f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(nC,{header:sF,text:cF,primaryAction:{title:t("common.loginText"),onClick:BF},testid:"prompt-sign-in-composer-action",secondaryAction:$?void 0:{onClick:xo,title:t("common.maybeLater"),testid:"maybe-later-button"}})}),j==="prompt-3p-sign-in"&&f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(mbe,{dismiss:xo})}),j==="upsell-microsoft-account-for-pro-subscription"&&f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(hbe,{dismiss:xo,source:"Composer"})}),j==="daily-briefing-chat"&&f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(pbe,{dismiss:xo,inputUI:qy({enableActionButtons:!0})})}),j==="prompt-location"&&f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(nC,{header:t("locationPermission.header"),text:t("locationPermission.text"),primaryAction:{title:t("locationPermission.share"),onClick:DF},secondaryAction:{onClick:xo,title:t("common.maybeLater")}})}),j==="confirm-link-navigation"&&Dy&&f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(nC,{showImage:!1,header:t("composer.linkConfirmation.header"),text:t("composer.linkConfirmation.text",{url:Dy}),primaryAction:{title:t("common.continue"),onClick:()=>{bn({source:"linkNavigationConfirmButton"}),window.open(ja(Of(Dy)),"_blank",X6),xo(),KI(void 0)}},secondaryAction:{onClick:()=>{xo(),KI(void 0)},title:t("common.cancel")}})}),j==="prompt-review"&&f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(dbe,{})}),j==="cross-promo-card"&&f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(ube,{variant:"aggressive"})}),s&&j==="shopping-upsell-card"&&f.jsx(m.Suspense,{fallback:f.jsx(HP,{}),children:f.jsx(Zye,{onDismiss:()=>pe(null)})}),j==="shopping-price-tracking"&&re&&f.jsx(m.Suspense,{fallback:f.jsx(HP,{}),children:f.jsx(ebe,{content:re.data,messageId:re.messageId,cardType:re.cardType,onConfirm:()=>pe("shopping-upsell-card"),onCancel:bF})}),j==="add-to-page"&&f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(lbe,{onClose:xo})}),j==="safety-risk-card"&&f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(cbe,{})}),j==="computer-use-task-closed"&&f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(sbe,{})}),j==="over-task-quota"&&f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(abe,{})})]})}),j==="audioSettings"&&f.jsx(Gp,{children:f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(obe,{onVoiceSelected:rA,onVoiceSpeedChange:rA})})}),j==="reasoning-mode-pro-subscription"&&f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(ibe,{})}),Wc&&f.jsx(Gp,{children:f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex max-h-expanded-section w-prompt-sign-in flex-col overflow-auto rounded-t-5xl p-5 sm:w-checkout-composer",children:f.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:f.jsx(kt,{className:"size-12"})})}),children:f.jsx(qye,{})})})]}),cr&&yd&&da&&f.jsx(vpe,{titleKey:yd.titleKey,textKey:yd.textKey,buttonTextKey:yd.buttonTextKey,onClick:yd.onClick,button:da.button,cancelButton:da.cancelButton,closeDialogCallback:da.closeDialogCallback})]}),(At&&j!=="daily-briefing-chat"||ln)&&f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-composer w-daily-briefing items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(gbe,{onDismissAudioSettingClick:()=>Wy(),isPodcast:ln,inputUI:oo&&!ln?qy({enableActionButtons:!1}):void 0})}),en&&(!j||j==="audioSettings"||j==="dismiss-audio-call-only")&&f.jsx("div",{className:"flex justify-center p-2",children:UF()}),FI&&FF({showChatModeSwitcherButton:!Jc,showPlusButton:!Jc,showUploadFileButton:Jc&&!i,homeButtonState:gd||Jc?"hidden":((fA=Ee.instance().config().composer)==null?void 0:fA.homeButtonState)??"enabled"}),me&&f.jsxs(Ae.div,{className:q("relative flex max-h-full max-w-chat justify-center",!j&&"p-2",!cr&&"h-composer"),layout:!0,children:[f.jsx(La,{data:iA,children:iA.icon}),Ye&&f.jsx(tge,{onClick:st})]}),ye&&f.jsx(jye,{onPick:_e=>{xe(_e)},onClose:()=>{Ne(!1)},onError:_e=>{$o(_e)}}),H&&ss&&f.jsx(ege,{onSave:W6,styles:er,onRef:Dr.setFloating,setIsMultiTabMenuExpanded:xn})]})})]})}),qc&&f.jsxs(Zn,{id:R,className:q("pointer-events-auto flex h-[150px] w-full max-w-chat flex-none items-end px-2 sm:flex-initial sm:items-start",qt.composerBottomSlot),delay:.2,initial:p?"initial":!1,children:[R==="autosuggest"&&Oy&&f.jsx(m.Suspense,{fallback:null,children:f.jsx(tbe,{id:jI,dataResponse:Ny,onClick:(_e,We)=>IF(_e,We),onHighlight:_e=>Es(_e),onDismiss:zd,className:"mb-3 sm:mb-0 sm:mt-3",ref:hd})}),R==="actions-autosuggest"&&f.jsx(m.Suspense,{fallback:null,children:f.jsx(nbe,{onClick:_e=>AF(_e)})}),R==="starter-prompts"&&Q6&&f.jsx(hye,{className:"sm:mt-8",onWidgetClick:aA})]})]})]}),Uy&&f.jsx(m.Suspense,{fallback:null,children:f.jsx(rbe,{dismissable:!0,dissmissAfter:10*1e3,dismiss:kF,title:Uy.title,message:Uy.message})})]})}function UU(t){const e=de("force-cookie-banner-location");return(t&&gv.includes(t))===!0||e}function ybe(t){const{isChecked:e,label:n,description:r,className:o,onChange:i,accessory:a,disabled:s}=t,c=m.useId(),[u,d]=m.useState(!1),h=()=>d(!0),p=()=>d(!1),{focusable:g}=ju({autoRestoreFocus:!0,forceFocus:!0});let v=e?"bg-system-green-400":"bg-black/20 dark:bg-white/20";return s&&(v="bg-black/20 after:bg-white/40 dark:bg-white/20 dark:after:bg-black/40"),f.jsxs("label",{className:q("flex items-center justify-between gap-4",!s&&"cursor-pointer",o),htmlFor:c,ref:g.ref,children:[f.jsxs("div",{className:"flex flex-1 flex-col",children:[f.jsx("span",{className:"text-foreground-800 text-sm",children:n}),r&&f.jsx("span",{className:"font-medium text-foreground-450 text-xs",children:r})]}),f.jsxs("span",{className:"flex flex-row items-center gap-2",children:[a,f.jsx("input",{id:c,type:"checkbox",title:n,checked:e,onChange:y=>i(y.target.checked),onFocus:h,onBlur:p,className:"sr-only",disabled:s}),f.jsx("div",{className:q("relative h-6 w-10 rounded-full","after:absolute after:start-[2px] after:top-[2px] after:size-5 after:rounded-full after:transition-all contrast-more:forced-color-adjust-none",v,!s&&"after:bg-white after:shadow-switch after:hover:scale-110 after:active:w-6",e&&"after:translate-x-4",e&&!s&&"after:active:translate-x-3",u&&"outline")})]})]})}function bbe(){const t=Vo("kill-cookie-banner"),e=F(no),[n,r]=et(Mw),[o,i]=m.useState("main"),[a,s]=m.useState(!1),[c,u]=m.useState(!1),[d,h]=m.useState(!1),p=UU(e),g=!!KN(),v=!t&&p&&!g&&!n;if(m.useEffect(()=>{v&&Y.trackEvent({name:"system",data:{eventName:"cookieBannerShown",eventInfo_region:e}})},[e,v]),!v)return null;const y=_=>{Y.trackEvent({name:"interaction",data:{eventName:"cookieBannerChoice",eventInfo_analytics:_.analytics,eventInfo_advertising:_.advertising,eventInfo_socialMedia:_.socialMedia}}),JH(_),r(!0)};return f.jsxs("div",{className:"pointer-events-none absolute inset-x-0 top-0 flex w-full justify-center p-3",children:[f.jsx("div",{className:"absolute top-0 h-3.5 w-full bg-stone-150 opacity-90 dark:bg-midnight-850"}),f.jsx("div",{className:q("relative w-full max-w-cookie-banner rounded-xl border border-black/5 shadow-xl dark:border-black/40",wi,qt.modal),children:f.jsxs("div",{className:"pointer-events-auto relative max-h-[90vh] overflow-auto p-5",id:"cookie-banner",children:[o==="main"&&f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsx("h3",{className:"text-md",children:ie("cookies.heading")}),f.jsxs("div",{className:"flex flex-col gap-x-8 gap-y-6 text-2xs sm:flex-row",children:[f.jsxs("div",{className:"flex flex-col gap-x-5 gap-y-4 text-2xs sm:flex-row",children:[f.jsx("p",{children:ie("cookies.bannerIntro")}),f.jsxs("p",{children:[ie("cookies.bannerExplanation"),f.jsx(Ua,{href:Pu,title:ie("cookies.privacyLink"),className:"ps-1 underline",children:ie("cookies.privacyLink")})]})]}),f.jsxs("div",{className:"flex min-w-44 shrink-0 grow flex-col gap-2",children:[f.jsx(De,{variant:"rect",size:"32-xs",onClick:()=>y({analytics:!0,advertising:!0,socialMedia:!0}),title:ie("cookies.accept"),testId:"cookie-banner-accept-button",children:ie("cookies.accept")}),f.jsx(De,{variant:"rect",size:"32-xs",onClick:()=>y({analytics:!1,advertising:!1,socialMedia:!1}),title:ie("cookies.reject"),testId:"cookie-banner-reject-button",children:ie("cookies.reject")}),f.jsx(De,{variant:"rect",color:"subtle-dimmed",size:"32-xs",onClick:()=>{i("more-options")},title:ie("cookies.moreOptions"),testId:"cookie-banner-options-button",children:ie("cookies.moreOptions")})]})]})]}),o==="more-options"&&f.jsxs("div",{className:"flex flex-col",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(De,{title:ie("common.backText"),variant:"circle",color:"subtle-dimmed",size:"32-xs",onClick:()=>i("main"),children:f.jsx(Sc,{className:"rotate-180"})}),f.jsx("h3",{className:"ps-3 text-md",children:ie("cookies.moreOptionsHeading")})]}),f.jsx("p",{className:"py-3 text-2xs",children:ie("cookies.essentialCookiesExplanation")}),f.jsx(rC,{label:ie("cookies.advertisingLabel"),explanation:ie("cookies.advertisingDescription"),isChecked:c,onChange:()=>u(_=>!_)}),f.jsx(rC,{label:ie("cookies.analyticsLabel"),explanation:ie("cookies.analyticsDescription"),isChecked:a,onChange:()=>s(_=>!_)}),f.jsx(rC,{label:ie("cookies.socialMediaLabel"),explanation:ie("cookies.socialMediaDescription"),isChecked:d,onChange:()=>h(_=>!_)}),f.jsx("div",{className:"flex justify-end",children:f.jsx(De,{variant:"rect",size:"36-sm",className:"w-fit px-7",onClick:()=>{y({analytics:a,advertising:c,socialMedia:d})},title:ie("cookies.savePreferences"),children:ie("cookies.savePreferences")})})]})]})})]})}function rC(t){const{label:e,explanation:n,isChecked:r,onChange:o}=t;return f.jsxs(f.Fragment,{children:[f.jsx(uI,{horizontalMargin:!1}),f.jsx(ybe,{label:e,className:"w-full py-2 pe-1",isChecked:r,onChange:o}),f.jsx("p",{className:"pb-4 pt-1 text-2xs",children:n})]})}function _be(){const[t,e]=m.useState(!0),n=F(Fi),r=_U(),o=m.useMemo(()=>n==null?void 0:n.images,[n]),i=m.useMemo(()=>({title:n==null?void 0:n.title,subTitle:n==null?void 0:n.subTitle}),[n]),s=F(ts)==="dark"?o==null?void 0:o.dark:o==null?void 0:o.light,c=i;m.useEffect(()=>{Fl({name:"interaction",status:"Shown",eventName:"crossPromotionStripCard",source:"bottomRightCard"})},[]);const u=()=>{e(!1),r()};return n===null||!t?null:f.jsx(Zn,{mode:"sync",className:"fixed bottom-5 end-5 z-[1000]",children:f.jsxs("div",{className:q("flex h-32 w-96 flex-col justify-center rounded-5xl border border-white bg-background-100 p-3 dark:border-white/5 dark:bg-background-250"),children:[f.jsxs("div",{className:"flex items-center",children:[s&&f.jsx("img",{src:s,alt:ie("crossSelling.imageAlt"),className:"size-24 rounded-lg object-cover"}),f.jsxs("div",{className:"ml-3 mr-6",children:[f.jsx("div",{className:"mb-1 text-sm",children:f.jsx("strong",{children:c.title})}),f.jsx("div",{className:"text-sm",children:c.subTitle})]})]}),f.jsx("div",{className:"absolute end-1.5 top-1.5 flex self-start",children:f.jsx(De,{title:ie("common.closeText"),variant:"square",color:"subtle-dimmed","aria-label":ie("common.closeText"),onClick:u,className:"flex size-8 items-center justify-center p-1.5",children:f.jsx(yo,{className:"m-0 size-5 self-center p-0"})})})]})})}function QP({icon:t,text:e,buttonText:n,buttonColor:r,buttonOnClick:o,className:i=""}){return f.jsxs("div",{className:q("flex items-center justify-between",i),children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"flex size-10 items-center justify-center rounded-[8.5px] border border-black/10 bg-background-200 dark:border-white/10",children:f.jsx("div",{className:"m-1 size-6",children:t})}),f.jsx("p",{className:"text-base",children:e})]}),f.jsx(De,{className:"h-10 w-24",color:r,title:n,"aria-label":n,variant:"rect",onClick:o,children:n})]})}const FU=t=>m.createElement("svg",{viewBox:"0 0 192 192",xmlns:"http://www.w3.org/2000/svg",fill:"none",...t},m.createElement("circle",{cx:96,cy:96,r:74,stroke:"currentColor",strokeWidth:12}),m.createElement("ellipse",{cx:96,cy:96,stroke:"currentColor",strokeWidth:12,rx:30,ry:74}),m.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:12,d:"M28 72h136M28 120h136"})),DAe=Object.freeze(Object.defineProperty({__proto__:null,default:FU},Symbol.toStringTag,{value:"Module"})),Cbe="https://ercz.adj.st/home?network=1g17o7tz&campaign=1gl0zo0u&adj_t=1gl0zo0u&adj_deep_link=sapphirecopilot%3A%2F%2Fhome%3Fnetwork%3D1g17o7tz%26campaign%3D1gl0zo0u&adj_redirect_android=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.microsoft.copilot&adj_redirect_ios=https%3A%2F%2Fapps.apple.com%2Fus%2Fapp%2Fmicrosoft-copilot%2Fid6472538445%3Fct%3DCMC_Copilot_ContinueChatting%26pt%3D80423";function Sbe(){const t=SI(),e=XN(),n=QN(),r=dV(),o=m.useRef(null),[i,a]=m.useState(!1),s=F(xv),c=F(Yu),u=F(l2);m.useEffect(()=>{if(!u||!s||c||t||n||r||!e){a(!1);return}const p=hn(_k),g=hn(mb),v=!Gg(p,3*Om),y=eI(g,3);v||y?(a(!0),Fl({name:"system",status:"Shown",eventName:"copilotMobileCrossSelling"})):Fl({name:"system",status:"TriggeredButSnoozed",eventName:"copilotMobileCrossSelling"})},[c,t,n,r,s,u,e]);const d=()=>{Qn(_k,Date.now().toString());const p=hn(mb);Qn(mb,`${parseInt(p??"0",10)+1}`),a(!1),Fl({name:"interaction",status:"Dismissed",eventName:"copilotMobileCrossSelling"})},h=()=>{window.open(Cbe),a(!1),Fl({name:"interaction",status:"Clicked",eventName:"copilotMobileCrossSelling"})};return i?f.jsx(Zn,{mode:"sync",className:q("relative",qt.modal),children:f.jsx("div",{className:"fixed inset-0 grid bg-stone-850/30 dark:bg-midnight-850/70",children:f.jsx("div",{ref:o,className:"mb-0 h-fit w-full self-end justify-self-center rounded-t-3xl border border-white/10 bg-background-200 p-2 contrast-more:border-2 md:mb-5 md:w-fit md:rounded-3xl",children:f.jsxs("div",{className:"mx-3 mb-6 mt-3 flex flex-col gap-4",children:[f.jsx("div",{className:"text-md md:text-center",children:ie("crossSelling.header")}),f.jsx(QP,{icon:f.jsx($h,{}),text:ie("crossSelling.copilotApp"),buttonText:ie("common.open"),buttonColor:"strong",buttonOnClick:h,className:"gap-14"}),f.jsx(QP,{icon:f.jsx(FU,{}),text:ie("crossSelling.browser"),buttonText:ie("common.continue"),buttonColor:"subtle-bright",buttonOnClick:d,className:"gap-14"})]})})})}):null}function wbe(){m.useEffect(()=>{const t=document.activeElement;return()=>{t.focus()}},[])}const BU=t=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M3.28034 2.21968C2.98745 1.92678 2.51257 1.92677 2.21968 2.21966C1.92678 2.51255 1.92677 2.98743 2.21966 3.28032L3.48326 4.54395C3.17684 5.03983 3 5.62426 3 6.25V17.75C3 19.5449 4.45507 21 6.25 21H17.75C18.3757 21 18.96 20.8232 19.4559 20.5169L20.7194 21.7805C21.0123 22.0734 21.4872 22.0734 21.7801 21.7805C22.073 21.4876 22.073 21.0127 21.7801 20.7198L3.28034 2.21968ZM11.1189 12.1797C10.8678 12.2864 10.6322 12.4409 10.4258 12.643L4.60326 18.3437C4.53643 18.1583 4.5 17.9584 4.5 17.75V6.25C4.5 6.0437 4.5357 5.84574 4.60125 5.66196L11.1189 12.1797ZM19.5 6.25V16.3183L20.9993 17.8176C20.9998 17.7951 21 17.7726 21 17.75V6.25C21 4.45507 19.5449 3 17.75 3H6.25C6.2275 3 6.20505 3.00023 6.18265 3.00068L7.68194 4.5H17.75C18.7165 4.5 19.5 5.2835 19.5 6.25ZM18.3305 19.4014C18.1489 19.4653 17.9535 19.5 17.75 19.5H6.25C6.04613 19.5 5.8504 19.4651 5.66845 19.4011L11.4752 13.7148L11.5588 13.644C11.8501 13.4316 12.2596 13.4553 12.5247 13.7148L18.3305 19.4014ZM15.2521 6.5C16.4959 6.5 17.5042 7.50831 17.5042 8.75212C17.5042 9.99592 16.4959 11.0042 15.2521 11.0042C14.0083 11.0042 13 9.99592 13 8.75212C13 7.50831 14.0083 6.5 15.2521 6.5ZM15.2521 8C14.8367 8 14.5 8.33673 14.5 8.75212C14.5 9.1675 14.8367 9.50423 15.2521 9.50423C15.6675 9.50423 16.0042 9.1675 16.0042 8.75212C16.0042 8.33673 15.6675 8 15.2521 8Z",fill:"currentColor"})),jAe=Object.freeze(Object.defineProperty({__proto__:null,default:BU},Symbol.toStringTag,{value:"Module"}));function Ebe(t,e=200,n=50){const[r,o]=m.useState(!1),[i,a]=m.useState(null);return m.useEffect(()=>{let s;if(!t)s=setTimeout(()=>{o(!0),a(Date.now())},e);else if(r){const c=i?Date.now()-i:1/0,u=n-c;u>0?s=setTimeout(()=>{o(!1),a(null)},u):(o(!1),a(null))}return()=>{clearTimeout(s)}},[t,e,n,r,i]),r}function Tbe(t){const{onError:e,onLoad:n,loadingPlaceholder:r,alt:o,errorClass:i,className:a,src:s,fallbackSrc:c,...u}=t,[d,h]=m.useState(!1),[p,g]=m.useState(!1),[v,y]=m.useState(!1),_=Ebe(p);if(m.useEffect(()=>{h(!1),g(!1),y(!1)},[s]),d)return f.jsx(Ibe,{className:i});const b=v&&c?c:s;return f.jsxs(f.Fragment,{children:[_&&(r==null?void 0:r()),m.createElement("img",{...u,alt:o,key:b,src:b,className:q(a,!p&&r&&"hidden"),onLoad:C=>{g(!0),n==null||n(C)},onError:C=>{c&&!v?y(!0):h(!0),e==null||e(C)}})]})}function Ibe(t){const{className:e}=t;return f.jsx("div",{className:q("flex size-full items-center justify-center",wU,e),children:f.jsx(BU,{})})}function Abe(t){const{className:e}=t;return f.jsx(wn,{children:f.jsx(m.Suspense,{fallback:f.jsx("div",{"aria-hidden":!0}),children:f.jsx(Ae.div,{className:q(e,"flex size-full items-center justify-center"),"aria-hidden":!0,children:f.jsx(kt,{type:"spinnerThemed",className:"size-11 text-center",rendererSettings:{preserveAspectRatio:"xMidYMid slice"}})})})})}function kbe(t){const e=gt(mt);Y.trackEvent({name:"system",data:{eventName:"clientImageError",eventInfo_url:t,eventInfo_conversationId:e}})}const xbe=m.lazy(()=>T(()=>import("./video-player-RhaXtDFQ.js"),__vite__mapDeps([281,1,282,283,284,285])).then(t=>({default:t.VideoPlayer})));function Rbe(){const{closeMediaViewer:t,isMediaViewerOpen:e}=ca(),n=F(ad),r=n==null?void 0:n.media[n.currentMediaIndex],o=m.useRef(null),{t:i}=Fe();cy(()=>{t()}),wbe(),sd(o);const a=m.useCallback(u=>{u.key==="Escape"&&e&&t()},[t,e]);if(la(a),!n||!r)return null;const s=n.media.length>1,c=i("mediaViewer.mediaCountOfTotal",{count:n.currentMediaIndex+1,total:n.media.length});return r.type==="custom-view"?f.jsxs("div",{className:q("pointer-events-auto absolute inset-0",n.customZIndex),ref:o,tabIndex:-1,children:[n.hasBackgroundForCustomView&&f.jsx(ia,{}),f.jsx("div",{className:q("absolute inset-x-0 bottom-0 overflow-auto",n.customViewTopClass??"top-16"),children:r.render()})]}):f.jsxs("div",{className:q("pointer-events-auto absolute inset-0 flex justify-center overflow-auto"),ref:o,tabIndex:-1,children:[f.jsx(ia,{}),f.jsx(cd,{msg:c}),f.jsx("div",{className:"relative h-full max-w-full px-2 pb-[144px] pt-[88px] sm:px-[104px]",children:f.jsxs("div",{className:"flex h-full min-h-[200px] flex-col items-center justify-center overflow-auto",children:[f.jsxs("div",{className:q("flex min-h-14 w-full gap-4",n.isCurrentMediaLoading&&"hidden"),children:[f.jsx("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:f.jsx(Pbe,{})}),s&&f.jsx("div",{className:"flex shrink-0 justify-end text-xs",children:c})]}),f.jsx(Obe,{})]})}),s&&f.jsx(Nbe,{})]})}function Pbe(){var n,r;const t=F(ad),e=t==null?void 0:t.media[t.currentMediaIndex];return!e||e.type==="custom-view"?null:e.type==="card"?e.renderHeader():f.jsxs(f.Fragment,{children:[((n=e.source)==null?void 0:n.title)&&f.jsx("div",{className:"truncate text-xs",children:e.source.title}),((r=e.source)==null?void 0:r.url)&&f.jsxs("div",{className:"flex text-2xs",children:[e.source.iconUrl&&f.jsx("img",{src:e.source.iconUrl,alt:e.source.title,className:"mr-2 inline-block size-4 rounded-full"}),f.jsx("a",{href:e.source.url,className:"block truncate",children:Am(e.source.url)})]})]})}function Obe(){var s,c;const[t,e]=fB(ad),n=m.useRef(null),r=de("image-fallback-thumbnail"),o=t==null?void 0:t.media[t.currentMediaIndex];m.useEffect(()=>{n.current&&e(u=>{if(u){const d=u.media[u.currentMediaIndex];d&&d.type==="video"&&n.current&&(d.player=n.current)}})},[n,e]);const i=m.useCallback(u=>{e(d=>{d&&(d.isCurrentMediaLoading=!u)})},[e]);if(!o)return null;const a=()=>f.jsx(Abe,{});switch(o.type){case"card":return o.renderCard();case"image":return f.jsx(Tbe,{loadingPlaceholder:a,src:o.url,fallbackSrc:r?o.thumbnailUrl:void 0,alt:o.altText,referrerPolicy:"no-referrer",errorClass:"h-[calc(100%-56px-44px)] squircle-16 aspect-video",onError:()=>kbe(o.url),onLoad:()=>i(!0),className:q("max-h-[calc(100%-56px-44px)] squircle-16")},o.url?o.url:Math.random());case"video":return f.jsx(ky,{background:o.isShort?"transparent":"default",className:"flex size-full max-h-[calc(100%-56px-32px)] max-w-full",label:(s=o.source)==null?void 0:s.title,size:o.moments&&o.moments.length>0?"md":"xs",children:f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex size-full items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(xbe,{isShort:o.isShort,url:o.url,title:((c=o.source)==null?void 0:c.title)??"",bestMomentIndex:o.bestMomentIndex,moments:o.moments,autoPlay:!0,allowFullScreen:!0,ref:n})})});default:return null}}function Nbe(){const t=F(ad),{next:e,previous:n}=ca(),{t:r}=Fe(),o=m.useCallback(s=>{s.key==="ArrowRight"?e():s.key==="ArrowLeft"&&n()},[e,n]);if(la(o),!t)return null;const i=t.currentMediaIndex>0,a=t.currentMediaIndex<t.media.length-1;return f.jsxs(f.Fragment,{children:[f.jsx(JP,{title:r("mediaViewer.control.previousMedia"),onClick:n,disabled:!i,className:"start-4 sm:start-7",children:f.jsx(Sc,{className:"size-6 rotate-180"})}),f.jsx(JP,{title:r("mediaViewer.control.nextMedia"),onClick:e,disabled:!a,className:"end-4 sm:end-7",children:f.jsx(Sc,{className:"size-6"})})]})}function JP(t){const{onClick:e,disabled:n,children:r,title:o,className:i}=t,a=qn({breakpoint:"sm"});return f.jsx("div",{className:q("absolute top-[calc(50%-20px)]",qt.mediaViewer,i),children:f.jsx(De,{size:a?"40-base":"48-lg",variant:"circle",color:a?"acrylic-thin":"subtle-dimmed-inverted",title:o,onClick:e,disabled:n,children:r})})}function Mbe({pixelUrl:t,onComplete:e}){return m.useEffect(()=>{const n=setTimeout(()=>{e()},3e3);return()=>{clearTimeout(n)}},[t,e]),f.jsx("img",{className:"hidden",src:t,width:"1",height:"1",alt:"",referrerPolicy:"no-referrer-when-downgrade",onLoad:e,onError:e})}function Lbe(){const t=de("ads-pixels"),[e,n]=et(p2),r=F(Mw),o=F(no),i=(o&&gv.includes(o))===!0,a=m.useMemo(()=>wh(),[r]),s=!i||a.advertising;if(!t||!s)return null;const c=Object.values(e).filter(u=>u.isMounted).map(u=>u.url);return f.jsx("div",{className:"absolute start-[-9999px] top-[-9999px] size-px overflow-hidden",children:c.map(u=>f.jsx(Mbe,{pixelUrl:u,onComplete:()=>n(d=>d[u]?{...d,[u]:{...d[u],isMounted:!1}}:d)},u))})}function Dbe({onClick:t}){return f.jsx("div",{className:"absolute end-0 top-0 z-10 p-1 rtl:right-auto",children:f.jsx(De,{title:ie("product.dismiss"),"aria-label":ie("product.dismiss"),variant:"rect",color:"subtle-bright-inverted",size:"32-xs",onClick:t,children:f.jsx(yo,{className:"size-4"})})})}const jbe=["overflow-hidden","rounded-[20px]","border","border-solid","border-white/20","shadow-[0px_6px_12px_0px_rgba(0,0,0,0.08)]","backdrop-blur-[30px]","bg-acrylic-default-tint-light/95","dark:bg-acrylic-default-tint-dark/95"];function Ube(t){const{title:e,subtitle:n,dismiss:r,link:o,dismissable:i=!0,className:a,Icon:s,iconClassName:c,isRTL:u,onClick:d}=t,h=n??o?f.jsxs(f.Fragment,{children:[typeof n=="string"?`${n} `:null,o&&f.jsx("span",{className:"font-sans font-normal leading-5 text-salmon-550 underline text-sm",role:"button",tabIndex:0,"aria-label":o,children:o})]}):null;return f.jsx("div",{className:q("pointer-events-none absolute start-1/2 top-5 -translate-x-1/2",qt.toastNotification,a),children:f.jsx(wn,{children:f.jsxs(Ae.div,{className:q("pointer-events-auto","relative",jbe,d&&"cursor-pointer"),initial:{opacity:0,y:-40,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-40,scale:.98},transition:{type:"spring",stiffness:400,damping:30},onClick:d,children:[i&&f.jsx(Dbe,{onClick:r}),f.jsx("div",{className:q("flex","flex-col","items-center","justify-center","py-2","ps-2","pe-1.5",{"w-[min(381px,100vw)]":!!h}),children:f.jsxs("div",{className:q("relative flex w-full items-center p-0",{"gap-x-3":s,"flex-row-reverse":s&&u}),children:[s&&f.jsx("div",{className:"flex size-16 shrink-0 items-center justify-center rounded-md border border-black/8",children:f.jsx(s,{className:c})}),f.jsxs("div",{className:q("flex flex-1 flex-col justify-center py-1",{"ps-4":!s&&h,"pe-10":i&&h,"px-4":!h}),children:[f.jsx("header",{className:q("flex w-full overflow-hidden pb-1",{"items-center":!!h,"items-center justify-center":!h}),children:f.jsx("h2",{className:q("font-sans text-foreground-750",{"text-base-strong":!!h,"text-sm":!h}),children:e})}),h&&f.jsx("p",{className:"w-full font-sans font-normal leading-5 text-foreground-700 text-sm",children:h}),f.jsx(cd,{msg:`${e??""} ${typeof n=="string"?n:""}`,type:"assertive"})]})]})})]})},e)})}function Fbe(){const[t,e]=et(ZT),n=BT(),r=HM(),o=to(),{openMediaViewer:i}=ca(),a=Se(Or),s=m.useCallback(()=>{t!=null&&t.trackingArgs&&dt({source:"toastNotification",scenario:t.trackingArgs.scenario,customData:t.trackingArgs.customData})},[t]),c=m.useCallback(()=>{e(null)},[e]),u=m.useCallback(()=>{if(!(t!=null&&t.action))return;s();const{action:d}=t;switch(d.type){case"SWITCH_CONVERSATION":r({id:d.conversationId});break;case"GO_TO_PAGE":o({from:window.location.pathname,to:d.to});break;case"OPEN_URL":window.open(d.target,"_blank","noopener,noreferrer");break;case"OPEN_MEDIA_VIEWER":i(d.mediaViewerParams);break;case"EXPAND_COMPOSER":a(d.composerSection);break}c()},[t,s,c,r,o,i,a]);return m.useEffect(()=>{let d;return t!=null&&t.dismissAfter&&(d=window.setTimeout(c,t.dismissAfter)),()=>clearTimeout(d)},[t,c]),t?f.jsx(Ube,{title:t.title,subtitle:t.subtitle,link:t.link,dismissable:t.dismissable,className:t.className,Icon:t.iconProvider,dismiss:d=>{d==null||d.stopPropagation(),c()},isRTL:n,onClick:t.action?u:void 0}):null}function Bbe(){var o;const t=de("top-banner-upgrade-surface-app"),e=(o=Ee.instance().config().uiOverrides)==null?void 0:o.showUpgradeAppTopBanner,n=t&&e;m.useEffect(()=>{n&&Y.trackEvent({name:"system",data:{eventName:"upgradeSurfaceApp",eventInfo_status:"Shown"}})},[n]);const r=()=>{Y.trackEvent({name:"interaction",data:{eventName:"upgradeSurfaceApp",eventInfo_status:"Clicked"}}),window.open("macappstore://apps.apple.com/app/id6738511300")};return n?f.jsxs("div",{className:"pointer-events-none absolute inset-x-0 top-0 flex w-full justify-center p-3",children:[f.jsx("div",{className:"absolute top-0 h-3.5 w-full bg-stone-150 opacity-90 dark:bg-midnight-850"}),f.jsx("div",{className:q("relative w-full max-w-cookie-banner rounded-xl border border-black/5 shadow-xl dark:border-black/40",wi,qt.modal),children:f.jsx("div",{className:"pointer-events-auto relative max-h-[90vh] overflow-auto p-5",id:"cookie-banner",children:f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsx("h3",{className:"text-md",children:ie("upgradeSurface.heading")}),f.jsxs("div",{className:"flex flex-col gap-x-8 gap-y-6 text-2xs sm:flex-row",children:[f.jsxs("div",{className:"flex flex-col gap-x-5 gap-y-4 text-2xs sm:flex-row",children:[f.jsx("p",{children:ie("upgradeSurface.primaryDescription")}),f.jsx("p",{children:ie("upgradeSurface.secondaryDescription")})]}),f.jsx("div",{className:"flex min-w-44 shrink-0 grow flex-col justify-center gap-2",children:f.jsx(De,{variant:"rect",size:"32-xs",onClick:r,title:ie("upgradeSurface.buttonText"),children:ie("upgradeSurface.buttonText")})})]})]})})})]}):null}function Hbe(t){const{children:e}=t,n=qn({breakpoint:"md"}),r=Lr();return f.jsxs("div",{className:"relative h-full overflow-hidden",children:[f.jsx("div",{className:q("absolute size-full",r&&!n&&"t-main-clip-path"),children:f.jsx(ia,{isFixed:!0})}),f.jsx("div",{className:q("relative size-full overflow-hidden",r&&!n&&"rounded-[10px]"),children:e})]})}var oC={exports:{}},XP;function Vbe(){return XP||(XP=1,function(t){var e=function(){function n(p,g){return g!=null&&p instanceof g}var r;try{r=Map}catch{r=function(){}}var o;try{o=Set}catch{o=function(){}}var i;try{i=Promise}catch{i=function(){}}function a(p,g,v,y,_){typeof g=="object"&&(v=g.depth,y=g.prototype,_=g.includeNonEnumerable,g=g.circular);var b=[],C=[],w=typeof Buffer<"u";typeof g>"u"&&(g=!0),typeof v>"u"&&(v=1/0);function S(E,I){if(E===null)return null;if(I===0)return E;var x,A;if(typeof E!="object")return E;if(n(E,r))x=new r;else if(n(E,o))x=new o;else if(n(E,i))x=new i(function(O,$){E.then(function(K){O(S(K,I-1))},function(K){$(S(K,I-1))})});else if(a.__isArray(E))x=[];else if(a.__isRegExp(E))x=new RegExp(E.source,h(E)),E.lastIndex&&(x.lastIndex=E.lastIndex);else if(a.__isDate(E))x=new Date(E.getTime());else{if(w&&Buffer.isBuffer(E))return Buffer.allocUnsafe?x=Buffer.allocUnsafe(E.length):x=new Buffer(E.length),E.copy(x),x;n(E,Error)?x=Object.create(E):typeof y>"u"?(A=Object.getPrototypeOf(E),x=Object.create(A)):(x=Object.create(y),A=y)}if(g){var N=b.indexOf(E);if(N!=-1)return C[N];b.push(E),C.push(x)}n(E,r)&&E.forEach(function(O,$){var K=S($,I-1),J=S(O,I-1);x.set(K,J)}),n(E,o)&&E.forEach(function(O){var $=S(O,I-1);x.add($)});for(var R in E){var z;A&&(z=Object.getOwnPropertyDescriptor(A,R)),!(z&&z.set==null)&&(x[R]=S(E[R],I-1))}if(Object.getOwnPropertySymbols)for(var P=Object.getOwnPropertySymbols(E),R=0;R<P.length;R++){var X=P[R],M=Object.getOwnPropertyDescriptor(E,X);M&&!M.enumerable&&!_||(x[X]=S(E[X],I-1),M.enumerable||Object.defineProperty(x,X,{enumerable:!1}))}if(_)for(var k=Object.getOwnPropertyNames(E),R=0;R<k.length;R++){var U=k[R],M=Object.getOwnPropertyDescriptor(E,U);M&&M.enumerable||(x[U]=S(E[U],I-1),Object.defineProperty(x,U,{enumerable:!1}))}return x}return S(p,v)}a.clonePrototype=function(g){if(g===null)return null;var v=function(){};return v.prototype=g,new v};function s(p){return Object.prototype.toString.call(p)}a.__objToStr=s;function c(p){return typeof p=="object"&&s(p)==="[object Date]"}a.__isDate=c;function u(p){return typeof p=="object"&&s(p)==="[object Array]"}a.__isArray=u;function d(p){return typeof p=="object"&&s(p)==="[object RegExp]"}a.__isRegExp=d;function h(p){var g="";return p.global&&(g+="g"),p.ignoreCase&&(g+="i"),p.multiline&&(g+="m"),g}return a.__getRegExpFlags=h,a}();t.exports&&(t.exports=e)}(oC)),oC.exports}var zbe=Vbe();const ZP=q0(zbe);function $be(){const t=F(jn),e=de("account-change-chat-reset");m.useEffect(()=>{e&&Yj()},[t,e])}const Gbe={revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshInterval:EI};function Kbe(t){return Un(t,ZW).then(e=>e.data)}function Po(t){const e=t,n=e.slice(0,-1),r=e.slice(-1);return[...ipe(n),...r]}function Wbe(){const{data:t,mutate:e}=Fc("/config",Kbe,Gbe),n=Se(Cv),r=Se(s2),o=Se(u2),i=Se(yle),a=Se(ble),s=Se(_le),c=Se(kw),u=Se(xw);CU(e),m.useEffect(()=>{t&&(n(t.voices),r(t.signInPrompts),o(t.maxTextMessageLength),i(t.maxPageContentLength),s(t.pageLimit),a(t.maxPageTitleLength),t.characters&&u(t.characters),t.feedbackOptions.text=Po(t.feedbackOptions.text),t.feedbackOptions.image=Po(t.feedbackOptions.image),t.feedbackOptions.card.local=Po(t.feedbackOptions.card.local),t.feedbackOptions.card.ads=Po(t.feedbackOptions.card.ads),t.feedbackOptions.card.video=Po(t.feedbackOptions.card.video),t.feedbackOptions.card.image=Po(t.feedbackOptions.card.image),t.feedbackOptions.card.shopping=Po(t.feedbackOptions.card.shopping),t.feedbackOptions.card.sports=Po(t.feedbackOptions.card.sports),t.feedbackOptions.card.finance=Po(t.feedbackOptions.card.finance),t.feedbackOptions.card.quiz=Po(t.feedbackOptions.card.quiz),t.feedbackOptions.card.weather=Po(t.feedbackOptions.card.weather),c(t.feedbackOptions))},[t,r,n,o,i,a,c,u,s])}function qbe(){const t=es(En);return m.useCallback(n=>{t(r=>{for(const{id:o,title:i,updatedAt:a,characterId:s,continuedAt:c}of n){const u=r.get(o);u?(u.title=i,u.updatedAt=a,u.characterId=s??null,u.continuedAt=c):r.set(o,{id:o,title:i,updatedAt:a,characterId:s??null,streamingState:"idle",history:[],continuedAt:null})}})},[t])}function Ybe(t,e){if(!(e!=null&&e.next)&&t>0)return null;const n={url:"/conversations",isFirstPage:t===0};return e!=null&&e.next&&(n.args={cursor:e.next}),n}function Qbe(){const t=qbe(),e=Se(ww),n=m.useCallback(async({url:r,args:o,isFirstPage:i})=>{const a=await Un(r,pq,{query:o}).then(s=>s.data);if(a.results.length>0){const s=a.results.map(c=>({...c,history:[],streamingState:"idle"}));t(s),e(!0)}else i&&e(!1);return a},[t,e]);return GT(n,Ybe)}function Jbe(){const t=Se(no),e=Se(DY);return m.useCallback(async()=>{const n=await Un("/user",cM,{parseOptions:{safe:!0},query:{"api-version":"2"}}).then(a=>a.data),{id:r,anid:o,isHistoryMigrationPending:i}=n;return Y.setAnid(o),Y.setPicassoId(r),e(i),t(n.regionCode),n},[e,t])}function Xbe(){const t=F(jn),e=F(Yu),{refetch:n}=Qbe(),r=Jbe(),o=Se(ar),i=Se(ac),a=Se(Rh),s=Se(IM),c=Se(kM),u=Se(oE),d=Se(iE),h=Se(OY),p=Se(DV),g=Se(xM),v=Se(NY),y=Se(wM),_=Se(aE),b=Se(sE),C=Se(MY),w=de("multiplecharacters"),S=de("account-change-chat-reset"),E=ry()[0]==="audioCall";m.useEffect(()=>{(async()=>{const x=Promise.all([r(),Un("/user/settings",dq).then(pe=>pe.data),n()]),A=Qa.instance().getUserInfo(),[{id:N,firstName:R,isPro:z,inEeaPlusRegion:P,isEligibleForFreeTrial:X,phoneLink:M,ageGroup:k,allowedToggles:U,remainingCalls:O,subscriptions:$,accountTier:K},{preferredVoice:J,preferredCharacter:se,optOutOfTraining:ne,optInToVoiceTraining:ve,optOutOfPersonalization:Be,optOutOfPhoneConnection:Te,optInToGenerativeUI:Pe,allowBiometricDataUse:He,allowOneDriveAccess:Ze,features:he}]=await x;if(Y.setIsAad(e),o({id:N,firstName:R,isPro:z&&!e,inEeaPlusRegion:P,isEligibleForFreeTrial:X,phoneLink:M,ageGroup:k,allowedToggles:U,subscriptions:$,accountTier:K,isStudent:void 0}),y(R??void 0),!S&&!E&&await Yj(),J&&a(J),w&&se){const pe=r2(se);s(pe)}c(ne),u(ve),d(Be),h(!!Te),p(!!Pe),g(!!He),v(!!Ze),C((he==null?void 0:he.suggestedFollowups)??!0),O&&(_(O.podcastGeneration),b(O.research)),Y.setSettings({userSettingVoiceType:J??void 0,userConsentPersonalization:!Be,userConsentModelTraining:!ne,userSubscription:z?"pro":"free"});const j=await A;if(j){const{mail:pe,givenName:W,imgSrc:re,isStudent:be}=j;o(D=>D&&{...D,givenName:W,email:pe,imgSrc:re,isStudent:be}),W&&!R&&y(W),e||i(null)}})().catch(console.error)},[t,S,o,i,n,c,a,w,h,p,u,d,g,v,r,e,s,E,y,_,b,C])}const Zbe=l.object({isMobileAppInstalled:l.boolean()}),e_e="/user/install-status";async function t_e(){try{return(await Un(e_e,Zbe,{options:{method:"GET"}})).data.isMobileAppInstalled}catch(t){throw console.error("Failed to fetch mobile app install status:",t),t}}function n_e(){const t=Se(Ow),{data:e,error:n,isLoading:r,mutate:o}=Fc("mobileAppInstallStatus",t_e,{revalidateOnFocus:!1,revalidateOnReconnect:!1,dedupingInterval:6e4});return m.useEffect(()=>{e!==void 0&&t(e)},[e,t]),{isMobileAppInstalled:e,isLoading:r,error:n||null,refetch:o}}const r_e="/user/narrative";function eO(t,e){var n;return(n=t.filter(r=>r.name===e)[0])==null?void 0:n.url}function UAe(t){const{background1:e,background2:n,background3:r}=t,i=[n,e,r].filter(s=>typeof s=="object"&&"light"in s&&"dark"in s);if(i.length===0)return[];const a=[];for(let s=0;s<i.length;s+=1){const c=i[s],u=i[(s+1)%i.length];!c||!u||(a.push({type:"gradient",from:c,to:u}),a.push({type:"solid",color:u}))}return a}function FAe(t,e,n){const r=t[e%t.length];return r?r.type==="gradient"?`linear-gradient(to bottom, ${n?`#${r.from.dark}`:`#${r.from.light}`}, ${n?`#${r.to.dark}`:`#${r.to.light}`})`:n?`#${r.color.dark}`:`#${r.color.light}`:"var(--background-color)"}function BAe(t,e){return e==="wavy-shape"?eO(t,"hero-image-wavy-tablet"):eO(t,`hero-image-${e}-tablet`)}const o_e=l.object({from:l.string()});function i_e(t){return o_e.safeParse(t).success}function HAe(t){return i_e(t)?t.from:"/"}const VAe={start:{...tt,y:300},end:{...Rt,y:0}},zAe={duration:bse,ease:_se},a_e={revalidateOnFocus:!1,shouldRetryOnError:!1,refreshInterval:EI};async function s_e(t){const{data:e,response:n}=await Un(t,MW,{options:{method:"GET",headers:{"Content-Type":"application/json"}},query:{"api-version":"2"}});if(!n.ok)return null;const{id:r,sections:o,theme:i,masks:a,font:s,fontHandwriting:c}=e;return{id:r,sections:o.filter(u=>u.type!=="shareDefault"),config:{theme:i,masks:a,font:s,...c?{fontHandwriting:c}:{}}}}function c_e(){const t=_r(),e=de("memory-narrative"),n=t&&e,{data:r,error:o,isLoading:i}=Fc(n?r_e:null,s_e,a_e);return{isLoading:i,error:o,data:i||!r?null:r}}const HU=m.forwardRef((t,e)=>{var _;const{children:n}=t,r=JF(),o=!ly(),i=XO(),a=m.useRef(i),s=XF(),c=m.useContext(s);let u=c;const d=Zt(),h=m.useRef(d),p=m.useRef((_=window.history.state)==null?void 0:_.from),g=Lr();r?a.current=ZP(i):(u=ZP(c),u.__store.state.matches=[...i.map((b,C)=>({...a.current[C]??b,id:b.id})),...a.current.slice(i.length)]);const v=u_e(d,p.current,g)&&o;return Ee.instance().config().disableRouteAnimation??!1?f.jsx("div",{ref:e,className:"relative size-full max-h-dvh",children:f.jsx(s.Provider,{value:u,children:n})}):f.jsx(Ae.div,{ref:e,className:"relative size-full max-h-dvh",initial:p.current&&o?"enter":!1,animate:o?"animate":!1,exit:"exit",variants:{enter:{opacity:0,scale:tO(d,p.current,"enter",g)},animate:{opacity:1,scale:1},exit:{scale:tO(d,h.current,"exit",g),opacity:0,transition:{duration:v?void 0:0}}},layout:!0,transition:fy,style:{willChange:"transform"},children:f.jsx(s.Provider,{value:u,children:n})})});HU.displayName="AnimatedOutlet";function l_e(t){const{children:e}=t;Xbe(),n_e(),c_e(),Wbe(),$be(),kge();const n=XO(),r=ZF({strict:!1}),o=n.findIndex(a=>a.id===r.id)+1,i=n[o];return f.jsx(wn,{mode:"popLayout",children:f.jsx(HU,{children:e},i==null?void 0:i.id)})}function tO(t,e,n,r){const o=["/talk","/pages","/chats","/daily","/podcasts","/discover","/"],i=r&&t.startsWith("/chats")&&(e==null?void 0:e.startsWith("/chats")),a=t.startsWith("/pages")||t.startsWith("/chats")&&(e==null?void 0:e.startsWith("/pages")),s=t.endsWith("/talk")||(e==null?void 0:e.endsWith("/talk")),c=t.startsWith("/memory")||(e==null?void 0:e.startsWith("/memory")),u=a===!0||i===!0||s===!0||c===!0?1:.75,d=a===!0||i===!0||c===!0?1:1.5,h=o.findIndex(p=>p==="/talk"?t.endsWith(p):t.startsWith(p))<o.findIndex(p=>p==="/talk"?e==null?void 0:e.endsWith(p):e==null?void 0:e.startsWith(p));return n==="enter"?h?u:d:h?d:u}function u_e(t,e,n){return!(t.startsWith("/chats")&&(e!=null&&e.startsWith("/chats"))&&n)}const d_e=m.lazy(()=>T(()=>import("./settings-C-clnSPp.js").then(t=>t.s),__vite__mapDeps([286,1,259,287,288,289,269,290,291,292,293,294,295,235,296,297,217,298,236,299,300,301,302,303,304,237,218,220,305,306,307,308,309,310,311,312,313,229,230,314]))),f_e=m.lazy(()=>T(()=>import("./picture-in-picture-DlIQK_DV.js"),__vite__mapDeps([315,1,279,280,281,282,283,284,285])).then(t=>({default:t.PictureInPicture}))),h_e=m.lazy(()=>T(()=>import("./composer-large-screen-BLe5T-DI.js"),__vite__mapDeps([316,1,306,317,318,258])));function p_e(t){const{children:e,sidebar:n}=t,r=Zt(),{isMediaViewerOpen:o}=ca(),{isPictureInPictureOpen:i}=n4(),a=Lr(),s=hue(),c=pue(),{showSettings:u,showSettingsRelyOnChatDetailLayout:d,showCookieBanner:h,showMobileCrossSelling:p,tvCopilotIcon:g}=m.useContext(Rj)??{},v=mue({showSettings:!!u,showSettingsRelyOnChatDetailLayout:d}),y=F(Fi),_=(y==null?void 0:y.type)==="card";return f.jsxs(f.Fragment,{children:[f.jsx(hce,{sidebar:n,children:f.jsxs(Hbe,{children:[f.jsx(Fbe,{}),f.jsx(l_e,{children:e}),o&&f.jsx(Rbe,{}),s&&f.jsx(vbe,{}),c&&f.jsx(m.Suspense,{fallback:null,children:f.jsx(h_e,{})}),v&&f.jsx(m.Suspense,{fallback:null,children:f.jsx(d_e,{className:q("top-6",a&&"-me-1 -mt-3")})})]})}),p&&r.startsWith("/chats")&&!r.endsWith("/talk")&&f.jsx(Sbe,{}),_&&f.jsx(_be,{}),g,h&&f.jsx(bbe,{}),i&&f.jsx(m.Suspense,{fallback:f.jsx(Sue,{}),children:f.jsx(f_e,{})}),f.jsx(Bbe,{}),f.jsx(Ihe,{}),f.jsx("div",{id:"inAppFeedbackOcv"}),f.jsx("div",{id:"popoverPortal"}),f.jsx(Lbe,{})]})}function m_e(){const{t}=Fe(),e=F(PM);let n="main";hn(FC)&&e==="permanent"&&(n="confirm-submission");const[r,o]=m.useState(n),[i,a]=m.useState(""),[s,c]=m.useState(!1),u=!i||i.trim().length===0||s,d=async()=>{if(!u){bn({source:"submitBanAppeal"}),c(!0);try{await Pr({path:"/user/bans/appeal",args:{body:{appealText:`APPEAL: ${i}`}}}),o("confirm-submission"),Qn(FC,new Date().toISOString())}catch(h){Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitBanAppeal",eventInfo_errorMessage:`${h}`,eventInfo_details:"Error submitting ban appeal"}})}c(!1)}};return f.jsxs("main",{className:"relative size-full",children:[f.jsx(ia,{forceGradient:!0}),f.jsxs(Zn,{id:r,className:"relative z-10 m-auto flex h-dvh max-w-[540px] flex-col items-center justify-center gap-3 p-12 text-center",children:[r==="main"&&f.jsxs(f.Fragment,{children:[f.jsx("h1",{className:"text-2xl",children:e==="permanent"?t("composer.userBan.permanent"):t("composer.userBan.temporary",{duration:t(e==="1-hr"?"composer.userBan.duration1Hr":"composer.userBan.duration24Hr")})}),f.jsx("p",{children:t(e==="permanent"?"composer.userBan.banMessagePermanent":"composer.userBan.banMessageTemporary")}),e==="permanent"&&f.jsx(De,{color:"strong",size:"56-xl",className:"mt-6 w-full",title:t("composer.userBan.submitAppeal"),onClick:()=>o("submit-appeal"),children:t("composer.userBan.submitAppeal")})]}),r==="submit-appeal"&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex w-full items-center pb-4",children:[f.jsx(De,{variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:t("common.backText"),onClick:()=>o("main"),children:f.jsx(zh,{className:"size-5 -rotate-90"})}),f.jsx("h2",{className:"grow pe-8",children:t("composer.userBan.submitAppeal")})]}),f.jsx("textarea",{className:"h-[240px] w-full resize-none rounded-xl bg-background-100 p-4 placeholder:text-foreground-650 contrast-more:border-2 dark:text-white",onChange:h=>a(h.target.value),disabled:s,placeholder:t("composer.userBan.submitAppealPlaceholder")}),f.jsx(De,{color:"strong",className:"w-full",size:"56-xl",title:t("common.submitText"),onClick:d,disabled:u,children:t("common.submitText")})]}),r==="confirm-submission"&&f.jsxs(f.Fragment,{children:[f.jsx("h1",{className:"text-2xl",children:t("composer.userBan.appealSubmitted")}),f.jsx("p",{children:t("composer.userBan.appealSubmittedDescription")}),f.jsx(cd,{msg:`${t("composer.userBan.appealSubmitted")}, ${t("composer.userBan.appealSubmittedDescription")}`})]})]})]})}const g_e=.05,v_e=.1;function y_e(){return Ee.instance().config().sentryDsnOverride??"https://323dd84fb4f632ccd95493debe9312e0@o4508134825000960.ingest.us.sentry.io/4508799962644480"}async function b_e(){const t=await T(()=>import("./vendor-Dxn4QjbQ.js").then(r=>r.ai),[]);if(Da("kill-sentry"))return;const n=[t.browserTracingIntegration(),t.tanstackRouterBrowserTracingIntegration(Wh)];t.init({dsn:y_e(),release:FB(),sampleRate:v_e,environment:"production",integrations:n,tracesSampleRate:g_e}),t.setTag("surface","cmc")}function __e(t){const e=F(no);m.useEffect(()=>{if(t){const n=performance.now(),r=n-window.appStart;performance.mark("startupTime-begin",{startTime:window.appStart}),performance.mark("startupTime-end",{startTime:n}),performance.measure("startupTime","startupTime-begin","startupTime-end"),Y.trackEvent({name:"system",data:{eventName:"copilotStart",eventInfo_duration:r,eventInfo_landingPage:Y.getLandingPage()}}),b_e().catch(console.error)}},[t]),m.useEffect(()=>{t&&e&&setTimeout(()=>{Dl("onPageLoad")},1e3)},[t,e])}function C_e(t){m.useEffect(()=>(document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}),[t])}function S_e(){C_e(()=>{document.visibilityState==="visible"&&Y.trackEvent({name:"system",data:{eventName:"copilotVisible"}})})}const VU=l.discriminatedUnion("eventName",[l.object({eventName:l.literal("auth0.accountAdded")}),l.object({eventName:l.literal("auth0.accountRemoved")})]);function zU(){return Ii(VC,l.boolean().nullable())===!0}function w_e(){return Ii(CM,l.boolean().nullable())===!0}function E_e(){return Ii(Vm,l.boolean().nullable())===!0}function $U(t){for(const e of t)if(e.tenantId===Pm)return e;return t[0]}function Rf(t){return za(t)?"AAD":"MSA"}function T_e(){const[t,e]=m.useState(!1),n=Se(jn),r=Se(Hi),o=F(nL);return m.useEffect(()=>{if(t||zU())return;function a(c){var u;if(c===null){n(null),Y.setUserAccountType(void 0);return}n({id:((u=c.idTokenClaims)==null?void 0:u.oid)??"",tenantId:c.tenantId,provider:"microsoft",accountType:Rf(c.tenantId)}),Y.setUserAccountType(Rf(c.tenantId))}async function s(){try{const{msal:c}=await Tr.get();Y.trackEvent({name:"system",data:{eventName:"copilotMsalInit",eventInfo_initTrigger:"hook",eventInfo_timing:performance.now()-window.appStart}}),e(!0);const{monitorAccountChangesAcrossTabs:u,enableAuth0:d}=Ee.instance().config();u&&c.enableAccountStorageEvents(),c.addEventCallback(async h=>{if(aj(h),(h.eventType===Le.LOGIN_SUCCESS||h.eventType===Le.ACQUIRE_TOKEN_SUCCESS)&&h.payload&&"account"in h.payload&&h.payload.account){const{account:p}=h.payload,g=c.getActiveAccount();(!g||g.homeAccountId!==p.homeAccountId)&&(c.setActiveAccount(p),a(p))}else if(h.eventType===Le.LOGOUT_SUCCESS){const p=$U(c.getAllAccounts());c.setActiveAccount(p??null),a(p??null)}else h.eventType===Le.ACCOUNT_ADDED?r({reason:"login"}):h.eventType===Le.ACCOUNT_REMOVED&&r({reason:"logout"})}),d&&u&&Wm.addEventListener("message",h=>{const p=VU.safeParse(h.data);if(!p.success)return;const{eventName:g}=p.data;g==="auth0.accountAdded"?r({reason:"login"}):g==="auth0.accountRemoved"&&r({reason:"logout"})})}catch(c){Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"MsalInitError",eventInfo_details:"hook",eventInfo_errorMessage:c instanceof Error?c.message:""}})}}s().catch(console.error)},[t,r,n]),o===!0?o:t}async function I_e(){const t=ct();async function e(){return await Qa.instance().getAccountFromProviders()!==null}function n(){return w_e()?!E_e():!1}function r(i){var a;if(i===null){t.set(jn,null),Y.setUserAccountType(void 0);return}t.set(jn,{id:((a=i.idTokenClaims)==null?void 0:a.oid)??"",tenantId:i.tenantId,provider:"microsoft",accountType:Rf(i.tenantId)}),Y.setUserAccountType(Rf(i.tenantId))}async function o(){try{const{msal:i}=await Tr.get();Y.trackEvent({name:"system",data:{eventName:"copilotMsalInit",eventInfo_initTrigger:"DCL",eventInfo_timing:performance.now()-window.appStart}}),i.addEventCallback(async u=>{if(aj(u),(u.eventType===Le.LOGIN_SUCCESS||u.eventType===Le.ACQUIRE_TOKEN_SUCCESS)&&u.payload&&"account"in u.payload&&u.payload.account){const{account:d}=u.payload,h=i.getActiveAccount();(!h||h.homeAccountId!==d.homeAccountId)&&(i.setActiveAccount(d),r(d))}else if(u.eventType===Le.LOGOUT_SUCCESS){const d=$U(i.getAllAccounts());i.setActiveAccount(d??null),r(d??null)}else u.eventType===Le.ACCOUNT_ADDED?t.set(Hi,{reason:"login"}):u.eventType===Le.ACCOUNT_REMOVED&&t.set(Hi,{reason:"logout"})});const a=await e();t.set(nL,!0);const{monitorAccountChangesAcrossTabs:s,enableAuth0:c}=Ee.instance().config();if(s&&i.enableAccountStorageEvents(),!a&&n())try{const u=await i.ssoSilent({scopes:[CN],prompt:"none",redirectUri:typeof window<"u"?window.location.origin:void 0}),d=Rf(u.account.tenantId)==="MSA";sc(Vm,l.boolean(),!0),d?(i.setActiveAccount(u.account),r(u.account)):await i.logoutRedirect({account:u.account,onRedirectNavigate:()=>!1})}catch{}c&&s&&Wm.addEventListener("message",u=>{const d=VU.safeParse(u.data);if(!d.success)return;const{eventName:h}=d.data;h==="auth0.accountAdded"?t.set(Hi,{reason:"login"}):h==="auth0.accountRemoved"&&t.set(Hi,{reason:"logout"})})}catch(i){Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"MsalInitError",eventInfo_details:"DCL",eventInfo_errorMessage:i instanceof Error?i.message:""}})}}return o()}function A_e(){const t=lV(),e=Se(Ph);t&&(r=>EV.includes(r))(t)&&e(t)}function k_e(){const t=Vo("kill-clarity");SU({onStartComplete:()=>{e()}});const e=()=>{try{if(t)return()=>{};window.clarity||(window.clarity=function(...o){window.clarity&&(window.clarity.q=window.clarity.q??[]).push(o)});const n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.src="/cl/tag/n59ae4ieqq",document.body.appendChild(n),window.clarity("signal",async r=>{if(r.type==="cl_dtrs"&&r.value){const{sendChallengeResponse:o}=await Vs();o({method:"clarity",token:r.value})}}),window.clarity("metadata",()=>{f0({surface:"cmc"});const r=gt(NM);r!==null&&f0({isNewUser:r.toString()})},!1,!0),()=>{delete window.clarity,n.remove()}}catch(n){return Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"useClarity",eventInfo_details:"Error loading Clarity",eventInfo_errorMessage:`${n}`}}),()=>{}}}}function iC(t){if(Ee.instance().config().persistThemeChoice){const n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";t!==n?Qn(zm,t):Ho(zm)}document.documentElement.setAttribute("data-theme",t),gn.emit("theme:color-applied",t)}function x_e(){const{persistThemeChoice:t,enforceTheme:e}=Ee.instance().config(),[n,r]=et(ts);m.useEffect(()=>{const o=window.matchMedia("(prefers-color-scheme: dark)"),i=s=>{const c=s.matches?"dark":"light";r(c),iC(c),t&&Ho(zm)};let a=t?hn(zm):"";return a!=="dark"&&a!=="light"&&(a=o.matches?"dark":"light"),e&&(a=e),r(a),iC(a),o.addEventListener("change",i),()=>{o.removeEventListener("change",i)}},[r,t,e]),m.useEffect(()=>{n&&iC(n)},[n])}function R_e(){m.useEffect(()=>{if(window.ReportingObserver===void 0)return()=>{};const t=new ReportingObserver(e=>{for(const n of e){if(n.type!=="csp-violation"||!n.body)continue;const{body:r}=n,{blockedURL:o,documentURL:i,effectiveDirective:a,disposition:s}=r;console.error("Reporting CSP violation",{blockedURL:o,documentURL:i,effectiveDirective:a,disposition:s}),Y.trackEvent({name:"system",data:{eventName:"copilotCSPViolation",eventInfo_blockedURL:o,eventInfo_documentURL:i,eventInfo_effectiveDirective:a,eventInfo_disposition:s}})}},{buffered:!0,types:["csp-violation"]});return t.observe(),()=>{t.disconnect()}},[])}function P_e(){const t=de("custom-1ds"),e=F(no);m.useEffect(()=>{if(!t||!Ee.instance().config().enableCustom1DS)return YN(),()=>{};if(!e)return()=>{};const n=()=>{if(window.oneDS){const{ApplicationInsights:i}=window.oneDS;return new i}},r=()=>{var c;window.OneDsAzureAnalytics=window.OneDsAzureAnalytics??n();function i(){var d;return!!!((d=window.OneDsAzureAnalytics)!=null&&d.getCookieMgr().get("MSCC"))}const a={adobe:i(),google:i()},s={instrumentationKey:"c72e6b24df604532a6282edd268b4ba4-9cdee1fe-5d2f-4626-9620-dbad9b53a8e5-8065",channelConfiguration:{eventsLimitInMem:50,autoFlushEventsLimit:1},propertyConfiguration:{userConsentCookieName:_v.name,gpcDataSharingOptIn:WN(),callback:{userConsentDetails:()=>{if(!gv.includes(e))return{Required:!0,Analytics:!0,SocialMedia:!0,Advertising:!0};const u=wh();return{Required:Object.values(u).includes(!0),Analytics:u.analytics,SocialMedia:u.socialMedia,Advertising:u.advertising}}}},webAnalyticsConfiguration:{coreData:{appId:"JS:Copilot_microsoft_com"},cookiesToCollect:["_mkto_trk"],urlCollectQuery:!0,syncMuid:i()},extensionConfig:{IdSyncPlugin:a}};window.postConsAzure1DSInit||((c=window.OneDsAzureAnalytics)==null||c.initialize(s,[]),window.postConsAzure1DSInit=!0)},o=document.createElement("script");return o.src="https://az416426.vo.msecnd.net/scripts/c/ms.analytics-web-4.min.js",o.async=!0,o.onload=r,document.head.appendChild(o),()=>{document.head.removeChild(o)}},[t,e])}function O_e(t){const{handler:e}=Hj({deferred:!0}),{handler:n}=Zj({deferred:!0}),{passthroughType:r,prompt:o}=e4(),i=m.useCallback(c=>{Y.setLandingPage("chatWithPartialPromptPassthrough"),e(c)},[e]),a=m.useCallback(c=>{Y.setLandingPage("chatWithFullPromptPassthrough"),n(c)},[n]),s=m.useCallback(()=>{if(o&&r)switch(r){case"partial":i(o);break;case"full":a(o);break}},[a,i,r,o]);m.useEffect(()=>{t&&s()},[t,s])}function N_e(){const t=Zt(),e=wv(),n=m.useRef(!1),r=F(ar),[o,i]=et(Ks),a=de("character-animation-vasa"),s=de("character-animation-spda2e");m.useEffect(()=>{t.startsWith("/chats")&&vn("appearance-talk")==="1"&&(n.current=!0)},[t]),m.useEffect(()=>{!a&&!s||r&&n.current&&(n.current=!1,i(jw))},[r,n,e,a,s,o,i])}function M_e(){const t=F(mt),e=F(PY),n=de("adsidsync"),r=F(no),o=_r(),i=UU(r),a=F(Mw);m.useEffect(()=>{const{adsEnabled:s,enforceAdsOptOutOfPersonalization:c}=Ee.instance().config();if(t&&e&&n&&s){const u=new URLSearchParams;if(u.append("cpid",e),u.append("cvid",t),o&&u.append("cp","1"),KN()){const v=wh().advertising;if(i&&!v)return;v&&!c?u.append("ps","1"):u.append("ps","0")}else{if(i)return;u.append("ps","1")}const h=`https://c.bing.com/cp?${u}`,p=performance.now();fetch(h,{method:"GET",mode:"no-cors",credentials:"include"}).then(g=>{const v=performance.now();jM(h,"GET",v-p,g.clone())}).catch(g=>{Y.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"adsError",eventInfo_errorMessage:"Ads Id Sync failed with error",eventInfo_details:`Ads Id Sync failed: ${g}`}})})}},[a,t,r,i,n,e,o])}function L_e(t){const e=F(jn),n=F(xv),r=F(cE),o=F(Oh),i=F(Rv),{upsellFromAuth0:a}=Ee.instance().config().proSubscription,{handleProSubscription:s}=Xg({payflowEntryPoint:"RedirectFromAuth0Account",skuType:i?"FreeTrial":"1Mo-Paid",upsellReason:"",entryStyle:"Redirect"}),u=_r()&&(e==null?void 0:e.provider)==="microsoft",d=de("cmc-m365-sku"),h=vi("pff"),p=ZH("needsStartSubscription"),g=Zt(),v=m.useRef(!1);m.useEffect(()=>{if(p&&d&&u&&!g.startsWith("/subscription/start")&&(h==="WinNative"||h==="EdgeSidepane")){qN("needsStartSubscription"),setTimeout(()=>{s()},0);return}if(!(a!=null&&a.navigateToProSubPageAfterLogin))return;const y=sessionStorage.getItem(yC);if(!y)return;async function _(b){const[,C]=b.split("-");if(C==="link"){const w=performance.now(),{getAuth0AccessToken:S,auth0:E}=await Di.get(),I=await S(Mf);if(!I){cc({feature:"accountLinkAuth0WithMSA",errorType:"LinkStartedWithoutAuth0Token"});return}try{await Pr({path:"/user/link",args:{body:{token:I}}})}catch(x){x instanceof Error&&cc({feature:"accountLinkAuth0WithMSA",errorType:x.name,errorMessage:x.message,exception:x.stack})}finally{E.logout({openUrl:!1}),Wu({feature:"accountLinkAuth0WithMSA",duration:performance.now()-w}),o||await s()}}}if(t&&!v.current&&n){if(v.current=!0,sessionStorage.removeItem(yC),(e==null?void 0:e.accountType)!=="MSA"||r)return;_(y)}},[t,s,a,e,o,r,n,g,u,h,d,p])}function D_e(t){const e=Se(Pw);m.useEffect(()=>{if(!t)return()=>{};const n=i=>Sj(i)?(e(i.toString()),!0):!1,r=i=>{const a=i.target.closest("a");a&&a instanceof HTMLAnchorElement&&n(a.href)&&i.preventDefault()},o=window.open;return window.open=function(...a){return a.length>0&&typeof a[0]=="string"&&!n(a[0])?o.apply(window,a):null},document.addEventListener("click",r),()=>{window.open=o,document.removeEventListener("click",r)}},[t,e])}function j_e(){m.useEffect(()=>{const t=hn(BC),e=Date.now();t||Qn(BC,e.toString())},[])}function U_e(){m.useEffect(()=>{},[])}function F_e(t){const[e,n]=m.useState(!1),r=Cj();return m.useEffect(()=>{e||!t||r({enablePageRedirect:!0,overwriteData:!1}).then(o=>{o&&n(!0)}).catch(console.error)},[r,e,t]),{appInitialized:e}}let GU=-1;const xy=t=>{addEventListener("pageshow",e=>{e.persisted&&(GU=e.timeStamp,t(e))},!0)},Mu=(t,e,n,r)=>{let o,i;return a=>{e.value>=0&&(a||r)&&(i=e.value-(o??0),(i||o===void 0)&&(o=e.value,e.delta=i,e.rating=((s,c)=>s>c[1]?"poor":s>c[0]?"needs-improvement":"good")(e.value,n),t(e)))}},KU=t=>{requestAnimationFrame(()=>requestAnimationFrame(()=>t()))},xI=()=>{const t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},Ry=()=>{const t=xI();return(t==null?void 0:t.activationStart)??0},Lu=(t,e=-1)=>{const n=xI();let r="navigate";return GU>=0?r="back-forward-cache":n&&(document.prerendering||Ry()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},aC=new WeakMap;function B_e(t,e){return aC.get(t)||aC.set(t,new e),aC.get(t)}const WU=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver(o=>{Promise.resolve().then(()=>{e(o.getEntries())})});return r.observe({type:t,buffered:!0,...n}),r}}catch{}},qU=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let Bl=-1;const nO=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,ev=t=>{document.visibilityState==="hidden"&&Bl>-1&&(Bl=t.type==="visibilitychange"?t.timeStamp:0,H_e())},rO=()=>{addEventListener("visibilitychange",ev,!0),addEventListener("prerenderingchange",ev,!0)},H_e=()=>{removeEventListener("visibilitychange",ev,!0),removeEventListener("prerenderingchange",ev,!0)},YU=()=>{var t;return Bl<0&&(Bl=(document.prerendering||(t=globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden")[0])==null?void 0:t.startTime)??nO(),rO(),xy(()=>{setTimeout(()=>{Bl=nO(),rO()})})),{get firstHiddenTime(){return Bl}}},RI=t=>{document.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},oO=[1800,3e3],V_e=(t,e={})=>{RI(()=>{const n=YU();let r,o=Lu("FCP");const i=WU("paint",a=>{for(const s of a)s.name==="first-contentful-paint"&&(i.disconnect(),s.startTime<n.firstHiddenTime&&(o.value=Math.max(s.startTime-Ry(),0),o.entries.push(s),r(!0)))});i&&(r=Mu(t,o,oO,e.reportAllChanges),xy(a=>{o=Lu("FCP"),r=Mu(t,o,oO,e.reportAllChanges),KU(()=>{o.value=performance.now()-a.timeStamp,r(!0)})}))})},z_e=t=>{const e=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?t():(e(t=qU(t)),document.addEventListener("visibilitychange",t,{once:!0}))};let $_e=class{constructor(){Z(this,"m")}h(e){var n;(n=this.m)==null||n.call(this,e)}};const iO=[2500,4e3],G_e=(t,e={})=>{RI(()=>{const n=YU();let r,o=Lu("LCP");const i=B_e(e,$_e),a=c=>{e.reportAllChanges||(c=c.slice(-1));for(const u of c)i.h(u),u.startTime<n.firstHiddenTime&&(o.value=Math.max(u.startTime-Ry(),0),o.entries=[u],r())},s=WU("largest-contentful-paint",a);if(s){r=Mu(t,o,iO,e.reportAllChanges);const c=qU(()=>{a(s.takeRecords()),s.disconnect(),r(!0)});for(const u of["keydown","click","visibilitychange"])addEventListener(u,()=>z_e(c),{capture:!0,once:!0});xy(u=>{o=Lu("LCP"),r=Mu(t,o,iO,e.reportAllChanges),KU(()=>{o.value=performance.now()-u.timeStamp,r(!0)})})}})},aO=[800,1800],U0=t=>{document.prerendering?RI(()=>U0(t)):document.readyState!=="complete"?addEventListener("load",()=>U0(t),!0):setTimeout(t)},K_e=(t,e={})=>{let n=Lu("TTFB"),r=Mu(t,n,aO,e.reportAllChanges);U0(()=>{const o=xI();o&&(n.value=Math.max(o.responseStart-Ry(),0),n.entries=[o],r(!0),xy(()=>{n=Lu("TTFB",0),r=Mu(t,n,aO,e.reportAllChanges),r(!0)}))})},sC=t=>{var i;const e=(i=performance.getEntriesByType("navigation")[0])==null?void 0:i.type;let n;const r=navigator;r.connection&&typeof r.connection.effectiveType=="string"&&(n=r.connection.effectiveType);const o={eventName:t.name,eventInfo_duration:t.value,eventInfo_navigationType:e,eventInfo_connectionType:n};Y.trackEvent({name:"system",data:o});try{const a=`web-vitals-${t.name}`;performance.mark(a),performance.measure(`web-vitals-measure-${t.name}`)}catch{}};let sO=!1;function W_e(){if(typeof window>"u"||sO)return;sO=!0;let t=!1;const e=n=>{t||(t=!0,sC(n))};K_e(sC),V_e(sC),G_e(e,{reportAllChanges:!0})}function q_e(){m.useEffect(()=>(window.addEventListener("unhandledrejection",WA),()=>{window.removeEventListener("unhandledrejection",WA)}),[])}function Y_e(){typeof window<"u"&&(Object.defineProperty(window,"APP_VERSION",{value:_w()}),Object.defineProperty(window,"APP_SURFACE",{value:"cmc"}))}const Q_e=new e8({defaultOptions:{queries:{retry:0,refetchOnWindowFocus:!1}}});function J_e({showSettings:t,showCookieBanner:e,showMobileCrossSelling:n,showSettingsRelyOnChatDetailLayout:r,children:o,sidebar:i}){j_e(),ry(),A_e(),oue(),ose();const a=T_e(),{appInitialized:s}=F_e(a);cve(),O_e(s),x_e(),q_e();const c=oI();D_e(c);const u=F(Hi);S_e(),gce(),P_e(),N_e();const d=F(Vf);__e(s),W_e(),L_e(s),U_e(),k_e(),R_e(),M_e();const h=m.useMemo(()=>({showSettings:t,showCookieBanner:e,showMobileCrossSelling:n,showSettingsRelyOnChatDetailLayout:r,tvCopilotIcon:o}),[t,e,n,r,o]);return d==="user-banned"?f.jsx(m_e,{}):d==="age-verification"?f.jsx(Ose,{}):d?f.jsx(VT,{}):!s||!a?null:u?f.jsx(Aj,{accountActionRequired:u}):f.jsx(t8,{client:Q_e,children:f.jsx(JO,{reducedMotion:"user",children:f.jsx(Rj.Provider,{value:h,children:f.jsx(p_e,{sidebar:i,children:f.jsx(n8,{})})})})})}function X_e(t){return f.jsxs(nN,{fallback:f.jsx(VT,{}),onError:ZN,children:[f.jsx(mme,{}),f.jsx(J_e,{...t})]})}Y_e();document.addEventListener("DOMContentLoaded",()=>{zU()&&setTimeout(()=>I_e(),0)});function Z_e(){const t=_r(),e=F(iE),n=Se(OM);m.useEffect(()=>{t&&!e&&zae()&&n(!0)},[t,e,n])}lme();function eCe(){return Z_e(),f.jsx(X_e,{showCookieBanner:!0,showSettings:!0,showMobileCrossSelling:!0,showSettingsRelyOnChatDetailLayout:!0})}const It=r8({component:eCe}),QU=m.lazy(()=>T(()=>import("./discover-KdrOa64Z.js").then(t=>t.d),__vite__mapDeps([319,1,320,321,322,323,219,324,280,282,325,326,327,328,329,330,331,332,317,333,334,335,336,227,337,338,267,239]))),tCe=wt("/")({component:()=>f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-full items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(QU,{})})}),nCe=wt("/discover")({component:()=>f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-full items-center justify-center",children:f.jsx(kt,{className:"size-12"})}),children:f.jsx(QU,{})})}),rCe=100,cO=.3,oCe=2*qo,iCe="bottom-[60px] sm:bottom-[120px] h-[50px]",JU="min-h-[60px] sm:min-h-[120px]",XU="min-h-[calc(100dvh-60px-var(--chat-details-container-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))] sm:min-h-[calc(100dvh-120px-var(--composer-container-height)-(2*var(--layout-offset-y)))]",aCe="min-h-[calc(100dvh-48px-var(--chat-details-container-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))] sm:min-h-[calc(100dvh-48px-var(--composer-container-height)-(2*var(--layout-offset-y)))]",sCe="min-h-[calc(100dvh-80px-var(--chat-details-container-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))] sm:min-h-[calc(100dvh-80px-var(--composer-container-height)-(2*var(--layout-offset-y)))]",cCe="bottom-[var(--character-component-height)] h-[50px]",lCe="min-h-[calc(100dvh-var(--character-component-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))]";function uCe(t,e,n,r,o){const[i,a]=et(i2),s=m.useCallback(()=>{a(S=>!S)},[a]),c=Lr(),u=m.useMemo(()=>({variants:{start:{opacity:0},exiting:{opacity:0,y:-100,transition:{duration:.2,y:{duration:.3}}}},initial:"start",animate:i?"exiting":"default"}),[i]),d=m.useMemo(()=>({initial:{opacity:0,y:rCe},animate:{opacity:1,y:0,transition:{duration:.4,y:{duration:cO}}},exit:{opacity:0,y:-100,transition:{duration:.2,y:{duration:cO}}},onAnimationStart:S=>{typeof S=="object"&&!Array.isArray(S)&&S.opacity===1&&(setTimeout(()=>t(),10),a(!1))}}),[t,a]),h=n?cCe:iCe,p=n?`min-h-[${r}px]`:JU,{highlighted:g,backstage:v}=fCe(o,i),y=hCe(n,v,g),_=m.useRef(null),{scrollYProgress:b}=o8({target:_,container:e,offset:["end start","start start"]}),C=cu(b,[oCe/100,1],[0,1]);return{toggleMessagesAreExiting:s,backstageMessagesProps:u,highlightedMessagesProps:d,opacity:c?C:b,sentinelRef:_,sentinelClasses:h,backstageClasses:p,highlightedClasses:y,highlighted:g,backstage:v}}function dCe(t){var o;const e=ZU(t);if(!e)return[];const n=e.author==="human",r=!n&&((o=t.at(-2))==null?void 0:o.author)==="ai";return n||r?[e]:t.slice(-2)}function ZU(t){return t.at(-1)}function fCe(t,e){const n=dCe(t),r=t.slice(0,-(n.length+(e?2:0)));return{highlighted:n,backstage:r}}function hCe(t,e,n){return t?lCe:Ee.instance().config().smallAnochorTopWithoutHeader&&n.length>0?e.length===0?sCe:aCe:XU}function e6(){return q(ph("pageContainer")??"px-6","mx-auto w-full max-w-chat")}function pCe(){var t=new Map;function e(n){var r=n.root,o=n.rootMargin,i=n.threshold,a=t.get(r);a||(a=new Map,t.set(r,a));var s=JSON.stringify({rootMargin:o,threshold:i}),c=a.get(s);if(!c){var u=new Map,d=new IntersectionObserver(function(h){h.forEach(function(p){var g=u.get(p.target);g==null||g(p)})},{root:r,rootMargin:o,threshold:i});c={observer:d,entryCallbacks:u},a.set(s,c)}return{observe:function(p,g){var v,y;(v=c)==null||v.entryCallbacks.set(p,g),(y=c)==null||y.observer.observe(p)},unobserve:function(p){var g,v;(g=c)==null||g.entryCallbacks.delete(p),(v=c)==null||v.observer.unobserve(p)}}}return{getObserver:e}}var mCe="0px",gCe=[0],vCe=pCe();function yCe(t){var e,n,r=(e=t==null?void 0:t.rootMargin)!=null?e:mCe,o=(n=t==null?void 0:t.threshold)!=null?n:gCe,i=m.useRef(null),a=m.useRef(null),s=m.useRef(null),c=m.useState(),u=c[0],d=c[1],h=m.useCallback(function(){var y=i.current;if(!y){d(void 0);return}var _=vCe.getObserver({root:a.current,rootMargin:r,threshold:o});_.observe(y,function(b){d(b)}),s.current=_},[r,o]),p=m.useCallback(function(){var y=s.current,_=i.current;_&&(y==null||y.unobserve(_)),s.current=null},[]),g=m.useCallback(function(y){p(),i.current=y,h()},[h,p]),v=m.useCallback(function(y){p(),a.current=y,h()},[h,p]);return[g,{entry:u,rootRef:v}]}function F0(){return F0=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F0.apply(this,arguments)}function bCe(t){var e,n=yCe(t),r=n[0],o=n[1],i=!!((e=o.entry)!=null&&e.isIntersecting),a=m.useState(i),s=a[0],c=a[1];return i&&!s&&c(!0),[r,F0({},o,{isVisible:i,wasEverVisible:s})]}var _Ce=100;function CCe(t){var e=t.loading,n=t.hasNextPage,r=t.onLoadMore,o=t.rootMargin,i=t.disabled,a=t.delayInMs,s=a===void 0?_Ce:a,c=bCe({rootMargin:o}),u=c[0],d=c[1],h=d.rootRef,p=d.isVisible,g=!i&&!e&&p&&n;return m.useEffect(function(){if(g){var v=setTimeout(function(){r()},s);return function(){clearTimeout(v)}}},[r,g,s]),[u,{rootRef:h}]}const PI=t=>f.jsx(wCe,{...t});PI.Motion=m.forwardRef(SCe);function SCe(t,e){const{children:n,axis:r="vertical",circular:o=!0,tabbable:i,autoFocus:a=!1,...s}=t,c=ZO({axis:r,circular:o,tabbable:i}),u=m.useRef(null);return m.useImperativeHandle(e,()=>u.current,[]),sd(u,a),de("a11y-keyboard-navigation")?f.jsx(Ae.div,{ref:u,...c,...s,children:n}):f.jsx(Ae.div,{ref:u,...s,children:n})}function wCe(t){const{children:e,axis:n="vertical",circular:r,tabbable:o,autoFocus:i=!1,...a}=t,s=ZO({axis:n,circular:r,tabbable:o}),c=m.useRef(null);return sd(c,i),de("a11y-keyboard-navigation")?f.jsx("div",{ref:c,...s,...a,children:e}):f.jsx("div",{ref:c,...a,children:e})}async function B0(t,e,n){try{await Pr({path:`/conversations/${t}/react`,args:{body:{[n]:e},analytics:{anonymousPath:"/conversations/*/react"}}})}catch{}}async function t6(t,e,n){try{await Pr({path:`/conversations/${t}/feedback`,args:{body:{types:Array.from(e),text:n},analytics:{anonymousPath:"/conversations/*/feedback"}}})}catch{}}const n6=t=>m.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M10.052 17.7057C10.3913 18.683 11.6841 19.1333 12.4829 18.2962C12.6455 18.1257 12.8081 17.9416 12.9176 17.7774C13.2379 17.2968 13.3725 16.6641 13.4218 16.0477C13.4721 15.4195 13.438 14.7454 13.3738 14.1352C13.3093 13.5225 13.2129 12.9604 13.1328 12.5522C13.1294 12.5345 13.1259 12.5171 13.1225 12.5H14.006C15.8777 12.5 17.2924 10.8049 16.9576 8.96334L16.2737 5.20164C15.8017 2.60569 13.2078 0.970952 10.6622 1.66519L5.06251 3.19239C4.14894 3.44154 3.45455 4.18547 3.26885 5.11401L2.91581 6.87918C2.63809 8.2678 3.69991 9.43756 4.82905 9.88388C5.15163 10.0114 5.44337 10.1732 5.66974 10.374C7.37583 11.8875 7.99442 13.0971 9.05406 15.2231C9.4084 15.9339 9.77205 16.8995 10.052 17.7057ZM12.0165 12.1214L12.0169 12.1229L12.0187 12.1303L12.0262 12.1614C12.0328 12.1892 12.0426 12.231 12.0549 12.2851C12.0793 12.3933 12.1135 12.5507 12.1515 12.7446C12.2277 13.1333 12.3188 13.665 12.3793 14.2398C12.4401 14.8171 12.4685 15.4242 12.425 15.9679C12.3806 16.5235 12.2652 16.9532 12.0855 17.2227C12.0264 17.3113 11.9138 17.444 11.7594 17.6058C11.5605 17.8142 11.1314 17.7657 10.9967 17.3777C10.7141 16.5639 10.3334 15.5481 9.94904 14.777C8.88216 12.6365 8.19326 11.2759 6.33336 9.62597C5.99304 9.32406 5.58878 9.1089 5.19665 8.9539C4.31631 8.60592 3.75035 7.80549 3.89639 7.0753L4.24943 5.31013C4.36085 4.753 4.77748 4.30665 5.32562 4.15715L10.9254 2.62995C12.9052 2.08999 14.9227 3.36145 15.2898 5.38053L15.9738 9.14223C16.197 10.3699 15.2538 11.5 14.006 11.5H12.5015C12.3476 11.5 12.2022 11.5709 12.1074 11.6923C12.0127 11.8136 11.9792 11.972 12.0165 12.1214C12.0165 12.1214 12.0165 12.1213 12.0165 12.1214Z",fill:"currentColor"})),GAe=Object.freeze(Object.defineProperty({__proto__:null,default:n6},Symbol.toStringTag,{value:"Module"})),r6=t=>m.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M10.052 2.29418C10.3913 1.31688 11.6841 0.866611 12.4829 1.70374C12.6455 1.87416 12.8081 2.05832 12.9176 2.22254C13.2379 2.70305 13.3725 3.33584 13.4218 3.9522C13.4721 4.58034 13.438 5.25446 13.3738 5.86473C13.3093 6.47735 13.2129 7.03948 13.1328 7.44766C13.1294 7.46535 13.1259 7.48277 13.1225 7.49989H14.006C15.8777 7.49989 17.2924 9.19503 16.9576 11.0365L16.2737 14.7983C15.8017 17.3942 13.2078 19.0289 10.6622 18.3347L5.06251 16.8075C4.14894 16.5583 3.45455 15.8144 3.26885 14.8859L2.91581 13.1207C2.63809 11.7321 3.69991 10.5623 4.82905 10.116C5.15163 9.9885 5.44337 9.82668 5.66974 9.62586C7.37583 8.11234 7.99442 6.90276 9.05406 4.77684C9.4084 4.06594 9.77205 3.10043 10.052 2.29418ZM12.0165 7.87851L12.0169 7.87696L12.0187 7.86962L12.0262 7.83852C12.0328 7.81068 12.0426 7.76892 12.0549 7.71482C12.0793 7.60658 12.1135 7.44919 12.1515 7.25525C12.2277 6.86655 12.3188 6.33493 12.3793 5.76005C12.4401 5.18282 12.4685 4.57569 12.425 4.03195C12.3806 3.47644 12.2652 3.04673 12.0855 2.77724C12.0264 2.68859 11.9138 2.55593 11.7594 2.3941C11.5605 2.18565 11.1314 2.23417 10.9967 2.62217C10.7141 3.43598 10.3334 4.45183 9.94904 5.22294C8.88216 7.36338 8.19326 8.72396 6.33336 10.3739C5.99304 10.6758 5.58878 10.891 5.19665 11.046C4.31631 11.394 3.75035 12.1944 3.89639 12.9246L4.24943 14.6898C4.36085 15.2469 4.77748 15.6932 5.32562 15.8427L10.9254 17.3699C12.9052 17.9099 14.9227 16.6384 15.2898 14.6194L15.9738 10.8577C16.197 9.62998 15.2538 8.49989 14.006 8.49989H12.5015C12.3476 8.49989 12.2022 8.42895 12.1074 8.3076C12.0127 8.18627 11.9792 8.02785 12.0165 7.87851C12.0165 7.87847 12.0165 7.87855 12.0165 7.87851Z",fill:"currentColor"})),KAe=Object.freeze(Object.defineProperty({__proto__:null,default:r6},Symbol.toStringTag,{value:"Module"}));function o6(t){const{titleText:e,subtitleText:n,positiveButtonText:r,negativeButtonText:o,positiveButtonTitle:i,negativeButtonTitle:a,modalHeaderText:s,onPositiveClick:c,onNegativeClick:u,isModalOpen:d,onModalClose:h,modalContent:p,className:g="",isDebugAudioRecorderEnabled:v=!1}=t;return f.jsxs("div",{className:g,children:[f.jsx("div",{className:"relative w-full pb-6 after:absolute after:mt-3 after:w-full after:border-b after:border-stroke-300"}),f.jsx("h2",{className:"mt-5 text-foreground-600 text-xs",children:f.jsx("strong",{children:e})}),f.jsx("p",{className:"mt-1 text-foreground-600 text-xs",children:n}),f.jsxs("div",{className:q("mt-3.5 grid w-fit min-w-72 grid-rows-1 gap-2",v?"grid-cols-3":"grid-cols-2"),children:[f.jsxs(De,{onClick:c,title:i,variant:"rect",size:"36-sm",children:[f.jsx(r6,{className:"size-5"})," ",r]}),f.jsxs(De,{onClick:u,title:a,variant:"rect",size:"36-sm",children:[f.jsx(n6,{className:"size-5"})," ",o]}),v&&f.jsx(De,{onClick:async()=>{await jhe.download()},title:"Download audio debug",variant:"rect",size:"36-sm",children:"Download audio debug"})]}),d&&f.jsx(Sy,{isOpen:!0,onClose:h,headerText:s,className:"w-full max-w-[400px]",children:p})]})}function ECe(){}function TCe({inputValue:t,handleChange:e}){const[n,r]=m.useState(""),{t:o}=Fe();return Vo("kill-free-form-text")?null:f.jsx(TI,{disabled:!1,className:"max-h-[8rem] grow-0 basis-[8rem] !items-start overflow-auto rounded-xl border-2 border-stone-700 bg-black/5 px-0.5",inputValue:t,characterLimit:LB,autoFocus:!1,setInput:a=>{e(a)},placeholder:o("chat.feedback.placeholder"),errorMessage:n,setError:r,onEnter:ECe,isMultiLines:!0})}function i6(t){const{feedbackOptions:e,onSubmit:n}=t,{t:r}=Fe(),[o,i]=m.useState(new Set),[a,s]=m.useState(""),c=o.size===0,u=h=>{i(p=>{const g=new Set(p);return o.has(h)?g.delete(h):g.add(h),g})},d=async()=>{n(o,a),i(new Set)};return e?f.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[f.jsx("ul",{className:"mt-0 flex list-none flex-col gap-2",children:e.map(h=>f.jsx("li",{children:f.jsx(T4,{label:h.label,setChecked:()=>u(h.type),checked:o.has(h.type)})},h.type))}),c?null:f.jsx(TCe,{inputValue:a,handleChange:s}),f.jsx(De,{title:r("chat.feedback.submitFeedbackButton"),size:"48-lg",color:"strong",className:"mt-4 max-h-12",disabled:c,onClick:d,children:r("chat.feedback.submitFeedbackButton")})]}):null}function ICe(t){var b,C;const{className:e}=t,n=F(kw),[r,o]=et(Sv),[i,a]=m.useState(!1),[s,c]=m.useState(),u=de("ads-showroom-picasso-feedback"),{t:d}=Fe(),h=w=>{bn({source:"feedback",scenario:pV[w],conversationId:r==null?void 0:r.conversationId,additionalData:{brandId:r==null?void 0:r.brandId,brandName:(r==null?void 0:r.brandName)??""}})},p=()=>{a(!1),o(void 0)},g=async w=>{r!=null&&r.conversationId&&u&&await B0(r.conversationId,w,"showroomReaction")},v=()=>{var w;h("thumbs-up"),c("thumbs-up"),(w=n==null?void 0:n.showroom)!=null&&w.positive?a(!0):p(),g("thumbs-up")},y=()=>{var w;h("thumbs-down"),c("thumbs-down"),(w=n==null?void 0:n.showroom)!=null&&w.negative?a(!0):p(),g("thumbs-down")},_=async(w,S)=>{p(),r&&Y.trackEvent({name:"interaction",data:{eventName:"copilotSubmitFineConversationFeedback",eventInfo_fineFeedbackTypes:Array.from(w).join(","),eventInfo_conversationId:r.conversationId,eventInfo_additionalData:JSON.stringify({brandId:r.brandId,brandName:r.brandName,reactionType:s})}}),r!=null&&r.conversationId&&w.size>0&&t6(r.conversationId,w,S)};return f.jsx(o6,{titleText:d("ads.showroomFeedbackTitle",{brand:r==null?void 0:r.brandName}),subtitleText:d("ads.showroomFeedbackDescription"),positiveButtonText:d("ads.showroomFeedbackPositive"),negativeButtonText:d("ads.showroomFeedbackNegative"),positiveButtonTitle:d("reviewPrompt.positive"),negativeButtonTitle:d("reviewPrompt.negative"),modalHeaderText:d("ads.showroomFeedbackModalTitle"),onPositiveClick:v,onNegativeClick:y,isModalOpen:i,onModalClose:p,modalContent:f.jsx(i6,{onSubmit:_,feedbackOptions:s==="thumbs-up"?((b=n==null?void 0:n.showroom)==null?void 0:b.positive)??void 0:(C=n==null?void 0:n.showroom)==null?void 0:C.negative}),className:e,isDebugAudioRecorderEnabled:!1})}function ACe(t){const{onSubmit:e}=t,{t:n}=Fe(),[r,o]=m.useState(!1),i=async a=>{o(!0),await e(a),o(!1)};return f.jsxs("div",{children:[f.jsx("p",{children:n("voice.feedback.reviewReason")}),f.jsx(De,{title:n("voice.feedback.okay"),size:"48-lg",color:"strong",className:"mt-4 max-h-12 w-full",disabled:r,onClick:()=>i(!0),children:n("voice.feedback.okay")}),f.jsx(De,{title:n("voice.feedback.noThanks"),size:"48-lg",color:"default",className:"mt-3 w-full",onClick:()=>i(!1),children:n("voice.feedback.noThanks")})]})}function kCe({className:t}){const e=F(mt),n=F(kw),r=Se(Bu),[o,i]=et(oE),[a,s]=m.useState(),c=de("debug-audio-recorder")&&!1,u=BY(),{t:d}=Fe(),h=()=>{bn({source:"voiceFeedback",scenario:"thumbsUp",conversationId:e,destination:u?"appearance":void 0}),e&&B0(e,"thumbs-up","audioReaction"),r(!1),gn.emit("feedback:ai-message-reaction","positive")},p=()=>{bn({source:"voiceFeedback",scenario:"thumbsDown",conversationId:e,destination:u?"appearance":void 0}),e&&B0(e,"thumbs-down","audioReaction"),s("feedback-options")},g=()=>{s(null),r(!1)},v=async(b,C)=>{e&&b.size>0&&t6(e,b,C),o?g():s("review-request")},y=async b=>{b&&(i(!0),await Ale({optInToVoiceTraining:!0})),g()},_=()=>a==="feedback-options"?f.jsx(i6,{onSubmit:v,feedbackOptions:n==null?void 0:n.call}):a==="review-request"?f.jsx(ACe,{onSubmit:y}):null;return f.jsx(o6,{titleText:d("voice.feedback.howWasVoiceChat"),subtitleText:d("voice.feedback.giveFeedback"),positiveButtonText:d("voice.feedback.good"),negativeButtonText:d("voice.feedback.bad"),positiveButtonTitle:d("reviewPrompt.positive"),negativeButtonTitle:d("reviewPrompt.negative"),modalHeaderText:d(a==="feedback-options"?"voice.feedback.chooseWhatHappened":"voice.feedback.canMicrosoftReview"),onPositiveClick:h,onNegativeClick:p,isModalOpen:!!a,onModalClose:g,modalContent:_(),className:t,isDebugAudioRecorderEnabled:c})}const xCe=m.lazy(()=>T(()=>import("./index.es-zjx8uILT.js"),__vite__mapDeps([222,1]))),RCe=r4();function PCe({onAnimationClicked:t}){const e=m.useRef(null),{t:n}=Fe(),[r,o]=m.useState(null);m.useEffect(()=>{RCe.load("../../assets/lottie/character-thinking-cloud-animation.json").then(o).catch(()=>o(null))},[]),m.useEffect(()=>{const s=e.current;return s&&r&&s.playSegments([0,67],!0),()=>{s&&r&&s.playSegments([350,370],!0)}},[r]);const i=()=>{var c,u;(c=e.current)==null||c.playSegments([320,345],!0),(u=e.current)==null||u.pause(),t();const s=document.getElementById(TU);s==null||s.focus()},a=s=>{s.key==="Enter"&&i()};return f.jsx("div",{children:f.jsx(m.Suspense,{fallback:f.jsx("div",{}),children:f.jsx(xCe,{lottieRef:e,role:"button",tabIndex:0,"aria-label":n("characterAnimation.characterThinkingCloudAriaLabelText"),title:n("characterAnimation.characterThinkingCloudAriaLabelText"),animationData:r,loop:!1,onMouseDown:i,onMouseEnter:()=>{var s;return(s=e.current)==null?void 0:s.playSegments([275,295],!0)},onMouseLeave:()=>{var s;return(s=e.current)==null?void 0:s.playSegments([296,315],!0)},onKeyDown:a,onComplete:()=>{var s;return(s=e.current)==null?void 0:s.playSegments([68,274],!0)}})})})}const lO=1,OCe=m.lazy(()=>T(()=>import("./character-BhmNa_iy.js"),__vite__mapDeps([232,1,233])).then(t=>({default:t.Character})));function NCe({animatingMessageId:t,isStreamingMessage:e,displayedCharacterId:n,setCharacterComponentHeight:r}){const o=de("characterspeech"),[i,a]=m.useState(0),[s,c]=m.useState(!1),[u,d]=et(Gs),{submitMessage:h}=by(),p=F(Ei),g=()=>{a(0),c(!1)};m.useEffect(()=>{let _;return o&&u==="idle"&&(_=setInterval(()=>{a(b=>b<lO?b+1:b),p.length>0&&i===lO&&!e&&(c(!0),Y.trackEvent({name:"system",data:{eventName:"characterTalkToMeDisplayed",eventInfo_conversationId:gt(mt),eventInfo_characterId:n}}))},1e3)),()=>clearInterval(_)},[u,n,p.length,o,i,e]),m.useEffect(()=>{o&&u!=="idle"&&u!=="hovering"&&g()},[u,o]);const v=async()=>{g(),d("responding"),await h({command:{type:"promptCharacterSpeech"},inputMethod:"promptCharacterSpeech"}),Y.trackEvent({name:"interaction",data:{eventName:"characterTalkToMeClicked",eventInfo_conversationId:gt(mt),eventInfo_characterId:n}})};function y(){switch(n){case"aqua":return"translate-x-9";case"mica":return"translate-x-14";case"erin":return"translate-x-16";default:throw new Error("Invalid characterId provided to getTranslateXClass")}}return f.jsx(nN,{fallback:f.jsx(VT,{}),onError:IV(t,n),children:f.jsxs("div",{"data-testid":"character-div",className:q("sticky top-0 h-2/5 min-h-[40vh] w-full bg-gradient-chat-light-character dark:bg-midnight-850 dark:bg-none",qt.babylonCharacter),style:{maskImage:"linear-gradient(to bottom, #000 95%, transparent 100%)"},children:[f.jsx(wn,{children:s&&f.jsx(Ae.div,{className:q("absolute start-1/2 top-12 size-36",y()),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1},children:f.jsx(PCe,{onAnimationClicked:v})})}),f.jsx(m.Suspense,{fallback:f.jsx("div",{className:"flex h-full items-center justify-center",children:f.jsx(kt,{type:"spinnerThemed",className:"size-12"})}),children:f.jsx(OCe,{characterId:n,setCharacterComponentHeight:r})})]})})}function MCe({className:t}){const{t:e}=Fe();return f.jsxs("div",{className:xt("flex items-center gap-2",t),children:[f.jsx(kt,{type:"reasoning",className:"size-11"}),f.jsxs("div",{className:"flex flex-col text-sm",children:[f.jsx("span",{children:e("chat.reasoningLoading.title")}),f.jsx("span",{className:"text-foreground-450 dark:text-foreground-600",children:e("chat.reasoningLoading.description")})]})]})}function uO(t){let e=0;for(const n of t)e+=n;return e}function LCe(t,e,n){let r=0,o=null,i=[],a=0;return{getValue:()=>{if(!n)return 0;if(!o){o=Math.floor(performance.now());const c=t[t.length-1];if(!c)a=0;else{const u=c+uO(i)*1e3;u>o?(a=(u-o)/1e3,i=[]):(a=0,i=[])}}const s=t[r];return s?(r+=1,i=[],Math.max((s-o)/1e3,0)):(a=Number((a+uO(i)).toFixed(3)),i=[],e(r,o,a),r+=1,a)},queueUpdate:s=>{i.push(s)}}}function DCe(t){const e=m.useRef([]);return m.useCallback(()=>LCe(e.current,(n,r,o)=>{e.current[n]=r+o*1e3},t),[t])}function jCe(t){const{isActive:e,animationDuration:n="5s",children:r,className:o,...i}=t;return f.jsx("div",{className:xt(e&&"bg-gradient-to-l from-foreground-800 via-foreground-300 to-foreground-800 bg-[size:200%_100%] bg-clip-text text-transparent",o),style:{...e&&{animation:`shimmer-reverse ${n} linear infinite 0.5s`}},...i,children:r})}const a6="rounded-2xl border border-stroke-250 p-3";function s6(){const{t}=Fe(),e=t("chat.reasoningLoading.title");return f.jsx("div",{className:"text-sm",children:f.jsx(jCe,{isActive:!0,children:e})})}function UCe(){return f.jsx(Ae.div,{initial:tt,animate:Rt,className:q("w-fit",a6),children:f.jsx(s6,{})})}function WAe(t){const{shouldAnimate:e,items:n}=t,r=n&&n.at(-1).text,[o,i]=m.useState(0),a=DCe(!0),{blocks:s}=m.useMemo(()=>{if(!r)return{blocks:[]};const u=a(),d=S0(r);return{blocks:uh(d,u,()=>{i(o+1)})}},[a,r,o]);return!(r&&s.length>0)?null:f.jsxs(Ae.div,{initial:tt,animate:Rt,className:q("w-3/4",a6),children:[f.jsx(s6,{}),f.jsx("div",{className:"pt-3 text-foreground-450 text-sm",children:f.jsx(mh,{blocks:s,shouldAnimate:e})})]})}function dO(){const t=F(ir),e=de("think-deeper-cot");switch(t){case"chat":case"computerUse":case"research":return f.jsx(kt,{type:"spinnerThemed",className:"absolute -ms-2.5 -mt-2 size-11"});case"reasoning":return e?f.jsx(UCe,{}):f.jsx(MCe,{className:"absolute -ms-2.5 -mt-2 w-max"});default:return null}}const FCe=m.lazy(()=>T(()=>import("./actions-chat-detail-DaznXumr.js"),__vite__mapDeps([339,1,340,341,324,342,343,331,265])).then(t=>({default:t.ActionsChatDetail}))),BCe=m.lazy(()=>T(()=>import("./showroom-chat-detail-D5cUOiMp.js"),__vite__mapDeps([344,1])).then(t=>({default:t.ShowroomChatDetail})));function HCe(){const t=F(Hu);return f.jsx("div",{className:"flex size-full items-center justify-center",children:t?f.jsx(m.Suspense,{fallback:f.jsx(fO,{}),children:f.jsx(BCe,{})}):f.jsx(m.Suspense,{fallback:f.jsx(fO,{}),children:f.jsx(FCe,{})})})}function fO(){return f.jsx("div",{className:"flex size-full items-center justify-center",children:f.jsx(kt,{className:"size-12"})})}const Jp=376,cC="0.5rem";function c6(t){const{children:e}=t,n=F(Xr),r=Lr(),o=n==="side-by-side",i=CI(),a=n==="side-by-side"&&!i,s=r?"bg-stone-150":"bg-gradient-chat-light",c=fI(u=>{const d=document.getElementById("app");d&&d.style.setProperty("--chat-details-container-height",i?`${u.height}px`:null)});return f.jsxs("div",{className:q("flex size-full max-h-[100vh] min-h-0",i&&"flex-col",o&&"bg-sidebar-light dark:bg-sidebar-dark",r&&o&&"pb-2"),style:a?{gap:cC}:void 0,children:[n!=="chat-only"&&f.jsx(Ae.div,{ref:c,className:q("rounded-lg",i&&"h-fit",o&&"shadow-lg","dark:bg-midnight-850 dark:bg-none",s),initial:{width:a?`calc(100% - ${cC} - max(${Jp}px, 25%))`:"100%"},animate:{width:a?`calc(100% - ${cC} - max(${Jp}px, 25%))`:"100%"},transition:So,children:f.jsx(HCe,{})}),f.jsx(Ae.div,{className:q(n==="detail-only"&&"hidden",o&&s,i?"h-[calc(100vh-var(--chat-details-container-height))]":"h-full",o&&"rounded-lg pb-px shadow-lg dark:bg-midnight-850 dark:bg-none"),initial:{width:a?`max(${Jp}px, 25%)`:"100%"},animate:{width:a?`max(${Jp}px, 25%)`:"100%"},transition:So,children:e})]})}function VCe(t,e,n){const r=tm(t,e),o=du(e,{weekStartsOn:1}),i=tm(o,e),a=tm(Lm(o,7),e),s=zl(t,"EEEE",{weekStartsOn:1}),c=n(`dates.weekdays.${s.toLowerCase()}`),u=n(`dates.months.${zl(t,"MMMM").toLowerCase()}Abbr`),d=zl(t,"d"),h=n("dates.dayMonthDate",{day:c,month:u,date:d});return r>=1?h:r>=0?`${n("dates.today")}`:r>=-1?`${n("dates.yesterday")}`:r>=i?c:r>=a?n("dates.previousDay",{day:c}):h}function zCe(t,e){return VCe(t,new Date,e)}function qAe(t){const e=Math.max(0,t),n=Math.floor(e/60),r=e%60;return`${n}:${r<10?"0":""}${r}`}function $Ce(t){const{date:e,className:n}=t,{t:r}=Fe();return f.jsxs("div",{className:q("flex items-center",n),children:[f.jsx("span",{className:"opacity-70 text-xs-strong","data-testid":"date-divider",children:zCe(e,r)}),f.jsx(uI,{verticalMargin:!1,color:"accent",className:"mt-px grow"})]})}function GCe(t){const{content:e}=t;return f.jsx("div",{className:"text-center text-foreground-450 text-xs dark:text-foreground-600",children:e})}const KCe="contrast-more:outline contrast-more:after:border-2 contrast-more:after:absolute contrast-more:after:pointer-events-none contrast-more:after:w-2/3 contrast-more:after:h-2/3",WCe="text-stone-550 active:text-stone-350 dark:text-slate-400 active:dark:text-slate-450",qCe="bg-white/3 safe-hover:bg-black/5 active:bg-black/3 dark:bg-black/3 dark:safe-hover:bg-white/5 dark:active:bg-white/3",YCe="border-[1px] border-black/8 dark:border-white/8",QCe=`${WCe} ${qCe} ${YCe}`;function JCe(t){const{children:e,isSelected:n,className:r,onClick:o,disabled:i,unselectedColorClass:a,variant:s="standard"}=t,{focusable:c}=ju({autoRestoreFocus:!0,forceFocus:!0});let u;return n?u=nc.strong:s==="flat"?u=QCe:u=nc[a??"overlay-dimmed-inverted"],f.jsx("button",{disabled:i,type:"button",ref:c.ref,className:q("shadow-none dark:shadow-none",Nf,nw["40-base"],rw["40-base"],vC["40-base"],sv,u,r,n&&KCe),onClick:o,"aria-pressed":n,"data-spatial-focus-key":c.focusKey,children:e})}function XCe(t){const{query:e,messageId:n,index:r,onClick:o}=t,i=F(mt),a=()=>{bn({source:"suggestionChip",conversationId:i,messageId:n}),Y.trackEvent({name:"interaction",data:{eventName:"copilotSuggestionFollowupSelection",eventInfo_messageId:n,eventInfo_conversationId:i??"",eventInfo_suggestionIndex:r}}),o()};return f.jsx(JCe,{isSelected:!1,variant:"flat",className:"max-w-[80%] text-start sm:max-w-fit",onClick:a,children:f.jsx("span",{className:"p-1",children:e})})}function ZCe(t){const{mostRecentMessageId:e,className:n}=t,r=F(LV),o=r&&e===r.messageId;return m.useEffect(()=>{o&&Ku({page:"chat",scenario:"suggestionReceived"})},[o]),f.jsx("div",{className:q("mt-auto",n),children:o&&f.jsx(eSe,{suggestions:r.suggestions,messageId:r.messageId})})}function eSe({suggestions:t,messageId:e}){const{submitMessage:n}=by(),r=m.useRef(null),o=J0(r,{amount:"all",once:!0});return m.useEffect(()=>{o&&Ku({page:"chat",scenario:"suggestionRender"})},[o]),f.jsx(Zn,{ref:r,duration:bo.suggestions,className:"flex flex-col items-end gap-3 pb-8",children:t.map((i,a)=>f.jsx(XCe,{index:a,messageId:e,onClick:()=>n({text:i,inputMethod:"suggestion"}),query:i},i))})}function OI(t){const{pages:e,className:n,children:r,disableLink:o,clickSource:i}=t,{pushPages:a}=kj(),s=()=>{gn.emit("disclaimer:open-settings"),a(e),dt({source:i??"settingsLink",destination:e[e.length-1]})};return o?f.jsx("span",{children:r}):f.jsx("button",{className:n,type:"button",title:"",onClick:s,children:r})}function hO(t){var e;return((e=Ee.instance().config().settingsOverrides)==null?void 0:e[t.key])??t.default}function tSe(){const t=_r(),e=F(kM),n=F(oE),r=F(iE),o=F(Fu),i=F(jY),a=!!F(UY),s=!!F(FY),c=!!(hO({key:"shouldShowTextModelTrainingSettings",default:!0})&&a),u=!!(hO({key:"shouldShowVoiceModelTrainingSettings",default:!0})&&s),d=de("view-settings-disclaimer"),h=c||u,p=!h||e&&!n,g=pj(),[v,y]=et(OM),[_,b]=m.useState(!1);m.useEffect(()=>{if((h||i)&&t&&!o){if(v){b(!0),y(!1);return}if(g<kC){b(!0);return}let S;try{S=$ae()}catch{S=new Date}const E=BN(S,6),I=new Date;I>E&&(b(!0),Qn(Kf,I.toISOString()))}},[t,h,o,g,i,v,y]);const C=()=>p===void 0||r===void 0||i===void 0?null:o||!t?"chat.unauthenticatedDisclaimer":!i||!_?"chat.firstTurnDisclaimerBase":!p&&!r?d?"chat.firstTurnDisclaimerPersonalizationTrainingViewSettings":"chat.firstTurnDisclaimerPersonalizationTraining":p&&!r?d?"chat.firstTurnPersonalizationDisclaimerViewSettings":"chat.firstTurnPersonalizationDisclaimer":r&&!p?d?"chat.firstTurnTrainingDisclaimerViewSettings":"chat.firstTurnTrainingDisclaimer":"chat.firstTurnDisclaimerBase";return(()=>{var E,I,x;let S=C();return S?(E=Ee.instance().config().uiOverrides)!=null&&E.hideTrainingDisclaimer?"chat.firstTurnDisclaimerBase":(S=((x=(I=Ee.instance().config()).textOverrides)==null?void 0:x.call(I,S))??S,S):null})()}const NI="text-foreground-450 text-xs dark:text-foreground-600",nSe="underline",pO={settingsLink:f.jsx(OI,{pages:["menu","account","privacy"],className:q(NI,nSe),clickSource:"disclaimerSettingsLink"}),learnMoreLink:f.jsx(V0,{link:Vg})},mO={termsLink:f.jsx(V0,{link:ah}),privacyLink:f.jsx(V0,{link:Pu})},rSe={settingsLink:f.jsx(OI,{pages:["menu","account","privacy"],className:q(NI),disableLink:!0})};function H0(t){const{forceVisible:e,disableDisclaimerSettingsLink:n,className:r,testId:o}=t,i=tSe(),a=F(Eo);if(!(a==null?void 0:a.isNew)&&!e||!i)return null;const c=u=>{switch(u){case"chat.unauthenticatedDisclaimer":return f.jsxs(f.Fragment,{children:[f.jsx(Mo,{i18nKey:"chat.firstTurnDisclaimerBase"})," ",f.jsx(Mo,{i18nKey:u,components:{termsLink:mO.termsLink,privacyLink:mO.privacyLink}})]});case"chat.firstTurnTrainingDisclaimer":case"chat.firstTurnPersonalizationDisclaimer":case"chat.firstTurnDisclaimerPersonalizationTraining":case"chat.firstTurnTrainingDisclaimerViewSettings":case"chat.firstTurnPersonalizationDisclaimerViewSettings":case"chat.firstTurnDisclaimerPersonalizationTrainingViewSettings":return f.jsxs(f.Fragment,{children:[f.jsx(Mo,{i18nKey:"chat.firstTurnPersonalizationDisclaimerBase"})," ",f.jsx(Mo,{i18nKey:u,components:{settingsLink:n?rSe.settingsLink:pO.settingsLink}})]});case"chat.edge.firstTurnPersonalizationDisclaimer":case"chat.edge.firstTurnPersonalizationSettingsDisclaimer":return f.jsxs(f.Fragment,{children:[f.jsx(Mo,{i18nKey:"chat.firstTurnPersonalizationDisclaimerBase"})," ",f.jsx(Mo,{i18nKey:u,components:{learnMoreLink:pO.learnMoreLink,bold:f.jsx("strong",{})}})]});case"chat.firstTurnDisclaimerBase":case"chat.firstTurnPersonalizationDisclaimerBase":case"chat.tv.firstTurnDisclaimer":return f.jsx(Mo,{i18nKey:u});default:return null}};return f.jsx(Zn,{id:i,mode:"wait",className:q("space-y-8 pb-8",NI,r),"data-testid":o,children:c(i)})}function V0(t){const{children:e,link:n}=t;return f.jsx(Ua,{className:"underline",href:n,title:"",children:e})}function l6(t){const{customBottomDisclaimer:e}=t,n=de("async-disclaimer-text"),r=Ay(),[o,i]=m.useState(!n);return m.useEffect(()=>{r&&r.length>0&&i(!0)},[r]),e||(o?f.jsx(Zn,{className:"absolute bottom-0 flex max-w-chat justify-center px-6 text-center","data-testid":"bottom-disclaimer",children:f.jsx(H0,{})}):null)}const oSe="h-2/5 max-h-[40vh] min-h-[32vh] w-full";function iSe(){return f.jsx("div",{"aria-hidden":!0,className:xt(oSe,"flex flex-col items-center justify-center")})}function aSe(t){const{text:e,staggerChildren:n=.018,delayChildren:r=0,initialOpacity:o=0}=t;return f.jsx(Ae.div,{variants:{show:{transition:{staggerChildren:n,delayChildren:r}}},initial:"hidden",animate:"show",children:iI(e).map((i,a)=>f.jsx(Ae.span,{variants:{hidden:{opacity:o},show:{opacity:1,transition:{duration:_4}}},children:i},a))})}function sSe(){const t=qn({breakpoint:"md"}),e=Lr(),n=F(os);return e&&n&&!t}const cSe={sm:"text-md",md:"text-xl",lg:"text-2xl"};function lSe(t){const{subheading:e}=t;return f.jsx("h2",{className:"mt-4 text-foreground-800 text-base",children:e})}function uSe(t){const{className:e,fontSize:n="lg"}=t,r=F(Pv),o=F(EM),{t:i}=Fe(),a=sSe(),{greetingKey:s,widgetGreeting:c,widgetSubheading:u,showPromptedGreetingUI:d}=fU(),h=s?i(s,{name:o}):"";return d?f.jsxs("div",{className:xt(e,"flex w-full flex-col items-start justify-start gap-2 sm:mb-6 sm:h-[100px] sm:justify-end"),children:[f.jsxs("div",{className:"flex gap-2 text-foreground-550 dark:text-foreground-750",children:[f.jsx("p",{className:"text-xs-strong",children:i("common.copilotText")}),f.jsx("p",{className:"text-xs",children:zl(new Date,"h:mm aa")})]}),r?f.jsxs(f.Fragment,{children:[f.jsx(Nu,{className:"h-[26px] w-4/5 rounded-md"}),f.jsx(Nu,{className:"h-[26px] w-1/4 rounded-md"})]}):f.jsx("h1",{className:"text-lg",children:f.jsx(u6,{text:c??h})})]}):f.jsxs("div",{className:xt(e,"flex flex-col items-start",cSe[n],a&&u&&"mb-8 bp-960:mb-0"),"data-testid":"launch-greeting",children:[f.jsx("h1",{children:h}),u&&f.jsx(lSe,{subheading:u})]})}const u6=m.memo(t=>{const{text:e}=t;return f.jsx(aSe,{text:e,staggerChildren:.02,delayChildren:.1,initialOpacity:.1},e)});u6.displayName="AnimatedTextMemo";function dSe(t){const{customLaunchGreeting:e,className:n}=t,r=qn({breakpoint:"sm"}),{showShoppingCardInNewChat:o}=Ty();return e||f.jsx(uSe,{className:n,fontSize:r||o?"md":"lg"})}function fSe(t){const{className:e}=t,n=F(Fu),r="top-disclaimer";return n?f.jsx(H0,{forceVisible:!0,className:e,testId:r}):f.jsx(H0,{className:e,testId:r})}function hSe({characterId:t,className:e}){const n=F(Eo),[r,o]=et(a2),{t:i}=Fe();return m.useEffect(()=>{(n==null?void 0:n.isNew)===!1&&o(!1)},[o,n==null?void 0:n.isNew]),n!=null&&n.isNew?f.jsxs(Zn,{id:"character-disclaimer",mode:"wait",className:q("pb-2 text-stone-550/90 text-xs dark:text-slate-250/60",e),children:[i("characterAnimation.characterDisclaimerTextV2",{characterName:TV(t,i)})," ",r&&f.jsx(Mo,{i18nKey:"characterAnimation.characterSettingDisclaimerText",components:{settingsLink:f.jsx(OI,{pages:["menu","character-options"],className:"text-stone-550/90 underline text-xs dark:text-slate-250/60"})}})]}):null}function pSe(){return f.jsx(ky,{size:"sm",stroke:!0,className:"flex h-[172px] w-[324px] cursor-pointer flex-col p-4",children:f.jsx("div",{className:"flex flex-1",children:f.jsx(Nu,{className:"size-full",style:{clipPath:"var(--clip-path-squircle-36)"}})})})}const mSe=m.lazy(()=>T(()=>import("./contextual-shopping-card-DH3EOPrt.js"),__vite__mapDeps([345,1,346,245,241,347,242,243,244,348,235,349,350,351,352,353])).then(t=>({default:t.AnimatedContextualShoppingCard})));function d6(t){const{customLaunchGreeting:e}=t,{isCentralComposerEnabled:n,isWidgetSectionEnabled:r,isAppearanceOnHomeEnabled:o}=Ey(),i=qn({breakpoint:"sm"}),a=bU({breakpoint:"h760"}),s=de("multiplecharacters"),c=wI(),u=F(Aw),d=F(Mge),h=!ly(),p=s&&u!==null,g=t4(),{launchGreetingShown:v,widgetSubheading:y}=fU(),{showShoppingCardInNewChat:_,shoppingProductMetadata:b}=Ty(),C=!d&&!p&&!v&&c&&!g,w=p||i&&!C,E=F(ir)==="computerUse",I=r&&!E&&!i&&!a,x=C&&"pb-2",A=m.lazy(()=>Promise.resolve({default:()=>null}));return f.jsxs(Zn,{delay:.2,initial:h?"initial":!1,className:xt(n?"mt-2 flex flex-col items-start text-pretty pe-0 sm:absolute sm:inset-x-0 sm:inset-y-0 sm:mx-auto sm:mt-0 sm:max-w-chat sm:px-4 sm:pb-[calc(var(--composer-container-height))]":x,_&&"mx-auto mt-2 max-w-sm sm:relative sm:mt-6 sm:max-w-md sm:px-4",o&&!a?"gap-1 sm:justify-start":"gap-2 sm:justify-center",I&&!y&&"sm:pb-[calc(var(--composer-container-height)-64px)]",I&&y&&"sm:pb-[calc(var(--composer-container-height)-32px)]"),children:[o&&!a&&f.jsx("div",{className:"order-2 w-full sm:order-1",children:f.jsx(m.Suspense,{fallback:f.jsx(iSe,{}),children:f.jsx(A,{className:"mt-20 w-full sm:mt-0",voiceAppearanceId:jw})})}),C&&f.jsx(dSe,{customLaunchGreeting:e,className:xt("sm:ps-2",o&&"text-center",o&&!a&&"order-1 sm:order-2")}),p&&f.jsx(hSe,{characterId:u}),_&&b&&f.jsx(m.Suspense,{fallback:f.jsx(pSe,{}),children:f.jsx(mSe,{content:b})}),w&&f.jsx(fSe,{})]},"chat-welcome")}const gO=10,gSe=0,vSe=.2;function ySe({onClick:t,shouldShowScrollToBottomButton:e}){const{t:n}=Fe();return f.jsx(wn,{children:e&&f.jsx(Ae.div,{className:q("absolute start-1/2 -translate-x-1/2",qt.chatScrollToBottomButton),style:{bottom:"calc(var(--composer-container-height) + 1.5rem)"},initial:{...tt,y:gO},animate:{...Rt,y:gSe},exit:{...tt,y:gO},transition:{duration:vSe},children:f.jsx(De,{className:"backdrop-blur-md",color:"default",variant:"square",title:n("chat.scrollToBottom"),onClick:t,children:f.jsx(zh,{className:"size-6 rotate-180"})})})})}const f6=t=>m.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("mask",{id:"mask0_12117_44960",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:20,height:20},m.createElement("path",{d:"M7.19253 7.24894C7.46962 6.94112 7.94384 6.91617 8.25172 7.1932L10.7517 9.44267C10.9098 9.58487 11 9.78745 11 10C11 10.2126 10.9098 10.4152 10.7517 10.5574L8.25172 12.8068C7.94384 13.0839 7.46962 13.0589 7.19253 12.7511C6.91543 12.4433 6.94039 11.9692 7.24827 11.6922L8.29553 10.7499H4.75C4.33579 10.7499 4 10.4141 4 10C4 9.58591 4.33579 9.2502 4.75 9.2502H8.29553L7.24828 8.30789C6.94039 8.03086 6.91543 7.55675 7.19253 7.24894ZM20 15.2506C20 16.7691 18.7688 18 17.25 18L2.75 18C1.23122 18 0 16.7691 0 15.2506V4.74937C0 3.23093 1.23122 2 2.75 2H17.25C18.7688 2 20 3.23094 20 4.74937L20 15.2506ZM17.25 16.5003C17.9404 16.5003 18.5 15.9408 18.5 15.2506L18.5 4.74937C18.5 4.05917 17.9404 3.49966 17.25 3.49966L13.9958 3.49966L13.9958 16.5003H17.25ZM12.4958 16.5003L12.4958 3.49966L2.75 3.49965C2.05965 3.49965 1.5 4.05917 1.5 4.74937L1.5 15.2506C1.5 15.9408 2.05964 16.5003 2.75 16.5003L12.4958 16.5003Z",fill:"currentColor"})),m.createElement("g",{mask:"url(#mask0_12117_44960)"},m.createElement("rect",{width:24,height:24,transform:"translate(-2 -2)",fill:"currentColor"}))),YAe=Object.freeze(Object.defineProperty({__proto__:null,default:f6},Symbol.toStringTag,{value:"Module"}));function bSe(){const t=!Vo("kill-share-c2"),e=Zt(),n=F(Eo);return!!(t&&e.startsWith("/chats")&&!e.endsWith("/talk")&&(n!=null&&n.history.length))}function h6(){const{t}=Fe(),e=qn({breakpoint:"md"}),n=qn({breakpoint:"sm"}),r=qn({breakpoint:"xl"}),o=F(Xr)==="side-by-side",i=F(os),a=Zt(),s=Se(Xr),c=CI(),u=o&&!n&&a.startsWith("/chats"),d=bSe()&&r,h=(e||!i||u||d)&&!c,p=m.useCallback(()=>{s("detail-only")},[s]);return f.jsx("div",{className:q("sticky top-0 z-10 w-full"),children:f.jsx(wn,{children:h&&f.jsx(Ae.div,{className:"absolute h-16 w-full rounded-lg bg-stone-150/90 backdrop-blur-md dark:bg-midnight-850/80",initial:"initial",animate:"animate",exit:"exit",variants:{initial:tt,animate:Rt,exit:tt},transition:So,"data-testid":"sticky-header",children:u&&f.jsx(Ae.div,{initial:tt,animate:Rt,exit:{transition:{duration:0},...tt},transition:So,children:f.jsx(De,{title:t("actions.hideDetails"),color:"subtle-dimmed",variant:"square",size:"36-sm",className:"ms-3.5 mt-1.5",onClick:p,children:f.jsx(f6,{className:"size-5"})})})})})})}const _Se="answerCards.ariaLabel.numberOfLocalResultsSingle",CSe="answerCards.ariaLabel.numberOfLocalResultsPlural";function SSe(t){let e="";for(const r of t.entities){if(e+=r.name,r.category&&(e+=`, ${r.category}`),r.price&&(e+=`, ${wSe(r.price)}`),r.reviews[0]){const o=r.reviews[0];e+=", ",e+=ie("answerCards.ariaLabel.ratedByReviewer",{rating:o.rating,reviewCount:o.count,reviewProvider:o.providerName})}r.phoneNumber&&(e+=", ",e+=ie("answerCards.ariaLabel.phoneNumber",{phoneNumber:r.phoneNumber})),r.location.address&&(e+=", ",e+=ie("answerCards.ariaLabel.address",{address:r.location.address})),e+=". "}const n=t.entities.length===1?_Se:CSe;return ie(n,{count:t.entities.length,resultSummary:e})}function wSe(t){switch(t.length){case 1:return ie("answerCards.ariaLabel.inexpensivePrices");case 2:return ie("answerCards.ariaLabel.averagePrices");default:return ie("answerCards.ariaLabel.expensivePrices")}}function ESe(t){const{content:e,announce:n}=t;let r;for(const o of e){switch(o.type){case"text":r=o.text;break;case"image":o.url?r=ie("chat.imageGenerated",{prompt:o.prompt??""}):r=ie("chat.imageGenerating");break;case"page":break;case"citation":break;case"card":r=TSe(o.card);break;case"error":r=o.text;break}r&&n({msg:r})}}function TSe(t){switch(t.type){case"localEntity":return SSe(t);case"ads":case"weather":case"weatherTemperatureHourly":case"weatherTemperatureDaily":case"weatherPrecipitationHourly":case"weatherPrecipitationDaily":case"image":case"phoneImages":case"phoneLinking":case"phoneAlarm":case"phoneTimer":case"phoneSendMessage":case"video":case"sportsSchedule":case"sportsGame":case"safetyHelpline":case"shopping":case"shoppingProducts":case"shoppingCurated":case"job":case"quiz":case"financeChart":case"generativeUI":case"recipe":case"mediaSpotlight":case"m365":return"";default:return""}}function ISe(t,e){const n=m.useRef();m.useEffect(()=>{var o;if(e==="streaming")return;const r=t.at(-1);r&&r.author==="ai"&&r.id!==((o=n.current)==null?void 0:o.id)&&(ESe({content:r.content,announce:$4}),n.current=r)},[t,e])}function ASe(t){m.useEffect(()=>{if(t.current){const e=r=>{var i,a,s,c,u;if(r.target&&r.target instanceof Element&&r.target.closest('[data-formatless-copy="false"]'))return;const o=window.getSelection();if(o!=null&&o.rangeCount){let d=document.createElement("div");const h=o.getRangeAt(0),{startContainer:p,endContainer:g}=h;d.appendChild(h.cloneContents());const v=(i=p.parentElement)==null?void 0:i.closest("pre"),y=(a=g.parentElement)==null?void 0:a.closest("pre"),_=!!v&&!!y&&v===y,b=!!((s=p.parentElement)!=null&&s.closest("table")),C=d.getElementsByTagName("*");for(const I of C)I.getAttribute("data-copy")==="false"?I.remove():(I.removeAttribute("style"),I.removeAttribute("class"),I.removeAttribute("initial"),I.removeAttribute("animate"),I.removeAttribute("variants"),I.removeAttribute("custom"));if(_){const I=document.createElement("pre");I.appendChild(d),d=I}if(b){const I=document.createElement("table"),x=Array.from(d.children);for(const A of x)I.appendChild(A);d=I}d.style.position="absolute",d.style.left="-9999px",document.body.appendChild(d);const w=window.getSelection(),S=document.createRange();S.selectNodeContents(d),w==null||w.removeAllRanges(),w==null||w.addRange(S);const E=(w==null?void 0:w.toString())??"";w==null||w.removeAllRanges(),w==null||w.addRange(h),document.body.removeChild(d),d.removeAttribute("style"),(c=r.clipboardData)==null||c.setData("text/plain",E),(u=r.clipboardData)==null||u.setData("text/html",_||b?d.outerHTML:d.innerHTML)}r.preventDefault()},n=t.current;return n.addEventListener("copy",e),()=>{n.removeEventListener("copy",e)}}return()=>{}},[t])}const kSe=typeof document<"u"?m.useLayoutEffect:m.useEffect;function xSe(t,e){const n=m.useRef(0),r=m.useRef(0);m.useEffect(()=>{const{current:o}=e,i=()=>{if(o){const a=o.scrollHeight-o.scrollTop;r.current=a}};return o==null||o.addEventListener("scroll",i,{passive:!0}),i(),()=>{o==null||o.removeEventListener("scroll",i)}},[e]),kSe(()=>{const{current:o}=e;o&&o.scrollTop+r.current!==o.scrollHeight&&(n.current===0?setTimeout(()=>{o.scrollTop=o.scrollHeight},100):o.scrollTop=o.scrollHeight-r.current,n.current=t)},[t,e])}function RSe(t,e){const n=Vo("kill-review-prompt"),o=!!Ee.instance().config().promptForReviews&&!n,i=Se(Or),a=m.useCallback(async c=>{if(!o)return;const{shown:u}=await Aae.run({});if(u)return;const h=Ive()>=_ve,p=c>yve;(h||p)&&!Ave()&&(i("prompt-review"),Y.trackEvent({name:"system",data:{eventName:"inAppSurveyPopUp",eventInfo_triggerType:p?"longChat":"activeDays"}}))},[o,i]),s=m.useRef(!1);m.useEffect(()=>{e&&(s.current=!0)},[e]),m.useEffect(()=>{e||!s.current||a(t)},[t,e,a])}function PSe(t){return m.useCallback(({behavior:n="smooth",delay:r=0})=>{setTimeout(()=>{t.current&&t.current.scrollTo({top:t.current.scrollHeight,behavior:n})},r)},[t])}const OSe=.1;function NSe(t){const{chatRef:e,isEnabled:n}=t,r=m.useRef(null),[o,i]=m.useState(!1),a=m.useCallback(s=>{const c=s[0];c&&i(!c.isIntersecting)},[]);return m.useEffect(()=>{if(!n||!e.current||!r.current)return()=>{};const s=new IntersectionObserver(a,{root:e.current,threshold:OSe});return s.observe(r.current),()=>{s.disconnect()}},[n,e,a]),{bottomRef:r,shouldShowScrollToBottomButton:o}}function MSe(){const t=F(Ph),e=es(En),n=F(Tw);m.useEffect(()=>{e(r=>{if(n){const o=r.get(n);o&&(o.characterId=t)}})},[n,t,e])}async function LSe(t,e){const n=Lw(e);if(n){const{message:r,part:o}=n;if(!o.task)return;const i=await Vs();i.setConversationIdByMessageId({messageId:r.id,conversationId:t}),i.setMessageIdByTaskId({taskId:o.task.id,messageId:r.id})}}const DSe=window.requestIdleCallback||function(e){const n=Date.now();return setTimeout(()=>{e({didTimeout:!1,timeRemaining(){return Math.max(0,50-(Date.now()-n))}})},1)},p6=t=>m.createElement("svg",{viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M2 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v7a2 2 0 0 1-1.164 1.818 1.497 1.497 0 0 0-.275-.379l-.446-.446A1 1 0 0 0 17 13V6a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5v1H4a2 2 0 0 1-2-2V6Zm8.854 4.146A.5.5 0 0 0 10 10.5v7a.5.5 0 0 0 .91.287l1.571-2.245 2.943.452a.5.5 0 0 0 .43-.848l-5-5ZM11 15.915v-4.207l3.066 3.067-1.74-.268a.5.5 0 0 0-.486.207l-.84 1.2Z"})),QAe=Object.freeze(Object.defineProperty({__proto__:null,default:p6},Symbol.toStringTag,{value:"Module"})),m6=t=>m.createElement("svg",{viewBox:"0 0 64 64",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M32.0007 5.33301C46.7282 5.33301 58.6673 17.2721 58.6673 31.9997C58.6673 46.7273 46.7282 58.6663 32.0007 58.6663C17.2731 58.6663 5.33398 46.7273 5.33398 31.9997C5.33398 17.2721 17.2731 5.33301 32.0007 5.33301ZM32.0007 8.66634C19.114 8.66634 8.66732 19.113 8.66732 31.9997C8.66732 44.8863 19.114 55.333 32.0007 55.333C44.8873 55.333 55.334 44.8863 55.334 31.9997C55.334 19.113 44.8873 8.66634 32.0007 8.66634ZM23.7105 21.3663L23.8458 21.4878L32.0007 29.6437L40.1555 21.4878C40.763 20.8803 41.7227 20.8398 42.3772 21.3663L42.5125 21.4878C43.12 22.0953 43.1605 23.0551 42.634 23.7095L42.5125 23.8449L34.3567 31.9997L42.5125 40.1545C43.12 40.762 43.1605 41.7217 42.634 42.3762L42.5125 42.5115C41.905 43.119 40.9453 43.1595 40.2908 42.633L40.1555 42.5115L32.0007 34.3557L23.8458 42.5115C23.2383 43.119 22.2786 43.1595 21.6241 42.633L21.4888 42.5115C20.8813 41.904 20.8408 40.9443 21.3673 40.2898L21.4888 40.1545L29.6447 31.9997L21.4888 23.8449C20.8813 23.2374 20.8408 22.2776 21.3673 21.6232L21.4888 21.4878C22.0963 20.8803 23.0561 20.8398 23.7105 21.3663Z"})),JAe=Object.freeze(Object.defineProperty({__proto__:null,default:m6},Symbol.toStringTag,{value:"Module"})),vO="size-5",yO="flex w-full items-center justify-end gap-1.5 text-foreground-450 dark:text-slate-400";function jSe({type:t}){const{t:e}=Fe();switch(t){case"takeTaskControl":return f.jsxs("div",{className:yO,children:[f.jsx(p6,{className:vO}),e("actions.tookControl")]});case"cancelTask":return f.jsxs("div",{className:yO,children:[f.jsx(m6,{className:vO}),e("actions.cancelledTask")]});case"createPage":case"appendToPage":case"promptCharacterSpeech":default:return null}}function USe(t){const{fileName:e,fileType:n}=t,r=n!==""?n:nI(e);return yy(r)?f.jsx("div",{className:"flex w-full justify-end",children:f.jsx(IU,{filename:e,fileType:r})}):null}async function XAe(t,e){const r=`Copilot_${zl(new Date,"yyyyMMdd_HHmmss")}`,i=await(await fetch(t)).blob(),a=URL.createObjectURL(i),s=document.createElement("a");s.href=a,s.download=r,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)}function FSe(t){t.target instanceof HTMLImageElement&&URL.revokeObjectURL(t.target.src)}async function BSe(t,e=!1){try{const n=await Ru(t,{analytics:{anonymousPath:"/attachments/*.png"}});if(e&&n.status!==200)return null;const r=await n.blob();return URL.createObjectURL(r)}catch{return null}}function HSe(t){const{url:e}=t,{t:n}=Fe(),[r,o]=m.useState(null);return m.useEffect(()=>{if(!e){o(null);return}async function i(){o(await BSe(e))}i()},[e]),f.jsx("div",{className:"flex w-full justify-end",children:f.jsx("div",{className:"h-fit max-w-[min(80%,256px)] overflow-hidden rounded-2xl bg-background-static-250 p-0 shadow-inner dark:bg-background-static-900",children:r&&f.jsx("img",{alt:n("chat.uploadedImageAltText"),src:r,onLoad:FSe})})})}function VSe(t){const{text:e}=t;return f.jsx("div",{className:"flex w-full flex-col items-end","data-content":"user-message",children:f.jsx("div",{className:q("font-ligatures-none h-fit max-w-[80%] self-end whitespace-pre-wrap break-words rounded-2xl bg-spot-peach-250/60 px-5 py-3 dark:bg-midnight-800",Si("userMessage")??"text-base"),children:e})})}const g6=m.forwardRef((t,e)=>{const{children:n,tabBehavior:r="limited-trap-focus",ignoreDefaultKeydown:o,...i}=t,a=eN({tabBehavior:r,ignoreDefaultKeydown:o});return de("a11y-keyboard-navigation")?f.jsx(Ae.div,{ref:e,...a,...i,tabIndex:0,children:n}):f.jsx(Ae.div,{...i,ref:e,children:n})});g6.displayName="FocusableGroupMotion";function zSe(t){const{children:e,tabBehavior:n="limited-trap-focus",ignoreDefaultKeydown:r,...o}=t,i=eN({tabBehavior:n,ignoreDefaultKeydown:r});return de("a11y-keyboard-navigation")?f.jsx("div",{...i,...o,tabIndex:0,role:"article",children:e}):f.jsx("div",{...o,children:e})}const v6=t=>f.jsx(zSe,{...t});v6.Motion=g6;function $Se(){const{t}=Fe();return f.jsx("div",{className:"flex w-full justify-end",children:f.jsx("div",{className:"flex size-48 items-center justify-center rounded-[12px] border border-saddle-250 bg-spot-peach-200 px-4 py-2 dark:border-slate-700 dark:bg-midnight-750",children:f.jsx("span",{className:"text-center text-foreground-450 text-sm",children:t("share.imagePlaceholder")})})})}function GSe({tabs:t=[]}){return t.length===0?null:f.jsx("div",{className:"flex min-h-[60px] flex-col gap-2",tabIndex:0,role:"button",children:f.jsx(J4,{showRemoveIcon:!1,tabs:t})})}function KSe(t){const{message:e,className:n,isForSharing:r}=t,{t:o}=Fe(),a=!!F(Hu),s=de("edge-multi-tabs-manual"),c=de("a11y-keyboard-navigation"),u=!Vo("kill-share-c2"),d=o(c?"chat.userSaid":"chat.user");return f.jsxs(v6,{className:q("space-y-1",n),id:`${e.id}-user-message`,"aria-labelledby":`${e.id}-user-message`,children:[f.jsxs("div",{className:"relative space-y-3",children:[f.jsx("h2",{className:"sr-only","aria-label":d,"data-copy":"false",children:d}),e.content.map((h,p)=>h.type==="browserTabs"?s&&nU(h.tabs)?f.jsx(GSe,{tabs:h.tabs},p):null:h.type==="text"?f.jsx(VSe,{text:h.text},p):h.type==="command"?f.jsx(jSe,{type:h.command.type},p):h.type==="document"?f.jsx(USe,{fileType:h.contentType,fileName:h.fileName},p):u&&r?f.jsx($Se,{},p):f.jsx(HSe,{url:h.url},p)),e.emojiReaction&&f.jsx("div",{className:"absolute -bottom-3 end-3",children:e.emojiReaction})]}),!a&&e.brand&&f.jsx("div",{className:"w-full px-3 text-right text-foreground-600 text-xs",children:o("ads.aboutBrand",{brand:e.brand.brandLogo.businessName})})]},e.id)}const WSe=m.lazy(()=>T(()=>import("./action-alert-BYwJ1hlV.js"),__vite__mapDeps([354,1,258])).then(t=>({default:t.ActionAlert}))),qSe=m.lazy(()=>T(()=>import("./ai-message-DnP0RJqS.js").then(t=>t.l),__vite__mapDeps([355,1,317,318,225,323,356,357,220,289,358,350,359]))),YSe=1.5,bO="inline-block w-full space-y-8",MI="max-w-chat w-full";function y6(t){var ye,Ne,Ke,xe;const{className:e,conversationContainerClassName:n="mb-[var(--composer-container-height)]",customLaunchGreeting:r,customBottomDisclaimer:o,enableHighlightedClasses:i=!0,enableBackstageClasses:a=!0,disableStickyHeader:s=!1,disableSuggestions:c=!1,reactionsToDisable:u}=t,{loader:d}=PU(),h=F(Ei),p=F(Eo),g=F(Aw),v=F(ir),y=F(m2),_=F(Sv),b=qn({breakpoint:"sm"}),w=de("multiplecharacters")&&g!==null,S=de("scroll-to-bottom-button"),E=de("sharecontinue"),I=!ly(),[x,A]=m.useState(0);MSe();const N=m.useRef(null),R=PSe(N);xSe(h.length,N),ASe(N);const[z]=CCe({...d,disabled:!!d.error}),{backstageMessagesProps:P,highlightedMessagesProps:X,sentinelRef:M,sentinelClasses:k,backstageClasses:U,highlightedClasses:O,opacity:$,highlighted:K,backstage:J}=uCe(()=>R({behavior:"instant",delay:Ee.instance().config().scrollToBottomDelay}),N,w,x,h),se=cu($,V=>V<.5?"none":"auto"),ne=()=>R({behavior:"smooth"}),{bottomRef:ve,shouldShowScrollToBottomButton:Be}=NSe({chatRef:N,isEnabled:S}),Pe=F(Iw).get((p==null?void 0:p.id)??""),He=F(Bu);m.useEffect(()=>{p!=null&&p.id&&(LSe(p.id,h),DSe(()=>{T(()=>import("./ai-message-DnP0RJqS.js").then(V=>V.l),__vite__mapDeps([355,1,317,318,225,323,356,357,220,289,358,350,359]))}))},[p==null?void 0:p.id,h]),ISe(h,p==null?void 0:p.streamingState);const Ze=ZU(K),he=(Ze==null?void 0:Ze.author)==="human"&&Ze.id===""||(p==null?void 0:p.streamingState)==="streaming",j=!!F(Xd),pe=F(ff),W=he&&!Pe||j||pe,re=de("announce-loading"),be=m.useId(),{disableMultiturn:D}=Ee.instance().config(),ce=(Ne=(ye=Ee.instance().config().styleOverrides)==null?void 0:ye.width)==null?void 0:Ne.chat;RSe(h.length,he);const ge=Lr(),te=wI(),{showShoppingCardInNewChat:fe}=Ty(),je=!w&&!b&&te,Je=a&&!(fe&&!b),{crossPromotion:at}=Ee.instance().config(),nt=at==null?void 0:at.chatBanner,Ve=F(ts)==="dark"?nt==null?void 0:nt.dark:nt==null?void 0:nt.light,[bt,Lt]=m.useState(!1),{isMediaViewerOpen:Pt}=ca(),zt=de("chat-refactor-max-width"),$t=zt?e6():void 0,B=zt?"w-full":MI,Q=(p==null?void 0:p.streamingState)==="idle",ee=(V,oe=!1,le,me=!1)=>V.map((ke,Ye)=>{const st=new Date(ke.createdAt),it=Ye>0?V[Ye-1]:le,ht=it&&new Date(it.createdAt),en=!ht||!Sw(st,ht),At=E&&vve(p!=null&&p.continuedAt?new Date(p.continuedAt):null,st,ht);return f.jsxs(m.Fragment,{children:[At&&f.jsx(GCe,{content:ie("chat.continuedConversationDisclaimer")}),en&&!D&&f.jsx($Ce,{date:st,className:$t}),ke.author==="ai"?f.jsx(m.Suspense,{fallback:f.jsx(dO,{}),children:f.jsx(qSe,{message:ke,isStreamingComplete:Q,shouldAnimate:oe,reactionsToDisable:u,isLastMessage:me&&Ye===V.length-1})}):f.jsx(KSe,{message:ke,className:$t})]},ke.id)});return f.jsx(c6,{children:f.jsxs("div",{className:q("scrollbar-stable flex size-full flex-col items-center overflow-y-auto overflow-x-hidden overscroll-contain text-foreground-800 sm:min-w-chat-side-by-side",(p==null?void 0:p.id)&&BM(p.id)&&"t-custom-scrollbar",Ee.instance().config().wkWebViewScrollbarFix&&"wk-webview-scrollbar-fix",Ee.instance().config().showScrollbarOnHover&&"scrollbar-container",Pt&&"invisible",e),ref:N,"data-testid":"chat-page",children:[!s&&f.jsx(h6,{}),d.hasNextPage&&f.jsx("div",{ref:z}),w&&f.jsx(NCe,{animatingMessageId:Pe,isStreamingMessage:he,displayedCharacterId:g,setCharacterComponentHeight:A}),Ve&&bt&&f.jsxs("div",{className:"fixed bottom-6 end-6 flex w-40 flex-col items-center gap-1 rounded-3xl px-3 pb-2 pt-3 shadow-lg dark:bg-midnight-750",children:[f.jsx("img",{src:Ve,alt:ie("crossSelling.chatBannerImageAlt"),className:"size-36 object-contain"}),f.jsx("p",{className:"mt-2 text-center text-foreground-750 text-xs",children:ie("crossSelling.chatBannerLabel")})]}),f.jsx(PI.Motion,{circular:!1,tabbable:!0,initial:I?"start":!1,animate:"end",variants:{start:tt,end:{...Rt,transition:{duration:.2,delay:.2}}},className:q(n,"grow",!zt&&(ph("pageContainer")??"px-6"),B,ce),layout:"position",transition:So,"data-content":"conversation","data-copy":"false",children:f.jsxs(m.Suspense,{fallback:f.jsx("div",{"aria-hidden":!0}),children:[f.jsxs(Ae.div,{className:q("relative",ge||!s?"pt-10":"pt-6",J.length>0&&bO,Je&&U),variants:P.variants,initial:I?P.initial:!1,animate:P.animate,style:{opacity:h.length>0?$:0,pointerEvents:se},children:[f.jsx("div",{className:q("absolute -z-10 w-full",k),ref:M}),ee(J)]}),f.jsxs("div",{className:q(i&&O,"flex flex-col"),"data-testid":"highlighted-chats",children:[f.jsx(wn,{mode:"wait",initial:!1,children:f.jsxs(f.Fragment,{children:[f.jsx("div",{className:$t,children:f.jsx(d6,{customLaunchGreeting:r})}),K.length>0&&f.jsxs(Ae.div,{className:q("pb-6",bO),initial:X.initial,animate:X.animate,exit:X.exit,onAnimationStart:X.onAnimationStart,onAnimationComplete:()=>{Lt(!0)},children:[ee(K,!!Pe,J[J.length-1]??void 0,!0),f.jsx(m.Suspense,{fallback:f.jsx("div",{"aria-hidden":!0}),children:W&&f.jsx("div",{className:$t,children:f.jsxs(Ae.div,{"aria-hidden":!0,className:q("relative size-7"),initial:"start",animate:"end",variants:{start:{...tt,scale:0},end:{...Rt,scale:1,transition:{...yse,delay:YSe}}},children:[re&&f.jsx(cd,{id:be,timeout:3e3,msg:ie(v==="reasoning"?"chat.reasoning":"chat.loading"),type:"polite"}),f.jsx(dO,{})]})})}),f.jsx(Zn,{children:He&&f.jsx(kCe,{className:$t})}),f.jsx(Zn,{children:_&&_.visible&&f.jsx(ICe,{className:$t})})]},(Ke=K[0])==null?void 0:Ke.createdAt)]})}),!c&&f.jsx(ZCe,{mostRecentMessageId:Ze==null?void 0:Ze.id,className:$t}),y&&f.jsx(m.Suspense,{fallback:null,children:f.jsx(WSe,{startIcon:(xe=y.startIconProvider)==null?void 0:xe.call(y),title:y.title,subTitle:y.subTitle,conversationId:y.conversationId,onClick:y.onClick,trackingArgs:y.trackingArgs,className:$t})}),f.jsx("div",{ref:ve,style:{height:0,overflow:"hidden"}}),f.jsx(ySe,{shouldShowScrollToBottomButton:Be,onClick:ne})]})]})}),je&&f.jsx(l6,{customBottomDisclaimer:o})]})})}const ZAe=Object.freeze(Object.defineProperty({__proto__:null,CHAT_WIDTH_CLASSES:MI,default:y6},Symbol.toStringTag,{value:"Module"}));function b6(t){var y,_;const{className:e,conversationContainerClassName:n="mb-[var(--composer-container-height)]",customLaunchGreeting:r,customBottomDisclaimer:o,disableStickyHeader:i=!1,enableBackstageClasses:a=!0,enableHighlightedClasses:s=!0}=t,c=de("chat-refactor-max-width"),u=qn({breakpoint:"sm"}),d=Lr(),h=!u,p=(_=(y=Ee.instance().config().styleOverrides)==null?void 0:y.width)==null?void 0:_.chat,g=c?e6():void 0,v=c?"w-full":MI;return f.jsx(c6,{children:f.jsxs("div",{className:xt("scrollbar-stable flex size-full flex-col items-center overflow-y-auto overflow-x-hidden overscroll-contain text-foreground-800 sm:min-w-chat-side-by-side",Ee.instance().config().showScrollbarOnHover&&"scrollbar-container",e),"data-testid":"landing-page",children:[!i&&f.jsx(h6,{}),f.jsx(PI.Motion,{circular:!1,tabbable:!0,initial:"start",animate:"end",variants:{start:tt,end:{...Rt,transition:{duration:.2,delay:.2}}},className:xt(n,"grow",!c&&(ph("pageContainer")??"px-6"),v,p),layout:"position",transition:So,children:f.jsxs(m.Suspense,{fallback:f.jsx("div",{"aria-hidden":!0}),children:[f.jsx("div",{className:xt("relative",d||!i?"pt-10":"pt-6",a&&JU)}),f.jsx("div",{className:xt("flex",s&&XU),children:f.jsx(wn,{mode:"wait",initial:!1,children:f.jsx("div",{className:g,children:f.jsx(d6,{customLaunchGreeting:r})})})})]})}),h&&f.jsx(l6,{customBottomDisclaimer:o})]})})}const QSe=wt("/")({component:b6});wt("/w/landing")({component:b6});const JSe=i8("/chats/$conversationId");function XSe(t){const{disableStickyHeader:e,reactionsToDisable:n}=t,{conversationId:r}=JSe.useParams(),o=Se(mt),i=de("conversation-id-sync");return m.useEffect(()=>{i&&o(r)},[r,o,i]),f.jsx(y6,{disableStickyHeader:e,reactionsToDisable:n})}const ZSe=wt("/chats/$conversationId")({component:XSe}),e0e=wt("/topic-selection")(),t0e=wt("/login")(),n0e=wt("/gaming")(),r0e=wt("/discover")(),o0e=wt("/daily")(),i0e=wt("/agents")(),a0e=wt("/referrals/")(),s0e=wt("/portrait/")(),c0e=wt("/labs_/")(),l0e=wt("/subscription/start")(),u0e=wt("/subscription/manage")(),d0e=wt("/shares/$conversationId")(),f0e=wt("/referrals/rules")(),h0e=wt("/pro/subscribe")(),p0e=wt("/portrait/talk")(),m0e=wt("/pages/$pageId")(),g0e=wt("/memory/narrative")(),v0e=wt("/campaigns/$campaignId")(),y0e=wt("/shares/podcasts/$shareId")(),b0e=wt("/shares/pages/$shareId")(),_0e=wt("/pro/redeem/$redeemCode")(),C0e=wt("/pro/ewallet/return")(),S0e=wt("/podcasts/$podcastType/$podcastId")(),w0e=wt("/labs_/experiments/$experimentAlias")(),E0e=wt("/chats_/$conversationId/talk")(),T0e=wt("/labs_/experiments/3d-generations/")(),I0e=wt("/labs_/experiments/3d-generations/my-creations")(),A0e=wt("/labs_/experiments/3d-generations/shares/$shareId")(),k0e=e0e.update({id:"/topic-selection",path:"/topic-selection",getParentRoute:()=>It}).lazy(()=>T(()=>import("./topic-selection.lazy-79XNc4KB.js"),__vite__mapDeps([360,1])).then(t=>t.Route)),x0e=t0e.update({id:"/login",path:"/login",getParentRoute:()=>It}).lazy(()=>T(()=>import("./login.lazy-DZmctIKC.js"),__vite__mapDeps([361,1,275])).then(t=>t.Route)),R0e=n0e.update({id:"/gaming",path:"/gaming",getParentRoute:()=>It}).lazy(()=>T(()=>import("./gaming.lazy-CiDc8y1Y.js"),__vite__mapDeps([362,1,229,230])).then(t=>t.Route)),P0e=r0e.update({id:"/discover",path:"/discover",getParentRoute:()=>It}).lazy(()=>T(()=>Promise.resolve().then(()=>nEe),void 0).then(t=>t.Route)),O0e=o0e.update({id:"/daily",path:"/daily",getParentRoute:()=>It}).lazy(()=>T(()=>import("./daily.lazy-_2pNznTQ.js"),__vite__mapDeps([363,1,364,365,366,334,367,218,368,321,277,320,231])).then(t=>t.Route)),N0e=i0e.update({id:"/agents",path:"/agents",getParentRoute:()=>It}).lazy(()=>T(()=>import("./agents.lazy-C4ChN9ZV.js"),__vite__mapDeps([369,1])).then(t=>t.Route)),M0e=tCe.update({id:"/",path:"/",getParentRoute:()=>It}),L0e=a0e.update({id:"/referrals/",path:"/referrals/",getParentRoute:()=>It}).lazy(()=>T(()=>import("./index.lazy-DrZnOUCg.js"),__vite__mapDeps([370,1,301,302,371,372,373,374,375,376])).then(t=>t.Route)),D0e=s0e.update({id:"/portrait/",path:"/portrait/",getParentRoute:()=>It}).lazy(()=>T(()=>import("./index.lazy-BniScv6M.js"),__vite__mapDeps([377,1])).then(t=>t.Route)),j0e=c0e.update({id:"/labs_/",path:"/labs/",getParentRoute:()=>It}).lazy(()=>T(()=>import("./index.lazy-DgPMUaw9.js"),__vite__mapDeps([378,1,379,380,381,382,383,384,385])).then(t=>t.Route)),U0e=l0e.update({id:"/subscription/start",path:"/subscription/start",getParentRoute:()=>It}).lazy(()=>T(()=>import("./subscription.start.lazy-DfbQZPCL.js"),__vite__mapDeps([386,1])).then(t=>t.Route)),F0e=u0e.update({id:"/subscription/manage",path:"/subscription/manage",getParentRoute:()=>It}).lazy(()=>T(()=>import("./subscription.manage.lazy-B6LPXvD5.js"),__vite__mapDeps([387,1,314,324])).then(t=>t.Route)),B0e=d0e.update({id:"/shares/$conversationId",path:"/shares/$conversationId",getParentRoute:()=>It}).lazy(()=>T(()=>import("./shares._conversationId.lazy-D1QTLZCW.js"),__vite__mapDeps([388,1])).then(t=>t.Route)),H0e=f0e.update({id:"/referrals/rules",path:"/referrals/rules",getParentRoute:()=>It}).lazy(()=>T(()=>import("./rules.lazy-CKpbDHNw.js"),__vite__mapDeps([389,1,302,372,305,390])).then(t=>t.Route)),V0e=h0e.update({id:"/pro/subscribe",path:"/pro/subscribe",getParentRoute:()=>It}).lazy(()=>T(()=>import("./pro.subscribe.lazy-CRHtj4M6.js"),__vite__mapDeps([391,1,392,393,336,227,394,395,396,397,398,399,295,235,292,400,401,297,402,359,403,313,404,405,406,407,408,409,410,411,229,230,412,413])).then(t=>t.Route)),z0e=p0e.update({id:"/portrait/talk",path:"/portrait/talk",getParentRoute:()=>It}).lazy(()=>T(()=>import("./talk.lazy-DansrXhA.js"),__vite__mapDeps([414,1])).then(t=>t.Route)),$0e=m0e.update({id:"/pages/$pageId",path:"/pages/$pageId",getParentRoute:()=>It}).lazy(()=>T(()=>import("./pages._pageId.lazy-pnba8O46.js"),__vite__mapDeps([415,1,416,417,418,419,420,421,422,356,258,423,424,272,425,215,231,426,427,217,218,358])).then(t=>t.Route)),G0e=g0e.update({id:"/memory/narrative",path:"/memory/narrative",getParentRoute:()=>It}).lazy(()=>T(()=>import("./memory.narrative.lazy-Cs3KGoO5.js"),__vite__mapDeps([428,1,291])).then(t=>t.Route)),K0e=v0e.update({id:"/campaigns/$campaignId",path:"/campaigns/$campaignId",getParentRoute:()=>It}).lazy(()=>T(()=>import("./campaigns._campaignId.lazy-BSDUTV3g.js"),__vite__mapDeps([429,1])).then(t=>t.Route)),W0e=QSe.update({id:"/w/landing",path:"/w/landing",getParentRoute:()=>It}),q0e=ZSe.update({id:"/chats/$conversationId",path:"/chats/$conversationId",getParentRoute:()=>It}),Y0e=y0e.update({id:"/shares/podcasts/$shareId",path:"/shares/podcasts/$shareId",getParentRoute:()=>It}).lazy(()=>T(()=>import("./shares.podcasts._shareId.lazy-DyglwGl9.js"),__vite__mapDeps([430,1,367,218,368,321,338])).then(t=>t.Route)),Q0e=b0e.update({id:"/shares/pages/$shareId",path:"/shares/pages/$shareId",getParentRoute:()=>It}).lazy(()=>T(()=>import("./shares.pages._shareId.lazy-B6LWbkcv.js"),__vite__mapDeps([431,1,427,218,416,417,418,419,420,421,422,356,258,423,424,272,425,215,231,426,217,432])).then(t=>t.Route)),J0e=_0e.update({id:"/pro/redeem/$redeemCode",path:"/pro/redeem/$redeemCode",getParentRoute:()=>It}).lazy(()=>T(()=>import("./pro.redeem._redeemCode.lazy-B7vTNdFT.js"),__vite__mapDeps([433,1])).then(t=>t.Route)),X0e=C0e.update({id:"/pro/ewallet/return",path:"/pro/ewallet/return",getParentRoute:()=>It}).lazy(()=>T(()=>import("./pro.ewallet.return.lazy-C3KowVKX.js"),__vite__mapDeps([434,1,395])).then(t=>t.Route)),Z0e=S0e.update({id:"/podcasts/$podcastType/$podcastId",path:"/podcasts/$podcastType/$podcastId",getParentRoute:()=>It}).lazy(()=>T(()=>import("./podcasts._podcastType._podcastId.lazy-DeUM2oTq.js"),__vite__mapDeps([435,1,364,365,366,334,367,218,368,321,277,320,231])).then(t=>t.Route)),ewe=w0e.update({id:"/labs_/experiments/$experimentAlias",path:"/labs/experiments/$experimentAlias",getParentRoute:()=>It}).lazy(()=>T(()=>import("./experiments._experimentAlias.lazy-BgPKTlJX.js").then(t=>t.e),__vite__mapDeps([436,1,380,379,381,382,383,384,279,280])).then(t=>t.Route)),twe=E0e.update({id:"/chats_/$conversationId/talk",path:"/chats/$conversationId/talk",getParentRoute:()=>It}).lazy(()=>T(()=>import("./chats_._conversationId.talk.lazy-CnsCs8__.js"),__vite__mapDeps([437,1,438,439,440,290])).then(t=>t.Route)),nwe=T0e.update({id:"/labs_/experiments/3d-generations/",path:"/labs/experiments/3d-generations/",getParentRoute:()=>It}).lazy(()=>T(()=>import("./my-creations.lazy-C8APDteg.js").then(t=>t.i),__vite__mapDeps([441,1,379,313,270,300,217,219,365,366,334,442])).then(t=>t.Route)),rwe=I0e.update({id:"/labs_/experiments/3d-generations/my-creations",path:"/labs/experiments/3d-generations/my-creations",getParentRoute:()=>It}).lazy(()=>T(()=>import("./my-creations.lazy-C8APDteg.js").then(t=>t.m),__vite__mapDeps([441,1,379,313,270,300,217,219,365,366,334,442])).then(t=>t.Route)),owe=A0e.update({id:"/labs_/experiments/3d-generations/shares/$shareId",path:"/labs/experiments/3d-generations/shares/$shareId",getParentRoute:()=>It}).lazy(()=>T(()=>import("./shares._shareId.lazy-TpHHc7ZE.js"),__vite__mapDeps([443,1])).then(t=>t.Route)),iwe={IndexRoute:M0e,AgentsLazyRoute:N0e,DailyLazyRoute:O0e,DiscoverLazyRoute:P0e,GamingLazyRoute:R0e,LoginLazyRoute:x0e,TopicSelectionLazyRoute:k0e,ChatsConversationIdRoute:q0e,WLandingRoute:W0e,CampaignsCampaignIdLazyRoute:K0e,MemoryNarrativeLazyRoute:G0e,PagesPageIdLazyRoute:$0e,PortraitTalkLazyRoute:z0e,ProSubscribeLazyRoute:V0e,ReferralsRulesLazyRoute:H0e,SharesConversationIdLazyRoute:B0e,SubscriptionManageLazyRoute:F0e,SubscriptionStartLazyRoute:U0e,LabsIndexLazyRoute:j0e,PortraitIndexLazyRoute:D0e,ReferralsIndexLazyRoute:L0e,ChatsConversationIdTalkLazyRoute:twe,LabsExperimentsExperimentAliasLazyRoute:ewe,PodcastsPodcastTypePodcastIdLazyRoute:Z0e,ProEwalletReturnLazyRoute:X0e,ProRedeemRedeemCodeLazyRoute:J0e,SharesPagesShareIdLazyRoute:Q0e,SharesPodcastsShareIdLazyRoute:Y0e,LabsExperiments3dGenerationsMyCreationsLazyRoute:rwe,LabsExperiments3dGenerationsIndexLazyRoute:nwe,LabsExperiments3dGenerationsSharesShareIdLazyRoute:owe},awe=It._addFileChildren(iwe)._addFileTypes(),Wh=a8({routeTree:awe});function swe(){return f.jsx(s8,{router:Wh})}(function(){const t="onabort onactivate onactivateinvisible onafterprint onafterupdate onanimationcancel onanimationend onanimationiteration onanimationstart onariarequest onauxclick onbeforeactivate onbeforecopy onbeforecut onbeforedeactivate onbeforeeditfocus onbeforepaste onbeforeprint onbeforeunload onbegin onblur onbounce oncancel oncanplay oncanplaythrough oncellchange onchange onclick onclose oncommand oncontextmenu oncontrolselect oncopy oncuechange oncut ondataavailable ondatasetchanged ondatasetcomplete ondblclick ondeactivate ondrag ondragdrop ondragend ondragenter ondragexit ondragleave ondragover ondragstart ondrop ondurationchange onemptied onend onended onerror onerrorupdate onexit onfilterchange onfinish onfocus onfocusin onfocusout onformdata onfullscreenchange onfullscreenerror ongotpointercapture onhelp oninput oninvalid onkeydown onkeypress onkeyup onlayoutcomplete onload onloadeddata onloadedmetadata onloadend onloadstart onlosecapture onlostpointercapture onmediacomplete onmediaerror onmessage onmousedown onmouseenter onmouseleave onmousemove onmouseout onmouseover onmouseup onmousewheel onmove onmoveend onmovestart onmozfullscreenchange onmozfullscreenerror onmscontentzoom onmsgesturechange onmsgesturedoubletap onmsgestureend onmsgesturehold onmsgesturestart onmsgesturetap onmsgotpointercapture onmsinertiastart onmslostpointercapture onmsmanipulationstatechanged onmspointercancel onmspointerdown onmspointerenter onmspointerleave onmspointermove onmspointerout onmspointerover onmspointerup onoffline ononline onoutofsync onoverscroll onpaste onpause onplay onplaying onpointercancel onpointerdown onpointerenter onpointerleave onpointermove onpointerout onpointerover onpointerrawupdate onpointerup onprogress onpropertychange onratechange onreadystatechange onrepeat onreset onresize onresizeend onresizestart onresume onreverse onrowdelete onrowenter onrowexit onrowinserted onscroll onscrollend onsearch onseek onseeked onseeking onselect onselectionchange onselectstart onshow onstalled onstart onstop onstorage onsubmit onsuspend onsynchrestored ontimeerror ontimeupdate ontoggle ontrackchange ontransitioncancel ontransitionend ontransitionrun ontransitionstart onunload onurlflip onvolumechange onwaiting onwebkitanimationend onwebkitanimationiteration onwebkitanimationstart onwebkitfullscreenchange onwebkitfullscreenerror onwebkittransitionend onwheel".split(" ");function e(){if(typeof window<"u"){const h=[];for(const p in HTMLElement.prototype)p.slice(0,2)==="on"&&h.push(p);return h}return t}const n=typeof window<"u",r=()=>{throw new TypeError("undefined conversion")},o=()=>null,{toLowerCase:i,toUpperCase:a}=String.prototype;function s(){throw new TypeError("Illegal constructor")}function c(){throw new TypeError("Illegal constructor")}const{l:u}=function(){function h(he){let j=X.get(he);return j===void 0&&(j=w(null),X.set(he,j)),j}function p(he){const j=x(he);if(j==null||x(j)!==A)throw Error();for(const pe of I(j))S(he,pe,{value:he[pe]});return he}function g(he,j){E(he.prototype),delete he.name,S(he,"name",{value:j})}function v(he){return j=>j instanceof he&&X.has(j)}function y(he,j){function pe(re,be){const D=j[be]||(he=="default"?o:r),ce=E(new re(P,he));return E({[be](ge,...te){if(ge=D(""+ge,...te),ge==null){if(he=="default")return ge;ge=""}return ge=""+ge,te=E(w(ce)),h(te).v=ge,te}}[be])}const W=w(s.prototype);for(const re of I(He))W[re]=pe(He[re],re);return S(W,"name",{value:he,writable:!1,configurable:!1,enumerable:!0}),E(W)}function _(he,j,pe,W="",re=""){if(he=a.apply(String(he)),(W=re||W)||(W="http://www.w3.org/1999/xhtml"),W=N.apply(Te,[W])?Te[W]:null){if(N.apply(W,[he])&&W[he]&&N.apply(W[he][j],[pe])&&W[he][j][pe])return W[he][j][pe];if(N.apply(W,["*"])&&N.apply(W["*"][j],[pe])&&W["*"][j][pe])return W["*"][j][pe]}}function b(){return O}const{assign:C,create:w,defineProperty:S,freeze:E,getOwnPropertyNames:I,getPrototypeOf:x,prototype:A}=Object,{hasOwnProperty:N}=A,{forEach:R,push:z}=Array.prototype,P=Symbol(),X=p(new WeakMap),M=p([]),k=p([]);let U=!0,O=null,$=!1;class K{constructor(j,pe){if(j!==P)throw Error("cannot call the constructor");S(this,"policyName",{value:pe,enumerable:!0})}toString(){return h(this).v}valueOf(){return h(this).v}}class J extends K{}g(J,"TrustedScriptURL");class se extends K{}g(se,"TrustedHTML");class ne extends K{}g(ne,"TrustedScript"),g(K,"TrustedType");const ve=E(w(new se(P,"")));h(ve).v="";const Be=E(w(new ne(P,"")));h(Be).v="";const Te={"http://www.w3.org/1999/xhtml":{EMBED:{attributes:{src:J.name}},IFRAME:{attributes:{srcdoc:se.name}},OBJECT:{attributes:{data:J.name,codebase:J.name}},SCRIPT:{attributes:{src:J.name,text:ne.name},properties:{innerText:ne.name,textContent:ne.name,text:ne.name}},"*":{attributes:{},properties:{innerHTML:se.name,outerHTML:se.name}}},"http://www.w3.org/2000/svg":{"*":{attributes:{},properties:{}}}};var Pe={codebase:"codeBase",formaction:"formAction"};!n||"srcdoc"in HTMLIFrameElement.prototype||delete Te["http://www.w3.org/1999/xhtml"].IFRAME.attributes.srcdoc;for(const he of Object.keys(Te["http://www.w3.org/1999/xhtml"])){Te["http://www.w3.org/1999/xhtml"][he].properties||(Te["http://www.w3.org/1999/xhtml"][he].properties={});for(const j of Object.keys(Te["http://www.w3.org/1999/xhtml"][he].attributes))Te["http://www.w3.org/1999/xhtml"][he].properties[Pe[j]?Pe[j]:j]=Te["http://www.w3.org/1999/xhtml"][he].attributes[j]}for(const he of e())Te["http://www.w3.org/1999/xhtml"]["*"].attributes[he]="TrustedScript",Te["http://www.w3.org/2000/svg"]["*"].attributes[he]="TrustedScript";const He={createHTML:se,createScriptURL:J,createScript:ne},Ze=He.hasOwnProperty;return Pe=w(c.prototype),C(Pe,{createPolicy:function(he,j){if(!he.match(/^[-#a-zA-Z0-9=_/@.%]+$/g))throw new TypeError("Policy "+he+" contains invalid characters.");if($&&k.indexOf(he)===-1&&k.indexOf("*")===-1)throw new TypeError("Policy "+he+" disallowed.");if(he==="default"&&O)throw new TypeError("Policy "+he+" already exists.");if($&&!U&&M.indexOf(he)!==-1)throw new TypeError("Policy "+he+" exists.");M.push(he);const pe=w(null);if(j&&typeof j=="object")for(const W of I(j))Ze.call(He,W)&&(pe[W]=j[W]);else console.warn("trustedTypes.createPolicy "+he+" was given an empty policy");return E(pe),j=y(he,pe),he==="default"&&(O=j),j},h:v(se),j:v(J),i:v(ne),c:function(he,j,pe="",W=""){return j=i.apply(String(j)),_(he,"attributes",j,pe,W)||null},f:function(he,j,pe=""){return _(he,"properties",String(j),pe)||null},g:function(he=""){if(!he)try{he=document.documentElement.namespaceURI}catch{he="http://www.w3.org/1999/xhtml"}return(he=Te[he])?JSON.parse(JSON.stringify(he)):{}},a:ve,b:Be,o:O,TrustedHTML:se,TrustedScriptURL:J,TrustedScript:ne}),S(Pe,"defaultPolicy",{get:b,set:()=>{}}),{l:E(Pe),w:function(he,j){$=!0,k.length=0,R.call(he,pe=>{z.call(k,""+pe)}),U=j,M.length=0},m:function(){$=!1},s:b,u:function(){O=null,M.splice(M.indexOf("default"),1)}}}();if(typeof window<"u"&&(window.TrustedTypes&&typeof window.trustedTypes>"u"&&(window.trustedTypes=Object.freeze(window.TrustedTypes)),typeof window.trustedTypes>"u")){var d=Object.create(c.prototype);Object.assign(d,{isHTML:u.h,isScriptURL:u.j,isScript:u.i,createPolicy:u.createPolicy,getAttributeType:u.c,getPropertyType:u.f,getTypeMapping:u.g,emptyHTML:u.a,emptyScript:u.b,_isPolyfill_:!0}),Object.defineProperty(d,"defaultPolicy",Object.getOwnPropertyDescriptor(u,"defaultPolicy")||{}),window.trustedTypes=Object.freeze(d),window.TrustedHTML=u.TrustedHTML,window.TrustedScriptURL=u.TrustedScriptURL,window.TrustedScript=u.TrustedScript,window.TrustedTypePolicy=s,window.TrustedTypePolicyFactory=c}}).call(void 0);/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:_6,setPrototypeOf:_O,isFrozen:cwe,getPrototypeOf:lwe,getOwnPropertyDescriptor:uwe}=Object;let{freeze:vr,seal:wo,create:C6}=Object,{apply:z0,construct:$0}=typeof Reflect<"u"&&Reflect;vr||(vr=function(e){return e});wo||(wo=function(e){return e});z0||(z0=function(e,n,r){return e.apply(n,r)});$0||($0=function(e,n){return new e(...n)});const Xp=yr(Array.prototype.forEach),dwe=yr(Array.prototype.lastIndexOf),CO=yr(Array.prototype.pop),Kd=yr(Array.prototype.push),fwe=yr(Array.prototype.splice),Cm=yr(String.prototype.toLowerCase),lC=yr(String.prototype.toString),SO=yr(String.prototype.match),Wd=yr(String.prototype.replace),hwe=yr(String.prototype.indexOf),pwe=yr(String.prototype.trim),Oo=yr(Object.prototype.hasOwnProperty),dr=yr(RegExp.prototype.test),qd=mwe(TypeError);function yr(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return z0(t,e,r)}}function mwe(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return $0(t,n)}}function yt(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Cm;_O&&_O(t,null);let r=e.length;for(;r--;){let o=e[r];if(typeof o=="string"){const i=n(o);i!==o&&(cwe(e)||(e[r]=i),o=i)}t[o]=!0}return t}function gwe(t){for(let e=0;e<t.length;e++)Oo(t,e)||(t[e]=null);return t}function Is(t){const e=C6(null);for(const[n,r]of _6(t))Oo(t,n)&&(Array.isArray(r)?e[n]=gwe(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Is(r):e[n]=r);return e}function Yd(t,e){for(;t!==null;){const r=uwe(t,e);if(r){if(r.get)return yr(r.get);if(typeof r.value=="function")return yr(r.value)}t=lwe(t)}function n(){return null}return n}const wO=vr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),uC=vr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),dC=vr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),vwe=vr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),fC=vr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ywe=vr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),EO=vr(["#text"]),TO=vr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),hC=vr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),IO=vr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Zp=vr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),bwe=wo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),_we=wo(/<%[\w\W]*|[\w\W]*%>/gm),Cwe=wo(/\$\{[\w\W]*/gm),Swe=wo(/^data-[\-\w.\u00B7-\uFFFF]+$/),wwe=wo(/^aria-[\-\w]+$/),S6=wo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ewe=wo(/^(?:\w+script|data):/i),Twe=wo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),w6=wo(/^html$/i),Iwe=wo(/^[a-z][.\w]*(-[.\w]+)+$/i);var AO=Object.freeze({__proto__:null,ARIA_ATTR:wwe,ATTR_WHITESPACE:Twe,CUSTOM_ELEMENT:Iwe,DATA_ATTR:Swe,DOCTYPE_NAME:w6,ERB_EXPR:_we,IS_ALLOWED_URI:S6,IS_SCRIPT_OR_DATA:Ewe,MUSTACHE_EXPR:bwe,TMPLIT_EXPR:Cwe});const Qd={element:1,text:3,progressingInstruction:7,comment:8,document:9},Awe=function(){return typeof window>"u"?null:window},kwe=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const o="data-tt-policy-suffix";n&&n.hasAttribute(o)&&(r=n.getAttribute(o));const i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},kO=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function E6(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Awe();const e=Qe=>E6(Qe);if(e.version="3.2.4",e.removed=[],!t||!t.document||t.document.nodeType!==Qd.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,o=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:a,Node:s,Element:c,NodeFilter:u,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:p,trustedTypes:g}=t,v=c.prototype,y=Yd(v,"cloneNode"),_=Yd(v,"remove"),b=Yd(v,"nextSibling"),C=Yd(v,"childNodes"),w=Yd(v,"parentNode");if(typeof a=="function"){const Qe=n.createElement("template");Qe.content&&Qe.content.ownerDocument&&(n=Qe.content.ownerDocument)}let S,E="";const{implementation:I,createNodeIterator:x,createDocumentFragment:A,getElementsByTagName:N}=n,{importNode:R}=r;let z=kO();e.isSupported=typeof _6=="function"&&typeof w=="function"&&I&&I.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:P,ERB_EXPR:X,TMPLIT_EXPR:M,DATA_ATTR:k,ARIA_ATTR:U,IS_SCRIPT_OR_DATA:O,ATTR_WHITESPACE:$,CUSTOM_ELEMENT:K}=AO;let{IS_ALLOWED_URI:J}=AO,se=null;const ne=yt({},[...wO,...uC,...dC,...fC,...EO]);let ve=null;const Be=yt({},[...TO,...hC,...IO,...Zp]);let Te=Object.seal(C6(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Pe=null,He=null,Ze=!0,he=!0,j=!1,pe=!0,W=!1,re=!0,be=!1,D=!1,ce=!1,ge=!1,te=!1,fe=!1,je=!0,Je=!1;const at="user-content-";let nt=!0,Ue=!1,Ve={},bt=null;const Lt=yt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Pt=null;const zt=yt({},["audio","video","img","source","image","track"]);let $t=null;const B=yt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Q="http://www.w3.org/1998/Math/MathML",ee="http://www.w3.org/2000/svg",ye="http://www.w3.org/1999/xhtml";let Ne=ye,Ke=!1,xe=null;const V=yt({},[Q,ee,ye],lC);let oe=yt({},["mi","mo","mn","ms","mtext"]),le=yt({},["annotation-xml"]);const me=yt({},["title","style","font","a","script"]);let ke=null;const Ye=["application/xhtml+xml","text/html"],st="text/html";let it=null,ht=null;const en=n.createElement("form"),At=function(H){return H instanceof RegExp||H instanceof Function},oo=function(){let H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ht&&ht===H)){if((!H||typeof H!="object")&&(H={}),H=Is(H),ke=Ye.indexOf(H.PARSER_MEDIA_TYPE)===-1?st:H.PARSER_MEDIA_TYPE,it=ke==="application/xhtml+xml"?lC:Cm,se=Oo(H,"ALLOWED_TAGS")?yt({},H.ALLOWED_TAGS,it):ne,ve=Oo(H,"ALLOWED_ATTR")?yt({},H.ALLOWED_ATTR,it):Be,xe=Oo(H,"ALLOWED_NAMESPACES")?yt({},H.ALLOWED_NAMESPACES,lC):V,$t=Oo(H,"ADD_URI_SAFE_ATTR")?yt(Is(B),H.ADD_URI_SAFE_ATTR,it):B,Pt=Oo(H,"ADD_DATA_URI_TAGS")?yt(Is(zt),H.ADD_DATA_URI_TAGS,it):zt,bt=Oo(H,"FORBID_CONTENTS")?yt({},H.FORBID_CONTENTS,it):Lt,Pe=Oo(H,"FORBID_TAGS")?yt({},H.FORBID_TAGS,it):{},He=Oo(H,"FORBID_ATTR")?yt({},H.FORBID_ATTR,it):{},Ve=Oo(H,"USE_PROFILES")?H.USE_PROFILES:!1,Ze=H.ALLOW_ARIA_ATTR!==!1,he=H.ALLOW_DATA_ATTR!==!1,j=H.ALLOW_UNKNOWN_PROTOCOLS||!1,pe=H.ALLOW_SELF_CLOSE_IN_ATTR!==!1,W=H.SAFE_FOR_TEMPLATES||!1,re=H.SAFE_FOR_XML!==!1,be=H.WHOLE_DOCUMENT||!1,ge=H.RETURN_DOM||!1,te=H.RETURN_DOM_FRAGMENT||!1,fe=H.RETURN_TRUSTED_TYPE||!1,ce=H.FORCE_BODY||!1,je=H.SANITIZE_DOM!==!1,Je=H.SANITIZE_NAMED_PROPS||!1,nt=H.KEEP_CONTENT!==!1,Ue=H.IN_PLACE||!1,J=H.ALLOWED_URI_REGEXP||S6,Ne=H.NAMESPACE||ye,oe=H.MATHML_TEXT_INTEGRATION_POINTS||oe,le=H.HTML_INTEGRATION_POINTS||le,Te=H.CUSTOM_ELEMENT_HANDLING||{},H.CUSTOM_ELEMENT_HANDLING&&At(H.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Te.tagNameCheck=H.CUSTOM_ELEMENT_HANDLING.tagNameCheck),H.CUSTOM_ELEMENT_HANDLING&&At(H.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Te.attributeNameCheck=H.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),H.CUSTOM_ELEMENT_HANDLING&&typeof H.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Te.allowCustomizedBuiltInElements=H.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),W&&(he=!1),te&&(ge=!0),Ve&&(se=yt({},EO),ve=[],Ve.html===!0&&(yt(se,wO),yt(ve,TO)),Ve.svg===!0&&(yt(se,uC),yt(ve,hC),yt(ve,Zp)),Ve.svgFilters===!0&&(yt(se,dC),yt(ve,hC),yt(ve,Zp)),Ve.mathMl===!0&&(yt(se,fC),yt(ve,IO),yt(ve,Zp))),H.ADD_TAGS&&(se===ne&&(se=Is(se)),yt(se,H.ADD_TAGS,it)),H.ADD_ATTR&&(ve===Be&&(ve=Is(ve)),yt(ve,H.ADD_ATTR,it)),H.ADD_URI_SAFE_ATTR&&yt($t,H.ADD_URI_SAFE_ATTR,it),H.FORBID_CONTENTS&&(bt===Lt&&(bt=Is(bt)),yt(bt,H.FORBID_CONTENTS,it)),nt&&(se["#text"]=!0),be&&yt(se,["html","head","body"]),se.table&&(yt(se,["tbody"]),delete Pe.tbody),H.TRUSTED_TYPES_POLICY){if(typeof H.TRUSTED_TYPES_POLICY.createHTML!="function")throw qd('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof H.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw qd('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=H.TRUSTED_TYPES_POLICY,E=S.createHTML("")}else S===void 0&&(S=kwe(g,o)),S!==null&&typeof E=="string"&&(E=S.createHTML(""));vr&&vr(H),ht=H}},ln=yt({},[...uC,...dC,...vwe]),xi=yt({},[...fC,...ywe]),Gc=function(H){let Ie=w(H);(!Ie||!Ie.tagName)&&(Ie={namespaceURI:Ne,tagName:"template"});const $e=Cm(H.tagName),Xt=Cm(Ie.tagName);return xe[H.namespaceURI]?H.namespaceURI===ee?Ie.namespaceURI===ye?$e==="svg":Ie.namespaceURI===Q?$e==="svg"&&(Xt==="annotation-xml"||oe[Xt]):!!ln[$e]:H.namespaceURI===Q?Ie.namespaceURI===ye?$e==="math":Ie.namespaceURI===ee?$e==="math"&&le[Xt]:!!xi[$e]:H.namespaceURI===ye?Ie.namespaceURI===ee&&!le[Xt]||Ie.namespaceURI===Q&&!oe[Xt]?!1:!xi[$e]&&(me[$e]||!ln[$e]):!!(ke==="application/xhtml+xml"&&xe[H.namespaceURI]):!1},Sr=function(H){Kd(e.removed,{element:H});try{w(H).removeChild(H)}catch{_(H)}},zo=function(H,Ie){try{Kd(e.removed,{attribute:Ie.getAttributeNode(H),from:Ie})}catch{Kd(e.removed,{attribute:null,from:Ie})}if(Ie.removeAttribute(H),H==="is")if(ge||te)try{Sr(Ie)}catch{}else try{Ie.setAttribute(H,"")}catch{}},ua=function(H){let Ie=null,$e=null;if(ce)H="<remove></remove>"+H;else{const kn=SO(H,/^[\r\n\t ]+/);$e=kn&&kn[0]}ke==="application/xhtml+xml"&&Ne===ye&&(H='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+H+"</body></html>");const Xt=S?S.createHTML(H):H;if(Ne===ye)try{Ie=new p().parseFromString(Xt,ke)}catch{}if(!Ie||!Ie.documentElement){Ie=I.createDocument(Ne,"template",null);try{Ie.documentElement.innerHTML=Ke?E:Xt}catch{}}const Fn=Ie.body||Ie.documentElement;return H&&$e&&Fn.insertBefore(n.createTextNode($e),Fn.childNodes[0]||null),Ne===ye?N.call(Ie,be?"html":"body")[0]:be?Ie.documentElement:Fn},qh=function(H){return x.call(H.ownerDocument||H,H,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},Kc=function(H){return H instanceof h&&(typeof H.nodeName!="string"||typeof H.textContent!="string"||typeof H.removeChild!="function"||!(H.attributes instanceof d)||typeof H.removeAttribute!="function"||typeof H.setAttribute!="function"||typeof H.namespaceURI!="string"||typeof H.insertBefore!="function"||typeof H.hasChildNodes!="function")},Yh=function(H){return typeof s=="function"&&H instanceof s};function cr(Qe,H,Ie){Xp(Qe,$e=>{$e.call(e,H,Ie,ht)})}const Wc=function(H){let Ie=null;if(cr(z.beforeSanitizeElements,H,null),Kc(H))return Sr(H),!0;const $e=it(H.nodeName);if(cr(z.uponSanitizeElement,H,{tagName:$e,allowedTags:se}),H.hasChildNodes()&&!Yh(H.firstElementChild)&&dr(/<[/\w]/g,H.innerHTML)&&dr(/<[/\w]/g,H.textContent)||H.nodeType===Qd.progressingInstruction||re&&H.nodeType===Qd.comment&&dr(/<[/\w]/g,H.data))return Sr(H),!0;if(!se[$e]||Pe[$e]){if(!Pe[$e]&&ko($e)&&(Te.tagNameCheck instanceof RegExp&&dr(Te.tagNameCheck,$e)||Te.tagNameCheck instanceof Function&&Te.tagNameCheck($e)))return!1;if(nt&&!bt[$e]){const Xt=w(H)||H.parentNode,Fn=C(H)||H.childNodes;if(Fn&&Xt){const kn=Fn.length;for(let er=kn-1;er>=0;--er){const Dr=y(Fn[er],!0);Dr.__removalCount=(H.__removalCount||0)+1,Xt.insertBefore(Dr,b(H))}}}return Sr(H),!0}return H instanceof c&&!Gc(H)||($e==="noscript"||$e==="noembed"||$e==="noframes")&&dr(/<\/no(script|embed|frames)/i,H.innerHTML)?(Sr(H),!0):(W&&H.nodeType===Qd.text&&(Ie=H.textContent,Xp([P,X,M],Xt=>{Ie=Wd(Ie,Xt," ")}),H.textContent!==Ie&&(Kd(e.removed,{element:H.cloneNode()}),H.textContent=Ie)),cr(z.afterSanitizeElements,H,null),!1)},Qh=function(H,Ie,$e){if(je&&(Ie==="id"||Ie==="name")&&($e in n||$e in en))return!1;if(!(he&&!He[Ie]&&dr(k,Ie))){if(!(Ze&&dr(U,Ie))){if(!ve[Ie]||He[Ie]){if(!(ko(H)&&(Te.tagNameCheck instanceof RegExp&&dr(Te.tagNameCheck,H)||Te.tagNameCheck instanceof Function&&Te.tagNameCheck(H))&&(Te.attributeNameCheck instanceof RegExp&&dr(Te.attributeNameCheck,Ie)||Te.attributeNameCheck instanceof Function&&Te.attributeNameCheck(Ie))||Ie==="is"&&Te.allowCustomizedBuiltInElements&&(Te.tagNameCheck instanceof RegExp&&dr(Te.tagNameCheck,$e)||Te.tagNameCheck instanceof Function&&Te.tagNameCheck($e))))return!1}else if(!$t[Ie]){if(!dr(J,Wd($e,$,""))){if(!((Ie==="src"||Ie==="xlink:href"||Ie==="href")&&H!=="script"&&hwe($e,"data:")===0&&Pt[H])){if(!(j&&!dr(O,Wd($e,$,"")))){if($e)return!1}}}}}}return!0},ko=function(H){return H!=="annotation-xml"&&SO(H,K)},Jh=function(H){cr(z.beforeSanitizeAttributes,H,null);const{attributes:Ie}=H;if(!Ie||Kc(H))return;const $e={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ve,forceKeepAttr:void 0};let Xt=Ie.length;for(;Xt--;){const Fn=Ie[Xt],{name:kn,namespaceURI:er,value:Dr}=Fn,ss=it(kn);let xn=kn==="value"?Dr:pwe(Dr);if($e.attrName=ss,$e.attrValue=xn,$e.keepAttr=!0,$e.forceKeepAttr=void 0,cr(z.uponSanitizeAttribute,H,$e),xn=$e.attrValue,Je&&(ss==="id"||ss==="name")&&(zo(kn,H),xn=at+xn),re&&dr(/((--!?|])>)|<\/(style|title)/i,xn)){zo(kn,H);continue}if($e.forceKeepAttr||(zo(kn,H),!$e.keepAttr))continue;if(!pe&&dr(/\/>/i,xn)){zo(kn,H);continue}W&&Xp([P,X,M],Zh=>{xn=Wd(xn,Zh," ")});const Xh=it(H.nodeName);if(Qh(Xh,ss,xn)){if(S&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!er)switch(g.getAttributeType(Xh,ss)){case"TrustedHTML":{xn=S.createHTML(xn);break}case"TrustedScriptURL":{xn=S.createScriptURL(xn);break}}try{er?H.setAttributeNS(er,kn,xn):H.setAttribute(kn,xn),Kc(H)?Sr(H):CO(e.removed)}catch{}}}cr(z.afterSanitizeAttributes,H,null)},Py=function Qe(H){let Ie=null;const $e=qh(H);for(cr(z.beforeSanitizeShadowDOM,H,null);Ie=$e.nextNode();)cr(z.uponSanitizeShadowNode,Ie,null),Wc(Ie),Jh(Ie),Ie.content instanceof i&&Qe(Ie.content);cr(z.afterSanitizeShadowDOM,H,null)};return e.sanitize=function(Qe){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ie=null,$e=null,Xt=null,Fn=null;if(Ke=!Qe,Ke&&(Qe="<!-->"),typeof Qe!="string"&&!Yh(Qe))if(typeof Qe.toString=="function"){if(Qe=Qe.toString(),typeof Qe!="string")throw qd("dirty is not a string, aborting")}else throw qd("toString is not a function");if(!e.isSupported)return Qe;if(D||oo(H),e.removed=[],typeof Qe=="string"&&(Ue=!1),Ue){if(Qe.nodeName){const Dr=it(Qe.nodeName);if(!se[Dr]||Pe[Dr])throw qd("root node is forbidden and cannot be sanitized in-place")}}else if(Qe instanceof s)Ie=ua("<!---->"),$e=Ie.ownerDocument.importNode(Qe,!0),$e.nodeType===Qd.element&&$e.nodeName==="BODY"||$e.nodeName==="HTML"?Ie=$e:Ie.appendChild($e);else{if(!ge&&!W&&!be&&Qe.indexOf("<")===-1)return S&&fe?S.createHTML(Qe):Qe;if(Ie=ua(Qe),!Ie)return ge?null:fe?E:""}Ie&&ce&&Sr(Ie.firstChild);const kn=qh(Ue?Qe:Ie);for(;Xt=kn.nextNode();)Wc(Xt),Jh(Xt),Xt.content instanceof i&&Py(Xt.content);if(Ue)return Qe;if(ge){if(te)for(Fn=A.call(Ie.ownerDocument);Ie.firstChild;)Fn.appendChild(Ie.firstChild);else Fn=Ie;return(ve.shadowroot||ve.shadowrootmode)&&(Fn=R.call(r,Fn,!0)),Fn}let er=be?Ie.outerHTML:Ie.innerHTML;return be&&se["!doctype"]&&Ie.ownerDocument&&Ie.ownerDocument.doctype&&Ie.ownerDocument.doctype.name&&dr(w6,Ie.ownerDocument.doctype.name)&&(er="<!DOCTYPE "+Ie.ownerDocument.doctype.name+`>
`+er),W&&Xp([P,X,M],Dr=>{er=Wd(er,Dr," ")}),S&&fe?S.createHTML(er):er},e.setConfig=function(){let Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};oo(Qe),D=!0},e.clearConfig=function(){ht=null,D=!1},e.isValidAttribute=function(Qe,H,Ie){ht||oo({});const $e=it(Qe),Xt=it(H);return Qh($e,Xt,Ie)},e.addHook=function(Qe,H){typeof H=="function"&&Kd(z[Qe],H)},e.removeHook=function(Qe,H){if(H!==void 0){const Ie=dwe(z[Qe],H);return Ie===-1?void 0:fwe(z[Qe],Ie,1)[0]}return CO(z[Qe])},e.removeHooks=function(Qe){z[Qe]=[]},e.removeAllHooks=function(){z=kO()},e}var xO=E6(),Pf=class{constructor(t,e,n,r,o,i){Z(this,"type",3);Z(this,"name","");Z(this,"prefix","");Z(this,"value","");Z(this,"suffix","");Z(this,"modifier",3);this.type=t,this.name=e,this.prefix=n,this.value=r,this.suffix=o,this.modifier=i}hasCustomName(){return this.name!==""&&typeof this.name!="number"}},xwe=/[$_\p{ID_Start}]/u,Rwe=/[$_\u200C\u200D\p{ID_Continue}]/u,G0=".*";function Pwe(t,e){return/^[\x00-\x7F]*$/.test(t)}function T6(t,e=!1){let n=[],r=0;for(;r<t.length;){let o=t[r],i=function(a){if(!e)throw new TypeError(a);n.push({type:"INVALID_CHAR",index:r,value:t[r++]})};if(o==="*"){n.push({type:"ASTERISK",index:r,value:t[r++]});continue}if(o==="+"||o==="?"){n.push({type:"OTHER_MODIFIER",index:r,value:t[r++]});continue}if(o==="\\"){n.push({type:"ESCAPED_CHAR",index:r++,value:t[r++]});continue}if(o==="{"){n.push({type:"OPEN",index:r,value:t[r++]});continue}if(o==="}"){n.push({type:"CLOSE",index:r,value:t[r++]});continue}if(o===":"){let a="",s=r+1;for(;s<t.length;){let c=t.substr(s,1);if(s===r+1&&xwe.test(c)||s!==r+1&&Rwe.test(c)){a+=t[s++];continue}break}if(!a){i(`Missing parameter name at ${r}`);continue}n.push({type:"NAME",index:r,value:a}),r=s;continue}if(o==="("){let a=1,s="",c=r+1,u=!1;if(t[c]==="?"){i(`Pattern cannot start with "?" at ${c}`);continue}for(;c<t.length;){if(!Pwe(t[c])){i(`Invalid character '${t[c]}' at ${c}.`),u=!0;break}if(t[c]==="\\"){s+=t[c++]+t[c++];continue}if(t[c]===")"){if(a--,a===0){c++;break}}else if(t[c]==="("&&(a++,t[c+1]!=="?")){i(`Capturing groups are not allowed at ${c}`),u=!0;break}s+=t[c++]}if(u)continue;if(a){i(`Unbalanced pattern at ${r}`);continue}if(!s){i(`Missing pattern at ${r}`);continue}n.push({type:"REGEX",index:r,value:s}),r=c;continue}n.push({type:"CHAR",index:r,value:t[r++]})}return n.push({type:"END",index:r,value:""}),n}function I6(t,e={}){let n=T6(t);e.delimiter??(e.delimiter="/#?"),e.prefixes??(e.prefixes="./");let r=`[^${co(e.delimiter)}]+?`,o=[],i=0,a=0,s=new Set,c=C=>{if(a<n.length&&n[a].type===C)return n[a++].value},u=()=>c("OTHER_MODIFIER")??c("ASTERISK"),d=C=>{let w=c(C);if(w!==void 0)return w;let{type:S,index:E}=n[a];throw new TypeError(`Unexpected ${S} at ${E}, expected ${C}`)},h=()=>{let C="",w;for(;w=c("CHAR")??c("ESCAPED_CHAR");)C+=w;return C},p=C=>C,g=e.encodePart||p,v="",y=C=>{v+=C},_=()=>{v.length&&(o.push(new Pf(3,"","",g(v),"",3)),v="")},b=(C,w,S,E,I)=>{let x=3;switch(I){case"?":x=1;break;case"*":x=0;break;case"+":x=2;break}if(!w&&!S&&x===3){y(C);return}if(_(),!w&&!S){if(!C)return;o.push(new Pf(3,"","",g(C),"",x));return}let A;S?S==="*"?A=G0:A=S:A=r;let N=2;A===r?(N=1,A=""):A===G0&&(N=0,A="");let R;if(w?R=w:S&&(R=i++),s.has(R))throw new TypeError(`Duplicate name '${R}'.`);s.add(R),o.push(new Pf(N,R,g(C),A,g(E),x))};for(;a<n.length;){let C=c("CHAR"),w=c("NAME"),S=c("REGEX");if(!w&&!S&&(S=c("ASTERISK")),w||S){let I=C??"";e.prefixes.indexOf(I)===-1&&(y(I),I=""),_();let x=u();b(I,w,S,"",x);continue}let E=C??c("ESCAPED_CHAR");if(E){y(E);continue}if(c("OPEN")){let I=h(),x=c("NAME"),A=c("REGEX");!x&&!A&&(A=c("ASTERISK"));let N=h();d("CLOSE");let R=u();b(I,x,A,N,R);continue}_(),d("END")}return o}function co(t){return t.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function RO(t){return t&&t.ignoreCase?"ui":"u"}function Owe(t,e,n){return A6(I6(t,n),e,n)}function Hl(t){switch(t){case 0:return"*";case 1:return"?";case 2:return"+";case 3:return""}}function A6(t,e,n={}){n.delimiter??(n.delimiter="/#?"),n.prefixes??(n.prefixes="./"),n.sensitive??(n.sensitive=!1),n.strict??(n.strict=!1),n.end??(n.end=!0),n.start??(n.start=!0),n.endsWith="";let r=n.start?"^":"";for(let s of t){if(s.type===3){s.modifier===3?r+=co(s.value):r+=`(?:${co(s.value)})${Hl(s.modifier)}`;continue}e&&e.push(s.name);let c=`[^${co(n.delimiter)}]+?`,u=s.value;if(s.type===1?u=c:s.type===0&&(u=G0),!s.prefix.length&&!s.suffix.length){s.modifier===3||s.modifier===1?r+=`(${u})${Hl(s.modifier)}`:r+=`((?:${u})${Hl(s.modifier)})`;continue}if(s.modifier===3||s.modifier===1){r+=`(?:${co(s.prefix)}(${u})${co(s.suffix)})`,r+=Hl(s.modifier);continue}r+=`(?:${co(s.prefix)}`,r+=`((?:${u})(?:`,r+=co(s.suffix),r+=co(s.prefix),r+=`(?:${u}))*)${co(s.suffix)})`,s.modifier===0&&(r+="?")}let o=`[${co(n.endsWith)}]|$`,i=`[${co(n.delimiter)}]`;if(n.end)return n.strict||(r+=`${i}?`),n.endsWith.length?r+=`(?=${o})`:r+="$",new RegExp(r,RO(n));n.strict||(r+=`(?:${i}(?=${o}))?`);let a=!1;if(t.length){let s=t[t.length-1];s.type===3&&s.modifier===3&&(a=n.delimiter.indexOf(s)>-1)}return a||(r+=`(?=${i}|${o})`),new RegExp(r,RO(n))}var Ta={delimiter:"",prefixes:"",sensitive:!0,strict:!0},Nwe={delimiter:".",prefixes:"",sensitive:!0,strict:!0},Mwe={delimiter:"/",prefixes:"/",sensitive:!0,strict:!0};function Lwe(t,e){return t.length?t[0]==="/"?!0:!e||t.length<2?!1:(t[0]=="\\"||t[0]=="{")&&t[1]=="/":!1}function k6(t,e){return t.startsWith(e)?t.substring(e.length,t.length):t}function Dwe(t,e){return t.endsWith(e)?t.substr(0,t.length-e.length):t}function x6(t){return!t||t.length<2?!1:t[0]==="["||(t[0]==="\\"||t[0]==="{")&&t[1]==="["}var R6=["ftp","file","http","https","ws","wss"];function P6(t){if(!t)return!0;for(let e of R6)if(t.test(e))return!0;return!1}function jwe(t,e){if(t=k6(t,"#"),e||t==="")return t;let n=new URL("https://example.com");return n.hash=t,n.hash?n.hash.substring(1,n.hash.length):""}function Uwe(t,e){if(t=k6(t,"?"),e||t==="")return t;let n=new URL("https://example.com");return n.search=t,n.search?n.search.substring(1,n.search.length):""}function Fwe(t,e){return e||t===""?t:x6(t)?M6(t):N6(t)}function Bwe(t,e){if(e||t==="")return t;let n=new URL("https://example.com");return n.password=t,n.password}function Hwe(t,e){if(e||t==="")return t;let n=new URL("https://example.com");return n.username=t,n.username}function Vwe(t,e,n){if(n||t==="")return t;if(e&&!R6.includes(e))return new URL(`${e}:${t}`).pathname;let r=t[0]=="/";return t=new URL(r?t:"/-"+t,"https://example.com").pathname,r||(t=t.substring(2,t.length)),t}function zwe(t,e,n){return O6(e)===t&&(t=""),n||t===""?t:L6(t)}function $we(t,e){return t=Dwe(t,":"),e||t===""?t:LI(t)}function O6(t){switch(t){case"ws":case"http":return"80";case"wws":case"https":return"443";case"ftp":return"21";default:return""}}function LI(t){if(t==="")return t;if(/^[-+.A-Za-z0-9]*$/.test(t))return t.toLowerCase();throw new TypeError(`Invalid protocol '${t}'.`)}function Gwe(t){if(t==="")return t;let e=new URL("https://example.com");return e.username=t,e.username}function Kwe(t){if(t==="")return t;let e=new URL("https://example.com");return e.password=t,e.password}function N6(t){if(t==="")return t;if(/[\t\n\r #%/:<>?@[\]^\\|]/g.test(t))throw new TypeError(`Invalid hostname '${t}'`);let e=new URL("https://example.com");return e.hostname=t,e.hostname}function M6(t){if(t==="")return t;if(/[^0-9a-fA-F[\]:]/g.test(t))throw new TypeError(`Invalid IPv6 hostname '${t}'`);return t.toLowerCase()}function L6(t){if(t===""||/^[0-9]*$/.test(t)&&parseInt(t)<=65535)return t;throw new TypeError(`Invalid port '${t}'.`)}function Wwe(t){if(t==="")return t;let e=new URL("https://example.com");return e.pathname=t[0]!=="/"?"/-"+t:t,t[0]!=="/"?e.pathname.substring(2,e.pathname.length):e.pathname}function qwe(t){return t===""?t:new URL(`data:${t}`).pathname}function Ywe(t){if(t==="")return t;let e=new URL("https://example.com");return e.search=t,e.search.substring(1,e.search.length)}function Qwe(t){if(t==="")return t;let e=new URL("https://example.com");return e.hash=t,e.hash.substring(1,e.hash.length)}var tu,fr,Hn,rn,zs,nu,Vr,ru,ou,iu,we,Pn,D6,K0,lf,Sm,lo,W0,j6,wm,U6,F6,Em,Tl,As,B6,H6,V6,z6,Yo,$6,UO,Jwe=(UO=class{constructor(t){tn(this,we);tn(this,tu);tn(this,fr,[]);tn(this,Hn,{});tn(this,rn,0);tn(this,zs,1);tn(this,nu,0);tn(this,Vr,0);tn(this,ru,0);tn(this,ou,0);tn(this,iu,!1);Ot(this,tu,t)}get result(){return ue(this,Hn)}parse(){for(Ot(this,fr,T6(ue(this,tu),!0));ue(this,rn)<ue(this,fr).length;Ot(this,rn,ue(this,rn)+ue(this,zs))){if(Ot(this,zs,1),ue(this,fr)[ue(this,rn)].type==="END"){if(ue(this,Vr)===0){Me(this,we,K0).call(this),Me(this,we,As).call(this)?Me(this,we,Pn).call(this,9,1):Me(this,we,Tl).call(this)?Me(this,we,Pn).call(this,8,1):Me(this,we,Pn).call(this,7,0);continue}else if(ue(this,Vr)===2){Me(this,we,lf).call(this,5);continue}Me(this,we,Pn).call(this,10,0);break}if(ue(this,ru)>0)if(Me(this,we,H6).call(this))Ot(this,ru,ue(this,ru)-1);else continue;if(Me(this,we,B6).call(this)){Ot(this,ru,ue(this,ru)+1);continue}switch(ue(this,Vr)){case 0:Me(this,we,W0).call(this)&&Me(this,we,lf).call(this,1);break;case 1:if(Me(this,we,W0).call(this)){Me(this,we,$6).call(this);let t=7,e=1;Me(this,we,j6).call(this)?(t=2,e=3):ue(this,iu)&&(t=2),Me(this,we,Pn).call(this,t,e)}break;case 2:Me(this,we,wm).call(this)?Me(this,we,lf).call(this,3):(Me(this,we,Em).call(this)||Me(this,we,Tl).call(this)||Me(this,we,As).call(this))&&Me(this,we,lf).call(this,5);break;case 3:Me(this,we,U6).call(this)?Me(this,we,Pn).call(this,4,1):Me(this,we,wm).call(this)&&Me(this,we,Pn).call(this,5,1);break;case 4:Me(this,we,wm).call(this)&&Me(this,we,Pn).call(this,5,1);break;case 5:Me(this,we,V6).call(this)?Ot(this,ou,ue(this,ou)+1):Me(this,we,z6).call(this)&&Ot(this,ou,ue(this,ou)-1),Me(this,we,F6).call(this)&&!ue(this,ou)?Me(this,we,Pn).call(this,6,1):Me(this,we,Em).call(this)?Me(this,we,Pn).call(this,7,0):Me(this,we,Tl).call(this)?Me(this,we,Pn).call(this,8,1):Me(this,we,As).call(this)&&Me(this,we,Pn).call(this,9,1);break;case 6:Me(this,we,Em).call(this)?Me(this,we,Pn).call(this,7,0):Me(this,we,Tl).call(this)?Me(this,we,Pn).call(this,8,1):Me(this,we,As).call(this)&&Me(this,we,Pn).call(this,9,1);break;case 7:Me(this,we,Tl).call(this)?Me(this,we,Pn).call(this,8,1):Me(this,we,As).call(this)&&Me(this,we,Pn).call(this,9,1);break;case 8:Me(this,we,As).call(this)&&Me(this,we,Pn).call(this,9,1);break}}ue(this,Hn).hostname!==void 0&&ue(this,Hn).port===void 0&&(ue(this,Hn).port="")}},tu=new WeakMap,fr=new WeakMap,Hn=new WeakMap,rn=new WeakMap,zs=new WeakMap,nu=new WeakMap,Vr=new WeakMap,ru=new WeakMap,ou=new WeakMap,iu=new WeakMap,we=new WeakSet,Pn=function(t,e){var n,r,o;switch(ue(this,Vr)){case 0:break;case 1:ue(this,Hn).protocol=Me(this,we,Yo).call(this);break;case 2:break;case 3:ue(this,Hn).username=Me(this,we,Yo).call(this);break;case 4:ue(this,Hn).password=Me(this,we,Yo).call(this);break;case 5:ue(this,Hn).hostname=Me(this,we,Yo).call(this);break;case 6:ue(this,Hn).port=Me(this,we,Yo).call(this);break;case 7:ue(this,Hn).pathname=Me(this,we,Yo).call(this);break;case 8:ue(this,Hn).search=Me(this,we,Yo).call(this);break;case 9:ue(this,Hn).hash=Me(this,we,Yo).call(this);break}ue(this,Vr)!==0&&t!==10&&([1,2,3,4].includes(ue(this,Vr))&&[6,7,8,9].includes(t)&&((n=ue(this,Hn)).hostname??(n.hostname="")),[1,2,3,4,5,6].includes(ue(this,Vr))&&[8,9].includes(t)&&((r=ue(this,Hn)).pathname??(r.pathname=ue(this,iu)?"/":"")),[1,2,3,4,5,6,7].includes(ue(this,Vr))&&t===9&&((o=ue(this,Hn)).search??(o.search=""))),Me(this,we,D6).call(this,t,e)},D6=function(t,e){Ot(this,Vr,t),Ot(this,nu,ue(this,rn)+e),Ot(this,rn,ue(this,rn)+e),Ot(this,zs,0)},K0=function(){Ot(this,rn,ue(this,nu)),Ot(this,zs,0)},lf=function(t){Me(this,we,K0).call(this),Ot(this,Vr,t)},Sm=function(t){return t<0&&(t=ue(this,fr).length-t),t<ue(this,fr).length?ue(this,fr)[t]:ue(this,fr)[ue(this,fr).length-1]},lo=function(t,e){let n=Me(this,we,Sm).call(this,t);return n.value===e&&(n.type==="CHAR"||n.type==="ESCAPED_CHAR"||n.type==="INVALID_CHAR")},W0=function(){return Me(this,we,lo).call(this,ue(this,rn),":")},j6=function(){return Me(this,we,lo).call(this,ue(this,rn)+1,"/")&&Me(this,we,lo).call(this,ue(this,rn)+2,"/")},wm=function(){return Me(this,we,lo).call(this,ue(this,rn),"@")},U6=function(){return Me(this,we,lo).call(this,ue(this,rn),":")},F6=function(){return Me(this,we,lo).call(this,ue(this,rn),":")},Em=function(){return Me(this,we,lo).call(this,ue(this,rn),"/")},Tl=function(){if(Me(this,we,lo).call(this,ue(this,rn),"?"))return!0;if(ue(this,fr)[ue(this,rn)].value!=="?")return!1;let t=Me(this,we,Sm).call(this,ue(this,rn)-1);return t.type!=="NAME"&&t.type!=="REGEX"&&t.type!=="CLOSE"&&t.type!=="ASTERISK"},As=function(){return Me(this,we,lo).call(this,ue(this,rn),"#")},B6=function(){return ue(this,fr)[ue(this,rn)].type=="OPEN"},H6=function(){return ue(this,fr)[ue(this,rn)].type=="CLOSE"},V6=function(){return Me(this,we,lo).call(this,ue(this,rn),"[")},z6=function(){return Me(this,we,lo).call(this,ue(this,rn),"]")},Yo=function(){let t=ue(this,fr)[ue(this,rn)],e=Me(this,we,Sm).call(this,ue(this,nu)).index;return ue(this,tu).substring(e,t.index)},$6=function(){let t={};Object.assign(t,Ta),t.encodePart=LI;let e=Owe(Me(this,we,Yo).call(this),void 0,t);Ot(this,iu,P6(e))},UO),pC=["protocol","username","password","hostname","port","pathname","search","hash"],Sa="*";function PO(t,e){if(typeof t!="string")throw new TypeError("parameter 1 is not of type 'string'.");let n=new URL(t,e);return{protocol:n.protocol.substring(0,n.protocol.length-1),username:n.username,password:n.password,hostname:n.hostname,port:n.port,pathname:n.pathname,search:n.search!==""?n.search.substring(1,n.search.length):void 0,hash:n.hash!==""?n.hash.substring(1,n.hash.length):void 0}}function Ni(t,e){return e?uf(t):t}function Jd(t,e,n){let r;if(typeof e.baseURL=="string")try{r=new URL(e.baseURL),e.protocol===void 0&&(t.protocol=Ni(r.protocol.substring(0,r.protocol.length-1),n)),!n&&e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.username===void 0&&(t.username=Ni(r.username,n)),!n&&e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.username===void 0&&e.password===void 0&&(t.password=Ni(r.password,n)),e.protocol===void 0&&e.hostname===void 0&&(t.hostname=Ni(r.hostname,n)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&(t.port=Ni(r.port,n)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&(t.pathname=Ni(r.pathname,n)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&e.search===void 0&&(t.search=Ni(r.search.substring(1,r.search.length),n)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&e.search===void 0&&e.hash===void 0&&(t.hash=Ni(r.hash.substring(1,r.hash.length),n))}catch{throw new TypeError(`invalid baseURL '${e.baseURL}'.`)}if(typeof e.protocol=="string"&&(t.protocol=$we(e.protocol,n)),typeof e.username=="string"&&(t.username=Hwe(e.username,n)),typeof e.password=="string"&&(t.password=Bwe(e.password,n)),typeof e.hostname=="string"&&(t.hostname=Fwe(e.hostname,n)),typeof e.port=="string"&&(t.port=zwe(e.port,t.protocol,n)),typeof e.pathname=="string"){if(t.pathname=e.pathname,r&&!Lwe(t.pathname,n)){let o=r.pathname.lastIndexOf("/");o>=0&&(t.pathname=Ni(r.pathname.substring(0,o+1),n)+t.pathname)}t.pathname=Vwe(t.pathname,t.protocol,n)}return typeof e.search=="string"&&(t.search=Uwe(e.search,n)),typeof e.hash=="string"&&(t.hash=jwe(e.hash,n)),t}function uf(t){return t.replace(/([+*?:{}()\\])/g,"\\$1")}function Xwe(t){return t.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function Zwe(t,e){e.delimiter??(e.delimiter="/#?"),e.prefixes??(e.prefixes="./"),e.sensitive??(e.sensitive=!1),e.strict??(e.strict=!1),e.end??(e.end=!0),e.start??(e.start=!0),e.endsWith="";let n=".*",r=`[^${Xwe(e.delimiter)}]+?`,o=/[$_\u200C\u200D\p{ID_Continue}]/u,i="";for(let a=0;a<t.length;++a){let s=t[a];if(s.type===3){if(s.modifier===3){i+=uf(s.value);continue}i+=`{${uf(s.value)}}${Hl(s.modifier)}`;continue}let c=s.hasCustomName(),u=!!s.suffix.length||!!s.prefix.length&&(s.prefix.length!==1||!e.prefixes.includes(s.prefix)),d=a>0?t[a-1]:null,h=a<t.length-1?t[a+1]:null;if(!u&&c&&s.type===1&&s.modifier===3&&h&&!h.prefix.length&&!h.suffix.length)if(h.type===3){let p=h.value.length>0?h.value[0]:"";u=o.test(p)}else u=!h.hasCustomName();if(!u&&!s.prefix.length&&d&&d.type===3){let p=d.value[d.value.length-1];u=e.prefixes.includes(p)}u&&(i+="{"),i+=uf(s.prefix),c&&(i+=`:${s.name}`),s.type===2?i+=`(${s.value})`:s.type===1?c||(i+=`(${r})`):s.type===0&&(!c&&(!d||d.type===3||d.modifier!==3||u||s.prefix!=="")?i+="*":i+=`(${n})`),s.type===1&&c&&s.suffix.length&&o.test(s.suffix[0])&&(i+="\\"),i+=uf(s.suffix),u&&(i+="}"),s.modifier!==3&&(i+=Hl(s.modifier))}return i}var Zo,$s,au,Vn,No,su,FO,eEe=(FO=class{constructor(t={},e,n){tn(this,Zo);tn(this,$s,{});tn(this,au,{});tn(this,Vn,{});tn(this,No,{});tn(this,su,!1);try{let r;if(typeof e=="string"?r=e:n=e,typeof t=="string"){let s=new Jwe(t);if(s.parse(),t=s.result,r===void 0&&typeof t.protocol!="string")throw new TypeError("A base URL must be provided for a relative constructor string.");t.baseURL=r}else{if(!t||typeof t!="object")throw new TypeError("parameter 1 is not of type 'string' and cannot convert to dictionary.");if(r)throw new TypeError("parameter 1 is not of type 'string'.")}typeof n>"u"&&(n={ignoreCase:!1});let o={ignoreCase:n.ignoreCase===!0};Ot(this,Zo,Jd({pathname:Sa,protocol:Sa,username:Sa,password:Sa,hostname:Sa,port:Sa,search:Sa,hash:Sa},t,!0)),O6(ue(this,Zo).protocol)===ue(this,Zo).port&&(ue(this,Zo).port="");let a;for(a of pC){if(!(a in ue(this,Zo)))continue;let s={},c=ue(this,Zo)[a];switch(ue(this,au)[a]=[],a){case"protocol":Object.assign(s,Ta),s.encodePart=LI;break;case"username":Object.assign(s,Ta),s.encodePart=Gwe;break;case"password":Object.assign(s,Ta),s.encodePart=Kwe;break;case"hostname":Object.assign(s,Nwe),x6(c)?s.encodePart=M6:s.encodePart=N6;break;case"port":Object.assign(s,Ta),s.encodePart=L6;break;case"pathname":P6(ue(this,$s).protocol)?(Object.assign(s,Mwe,o),s.encodePart=Wwe):(Object.assign(s,Ta,o),s.encodePart=qwe);break;case"search":Object.assign(s,Ta,o),s.encodePart=Ywe;break;case"hash":Object.assign(s,Ta,o),s.encodePart=Qwe;break}try{ue(this,No)[a]=I6(c,s),ue(this,$s)[a]=A6(ue(this,No)[a],ue(this,au)[a],s),ue(this,Vn)[a]=Zwe(ue(this,No)[a],s),Ot(this,su,ue(this,su)||ue(this,No)[a].some(u=>u.type===2))}catch{throw new TypeError(`invalid ${a} pattern '${ue(this,Zo)[a]}'.`)}}}catch(r){throw new TypeError(`Failed to construct 'URLPattern': ${r.message}`)}}test(t={},e){let n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof t!="string"&&e)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof t>"u")return!1;try{typeof t=="object"?n=Jd(n,t,!1):n=Jd(n,PO(t,e),!1)}catch{return!1}let r;for(r of pC)if(!ue(this,$s)[r].exec(n[r]))return!1;return!0}exec(t={},e){let n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof t!="string"&&e)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof t>"u")return;try{typeof t=="object"?n=Jd(n,t,!1):n=Jd(n,PO(t,e),!1)}catch{return null}let r={};e?r.inputs=[t,e]:r.inputs=[t];let o;for(o of pC){let i=ue(this,$s)[o].exec(n[o]);if(!i)return null;let a={};for(let[s,c]of ue(this,au)[o].entries())if(typeof c=="string"||typeof c=="number"){let u=i[s+1];a[c]=u}r[o]={input:n[o]??"",groups:a}}return r}static compareComponent(t,e,n){let r=(s,c)=>{for(let u of["type","modifier","prefix","value","suffix"]){if(s[u]<c[u])return-1;if(s[u]!==c[u])return 1}return 0},o=new Pf(3,"","","","",3),i=new Pf(0,"","","","",3),a=(s,c)=>{let u=0;for(;u<Math.min(s.length,c.length);++u){let d=r(s[u],c[u]);if(d)return d}return s.length===c.length?0:r(s[u]??o,c[u]??o)};return!ue(e,Vn)[t]&&!ue(n,Vn)[t]?0:ue(e,Vn)[t]&&!ue(n,Vn)[t]?a(ue(e,No)[t],[i]):!ue(e,Vn)[t]&&ue(n,Vn)[t]?a([i],ue(n,No)[t]):a(ue(e,No)[t],ue(n,No)[t])}get protocol(){return ue(this,Vn).protocol}get username(){return ue(this,Vn).username}get password(){return ue(this,Vn).password}get hostname(){return ue(this,Vn).hostname}get port(){return ue(this,Vn).port}get pathname(){return ue(this,Vn).pathname}get search(){return ue(this,Vn).search}get hash(){return ue(this,Vn).hash}get hasRegExpGroups(){return ue(this,su)}},Zo=new WeakMap,$s=new WeakMap,au=new WeakMap,Vn=new WeakMap,No=new WeakMap,su=new WeakMap,FO);globalThis.URLPattern||(globalThis.URLPattern=eEe);let G6;function eke(t){G6=t}function tEe(){var t,e;typeof window<"u"&&(window.copilotTrustedTypesPolicy=(t=window.trustedTypes)==null?void 0:t.createPolicy("copilotPolicy",{createHTML:n=>xO.sanitize(n)}),(e=window.trustedTypes)==null||e.createPolicy("default",{createScriptURL:n=>{const r=/^\/cl\//,o=new URLPattern({protocol:"https",hostname:"*.cloudflare.com"}),i=new URLPattern({protocol:"https",hostname:"bat.bing.com"}),a=new URLPattern({protocol:"https",hostname:"az416426.vo.msecnd.net"}),s=new URLPattern({protocol:"https",hostname:"fpt.dfp.microsoft.com"}),c=new URLPattern({protocol:"https",hostname:"assets.msn.com"}),u=new URLPattern({protocol:"https",hostname:"content.lifecycle.office.net"});if(r.test(n)||o.test(n)||i.test(n)||a.test(n)||s.test(n)||c.test(n)||u.test(n)||n===G6)return n;throw new Error(`Unsafe script URL "${n}" blocked by CSP.`)},createHTML:n=>xO.sanitize(n)}))}tEe();c8.createRoot(document.getElementById("app")).render(f.jsx(Ic.StrictMode,{children:f.jsx(swe,{})}));const nEe=Object.freeze(Object.defineProperty({__proto__:null,Route:nCe},Symbol.toStringTag,{value:"Module"}));export{ts as $,Y as A,De as B,T4 as C,V0 as D,XN as E,Zn as F,eTe as G,tt as H,de as I,Fi as J,hn as K,kt as L,$m as M,nE as N,_U as O,fy as P,Fl as Q,Qn as R,cd as S,Mo as T,lTe as U,ie as V,yw as W,eI as X,Gg as Y,qt as Z,Om as _,dt as a,Zt as a$,sd as a0,_t as a1,ar as a2,uhe as a3,ky as a4,wi as a5,XTe as a6,m2 as a7,HM as a8,QT as a9,_le as aA,dw as aB,iIe as aC,gn as aD,Ac as aE,_r as aF,Bc as aG,mEe as aH,pEe as aI,ny as aJ,G4 as aK,Eo as aL,XIe as aM,fU as aN,ise as aO,O0 as aP,ld as aQ,H0 as aR,dP as aS,uP as aT,$p as aU,fpe as aV,hpe as aW,JIe as aX,ppe as aY,mpe as aZ,id as a_,mt as aa,LIe as ab,T as ac,qn as ad,bU as ae,la as af,MV as ag,Rv as ah,jn as ai,cE as aj,Xg as ak,yI as al,OB as am,Oh as an,whe as ao,Ehe as ap,dz as aq,xae as ar,Ak as as,by as at,Dw as au,NTe as av,qse as aw,Hse as ax,CCe as ay,PIe as az,Ku as b,Gs as b$,cv as b0,ow as b1,iw as b2,Xse as b3,Zse as b4,mR as b5,as as b6,bn as b7,ki as b8,Mpe as b9,_he as bA,IAe as bB,AU as bC,BT as bD,Bme as bE,Hme as bF,BEe as bG,Vo as bH,pw as bI,Pr as bJ,yEe as bK,Ru as bL,MEe as bM,Am as bN,ZN as bO,ipe as bP,Ei as bQ,PU as bR,WY as bS,on as bT,Ghe as bU,KT as bV,OTe as bW,r6 as bX,n6 as bY,kve as bZ,uy as b_,nN as ba,zh as bb,wU as bc,E4 as bd,w4 as be,zl as bf,Vs as bg,Ibe as bh,pu as bi,Pd as bj,wTe as bk,gt as bl,ja as bm,AEe as bn,kEe as bo,xEe as bp,$a as bq,Ja as br,I4 as bs,Ua as bt,Dae as bu,xt as bv,LEe as bw,DV as bx,DEe as by,PY as bz,Fe as c,fce as c$,EV as c0,AY as c1,xw as c2,Vme as c3,fI as c4,STe as c5,h2 as c6,Khe as c7,Gm as c8,xY as c9,Og as cA,Ra as cB,Ct as cC,z5 as cD,pc as cE,Qre as cF,Ga as cG,MS as cH,or as cI,WTe as cJ,NS as cK,ex as cL,AT as cM,ioe as cN,US as cO,Rre as cP,cae as cQ,gie as cR,mie as cS,Rp as cT,uie as cU,M3 as cV,Moe as cW,Noe as cX,Uoe as cY,os as cZ,So as c_,kY as ca,oP as cb,iP as cc,Tbe as cd,BTe as ce,dN as cf,Ame as cg,eAe as ch,QIe as ci,oAe as cj,rAe as ck,tAe as cl,iAe as cm,aAe as cn,Pu as co,vAe as cp,El as cq,Of as cr,lI as cs,d2 as ct,nhe as cu,T5 as cv,ij as cw,pie as cx,ire as cy,fs as cz,QTe as d,kr as d$,Sy as d0,_Ae as d1,ESe as d2,jCe as d3,yse as d4,XAe as d5,$4 as d6,uI as d7,yAe as d8,MM as d9,fj as dA,$h as dB,ah as dC,ca as dD,PI as dE,ph as dF,MI as dG,KSe as dH,ia as dI,Xye as dJ,Jye as dK,EAe as dL,ASe as dM,Zge as dN,Qge as dO,wAe as dP,Xge as dQ,Q4 as dR,jce as dS,Ime as dT,qae as dU,vse as dV,ZT as dW,zT as dX,kj as dY,hh as dZ,kbe as d_,Ii as da,hTe as db,KEe as dc,WEe as dd,GEe as de,BV as df,wz as dg,_Te as dh,sc as di,ZH as dj,vi as dk,aTe as dl,iTe as dm,sTe as dn,uTe as dp,pge as dq,Ty as dr,h0 as ds,bI as dt,XEe as du,QEe as dv,xj as dw,ybe as dx,iR as dy,n7 as dz,Or as e,fl as e$,lce as e0,bAe as e1,hV as e2,TEe as e3,IEe as e4,fV as e5,mO as e6,sSe as e7,VT as e8,dIe as e9,$T as eA,YT as eB,b2 as eC,S2 as eD,bhe as eE,FM as eF,zCe as eG,tTe as eH,mIe as eI,vIe as eJ,gIe as eK,Vse as eL,_pe as eM,uO as eN,qAe as eO,b7 as eP,Bu as eQ,Sv as eR,TM as eS,SI as eT,ZIe as eU,vv as eV,WIe as eW,Gp as eX,La as eY,Qg as eZ,hl as e_,lIe as ea,bIe as eb,yIe as ec,cIe as ed,es as ee,En as ef,_Ie as eg,pIe as eh,ot as ei,jN as ej,EI as ek,n4 as el,fue as em,Ey as en,yhe as eo,Zce as ep,GT as eq,rTe as er,Qbe as es,oU as et,Bo as eu,Tw as ev,DY as ew,OEe as ex,Lr as ey,TY as ez,q as f,hO as f$,CAe as f0,oTe as f1,AAe as f2,SAe as f3,hve as f4,vM as f5,yU as f6,fve as f7,Da as f8,JEe as f9,nR as fA,NEe as fB,eU as fC,nw as fD,rw as fE,vC as fF,Sw as fG,Lm as fH,xTe as fI,tm as fJ,S0 as fK,DCe as fL,uh as fM,mh as fN,no as fO,Za as fP,b9 as fQ,the as fR,YTe as fS,qTe as fT,Cv as fU,pTe as fV,Rh as fW,JCe as fX,KY as fY,lb as fZ,Ks as f_,Du as fa,VCe as fb,Yn as fc,WB as fd,KB as fe,FA as ff,bv as fg,kH as fh,CEe as fi,_Ee as fj,iv as fk,p9 as fl,nAe as fm,sv as fn,K4 as fo,my as fp,Xr as fq,Ew as fr,CI as fs,RTe as ft,YY as fu,m6 as fv,p6 as fw,UM as fx,FSe as fy,BSe as fz,hEe as g,jk as g$,_m as g0,jw as g1,xO as g2,e7 as g3,wv as g4,hf as g5,Oye as g6,cy as g7,BIe as g8,LT as g9,Ji as gA,ei as gB,Oe as gC,lv as gD,oc as gE,sn as gF,pr as gG,mr as gH,dv as gI,vo as gJ,hw as gK,Qi as gL,lw as gM,rc as gN,Qr as gO,YEe as gP,ZEe as gQ,EM as gR,h6 as gS,$z as gT,Hf as gU,xve as gV,Hu as gW,Vf as gX,Gt as gY,zTe as gZ,$Te as g_,tpe as ga,lP as gb,k4 as gc,Lhe as gd,kae as ge,qT as gf,FU as gg,UEe as gh,FEe as gi,fo as gj,Whe as gk,T0 as gl,qIe as gm,w0 as gn,J_ as go,REe as gp,ATe as gq,kTe as gr,TTe as gs,ITe as gt,Tye as gu,MAe as gv,ETe as gw,PN as gx,fw as gy,ho as gz,bEe as h,EEe as h$,GTe as h0,KTe as h1,ir as h2,AIe as h3,kIe as h4,Nce as h5,Mce as h6,f0 as h7,eke as h8,HT as h9,PTe as hA,HP as hB,kAe as hC,tU as hD,FIe as hE,u2 as hF,Jve as hG,Xj as hH,Ppe as hI,Yge as hJ,mle as hK,RIe as hL,Jce as hM,Jfe as hN,xIe as hO,e6 as hP,WAe as hQ,Si as hR,Z4 as hS,X4 as hT,c$ as hU,qEe as hV,DP as hW,t7 as hX,jV as hY,dge as hZ,wEe as h_,wSe as ha,aSe as hb,v6 as hc,zAe as hd,VAe as he,_se as hf,bse as hg,c_e as hh,UAe as hi,FAe as hj,BAe as hk,eO as hl,HAe as hm,gL as hn,Up as ho,CTe as hp,jM as hq,TCe as hr,fTe as hs,oIe as ht,kw as hu,TAe as hv,DB as hw,pV as hx,Kj as hy,is as hz,gi as i,cTe as i$,Bf as i0,lge as i1,xV as i2,mTe as i3,I0 as i4,epe as i5,Kg as i6,O4 as i7,YIe as i8,Nw as i9,r_e as iA,wM as iB,tye as iC,lEe as iD,vEe as iE,Kme as iF,fAe as iG,kM as iH,oE as iI,vTe as iJ,f2 as iK,UY as iL,FY as iM,jY as iN,MIe as iO,HEe as iP,VEe as iQ,zEe as iR,dTe as iS,xv as iT,bTe as iU,mAe as iV,pAe as iW,Jg as iX,N0 as iY,vI as iZ,hAe as i_,YP as ia,LAe as ib,RY as ic,Iw as id,IV as ie,kV as ig,uEe as ih,fEe as ii,dEe as ij,BY as ik,$Ee as il,OY as im,MY as io,gTe as ip,gEe as iq,Ph as ir,rpe as is,IM as it,TV as iu,NY as iv,R0 as iw,kP as ix,hse as iy,iE as iz,Nu as j,GIe as j$,yTe as j0,hge as j1,Wae as j2,Ow as j3,bSe as j4,hy as j5,tve as j6,JTe as j7,RB as j8,nIe as j9,hIe as jA,fIe as jB,dy as jC,nTe as jD,UW as jE,Iee as jF,HTe as jG,VTe as jH,qg as jI,aEe as jJ,sEe as jK,cEe as jL,ZTe as jM,eIe as jN,tIe as jO,rIe as jP,CIe as jQ,SIe as jR,wIe as jS,EIe as jT,TIe as jU,IIe as jV,o4 as jW,HIe as jX,VIe as jY,zIe as jZ,$Ie as j_,SEe as ja,jEe as jb,Wu as jc,Nf as jd,CU as je,iEe as jf,dAe as jg,uIe as jh,f9 as ji,nye as jj,aIe as jk,Wge as jl,$le as jm,zle as jn,sa as jo,vy as jp,PEe as jq,yle as jr,y6 as js,Ble as jt,dye as ju,TI as jv,sIe as jw,OIe as jx,NIe as jy,ble as jz,Sc as k,KIe as k0,sAe as k1,cAe as k2,lAe as k3,uAe as k4,gAe as k5,xAe as k6,RAe as k7,PAe as k8,OAe as k9,NAe as ka,DAe as kb,jAe as kc,GAe as kd,KAe as ke,YAe as kf,QAe as kg,JAe as kh,ZAe as ki,bo as l,HB as m,Rt as n,nc as o,W4 as p,Fc as q,Un as r,yo as s,cc as t,to as u,Oa as v,xM as w,Vg as x,Ale as y,Ee as z};
